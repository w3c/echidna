<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="application-name" content="Echidna">
    <meta name="description" content="W3C's orchestrator for the new publication workflow">
    <meta name="keywords" content="w3c,publication,workflow">
    <meta name="author" content="W3C">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Echidna</title>
    <link rel="stylesheet" href="styles/bootstrap.min.css">
    <link rel="stylesheet" href="styles/style.css">
  </head>

  <body>
    <nav class="navbar navbar-default" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand" href="http://www.w3.org/">
                    <img src="images/w3c_home_nb-v.svg" alt="W3C">
                </a>
            </div>

            <p class="navbar-text">Echidna<sup>early</sup> &ndash; The automated publication system at W3C</p>
        </div>
    </nav>

    <div class="container">

      <section>
        <p class="info">This invokes the method <a href="api/version"><code>api/version</code></a>.</p>

        <h2>Basic info</h2>

        <button id="infoButton" type="submit" class="btn btn-default">Retrieve</button>

        <pre id="infoText"></pre>
      </section>

      <hr>

      <section>
        <p class="info">This invokes the method <code>api/request</code> (<code>POST</code>) with params <code>{url, decision, token}</code>.</p>

        <h2>New publication request</h2>

        <form role="form" id="submitForm" method="POST" action="api/request" class="form-horizontal">

          <div class="form-group">
            <label for="url" class="col-sm-2 control-label">Document URL</label>
            <div class="col-sm-8">
              <input type="url" class="form-control" id="url" required autofocus
                placeholder="http://example.com/ OR http://jay.w3.org/~plehegar/navigation-timing/W3CTRMANIFEST">
            </div>
            <div class="col-sm-2">
              <div class="checkbox">
                <label>
                  <input type="checkbox" id="isManifest"> This is a manifest
                </label>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="decision" class="col-sm-2 control-label">WG decision URL</label>
            <div class="col-sm-5">
              <input type="url" class="form-control" id="decision" required
                placeholder="https://example.com/foo/messages/29372">
            </div>
            <label for="token" class="col-sm-1 control-label">Token</label>
            <div class="col-sm-4">
              <input type="text" class="form-control" id="token" placeholder="12345678" required>
            </div>
          </div>

          <button id="submitButton" type="submit" class="btn btn-primary">Request publication</button>

        </form>
      </section>

      <hr>

      <section>
        <p class="info">This invokes the method <a href="api/status"><code>api/status</code></a> and splits results in two groups.</p>

        <h2>Publication requests</h2>

        <input id="auto" type="checkbox" checked="checked" />

        <label for="auto">Refresh automatically every 2 s</label>
        <br>
        <p id="lastUpdate">Last updated: <span></span></p>

        <button id="queueButton" type="submit" class="btn btn-default" disabled>Refresh now</button>

        <h3>Requests</h3>
        <pre id="queueText"></pre>
      </section>

    </div>

    <script src="scripts/jquery-2.1.3.min.js"></script>
    <script src="scripts/behaviour.js"></script>
  </body>
</html>
