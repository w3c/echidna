<!DOCTYPE html>
<!-- saved from url=(0130)https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing -->
<html lang="en" typeof="bibo:Document w3p:WD" prefix="bibo: http://purl.org/ontology/bibo/ w3p: http://www.w3.org/2001/02pd/rec54#"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta lang="" property="dc:language" content="en">
  <meta charset="utf-8">
  <title>Resource Timing</title>
  
  
<style>/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

/* --- INLINES --- */
em.rfc2119 { 
    text-transform:     lowercase;
    font-variant:       small-caps;
    font-style:         normal;
    color:              #900;
}

h1 acronym, h2 acronym, h3 acronym, h4 acronym, h5 acronym, h6 acronym, a acronym,
h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr {
    border: none;
}

dfn {
    font-weight:    bold;
}

a.internalDFN {
    color:  inherit;
    border-bottom:  1px solid #99c;
    text-decoration:    none;
}

a.externalDFN {
    color:  inherit;
    border-bottom:  1px dotted #ccc;
    text-decoration:    none;
}

a.bibref {
    text-decoration:    none;
}

cite .bibref {
    font-style: normal;
}

code {
    color:  #C83500;
}

/* --- TOC --- */
.toc a, .tof a {
    text-decoration:    none;
}

a .secno, a .figno {
    color:  #000;
}

ul.tof, ol.tof {
    list-style: none outside none;
}

.caption {
    margin-top: 0.5em;
    font-style:   italic;
}

/* --- TABLE --- */
table.simple {
    border-spacing: 0;
    border-collapse:    collapse;
    border-bottom:  3px solid #005a9c;
}

.simple th {
    background: #005a9c;
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
}

.simple th[scope="row"] {
    background: inherit;
    color:  inherit;
    border-top: 1px solid #ddd;
}

.simple td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
    background: #f0f6ff;
}

/* --- DL --- */
.section dd > p:first-child {
    margin-top: 0;
}

.section dd > p:last-child {
    margin-bottom: 0;
}

.section dd {
    margin-bottom:  1em;
}

.section dl.attrs dd, .section dl.eldef dd {
    margin-bottom:  0;
}

@media print {
    .removeOnSave {
        display: none;
    }
}
</style><style>/* --- EXAMPLES --- */
div.example-title {
    min-width: 7.5em;
    color: #b9ab2d;
}
div.example-title span {
    text-transform: uppercase;   
}
aside.example, div.example, div.illegal-example {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
div.illegal-example { color: red }
div.illegal-example p { color: black }
aside.example, div.example {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    border-color: #e0cb52;
    background: #fcfaee;    
}

aside.example div.example {
    border-left-width: .1em;
    border-color: #999;
    background: #fff;
}
aside.example div.example div.example-title {
    color: #999;
}
</style><style>/* --- ISSUES/NOTES --- */
div.issue-title, div.note-title , div.warning-title {
    padding-right:  1em;
    min-width: 7.5em;
    color: #b9ab2d;
}
div.issue-title { color: #e05252; }
div.note-title { color: #2b2; }
div.warning-title { color: #f22; }
div.issue-title span, div.note-title span, div.warning-title span {
    text-transform: uppercase;
}
div.note, div.issue, div.warning {
    margin-top: 1em;
    margin-bottom: 1em;
}
.note > p:first-child, .issue > p:first-child, .warning > p:first-child { margin-top: 0 }
.issue, .note, .warning {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
}
div.issue, div.note , div.warning {
    padding: 1em 1.2em 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
span.note, span.issue, span.warning { padding: .1em .5em .15em; }

.issue {
    border-color: #e05252;
    background: #fbe9e9;
}
.note {
    border-color: #52e052;
    background: #e9fbe9;
}

.warning {
    border-color: #f11;
    border-right-width: .2em;
    border-top-width: .2em;
    border-bottom-width: .2em;
    border-style: solid;
    background: #fbe9e9;
}

.warning-title:before{
    content: "⚠"; /*U+26A0 WARNING SIGN*/
    font-size: 3em;
    float: left;
    height: 100%;
    padding-right: .3em;
    vertical-align: top;
    margin-top: -0.5em;
}
</style><style>/* HIGHLIGHTS */
code.prettyprint {
    color:  inherit;
}

/* this from google-code-prettify */
.pln{color:#000}@media screen{.str{color:#080}.kwd{color:#008}.com{color:#800}.typ{color:#606}.lit{color:#066}.pun,.opn,.clo{color:#660}.tag{color:#008}.atn{color:#606}.atv{color:#080}.dec,.var{color:#606}.fun{color:red}}@media print,projection{.str{color:#060}.kwd{color:#006;font-weight:bold}.com{color:#600;font-style:italic}.typ{color:#404;font-weight:bold}.lit{color:#044}.pun,.opn,.clo{color:#440}.tag{color:#006;font-weight:bold}.atn{color:#404}.atv{color:#060}}ol.linenums{margin-top:0;margin-bottom:0}li.L0,li.L1,li.L2,li.L3,li.L5,li.L6,li.L7,li.L8{list-style-type:none}li.L1,li.L3,li.L5,li.L7,li.L9{background:#eee}
</style><style>/* --- WEB IDL --- */
pre.idl {
    border-top: 1px solid #90b8de;
    border-bottom: 1px solid #90b8de;
    padding:    1em;
    line-height:    120%;
}

pre.idl::before {
    content:    "WebIDL";
    display:    block;
    width:      150px;
    background: #90b8de;
    color:  #fff;
    font-family:    initial;
    padding:    3px;
    font-weight:    bold;
    margin: -1em 0 1em -1em;
}

.idlType {
    color:  #ff4500;
    font-weight:    bold;
    text-decoration:    none;
}

/*.idlModule*/
/*.idlModuleID*/
/*.idlInterface*/
.idlInterfaceID, .idlDictionaryID, .idlCallbackID, .idlEnumID {
    font-weight:    bold;
    color:  #005a9c;
}
a.idlEnumItem {
    color:  #000;
    border-bottom:  1px dotted #ccc;
    text-decoration: none;
}

.idlSuperclass {
    font-style: italic;
    color:  #005a9c;
}

/*.idlAttribute*/
.idlAttrType, .idlFieldType, .idlMemberType {
    color:  #005a9c;
}
.idlAttrName, .idlFieldName, .idlMemberName {
    color:  #ff4500;
}
.idlAttrName a, .idlFieldName a, .idlMemberName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlMethod*/
.idlMethType, .idlCallbackType {
    color:  #005a9c;
}
.idlMethName {
    color:  #ff4500;
}
.idlMethName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlCtor*/
.idlCtorName {
    color:  #ff4500;
}
.idlCtorName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlParam*/
.idlParamType {
    color:  #005a9c;
}
.idlParamName, .idlDefaultValue {
    font-style: italic;
}

.extAttr {
    color:  #666;
}

/*.idlSectionComment*/
.idlSectionComment {
    color: gray;
}

/*.idlConst*/
.idlConstType {
    color:  #005a9c;
}
.idlConstName {
    color:  #ff4500;
}
.idlConstName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlException*/
.idlExceptionID {
    font-weight:    bold;
    color:  #c00;
}

.idlTypedefID, .idlTypedefType {
    color:  #005a9c;
}

.idlRaises, .idlRaises a.idlType, .idlRaises a.idlType code, .excName a, .excName a code {
    color:  #c00;
    font-weight:    normal;
}

.excName a {
    font-family:    monospace;
}

.idlRaises a.idlType, .excName a.idlType {
    border-bottom:  1px dotted #c00;
}

.excGetSetTrue, .excGetSetFalse, .prmNullTrue, .prmNullFalse, .prmOptTrue, .prmOptFalse {
    width:  45px;
    text-align: center;
}
.excGetSetTrue, .prmNullTrue, .prmOptTrue { color:  #0c0; }
.excGetSetFalse, .prmNullFalse, .prmOptFalse { color:  #c00; }

.idlImplements a {
    font-weight:    bold;
}

dl.attributes, dl.methods, dl.constants, dl.constructors, dl.fields, dl.dictionary-members {
    margin-left:    2em;
}

.attributes dt, .methods dt, .constants dt, .constructors dt, .fields dt, .dictionary-members dt {
    font-weight:    normal;
}

.attributes dt code, .methods dt code, .constants dt code, .constructors dt code, .fields dt code, .dictionary-members dt code {
    font-weight:    bold;
    color:  #000;
    font-family:    monospace;
}

.attributes dt code, .fields dt code, .dictionary-members dt code {
    background:  #ffffd2;
}

.attributes dt .idlAttrType code, .fields dt .idlFieldType code, .dictionary-members dt .idlMemberType code {
    color:  #005a9c;
    background:  transparent;
    font-family:    inherit;
    font-weight:    normal;
    font-style: italic;
}

.methods dt code {
    background:  #d9e6f8;
}

.constants dt code {
    background:  #ddffd2;
}

.constructors dt code {
    background:  #cfc;
}

.attributes dd, .methods dd, .constants dd, .constructors dd, .fields dd, .dictionary-members dd {
    margin-bottom:  1em;
}

table.parameters, table.exceptions {
    border-spacing: 0;
    border-collapse:    collapse;
    margin: 0.5em 0;
    width:  100%;
}
table.parameters { border-bottom:  1px solid #90b8de; }
table.exceptions { border-bottom:  1px solid #deb890; }

.parameters th, .exceptions th {
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
    font-family:    initial;
    font-weight:    normal;
    text-shadow:    #666 1px 1px 0;
}
.parameters th { background: #90b8de; }
.exceptions th { background: #deb890; }

.parameters td, .exceptions td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
    vertical-align: top;
}

.parameters tr:first-child td, .exceptions tr:first-child td {
    border-top: none;
}

.parameters td.prmName, .exceptions td.excName, .exceptions td.excCodeName {
    width:  100px;
}

.parameters td.prmType {
    width:  120px;
}

table.exceptions table {
    border-spacing: 0;
    border-collapse:    collapse;
    width:  100%;
}
</style><link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/W3C-WD"><!--[if lt IE 9]><script src='https://www.w3.org/2008/site/js/html5shiv.js'></script><![endif]--><meta name="d41d8cd98f00b204e9800998ecf8427e_lib_detect" id="d41d8cd98f00b204e9800998ecf8427e_lib_detect"><script type="text/javascript" src="chrome-extension://cgaocdmhkmfnkdkbnckgmpopcbpaaejo/library/libraries.js"></script><script type="text/javascript" src="chrome-extension://cgaocdmhkmfnkdkbnckgmpopcbpaaejo/content_scripts/lib_detect.js"></script></head>

<body style="" class="h-entry" role="document" id="respecDocument"><div class="head" role="contentinfo" id="respecHeader">
  <p>
      
        
            <a href="http://www.w3.org/"><img width="72" height="48" src="//www.w3.org/Icons/w3c_home" alt="W3C"></a>
        
      
  </p>
  <h1 class="title p-name" id="title" property="dcterms:title">Resource Timing</h1>
  
  <h2 id="w3c-working-draft-05-february-2015"><abbr title="World Wide Web Consortium">W3C</abbr> Working Draft <time property="dcterms:issued" class="dt-published" datetime="2015-02-05">05 February 2015</time></h2>
  <dl>
    
      <dt>This version:</dt>
      <dd><a class="u-url" href="http://www.w3.org/TR/2015/WD-resource-timing-20150205/">http://www.w3.org/TR/2015/WD-resource-timing-20150205/</a></dd>
      <dt>Latest published version:</dt>
      <dd><a href="http://www.w3.org/TR/resource-timing/">http://www.w3.org/TR/resource-timing/</a></dd>
    
    
      <dt>Latest editor's draft:</dt>
      <dd><a href="https://w3c.github.io/resource-timing/">https://w3c.github.io/resource-timing/</a></dd>
    
    
    
    
    
    
      <dt>Previous version:</dt>
      <dd><a rel="dcterms:replaces" href="http://www.w3.org/TR/2014/WD-resource-timing-20141216/">http://www.w3.org/TR/2014/WD-resource-timing-20141216/</a></dd>
    
    
    <dt>Editors:</dt>
    <dd class="p-author h-card vcard" property="bibo:editor" resource="_:editor0" data-editor-id="45188"><span property="rdf:first" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Arvind Jain</span>, Google Inc., <span class="ed_mailto"><a class="u-email email" property="foaf:mbox" href="mailto:arvind@google.com">arvind@google.com</a></span></span>
<span property="rdf:rest" resource="_:editor1"></span>
</dd>
<dd class="p-author h-card vcard" resource="_:editor1" data-editor-id="44357"><span property="rdf:first" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Jatinder Mann</span>, Microsoft Corp., <span class="ed_mailto"><a class="u-email email" property="foaf:mbox" href="mailto:jmann@microsoft.com">jmann@microsoft.com</a></span> (Until February 2014)</span>
<span property="rdf:rest" resource="_:editor2"></span>
</dd>
<dd class="p-author h-card vcard" resource="_:editor2" data-editor-id="43685"><span property="rdf:first" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Zhiheng Wang</span>, Google Inc. (Until July 2012)</span>
<span property="rdf:rest" resource="_:editor3"></span>
</dd>
<dd class="p-author h-card vcard" resource="_:editor3" data-editor-id="45288"><span property="rdf:first" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Anderson Quach</span>, Microsoft Corp. (Until March 2011)</span>
<span property="rdf:rest" resource="rdf:nil"></span>
</dd>

    
    
      
        
          <dt>Repository:</dt>
          
             
                
                  <dd>
                    <a href="https://github.com/w3c/resource-timing/">
                      We are on Github.
                    </a>
                  </dd>
                
             
                
                  <dd>
                    <a href="https://github.com/w3c/resource-timing/issues">
                      File a bug.
                    </a>
                  </dd>
                
             
                
                  <dd>
                    <a href="https://github.com/w3c/resource-timing/commits/gh-pages/index.html">
                      Commit history.
                    </a>
                  </dd>
                
             
                
                  <dd>
                    <a href="https://github.com/w3c/web-platform-tests/tree/master/resource-timing">
                      Tests.
                    </a>
                  </dd>
                
             
          
        
      
    
  </dl>
  
  
  
  
    
      <p class="copyright">
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> ©
        2015
        
        <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup>
        (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
        <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
        <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>), 
        
        All Rights Reserved.
        
        <abbr title="World Wide Web Consortium">W3C</abbr> <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
        
          <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a>
        
        rules apply.
      </p>
    
  
  <hr>
</div>
<section id="abstract" class="introductory" property="dc:abstract"><h2 id="h-abstract" resource="#h-abstract"><span property="xhv:role" resource="xhv:heading">Abstract</span></h2>

<p>This specification defines an interface for web applications to access
the complete timing information for resources in a document.</p>
</section><section id="sotd" class="introductory"><h2 id="h-sotd" resource="#h-sotd"><span property="xhv:role" resource="xhv:heading">Status of This Document</span></h2>
  
    
      
        <p>
          <em>This section describes the status of this document at the time of its publication.
          Other documents may supersede this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the
          latest revision of this technical report can be found in the <a href="http://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at
          http://www.w3.org/TR/.</em>
        </p>
        
        

<p>This is a <strong>work in progress</strong> and may change without any
notices. </p>

<p>Please send comments
   to <a href="mailto:public-web-perf@w3.org?subject=%5BResourceTiming%5D%20">public-web-perf@w3.org</a>
   (<a href="http://lists.w3.org/Archives/Public/public-web-perf/">archived</a>)
   with <samp>[ResourceTiming]</samp> at the start of the subject line.</p>

<p id="unstable"><strong class="redNote">Implementers <em class="rfc2119" title="SHOULD">SHOULD</em> be aware that this document is not
        stable.</strong> Implementers who are not taking part in the discussions
        are likely to find the specification changing out from under them in
        incompatible ways. Vendors interested in implementing this document
        before it eventually reaches the Candidate Recommendation stage <em class="rfc2119" title="SHOULD">SHOULD</em>
        join the aforementioned mailing lists and take part in the discussions.</p>

        
        <p>
          This document was published by the <a href="http://www.w3.org/2010/webperf/">Web Performance Working Group</a> as a Working Draft.
          
            This document is intended to become a <abbr title="World Wide Web Consortium">W3C</abbr> Recommendation.
          
          
            If you wish to make comments regarding this document, please send them to 
            <a href="mailto:public-web-perf@w3.org">public-web-perf@w3.org</a> 
            (<a href="mailto:public-web-perf-request@w3.org?subject=subscribe">subscribe</a>,
            <a href="http://lists.w3.org/Archives/Public/public-web-perf/">archives</a>).
          
          
          
          
          
            
            All comments are welcome.
            
          
        </p>
        
        
        
          <p>
            Publication as a Working Draft does not imply endorsement by the <abbr title="World Wide Web Consortium">W3C</abbr>
            Membership. This is a draft document and may be updated, replaced or obsoleted by other
            documents at any time. It is inappropriate to cite this document as other than work in
            progress.
          </p>
        
        
        
        <p>
          
            This document was produced by a group operating under the 
            <a id="sotd_patent" property="w3p:patentRules" href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 <abbr title="World Wide Web Consortium">W3C</abbr> Patent
            Policy</a>.
          
          
          
            
              <abbr title="World Wide Web Consortium">W3C</abbr> maintains a <a href="http://www.w3.org/2004/01/pp-impl/45211/status" rel="disclosure">public list of any patent
              disclosures</a> 
            
            made in connection with the deliverables of the group; that page also includes
            instructions for disclosing a patent. An individual who has actual knowledge of a patent
            which the individual believes contains
            <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
            Claim(s)</a> must disclose the information in accordance with
            <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
            6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
          
          
        </p>
        
          <p>This document is governed by the <a id="w3c_process_revision" href="http://www.w3.org/2014/Process-20140801/">1 August 2014 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
          </p>
        
        
      
    
  
</section><section id="toc"><h2 class="introductory" id="h-toc" resource="#h-toc"><span property="xhv:role" resource="xhv:heading">Table of Contents</span></h2><ul class="toc" role="directory" id="respecContents"><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#introduction" class="tocxref"><span class="secno">1. </span>Introduction</a></li><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#conformance" class="tocxref"><span class="secno">2. </span>Conformance</a></li><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#terminology" class="tocxref"><span class="secno">3. </span>Terminology</a></li><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#resource-timing" class="tocxref"><span class="secno">4. </span>Resource Timing</a><ul class="toc"><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#introduction-1" class="tocxref"><span class="secno">4.1 </span>Introduction</a></li><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#resources-included" class="tocxref"><span class="secno">4.2 </span>Resources Included in the <code><span class="formerLink">PerformanceResourceTiming</span></code> Interface</a></li><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming" class="tocxref"><span class="secno">4.3 </span>The <code>PerformanceResourceTiming</code> Interface</a><ul class="toc"><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#attributes" class="tocxref"><span class="secno">4.3.1 </span>Attributes</a></li><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#serializer" class="tocxref"><span class="secno">4.3.2 </span>Serializer</a></li></ul></li><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#extensions-performance-interface" class="tocxref"><span class="secno">4.4 </span>Extensions to the <code>Performance</code> Interface</a><ul class="toc"><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#attributes-1" class="tocxref"><span class="secno">4.4.1 </span>Attributes</a></li><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#methods" class="tocxref"><span class="secno">4.4.2 </span>Methods</a></li></ul></li><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#cross-origin-resources" class="tocxref"><span class="secno">4.5 </span>Cross-origin Resources</a><ul class="toc"><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#timing-allow-origin" class="tocxref"><span class="secno">4.5.1 </span><code>Timing-Allow-Origin</code> Response Header</a></li></ul></li><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#vendor-prefixes" class="tocxref"><span class="secno">4.6 </span>Vendor Prefixes</a></li></ul></li><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#process" class="tocxref"><span class="secno">5. </span>Process</a><ul class="toc"><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#processing-model" class="tocxref"><span class="secno">5.1 </span>Processing Model</a></li><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#monotonic-clock" class="tocxref"><span class="secno">5.2 </span>Monotonic Clock</a></li></ul></li><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#privacy-security" class="tocxref"><span class="secno">6. </span>Privacy and Security</a></li><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#acknowledgments" class="tocxref"><span class="secno">A. </span>Acknowledgments</a></li><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#references" class="tocxref"><span class="secno">B. </span>References</a><ul class="toc"><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#normative-references" class="tocxref"><span class="secno">B.1 </span>Normative references</a></li><li class="tocline"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#informative-references" class="tocxref"><span class="secno">B.2 </span>Informative references</a></li></ul></li></ul></section>


<section id="introduction" class="informative" typeof="bibo:Chapter" resource="#introduction" property="bibo:hasPart">
<!--OddPage--><h2 id="h-introduction" resource="#h-introduction"><span property="xhv:role" resource="xhv:heading"><span class="secno">1. </span>Introduction</span></h2><p><em>This section is non-normative.</em></p>
<p>
User latency is an important quality benchmark for Web Applications. While
JavaScript-based mechanisms can provide comprehensive instrumentation for
user latency measurements within an application, in many cases, they are
unable to provide a complete end-to-end latency picture. While Navigation Timing 2 [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-navigation-timing-2">navigation-timing-2</a></cite>] addresses
part of the problem by providing timing information associated with a
navigation, this document introduces the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#resource-timing">ResourceTiming</a>
interface to allow JavaScript mechanisms to collect complete timing
information related to resources on a document.
</p>


<p>For example, the following JavaScript shows a simple attempt to
measure the time it takes to fetch a resource:</p>

<div class="example"><div class="example-title"><span>Example 1</span></div><pre class="example highlight prettyprint prettyprinted" style=""><span class="dec">&lt;!doctype html&gt;</span><span class="pln">
</span><span class="tag">&lt;html&gt;</span><span class="pln">
  </span><span class="tag">&lt;head&gt;</span><span class="pln">
  </span><span class="tag">&lt;/head&gt;</span><span class="pln">
  </span><span class="tag">&lt;body</span><span class="pln"> </span><span class="atn">onload</span><span class="pun">=</span><span class="atv">"</span><span class="pln">loadResources</span><span class="pun">()</span><span class="atv">"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;script&gt;</span><span class="pln">
        </span><span class="kwd">function</span><span class="pln"> loadResources</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">{</span><span class="pln">
           </span><span class="kwd">var</span><span class="pln"> start </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">().</span><span class="pln">getTime</span><span class="pun">();</span><span class="pln">
           </span><span class="kwd">var</span><span class="pln"> image1 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Image</span><span class="pun">();</span><span class="pln">
           </span><span class="kwd">var</span><span class="pln"> resourceTiming </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
               </span><span class="kwd">var</span><span class="pln"> now </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">().</span><span class="pln">getTime</span><span class="pun">();</span><span class="pln">
               </span><span class="kwd">var</span><span class="pln"> latency </span><span class="pun">=</span><span class="pln"> now </span><span class="pun">-</span><span class="pln"> start</span><span class="pun">;</span><span class="pln">
               alert</span><span class="pun">(</span><span class="str">"End to end resource fetch: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> latency</span><span class="pun">);</span><span class="pln">
           </span><span class="pun">};</span><span class="pln">

           image1</span><span class="pun">.</span><span class="pln">onload </span><span class="pun">=</span><span class="pln"> resourceTiming</span><span class="pun">;</span><span class="pln">
           image1</span><span class="pun">.</span><span class="pln">src </span><span class="pun">=</span><span class="pln"> </span><span class="str">'http://www.w3.org/Icons/w3c_main.png'</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="tag">&lt;/script&gt;</span><span class="pln">
    </span><span class="tag">&lt;img</span><span class="pln"> </span><span class="atn">src</span><span class="pun">=</span><span class="atv">"http://www.w3.org/Icons/w3c_home.png"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;/body&gt;</span><span class="pln">
</span><span class="tag">&lt;/html&gt;</span></pre></div>

<p>Though this script can measure the time it takes to fetch a resource,
it cannot break down the time spent in various phases. Further, the script
cannot easily measure the time it takes to fetch resources described in markup.</p>

<p>To address the need for complete information on user experience, this document
introduces the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> interface.
This interface allows JavaScript mechanisms to provide complete client-side latency measurements within applications.
With this interface, the previous example can be modified to measure a user's
perceived load time of a resource.
</p>

<p>The following script calculates the amount of time it takes to fetch every resource in the
page, even those defined in markup. This example assumes
that this page is hosted on http://www.w3.org.
One could further measure the amount of time it takes in every phase of fetching a resource
with the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> interface.
</p>
<div class="example"><div class="example-title"><span>Example 2</span></div><pre class="example highlight prettyprint prettyprinted" style=""><span class="dec">&lt;!doctype html&gt;</span><span class="pln">
</span><span class="tag">&lt;html&gt;</span><span class="pln">
  </span><span class="tag">&lt;head&gt;</span><span class="pln">
  </span><span class="tag">&lt;/head&gt;</span><span class="pln">
  </span><span class="tag">&lt;body</span><span class="pln"> </span><span class="atn">onload</span><span class="pun">=</span><span class="atv">"</span><span class="pln">loadResources</span><span class="pun">()</span><span class="atv">"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;script&gt;</span><span class="pln">
       </span><span class="kwd">function</span><span class="pln"> loadResources</span><span class="pun">()</span><span class="pln">
       </span><span class="pun">{</span><span class="pln">
          </span><span class="kwd">var</span><span class="pln"> image1 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Image</span><span class="pun">();</span><span class="pln">
          image1</span><span class="pun">.</span><span class="pln">onload </span><span class="pun">=</span><span class="pln"> resourceTiming</span><span class="pun">;</span><span class="pln">
          image1</span><span class="pun">.</span><span class="pln">src </span><span class="pun">=</span><span class="pln"> </span><span class="str">'http://www.w3.org/Icons/w3c_main.png'</span><span class="pun">;</span><span class="pln">
       </span><span class="pun">}</span><span class="pln">

       </span><span class="kwd">function</span><span class="pln"> resourceTiming</span><span class="pun">()</span><span class="pln">
       </span><span class="pun">{</span><span class="pln">
           </span><span class="kwd">var</span><span class="pln"> resourceList </span><span class="pun">=</span><span class="pln"> window</span><span class="pun">.</span><span class="pln">performance</span><span class="pun">.</span><span class="pln">getEntriesByType</span><span class="pun">(</span><span class="str">"resource"</span><span class="pun">);</span><span class="pln">
           </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> resourceList</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln">
           </span><span class="pun">{</span><span class="pln">
              </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">resourceList</span><span class="pun">[</span><span class="pln">i</span><span class="pun">].</span><span class="pln">initiatorType </span><span class="pun">==</span><span class="pln"> </span><span class="str">"img"</span><span class="pun">)</span><span class="pln">
              </span><span class="pun">{</span><span class="pln">
                 alert</span><span class="pun">(</span><span class="str">"End to end resource fetch: "</span><span class="pun">+</span><span class="pln"> resourceList</span><span class="pun">[</span><span class="pln">i</span><span class="pun">].</span><span class="pln">responseEnd </span><span class="pun">-</span><span class="pln"> resourceList</span><span class="pun">[</span><span class="pln">i</span><span class="pun">].</span><span class="pln">startTime</span><span class="pun">);</span><span class="pln">
              </span><span class="pun">}</span><span class="pln">
           </span><span class="pun">}</span><span class="pln">
       </span><span class="pun">}</span><span class="pln">
    </span><span class="tag">&lt;/script&gt;</span><span class="pln">
    </span><span class="tag">&lt;img</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"image0"</span><span class="pln"> </span><span class="atn">src</span><span class="pun">=</span><span class="atv">"http://www.w3.org/Icons/w3c_home.png"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;/body&gt;</span><span class="pln">
</span><span class="tag">&lt;/html&gt;</span></pre></div>

</section>

<section id="conformance" typeof="bibo:Chapter" resource="#conformance" property="bibo:hasPart"><!--OddPage--><h2 id="h-conformance" resource="#h-conformance"><span property="xhv:role" resource="xhv:heading"><span class="secno">2. </span>Conformance</span></h2>
<p>
  As well as sections marked as non-normative, all authoring guidelines, diagrams, examples,
  and notes in this specification are non-normative. Everything else in this specification is
  normative.
</p>
<p id="respecRFC2119">The key words <em class="rfc2119" title="MAY">MAY</em>, <em class="rfc2119" title="MUST">MUST</em>, <em class="rfc2119" title="MUST NOT">MUST NOT</em>, <em class="rfc2119" title="SHOULD">SHOULD</em>, and <em class="rfc2119" title="SHOULD NOT">SHOULD NOT</em> are 
  to be interpreted as described in [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-RFC2119">RFC2119</a></cite>].
</p>


<p>Requirements phrased in the imperative as part of algorithms (such as
"strip any leading space characters" or "return false and abort these steps")
are to be interpreted with the meaning of the key word ("<em class="rfc2119" title="MUST">MUST</em>", "<em class="rfc2119" title="SHOULD">SHOULD</em>",
"<em class="rfc2119" title="MAY">MAY</em>", etc) used in introducing the algorithm. </p>

<p>Some conformance requirements are phrased as requirements on attributes,
methods or objects. Such requirements are to be interpreted as requirements
on user agents. </p>

<p>Conformance requirements phrased as algorithms or specific steps may be
implemented in any manner, so long as the end result is equivalent. (In
particular, the algorithms defined in this specification are intended to be
easy to follow, and not intended to be performant.) </p>

    <p>The IDL fragments in this specification must be interpreted as
    required for <a href="http://www.w3.org/TR/WebIDL/#dfn-conforming-idl-fragment">conforming IDL fragments</a>, as described in the Web IDL
    specification. [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-WebIDL">WebIDL</a></cite>]</p>
</section>
<section id="terminology" typeof="bibo:Chapter" resource="#terminology" property="bibo:hasPart">
<!--OddPage--><h2 id="h-terminology" resource="#h-terminology"><span property="xhv:role" resource="xhv:heading"><span class="secno">3. </span>Terminology</span></h2>

<p>The construction "a <code title="">Foo</code> object", where <code title="">Foo</code> is actually an interface, is sometimes used instead of
the more accurate "an object implementing the interface <code title="">Foo</code>". </p>

<p>The term DOM is used to refer to the API set made available to scripts in
Web applications, and does not necessarily imply the existence of an actual
<code>Document</code> object or of any other <code>Node</code> objects as
defined in the DOM specification. [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-DOM">DOM</a></cite>]
</p>

<p>A DOM attribute is said to be <em>getting</em> when its value is being
retrieved (such as by author script), and is said to be <em>setting</em> when
a new value is assigned to it.</p>

<p>The term "JavaScript" is used to refer to ECMA262, rather than the
official term ECMAScript, since the term JavaScript is more widely known. [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-ECMA-262">ECMA-262</a></cite>]
</p>

<p>
  Throughout this work, all time values are measured in milliseconds since the start of
  navigation of the document. For example, the start of navigation of the document
  occurs at time 0. The term <i>current time</i> refers to the number of milliseconds
  since the start of navigation of the document until the current moment in time.
  This definition of time is based on the High Resolution Time specification
  [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-HR-TIME">HR-TIME</a></cite>] and is different
  from the definition of time used in the Navigation Timing specification
  [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-NAVIGATION-TIMING">NAVIGATION-TIMING</a></cite>],
  where time is measured in milliseconds since midnight of January 1, 1970 (UTC).
</p>
</section>

<section id="resource-timing" typeof="bibo:Chapter" resource="#resource-timing" property="bibo:hasPart">
<!--OddPage--><h2 id="h-resource-timing" resource="#h-resource-timing"><span property="xhv:role" resource="xhv:heading"><span class="secno">4. </span>Resource Timing</span></h2>


<section id="introduction-1" class="informative" typeof="bibo:Chapter" resource="#introduction-1" property="bibo:hasPart">
<h3 id="h-introduction-1" resource="#h-introduction-1"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.1 </span>Introduction</span></h3><p><em>This section is non-normative.</em></p>

<p>
    The <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a>
    interface facilitates timing measurement of downloadable resources on the
    root page. For example, this interface is available for
    <a href="http://www.w3.org/TR/XMLHttpRequest/#interface-xmlhttprequest">XMLHttpRequest</a> objects [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-XMLHttpRequest">XMLHttpRequest</a></cite>], HTML
    elements [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-HTML5">HTML5</a></cite>] such as
    <a href="http://www.w3.org/TR/html5/embedded-content-0.html#the-iframe-element">iframe</a>,
    <a href="http://www.w3.org/TR/html5/embedded-content-0.html#the-img-element">img</a>,
    <a href="http://www.w3.org/TR/html5/scripting-1.html#the-script-element">script</a>,
    <a href="http://www.w3.org/TR/html5/embedded-content-0.html#the-object-element">object</a>,
    <a href="http://www.w3.org/TR/html5/embedded-content-0.html#the-embed-element">embed</a>,
    and <a href="http://www.w3.org/TR/html5/document-metadata.html#the-link-element">link</a>
    with the link type of
    <a href="http://www.w3.org/TR/html5/links.html#link-type-stylesheet">stylesheet</a>,
    and SVG elements [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-SVG11">SVG11</a></cite>] such
    as <a href="http://www.w3.org/TR/SVG11/struct.html#SVGElement">svg</a>.
</p>

<p>The term "resource" is also used to refer to these elements in this work. </p>
</section>

<section id="resources-included" typeof="bibo:Chapter" resource="#resources-included" property="bibo:hasPart">
<h3 id="h-resources-included" resource="#h-resources-included"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.2 </span>Resources Included in the <code><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a></code> Interface</span></h3>
<p>
	All resources <a title="fetch" href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetched</a> by the current <a href="http://www.w3.org/TR/html5/browsers.html#browsing-context">browsing context</a> [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-HTML5">HTML5</a></cite>]
	<em class="rfc2119" title="MUST">MUST</em> be included as <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> objects in the <a href="http://www.w3.org/TR/performance-timeline/#sec-performance-timeline">Performance Timeline</a> of the
	current <a href="http://www.w3.org/TR/html5/browsers.html#browsing-context">browsing context</a>. Resources that are
    retrieved from <a href="http://www.w3.org/TR/html5/browsers.html#relevant-application-cache" title="relevant application cache">relevant
application caches</a> or local resources <em class="rfc2119" title="MUST">MUST</em> be included
    as <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> objects in the <a href="http://www.w3.org/TR/performance-timeline/#sec-performance-timeline">Performance Timeline</a> [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-performance-timeline">performance-timeline</a></cite>].
</p>
<p>The rest of this section is non-normative.</p>
<p>
    Examples:</p>
    <ul>
        <li>If the same canonical URL is used as the <code>src</code> attribute of two HTML <code>IMG</code> elements,
            the <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> of the resource initiated by the first HTML <code>IMG</code> element <em class="rfc2119" title="SHOULD">SHOULD</em>
			be included as a <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> object in the <a href="http://www.w3.org/TR/performance-timeline/#sec-performance-timeline">Performance Timeline</a>.
			The user agent might not re-request the URL for the second HTML <code>IMG</code> element, instead using the existing download it initiated for the first HTML <code>IMG</code> element.
            In this case, the <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> of the resource by the first
            <code>IMG</code> element would be the only occurrence in the <a href="http://www.w3.org/TR/performance-timeline/#sec-performance-timeline">Performance Timeline</a>.
        </li>
        <li>If the <code>src</code> attribute of a HTML <code>IMG</code> element is changed via script, both the <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> of the original resource as well
            as the <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> of the new URL would be included as <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> objects in
			the <a href="http://www.w3.org/TR/performance-timeline/#sec-performance-timeline">Performance Timeline</a>.
        </li>
		<li>
			If an HTML <code>IFRAME</code> element is added via markup without specifying a <code>src</code> attribute, the user agent may load the <code>about:blank</code> document for the <code>IFRAME</code>. If at a later time the <code>src</code> attribute is changed dynamically via script, the user agent may
			<a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> the new URL resource for the <code>IFRAME</code>. In this case, only the
			<a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> of the new URL would be included
			as a <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> object in the <a href="http://www.w3.org/TR/performance-timeline/#sec-performance-timeline">Performance Timeline</a>.
		</li>
        <li>
            If an <code>XMLHttpRequest</code> is generated twice for the same canonical URL, both <a title="fetch" href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetches</a> of the resource would be
            included as a <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> object in the <a href="http://www.w3.org/TR/performance-timeline/#sec-performance-timeline">Performance Timeline</a>.
			This is because the <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> of the resource for the second <code>XMLHttpRequest</code> cannot reuse the download issued for the first <code>XMLHttpRequest</code>.
        </li>
        <li>
            If an HTML <code>IFRAME</code> element is included on the page, then only the resource requested by <code>IFRAME</code> <code>src</code> attribute is included
            as a <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> object in the <a href="http://www.w3.org/TR/performance-timeline/#sec-performance-timeline">Performance Timeline</a>.
			Sub-resources requested by the <code>IFRAME</code> document will be included in the <code>IFRAME</code> document's <a href="http://www.w3.org/TR/performance-timeline/#sec-performance-timeline">Performance Timeline</a> and not the parent
            document's <a href="http://www.w3.org/TR/performance-timeline/#sec-performance-timeline">Performance Timeline</a>.
        </li>
        <li>
            If an HTML <code>IMG</code> element has a <code><a href="https://tools.ietf.org/html/rfc2397">data: URI</a></code> as its source [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-RFC2397">RFC2397</a></cite>], then this resource will not
            be included as a <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> object in the <a href="http://www.w3.org/TR/performance-timeline/#sec-performance-timeline">Performance Timeline</a>.
			By definition <code><a href="https://tools.ietf.org/html/rfc2397">data: URI</a></code> contains embedded data and does not require a <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a>.
        </li>
    </ul>
<p>
    The user agent <em class="rfc2119" title="MAY">MAY</em> choose to limit how many resources are included as
    <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> objects in the <a href="http://www.w3.org/TR/performance-timeline/#sec-performance-timeline">Performance Timeline</a>.
	The recommended minimum number of <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> objects is 150, though this may be changed by the user agent.
    <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-Performance-setResourceTimingBufferSize-void-unsigned-long-maxSize"><code>setResourceTimingBufferSize</code></a>
    can be called to request a change to this limit.
</p>
</section>

<section id="performanceresourcetiming" typeof="bibo:Chapter" resource="#performanceresourcetiming" property="bibo:hasPart">
<h3 id="h-performanceresourcetiming" resource="#h-performanceresourcetiming"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3 </span>The <code>PerformanceResourceTiming</code> Interface</span></h3>

<p>
The <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> interface participates in the
	<a href="http://www.w3.org/TR/performance-timeline/#sec-performance-timeline">Performance Timeline</a> and extends the following attributes of the
<a href="http://www.w3.org/TR/performance-timeline/#performanceentry">PerformanceEntry</a> interface:</p>

<dl class="attributes">
<dt id="widl-PerformanceResourceTiming-name"><code>name</code></dt>
    <dd>
    	This attribute <em class="rfc2119" title="MUST">MUST</em> return the <a href="http://www.w3.org/TR/html5/infrastructure.html#resolve-a-url">resolved URL</a> of the
    	requested resource. This attribute <em class="rfc2119" title="MUST NOT">MUST NOT</em> change even if the <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> redirected to a different URL.
   	</dd>
<dt id="widl-PerformanceResourceTiming-entryType"><code>entryType</code></dt>
<dd>The <code id="entryType-attribute">entryType</code> attribute <em class="rfc2119" title="MUST">MUST</em> return the DOMString "<code id="perf-resource">resource</code>".</dd>
<dt id="widl-PerformanceResourceTiming-startTime"><code>startTime</code></dt>
<dd>The <code id="startTime-attribute">startTime</code> attribute <em class="rfc2119" title="MUST">MUST</em> return a <a href="http://www.w3.org/TR/hr-time/#domhighrestimestamp">DOMHighResTimeStamp</a> [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-HR-TIME">HR-TIME</a></cite>]
  with the time immediately before the user agent starts to queue the resource for <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch" title="fetch">fetching</a>.
       If there are HTTP redirects or <a href="http://www.w3.org/TR/html5/infrastructure.html#concept-http-equivalent-codes" title="HTTP response codes equivalence">equivalent</a>
       when fetching the resource, and if all the redirects or equivalent are from the <a href="https://tools.ietf.org/html/rfc6454#section-5">same origin</a> as the current
       document or the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#timing-allow-check">timing allow check</a> algorithm passes, this attribute <em class="rfc2119" title="MUST">MUST</em> return the same value as <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-redirectStart">redirectStart</a>.
     Otherwise, this attribute <em class="rfc2119" title="MUST">MUST</em> return the same value as <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-fetchStart">fetchStart</a>.</dd>
<dt id="widl-PerformanceResourceTiming-duration"><code>duration</code></dt>
<dd>The <code id="duration-attribute">duration</code> attribute <em class="rfc2119" title="MUST">MUST</em> return a <a href="http://www.w3.org/TR/hr-time/#domhighrestimestamp">DOMHighResTimeStamp</a>
  equal to the difference between <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-responseEnd">responseEnd</a> and <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#startTime-attribute">startTime</a>, respectively.</dd>
</dl>

<pre class="idl"><span class="idlInterface" id="idl-def-PerformanceResourceTiming">interface <span class="idlInterfaceID">PerformanceResourceTiming</span> : <span class="idlSuperclass">PerformanceEntry</span> {
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">DOMString</span>           <span class="idlAttrName"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-initiatorType">initiatorType</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">DOMString</span>           <span class="idlAttrName"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-nextHopProtocol">nextHopProtocol</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">DOMHighResTimeStamp</span> <span class="idlAttrName"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-redirectStart">redirectStart</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">DOMHighResTimeStamp</span> <span class="idlAttrName"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-redirectEnd">redirectEnd</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">DOMHighResTimeStamp</span> <span class="idlAttrName"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-fetchStart">fetchStart</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">DOMHighResTimeStamp</span> <span class="idlAttrName"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-domainLookupStart">domainLookupStart</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">DOMHighResTimeStamp</span> <span class="idlAttrName"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-domainLookupEnd">domainLookupEnd</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">DOMHighResTimeStamp</span> <span class="idlAttrName"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectStart">connectStart</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">DOMHighResTimeStamp</span> <span class="idlAttrName"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectEnd">connectEnd</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">DOMHighResTimeStamp</span> <span class="idlAttrName"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-secureConnectionStart">secureConnectionStart</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">DOMHighResTimeStamp</span> <span class="idlAttrName"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-requestStart">requestStart</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">DOMHighResTimeStamp</span> <span class="idlAttrName"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-responseStart">responseStart</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">DOMHighResTimeStamp</span> <span class="idlAttrName"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-responseEnd">responseEnd</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">unsigned short</span>      <span class="idlAttrName"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-transferSize">transferSize</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">unsigned short</span>      <span class="idlAttrName"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-encodedBodySize">encodedBodySize</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">unsigned short</span>      <span class="idlAttrName"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-decodedBodySize">decodedBodySize</a></span>;</span>
<span class="idlSerializer">    serializer = <span class="idlSerializerValues">{inherit, attribute}</span>;</span>
};</span></pre><section id="attributes" typeof="bibo:Chapter" resource="#attributes" property="bibo:hasPart"><h4 id="h-attributes" resource="#h-attributes"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3.1 </span>Attributes</span></h4><dl class="attributes"><dt id="widl-PerformanceResourceTiming-connectEnd"><code>connectEnd</code> of type <span class="idlAttrType">DOMHighResTimeStamp</span>, readonly   </dt><dd>
<p>This attribute <em class="rfc2119" title="MUST">MUST</em> return the time immediately after the user agent finishes
establishing the connection to the server to retrieve the resource.
If a <a href="https://tools.ietf.org/html/rfc7230#section-6.3">persistent
connection</a> [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-RFC7230">RFC7230</a></cite>] is used or the resource is retrieved from <a href="http://www.w3.org/TR/html5/browsers.html#relevant-application-cache" title="relevant application cache">relevant
application caches</a> or local resources, this attribute <em class="rfc2119" title="MUST">MUST</em> return the value of
<a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-domainLookupEnd">domainLookupEnd</a>.</p>
<p>If the transport connection fails and the user agent reopens a connection,
<a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectStart">connectStart</a> and <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectEnd">connectEnd</a> <em class="rfc2119" title="SHOULD">SHOULD</em> return the corresponding
values of the new connection. </p>
<p><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectEnd">connectEnd</a> <em class="rfc2119" title="MUST">MUST</em> include the time interval to
establish the transport connection, as well as other time intervals such as SSL handshake and SOCKS authentication. </p>
<p>
If the last non-redirected <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> of the resource is not the same origin as the current document,
<a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectEnd">connectEnd</a> <em class="rfc2119" title="MUST">MUST</em> return
zero unless the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#timing-allow-check">timing allow check</a> algorithm passes.</p>
</dd><dt id="widl-PerformanceResourceTiming-connectStart"><code>connectStart</code> of type <span class="idlAttrType">DOMHighResTimeStamp</span>, readonly   </dt><dd>
<p>This attribute <em class="rfc2119" title="MUST">MUST</em> return the time immediately before the user agent start
establishing the connection to the server to retrieve the resource.
If a <a href="https://tools.ietf.org/html/rfc7230#section-6.3">persistent
connection</a> [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-RFC7230">RFC7230</a></cite>] is used or the resource is retrieved from <a href="http://www.w3.org/TR/html5/browsers.html#relevant-application-cache" title="relevant application cache">relevant
application caches</a> or local resources, this attribute <em class="rfc2119" title="MUST">MUST</em> return value of
<a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-domainLookupEnd">domainLookupEnd</a>.</p>

<p>
If the last non-redirected <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> of the resource is not the same origin as the current document,
<a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectStart">connectStart</a> <em class="rfc2119" title="MUST">MUST</em> return
zero unless <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#timing-allow-check">timing allow check</a> algorithm passes.</p>
</dd><dt id="widl-PerformanceResourceTiming-decodedBodySize"><code>decodedBodySize</code> of type <span class="idlAttrType">unsigned short</span>, readonly   </dt><dd>
<p>This attribute <em class="rfc2119" title="MUST">MUST</em> return the size, in octets received by the client, of the <a href="http://httpwg.github.io/specs/rfc7230.html#message.body">message body</a> [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-RFC7230">RFC7230</a></cite>], after removing any applied <a href="http://httpwg.github.io/specs/rfc7231.html#data.encoding">content-codings</a> [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-RFC7231">RFC7231</a></cite>].</p>
</dd><dt id="widl-PerformanceResourceTiming-domainLookupEnd"><code>domainLookupEnd</code> of type <span class="idlAttrType">DOMHighResTimeStamp</span>, readonly   </dt><dd>
<p>This attribute <em class="rfc2119" title="MUST">MUST</em> return the time immediately after the user agent finishes
the domain name lookup for the resource.
If a <a href="https://tools.ietf.org/html/rfc7230#section-6.3">persistent
connection</a> [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-RFC7230">RFC7230</a></cite>] is used or the resource
is retrieved from <a href="http://www.w3.org/TR/html5/browsers.html#relevant-application-cache" title="relevant application cache">relevant
application caches</a> or local resources, this attribute <em class="rfc2119" title="MUST">MUST</em> return the same
value as <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-fetchStart">fetchStart</a>. </p>
<p>If the user agent has the domain information in cache,
domainLookupStart and domainLookupEnd represent the times when the user agent
starts and ends the domain data retrieval from the cache. </p>
<p>
If the last non-redirected <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> of the resource is not the same origin as the current document,
<a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-domainLookupEnd">domainLookupEnd</a> <em class="rfc2119" title="MUST">MUST</em> return
zero unless the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#timing-allow-check">timing allow check</a> algorithm passes.</p>
</dd><dt id="widl-PerformanceResourceTiming-domainLookupStart"><code>domainLookupStart</code> of type <span class="idlAttrType">DOMHighResTimeStamp</span>, readonly   </dt><dd>
<p>This attribute <em class="rfc2119" title="MUST">MUST</em> return the time immediately before the user agent starts
the domain name lookup for the resource.
If a <a href="https://tools.ietf.org/html/rfc7230#section-6.3">persistent
connection</a> [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-RFC7230">RFC7230</a></cite>] is used or the resource
is retrieved from <a href="http://www.w3.org/TR/html5/browsers.html#relevant-application-cache" title="relevant application cache">relevant
application caches</a> or local resources, this attribute <em class="rfc2119" title="MUST">MUST</em> return the same
value as <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-fetchStart">fetchStart</a>. </p>
<p>
If the last non-redirected <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> of the resource is not the same origin as the current document,
<a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-domainLookupStart">domainLookupStart</a> <em class="rfc2119" title="MUST">MUST</em> return
zero unless the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#timing-allow-check">timing allow check</a> algorithm passes.</p>
</dd><dt id="widl-PerformanceResourceTiming-encodedBodySize"><code>encodedBodySize</code> of type <span class="idlAttrType">unsigned short</span>, readonly   </dt><dd>
<p>This attribute <em class="rfc2119" title="MUST">MUST</em> return the size, in octets received by the client, of the <a href="http://httpwg.github.io/specs/rfc7230.html#message.body">payload body</a> [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-RFC7230">RFC7230</a></cite>], prior to removing any applied <a href="http://httpwg.github.io/specs/rfc7231.html#data.encoding">content-codings</a> [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-RFC7231">RFC7231</a></cite>].</p>
</dd><dt id="widl-PerformanceResourceTiming-fetchStart"><code>fetchStart</code> of type <span class="idlAttrType">DOMHighResTimeStamp</span>, readonly   </dt><dd>
<p>If there are no HTTP redirects or <a href="http://www.w3.org/TR/html5/infrastructure.html#concept-http-equivalent-codes" title="HTTP response codes equivalence">equivalent</a>,
this attribute <em class="rfc2119" title="MUST">MUST</em> return the time immediately before the user agent starts to <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> the resource.</p>
<p>If there are HTTP redirects or <a href="http://www.w3.org/TR/html5/infrastructure.html#concept-http-equivalent-codes" title="HTTP response codes equivalence">equivalent</a>,
this attribute <em class="rfc2119" title="MUST">MUST</em> return the time immediately before the user agent starts to <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> the final resource in the redirection.</p>
</dd><dt id="widl-PerformanceResourceTiming-initiatorType"><code>initiatorType</code> of type <span class="idlAttrType">DOMString</span>, readonly   </dt><dd>
<p>If the initiator is an <code><a href="http://www.w3.org/TR/dom/#concept-element">element</a></code>, on getting, the <code><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-initiatorType">initiatorType</a></code> attribute <em class="rfc2119" title="MUST">MUST</em> return a DOMString with the same value as the <code><a href="http://www.w3.org/TR/dom/#concept-element-local-name">localName</a></code> of that
<code><a href="http://www.w3.org/TR/dom/#concept-element">element</a></code> [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-DOM">DOM</a></cite>].</p>
<p>If the initiator is a CSS resource downloaded by the <code><a href="http://www.w3.org/TR/css-syntax-3/#consume-a-url-token">url()</a></code> syntax [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-CSS-SYNTAX-3">CSS-SYNTAX-3</a></cite>], such as <code>@import url()</code> or <code>background: url()</code>,
on getting, the <code><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-initiatorType">initiatorType</a></code> attribute <em class="rfc2119" title="MUST">MUST</em> return the DOMString <code>"css"</code>.</p>
<p>If the initiator is an XMLHttpRequest object [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-XMLHttpRequest">XMLHttpRequest</a></cite>], on getting, the <code><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-initiatorType">initiatorType</a></code> attribute <em class="rfc2119" title="MUST">MUST</em> return the DOMString <code>"xmlhttprequest"</code>.</p>
</dd><dt id="widl-PerformanceResourceTiming-nextHopProtocol"><code>nextHopProtocol</code> of type <span class="idlAttrType">DOMString</span>, readonly   </dt><dd>
<p>This attribute <em class="rfc2119" title="MUST">MUST</em> return the network protocol used to fetch the resource, as identified by the ALPN Protocol ID [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-RFC7301">RFC7301</a></cite>]. When a proxy is configured, if a tunnel connection is established then this attribute <em class="rfc2119" title="MUST">MUST</em> return the ALPN Protocol ID of the tunneled protocol, otherwise it <em class="rfc2119" title="MUST">MUST</em> return the ALPN Protocol ID of the first hop to the proxy.</p>
<p>In order to have precisely one way to represent any ALPN protocol ID, the following additional constraints apply: octets in the ALPN protocol <em class="rfc2119" title="MUST NOT">MUST NOT</em> be percent-encoded if they are valid token characters except "%", and when using percent-encoding, uppercase hex digits <em class="rfc2119" title="MUST">MUST</em> be used.</p>
<p>Note that this attribute is intended to identify the network protocol in use for the fetch regardless of how it was actually negotiated; that is, even if ALPN is not used to negotiate the network protocol, this attribute still uses the ALPN Protocol ID's to indicate the protocol in use.</p>
</dd><dt id="widl-PerformanceResourceTiming-redirectEnd"><code>redirectEnd</code> of type <span class="idlAttrType">DOMHighResTimeStamp</span>, readonly   </dt><dd>
<p>If there are HTTP redirects or <a href="http://www.w3.org/TR/html5/infrastructure.html#concept-http-equivalent-codes" title="HTTP response codes equivalence">equivalent</a>
when <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch" title="fetch">fetching</a> the resource and if all the redirects or equivalent are from the <a href="https://tools.ietf.org/html/rfc6454#section-5">same origin</a> as the current document,
this attribute <em class="rfc2119" title="MUST">MUST</em> return the time immediately after receiving the last byte of the response of the last redirect.</p>

<p>If there are HTTP redirects or <a href="http://www.w3.org/TR/html5/infrastructure.html#concept-http-equivalent-codes" title="HTTP response codes equivalence">equivalent</a>
when <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch" title="fetch">fetching</a> the resource and if any of the redirects are not from the <a href="https://tools.ietf.org/html/rfc6454#section-5">same origin</a> as the current document,
but the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#timing-allow-check">timing allow check</a> algorithm passes for each redirected resource, this attribute <em class="rfc2119" title="MUST">MUST</em> return the
time immediately after receiving the last byte of the response of the last redirect.
Otherwise, this attribute <em class="rfc2119" title="MUST">MUST</em> return zero. </p>
</dd><dt id="widl-PerformanceResourceTiming-redirectStart"><code>redirectStart</code> of type <span class="idlAttrType">DOMHighResTimeStamp</span>, readonly   </dt><dd>
<p>If there are HTTP redirects or <a href="http://www.w3.org/TR/html5/infrastructure.html#concept-http-equivalent-codes" title="HTTP response codes equivalence">equivalent</a>
when <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch" title="fetch">fetching</a> the resource and if all the redirects or equivalent are from the <a href="https://tools.ietf.org/html/rfc6454#section-5">same origin</a> as the current document,
this attribute <em class="rfc2119" title="MUST">MUST</em> return the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-fetchStart">starting time</a> of the <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> that initiates the redirect.</p>
<p>If there are HTTP redirects or <a href="http://www.w3.org/TR/html5/infrastructure.html#concept-http-equivalent-codes" title="HTTP response codes equivalence">equivalent</a>
when <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch" title="fetch">fetching</a> the resource and if any of the redirects are not from the <a href="https://tools.ietf.org/html/rfc6454#section-5">same origin</a> as the current document,
but the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#timing-allow-check">timing allow check</a> algorithm passes for each redirected resource, this attribute <em class="rfc2119" title="MUST">MUST</em>
return the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-fetchStart">starting time of the fetch</a> that initiates the redirect.
Otherwise, this attribute <em class="rfc2119" title="MUST">MUST</em> return zero. </p>
</dd><dt id="widl-PerformanceResourceTiming-requestStart"><code>requestStart</code> of type <span class="idlAttrType">DOMHighResTimeStamp</span>, readonly   </dt><dd>
<p>This attribute <em class="rfc2119" title="MUST">MUST</em> return the time immediately before the user agent
starts requesting the resource from the server, or from
<a href="http://www.w3.org/TR/html5/browsers.html#relevant-application-cache" title="relevant application cache">
relevant application caches</a> or from local resources.</p>
<p>If the transport connection fails after a request is sent and the user
agent reopens a connection and resend the request, <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-requestStart">requestStart</a> <em class="rfc2119" title="MUST">MUST</em> return the corresponding values
of the new request.</p>
<p>
If the last non-redirected <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> of the resource is not the same origin as the current document,
<a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-requestStart">requestStart</a> <em class="rfc2119" title="MUST">MUST</em> return
zero unless the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#timing-allow-check">timing allow check</a> algorithm passes.</p>
</dd><dt id="widl-PerformanceResourceTiming-responseEnd"><code>responseEnd</code> of type <span class="idlAttrType">DOMHighResTimeStamp</span>, readonly   </dt><dd>
<p>This attribute <em class="rfc2119" title="MUST">MUST</em> return the time immediately after the user agent finishes
receiving the last byte of the resource from <a href="http://www.w3.org/TR/html5/browsers.html#relevant-application-cache" title="relevant application cache">relevant
application caches</a> or from local resources.</p>
</dd><dt id="widl-PerformanceResourceTiming-responseStart"><code>responseStart</code> of type <span class="idlAttrType">DOMHighResTimeStamp</span>, readonly   </dt><dd>
<p>This attribute <em class="rfc2119" title="MUST">MUST</em> return the time immediately after the user agent receives
the first byte of the response from the server, or from <a href="http://www.w3.org/TR/html5/browsers.html#relevant-application-cache" title="relevant application cache">relevant
application caches</a> or from local resources.</p>
<p>
If the last non-redirected <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> of the resource is not the same origin as the current document,
<a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-responseStart">responseStart</a> <em class="rfc2119" title="MUST">MUST</em> return
zero unless the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#timing-allow-check">timing allow check</a> algorithm passes.</p>
</dd><dt id="widl-PerformanceResourceTiming-secureConnectionStart"><code>secureConnectionStart</code> of type <span class="idlAttrType">DOMHighResTimeStamp</span>, readonly   </dt><dd>
<p>This attribute is optional. User agents that don't have this attribute available <em class="rfc2119" title="MUST">MUST</em> set it as undefined.
When this attribute is available, if the <a href="http://www.w3.org/TR/url/#concept-url-scheme">scheme</a> [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-URL">URL</a></cite>]
of the resource is "HTTPS" [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-RFC2817">RFC2817</a></cite>], this attribute <em class="rfc2119" title="MUST">MUST</em> return the
time immediately before the user agent starts the handshake process to secure the current connection. If the
secureConnectionStart attribute is available but HTTPS is not used, this attribute <em class="rfc2119" title="MUST">MUST</em> return zero.</p>
<p>
If the last non-redirected <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> of the resource is not the same origin as the current document,
<a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-secureConnectionStart">secureConnectionStart</a> <em class="rfc2119" title="MUST">MUST</em> return
zero unless the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#timing-allow-check">timing allow check</a> algorithm passes.</p>
</dd><dt id="widl-PerformanceResourceTiming-transferSize"><code>transferSize</code> of type <span class="idlAttrType">unsigned short</span>, readonly   </dt><dd>
<p>This attribute <em class="rfc2119" title="MUST">MUST</em> return the size, in octets received by the client, consumed by the response header fields and the response <a href="http://httpwg.github.io/specs/rfc7230.html#message.body">payload body</a> [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-RFC7230">RFC7230</a></cite>].</p>
<p>This attribute <em class="rfc2119" title="SHOULD">SHOULD</em> include HTTP overhead (such as HTTP/1.1 chunked encoding and whitespace around header fields, including newlines, and <a href="https://tools.ietf.org/html/draft-ietf-httpbis-http2-16">HTTP/2</a> frame overhead, along with other server-to-client frames on the same stream), but <em class="rfc2119" title="SHOULD NOT">SHOULD NOT</em> include lower-layer protocol overhead (such as TLS or TCP). If there are HTTP redirects or <a href="http://www.w3.org/TR/html5/infrastructure.html#concept-http-equivalent-codes" title="HTTP response codes equivalence">equivalent</a> when navigating and if all the redirects or equivalent are from the same <a href="https://tools.ietf.org/html/rfc6454#section-4">origin</a> [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-RFC6454">RFC6454</a></cite>], this attribute <em class="rfc2119" title="SHOULD">SHOULD</em> include the HTTP overhead of incurred redirects.</p>
</dd></dl></section><section id="serializer" typeof="bibo:Chapter" resource="#serializer" property="bibo:hasPart"><h4 id="h-serializer" resource="#h-serializer"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3.2 </span>Serializer</span></h4><div><p>Instances of this interface are serialized as a map with entries from the closest inherited interface and with entries for each of the serializable attributes.</p><p></p></div></section>

</section>

<section id="extensions-performance-interface" typeof="bibo:Chapter" resource="#extensions-performance-interface" property="bibo:hasPart">
<h3 id="h-extensions-performance-interface" resource="#h-extensions-performance-interface"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.4 </span>Extensions to the <code>Performance</code> Interface</span></h3>

<pre class="idl"><span class="idlInterface" id="idl-def-Performance">partial interface <span class="idlInterfaceID">Performance</span> {
<span class="idlMethod">    <span class="idlMethType">void</span> <span class="idlMethName"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-Performance-clearResourceTimings-void">clearResourceTimings</a></span> ();</span>
<span class="idlMethod">    <span class="idlMethType">void</span> <span class="idlMethName"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-Performance-setResourceTimingBufferSize-void-unsigned-long-maxSize">setResourceTimingBufferSize</a></span> (<span class="idlParam"><span class="idlParamType">unsigned long</span> <span class="idlParamName">maxSize</span></span>);</span>
<span class="idlAttribute">                attribute <span class="idlAttrType">EventHandler</span> <span class="idlAttrName"><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-Performance-onresourcetimingbufferfull">onresourcetimingbufferfull</a></span>;</span>
};</span></pre><section id="attributes-1" typeof="bibo:Chapter" resource="#attributes-1" property="bibo:hasPart"><h4 id="h-attributes-1" resource="#h-attributes-1"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.4.1 </span>Attributes</span></h4><dl class="attributes"><dt id="widl-Performance-onresourcetimingbufferfull"><code>onresourcetimingbufferfull</code> of type <span class="idlAttrType">EventHandler</span>,            </dt><dd>
<p>
    The event handler for the <code>resourcetimingbufferfull</code> event. Immediately after the buffer used to store the list of <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a>
    resources becomes full, the User Agent <em class="rfc2119" title="MUST">MUST</em> fire a simple event named <code>resourcetimingbufferfull</code> that bubbles, isn't cancelable, has no default action, at the
    <a href="http://www.w3.org/TR/navigation-timing-2/#performance">Performance</a> object.
  </p>
</dd></dl></section><section id="methods" typeof="bibo:Chapter" resource="#methods" property="bibo:hasPart"><h4 id="h-methods" resource="#h-methods"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.4.2 </span>Methods</span></h4><dl class="methods"><dt id="widl-Performance-clearResourceTimings-void"><code>clearResourceTimings</code></dt><dd>
	<p>The method <code>clearResourceTimings</code> clears the buffer used to store the current
    list of <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> resources.
    </p>
<div><em>No parameters.</em></div><div><em>Return type: </em><code>void</code></div></dd><dt id="widl-Performance-setResourceTimingBufferSize-void-unsigned-long-maxSize"><code>setResourceTimingBufferSize</code></dt><dd>
<p>The <code>setResourceTimingBufferSize</code> method, when invoked, <em class="rfc2119" title="MUST">MUST</em> set the maximum number of <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> resources that may be stored in
	the buffer to the value of the maxSize parameter. The buffer is considered to be full if the number of entries in it is greater than or equal to <code>maxSize</code>.</p>
<p>If this method is not called, the user agent <em class="rfc2119" title="SHOULD">SHOULD</em> store at least 150 <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> resources in the buffer, unless otherwise specified by the user agent.</p>
<p>If the <code>maxSize</code> parameter is less than the number of elements currently stored in the buffer, no elements in the buffer are to be removed and the user agent <em class="rfc2119" title="MUST NOT">MUST NOT</em> fire the <code>resourcetimingbufferfull</code> event.</p>
		
<table class="parameters"><tbody><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">maxSize</td><td class="prmType"><code>unsigned long</code></td><td class="prmNullFalse"><span role="img" aria-label="False">✘</span></td><td class="prmOptFalse"><span role="img" aria-label="False">✘</span></td><td class="prmDesc">
      <p>The maxSize parameter sets the maximum number of <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> resources that will be stored in the buffer.</p>
			</td></tr></tbody></table><div><em>Return type: </em><code>void</code></div></dd></dl></section>

</section>
<section id="cross-origin-resources" typeof="bibo:Chapter" resource="#cross-origin-resources" property="bibo:hasPart">
<h3 id="h-cross-origin-resources" resource="#h-cross-origin-resources"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.5 </span>Cross-origin Resources</span></h3>
    <p>
        Cross-origin resources <em class="rfc2119" title="MUST">MUST</em> be included as <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> objects in the <a href="http://www.w3.org/TR/performance-timeline/#sec-performance-timeline">Performance Timeline</a>.
		If the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#timing-allow-check">timing allow check</a> algorithm fails for a cross-origin resource, these attributes of its <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> object
		<em class="rfc2119" title="MUST">MUST</em> be set to zero: <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-redirectStart">redirectStart</a>, <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-redirectEnd">redirectEnd</a>,
        <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-domainLookupStart">domainLookupStart</a>, <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-domainLookupEnd">domainLookupEnd</a>, <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectStart">connectStart</a>,
        <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectEnd">connectEnd</a>, <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-requestStart">requestStart</a>, <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-responseStart">responseStart</a>
		and <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-secureConnectionStart">secureConnectionStart</a>, if supported by the user agent.
    </p>
    <p>
        The term <dfn id="cross-origin">cross-origin</dfn> is used to mean non
        <a href="https://tools.ietf.org/html/rfc6454#section-5">same origin</a>.
    </p>
    <p>
        Server-side applications may return the <code><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#timing-allow-origin">Timing-Allow-Origin</a></code> HTTP response header
        to allow the User Agent to fully expose, to the document origin(s) specified, the
        values of attributes that would have been zero due to the cross-origin
        restrictions previously specified in this section. </p>

    <section id="timing-allow-origin" typeof="bibo:Chapter" resource="#timing-allow-origin" property="bibo:hasPart">
    <h4 id="h-timing-allow-origin" resource="#h-timing-allow-origin"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.5.1 </span><code>Timing-Allow-Origin</code> Response Header</span></h4>
    <dl class="attributes">
      <dt id="http-timing-allow-origin"><code>Timing-Allow-Origin</code></dt>
      <dd>
        <p>The <dfn id="dfn-generatedID"></dfn> header indicates whether a resource's timing can be
            shared based by returning the value of the Origin request header in the
            response.</p>
        <p>ABNF:</p>
        <pre>Timing-Allow-Origin = "Timing-Allow-Origin" ":" <a href="https://tools.ietf.org/html/rfc6454#section-7.1">origin-list-or-null</a> | "*"</pre>
        </dd>
    </dl>

	  <p>The <dfn id="timing-allow-check">timing allow check</dfn>
	  algorithm, which checks whether a cross-origin resource's timing information can be shared with the current document, is as follows:</p><p>

	  </p><ol>

	   <li><p>If the HTTP response includes zero or more than one
	   <code><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#http-timing-allow-origin">Timing-Allow-Origin</a></code>
	   header values, return fail and terminate this algorithm.</p></li>

	   <li><p>If the
	   <code><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#http-timing-allow-origin">Timing-Allow-Origin</a></code>
	   header value is the "<code>*</code>" character, return pass and terminate this
	   algorithm.</p></li>

	   <li><p>If the value of
	   <code><a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#http-timing-allow-origin">Timing-Allow-Origin</a></code>
	   is not a <a href="http://www.w3.org/TR/html5/infrastructure.html#case-sensitive">case-sensitive</a> match for the value of the
	   <code title="http-origin"><a href="https://tools.ietf.org/html/rfc6454#section-4">origin</a></code> of the current document, return fail and terminate this algorithm.</p></li>

	   <li><p>Return pass.</p></li>
	   </ol>

	  <div class="note"><div class="note-title" aria-level="5" role="heading" id="h-note1"><span>Note</span></div><p class="">The above algorithm also functions when the
	  <a href="https://tools.ietf.org/html/rfc6454#section-6.2">ASCII serialization of an origin</a> is
	  the string "<code>null</code>". Typically, this is the case when there are multiple redirects and the initiator is an XMLHttpRequest object.</p></div>

	  <div class="note"><div class="note-title" aria-level="5" role="heading" id="h-note2"><span>Note</span></div><p class="">In practice the
	  <code><a href="https://tools.ietf.org/html/rfc6454#section-7.1">origin-list-or-null</a></code> production is
	  more constrained. Rather than allowing a space-separated list of
	  <a href="https://tools.ietf.org/html/rfc6454#section-4" title="origin">origins</a>, it is either a
	  single <a href="https://tools.ietf.org/html/rfc6454#section-4">origin</a> or the string
	  "<code>null</code>".</p></div>
    </section>
</section>

<section id="vendor-prefixes" typeof="bibo:Chapter" resource="#vendor-prefixes" property="bibo:hasPart">
<h3 id="h-vendor-prefixes" resource="#h-vendor-prefixes"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.6 </span>Vendor Prefixes</span></h3>

<p>Vendor-specific proprietary user agent extensions are discouraged.
If such extensions are needed, e.g., for experimental purposes, vendors <em class="rfc2119" title="MUST">MUST</em> use the following extension mechanisms:</p>

<p>If an extension to the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-initiatorType">initiatorType</a> IDL attribute return value
 is needed for an experimental initiator type, on getting the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-initiatorType">initiatorType</a> IDL attribute,
  vendors <em class="rfc2119" title="MUST">MUST</em> return a DOMString that uses the following convention:</p>

<p><code>[vendorprefix]-[name]</code></p>

<p>Where,</p>
<ul>
	<li><code>[vendorprefix]</code> is a non-capitalized name that identifies the vendor,</li>
	<li><code>[name]</code> is a non-capitalized name given to the initiator type,</li>
    <li>and the above names are in ASCII.</li>
</ul>

<p>If the extension is a new timing attribute, it <em class="rfc2119" title="MUST">MUST</em>:</p>
<ul>
    <li>Follow this naming convention: [vendorPrefix]TimeName, where [vendorPrefix] is a
        name that identifies the vendor and TimeName identifies the name given to the
        timing attribute. </li>
    <li>Use a monotonically increasing clock, as defined in <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#monotonic-clock" class="sec-ref"><span class="secno">5.2</span> <span class="sec-title">Monotonic Clock</span></a>.</li>
    <li>Return a <a href="http://www.w3.org/TR/hr-time/#domhighrestimestamp">DOMHighResTimeStamp</a>.</li>
</ul>
</section>
</section>
<section id="process" typeof="bibo:Chapter" resource="#process" property="bibo:hasPart">
<!--OddPage--><h2 id="h-process" resource="#h-process"><span property="xhv:role" resource="xhv:heading"><span class="secno">5. </span>Process</span></h2>

<section id="processing-model" typeof="bibo:Chapter" resource="#processing-model" property="bibo:hasPart">
<h3 id="h-processing-model" resource="#h-processing-model"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.1 </span>Processing Model</span></h3>

<p>The following graph illustrates the timing attributes defined by the PerformanceResourceTiming interface. Attributes underlined may not be available when <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch" title="fetch">fetching</a> resources from different <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#same-origin">origins</a>. User agents may perform internal processing in between timings, which allow for non-normative intervals between timings.</p>

<p><img style="width:85%" src="//www.w3.org/TR/resource-timing/resource-timing-overview-1.png" alt="Resource Timing attributes"></p>

<ol>
  <li>Once the <a href="http://www.w3.org/TR/html5/browsers.html#create-a-document-object">Window object of
  the current document is created</a>, the user agent <em class="rfc2119" title="MUST">MUST</em> create a <a href="http://www.w3.org/TR/performance-timeline/#performanceentrylist">PerformanceEntryList</a>
  <i>primary buffer</i> object to store the list
  of <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> resources.</li>
  <li>Set the <i>primary buffer</i> to a size of 150, unless otherwise specified
  by the user agent or set by the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-Performance-setResourceTimingBufferSize-void-unsigned-long-maxSize"><code>setResourceTimingBufferSize</code></a> method.
  </li>
  <li>For each resource <a title="fetch" href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetched</a> by the current <a href="http://www.w3.org/TR/html5/browsers.html#browsing-context">browsing context</a>, perform the following steps:
  <ol>
      <li id="step-create-object">Create a new <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> object and
      set <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#entryType-attribute">entryType</a> to the DOMString <code>resource</code>.
      </li>
      <li>Immediately before the user agent starts to queue the resource for retrieval,
       record the current time in <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#startTime-attribute">startTime</a>, and set <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-nextHopProtocol">nextHopProtocol</a> to the empty DOMString.
      </li>
      <li>Record the initiator of the resource in <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-initiatorType">initiatorType</a>.
      </li>
      <li>Record the <a href="http://www.w3.org/TR/html5/infrastructure.html#resolve-a-url">resolved URL</a> of the requested resource in <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-name">name</a>.
      </li>
      <li id="step-fetch-start">If the new resource is to be fetched using HTTP GET or
       <a href="http://www.w3.org/TR/html5/infrastructure.html#concept-http-equivalent-codes" title="HTTP response codes equivalence">equivalent</a>,
       immediately before a user agent checks with the <a href="http://www.w3.org/TR/html5/browsers.html#relevant-application-cache" title="relevant application cache">
       relevant application caches</a>, record the current time as <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-fetchStart">fetchStart</a>. Otherwise, immediately
       before a user agent starts the <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch" title="fetch">
       fetching process</a>, record the current time as <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-fetchStart">
       fetchStart</a>. Let
     <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-domainLookupStart">domainLookupStart</a>,
     <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-domainLookupEnd">domainLookupEnd</a>,
     <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectStart">connectStart</a> and
     <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectEnd">connectEnd</a> be the same value as
     <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-fetchStart">fetchStart</a>.
      </li>
      <li id="step-collection-start">If the user agent is to reuse the data from another existing or completed <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> initiated from the current document, abort the
          remaining steps.
      </li>
      <li>If <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch" title="fetch">fetching</a> the resource is aborted for any reason, abort the remaining steps.       </li>
      <li>If the last non-redirected <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> of the resource is not the same origin as the current document
      and the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#timing-allow-check">timing allow check</a> algorithm fails, the user agent
      <em class="rfc2119" title="MUST">MUST</em> set
      <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-redirectStart">redirectStart</a>,
      <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-redirectEnd">redirectEnd</a>,
      <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-domainLookupStart">domainLookupStart</a>,
      <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-domainLookupEnd">domainLookupEnd</a>,
      <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectStart">connectStart</a>,
      <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectEnd">connectEnd</a>,
      <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-requestStart">requestStart</a>,
      <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-responseStart">responseStart</a> and
	  <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-secureConnectionStart">secureConnectionStart</a>, if supported by the user agent,
	  to zero and go to step <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#step-response-end">3.17</a>.
      </li>
        <li>Let <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-domainLookupStart">domainLookupStart</a>,
       <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-domainLookupEnd">domainLookupEnd</a>,
       <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectStart">connectStart</a> and
       <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectEnd">connectEnd</a> be the same value as
       <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-fetchStart">fetchStart</a>.</li>
      <li>If the resource is fetched from the <a href="http://www.w3.org/TR/html5/browsers.html#relevant-application-cache">
       relevant application cache</a> or local resources, including the <a href="https://tools.ietf.org/html/rfc7234">HTTP cache</a> [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-RFC7234">RFC7234</a></cite>],
     go to step <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#step-request-start">3.15</a>.
      </li>
      <li>If no domain lookup is required, go to step <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#step-connect-start">3.13</a>. Otherwise, immediately before a user agent
       starts the domain name lookup, record the time as <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-domainLookupStart">domainLookupStart</a>.</li>
      <li>Record the time as <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-domainLookupEnd">domainLookupEnd</a> immediately after the
       domain name lookup is successfully done. A user agent may need multiple retries before that. If
       the domain lookup fails, abort the remaining steps. </li>
      <li id="step-connect-start">If a persistent transport connection is used to <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch">fetch</a> the resource,
       let <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectStart">connectStart</a> and <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectEnd">connectEnd</a>
       be the same value of <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-domainLookupEnd">domainLookupEnd</a>. Otherwise, record the time as
       <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectStart">connectStart</a> immediately before initiating the connection to the server and record the time as <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectEnd">connectEnd</a> immediately after the connection to the server or the proxy is established. A user agent may need multiple retries before this time. Once connection is established set the value of <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-nextHopProtocol">nextHopProtocol</a> to the ALPN ID used by the connection. If a connection can not be established, abort the remaining steps.
      </li>
      <li>If the user agent supports the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-secureConnectionStart">secureConnectionStart</a> attribute,
      in step <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#step-connect-start">3.13</a>, a user agent <em class="rfc2119" title="SHOULD">SHOULD</em> also carry out these additional steps:
        <ol>
        <li>If the scheme of the current resource is HTTPS, the user agent <em class="rfc2119" title="MUST">MUST</em> record the
         time as <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-secureConnectionStart">secureConnectionStart</a>
         immediately before the handshake process to secure the connection.
        </li>
        <li>If the scheme of the current resource is not HTTPS, the user agent <em class="rfc2119" title="MUST">MUST</em> set the
        value of <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-secureConnectionStart">secureConnectionStart</a> to 0.
        </li>
        </ol>
      </li>
      <li id="step-request-start">Immediately before a user agent starts sending the request
      for the resource, record the current time as <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-requestStart">requestStart</a>.
      </li>
      <li id="step-response-start">Record the time as <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-responseStart">
      responseStart</a> immediately after the user agent receives the first byte of the response.
      </li>
      <li id="step-response-end">Record the time as <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-responseEnd">responseEnd</a>
      immediately after receiving the last byte of the response.
      <ol>
        <li>Return to step <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#step-connect-start">3.13</a> if the user agent fails to send the request or receive the entire response, and needs to reopen the connection.

        <div class="example">
        <div class="example-title">EXAMPLE</div>
        <p>When <a href="https://tools.ietf.org/html/rfc7230#section-6.3">persistent connection</a>
        [<cite><a class="bibref" href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#bib-RFC7230">RFC7230</a></cite>] is enabled, a user agent may first try to re-use an open connect to
        send the request while the connection can be <a href="https://tools.ietf.org/html/rfc7230#section-6.5">asynchronously
        closed</a>. In such case, <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectStart">connectStart</a>, <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-connectEnd">connectEnd</a> and
        <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-requestStart">requestStart</a> <em class="rfc2119" title="SHOULD">SHOULD</em> represent timing information collected over the re-open connection. </p>
        </div></li>

        <li>Set the value of <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-transferSize">transferSize</a>, <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-encodedBodySize">encodedBodySize</a>, <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-decodedBodySize">decodedBodySize</a> to corresponding values.</li>
      </ol>
      </li>
      <li>Record the difference between <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-responseEnd">responseEnd</a> and <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#startTime-attribute">startTime</a> in <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#duration-attribute">duration</a>.</li>
      <li>If the fetched resource results in an HTTP redirect or
      <a href="http://www.w3.org/TR/html5/infrastructure.html#concept-http-equivalent-codes" title="HTTP response codes equivalence">equivalent</a>, then
      <ol style="list-style-type:lower-alpha;">
            <li>If the current resource and the redirected resource are not from the
             <a href="https://tools.ietf.org/html/rfc6454#section-5">same origin</a> as the current document,
			 and the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#timing-allow-check">timing allow check</a> algorithm fails for either resource,
			 set <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-redirectStart">
             redirectStart</a> and <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-redirectEnd">redirectEnd</a> to 0. Then, return to step <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#step-fetch-start">
             3.5</a> with the new resource.
	        </li>
            <li>If the value of redirectStart is not set, let it be the value of fetchStart.
            </li>
            <li>Let redirectEnd be the value of responseEnd.
            </li>
            <li>Set all the attributes in the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">
             PerformanceResourceTiming</a> object to 0 except
             <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#startTime-attribute">startTime</a>,
             <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-redirectStart">redirectStart</a>, <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-redirectEnd">
             redirectEnd</a>, and <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-PerformanceResourceTiming-initiatorType">initiatorType</a>.
            </li>
            <li>Return to step <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#step-fetch-start">3.5</a> with the new resource.
            </li>
        </ol>
      </li>
      <li>If the <i>primary buffer</i> is full, discard the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> object,
      created in step <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#step-create-object">3.1</a>. Otherwise, add it to the <i>primary buffer</i>.
	  If adding it causes the <i> primary buffer </i> to become full, fire the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-Performance-onresourcetimingbufferfull"><code>resourcetimingbufferfull</code></a> event at the Document.
      <ol>
            <li>
            If the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-Performance-clearResourceTimings-void"><code>clearResourceTimings</code></a> method is called in the event handler for the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-Performance-onresourcetimingbufferfull"><code>resourcetimingbufferfull</code></a> event,
            clear all <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> objects in the <i>primary buffer</i>.
            </li>
            <li>
            If the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-Performance-setResourceTimingBufferSize-void-unsigned-long-maxSize"><code>setResourceTimingBufferSize</code></a> method is called in the event handler for the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#widl-Performance-onresourcetimingbufferfull"><code>resourcetimingbufferfull</code></a> event,
            set the maximum size of the <i>primary buffer</i> to the maxSize parameter. If the maxSize parameter is less than the number of elements currently stored in the buffer, no elements in the buffer are to be removed.
            </li>
        </ol>
      </li>
  </ol>
  </li>
</ol>
</section>
<section id="monotonic-clock" typeof="bibo:Chapter" resource="#monotonic-clock" property="bibo:hasPart">
<h3 id="h-monotonic-clock" resource="#h-monotonic-clock"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.2 </span>Monotonic Clock</span></h3>
<p>The value of the timing attributes <em class="rfc2119" title="MUST">MUST</em> monotonically increase to ensure timing attributes are not
skewed by adjustments to the system clock while <a href="http://www.w3.org/TR/html5/infrastructure.html#fetch" title="fetch">fetching</a> the resource. The difference between any two chronologically
recorded timing attributes <em class="rfc2119" title="MUST">MUST</em> never be negative. For all resources, including subdocument resources, the user agent <em class="rfc2119" title="MUST">MUST</em>
record the system clock at the beginning of the root document navigation and define subsequent timing attributes in
terms of a monotonic clock measuring time elapsed from the beginning of the navigation.
</p>
</section>
</section>

<section id="privacy-security" class="informative" typeof="bibo:Chapter" resource="#privacy-security" property="bibo:hasPart">
<!--OddPage--><h2 id="h-privacy-security" resource="#h-privacy-security"><span property="xhv:role" resource="xhv:heading"><span class="secno">6. </span>Privacy and Security</span></h2><p><em>This section is non-normative.</em></p>

<p>The <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> interface
exposes timing information for a resource to any web page that has included that
resource. To limit the access to the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> interface, the <a href="https://tools.ietf.org/html/rfc6454#section-5">same origin</a>
policy is enforced by default and certain attributes are set to zero, as described in <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#cross-origin-resources" class="sec-ref"><span class="secno">4.5</span> <span class="sec-title">Cross-origin Resources</span></a>. Resource providers can
explicitly allow all timing information to be collected for a resource by
adding the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#timing-allow-origin">Timing-Allow-Origin</a> HTTP response header, which specifies the
domains that are allowed to access the timing information. </p>

<p>
Statistical fingerprinting is a privacy concern where a malicious web site may determine whether a user has visited a third-party web site by measuring the timing of cache hits and misses of resources in the third-party web site. Though the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#performanceresourcetiming">PerformanceResourceTiming</a> interface gives timing information for resources in a document, the <a href="https://labs.w3.org/spec-generator/?type=respec&url=https://w3c.github.io/resource-timing/?specStatus=WD;shortName=resource-timing#cross-origin-resources">cross-origin restrictions</a> prevent making this privacy concern any worse than it is today using the load event on resources to measure timing to determine cache hits and misses.
</p>
</section>
<section class="appendix" id="acknowledgments" typeof="bibo:Chapter" resource="#acknowledgments" property="bibo:hasPart">
<!--OddPage--><h2 id="h-acknowledgments" resource="#h-acknowledgments"><span property="xhv:role" resource="xhv:heading"><span class="secno">A. </span>Acknowledgments</span></h2>
<p>We would like to sincerely thank Karen Anderson, Darin Fisher, Tony Gentilcore,
Nic Jansma, Kyle Scholz, Jonas Sicking, James Simonsen, Steve Souders,
Annie Sullivan, Sigbjørn Vik, Jason Weber to acknowledge their contributions to this work.</p>
</section>



<section id="references" class="appendix" typeof="bibo:Chapter" resource="#references" property="bibo:hasPart"><!--OddPage--><h2 id="h-references" resource="#h-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">B. </span>References</span></h2><section id="normative-references" typeof="bibo:Chapter" resource="#normative-references" property="bibo:hasPart"><h3 id="h-normative-references" resource="#h-normative-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">B.1 </span>Normative references</span></h3><dl class="bibliography" resource=""><dt id="bib-CSS-SYNTAX-3">[CSS-SYNTAX-3]</dt><dd>Tab Atkins Jr.; Simon Sapin. <a href="http://www.w3.org/TR/css-syntax-3/" property="dc:requires"><cite>CSS Syntax Module Level 3</cite></a>. 20 February 2014. W3C Candidate Recommendation. URL: <a href="http://www.w3.org/TR/css-syntax-3/" property="dc:requires">http://www.w3.org/TR/css-syntax-3/</a>
</dd><dt id="bib-DOM">[DOM]</dt><dd>Anne van Kesteren; Aryeh Gregor; Ms2ger; Alex Russell; Robin Berjon. <a href="http://www.w3.org/TR/dom/" property="dc:requires"><cite>W3C DOM4</cite></a>. 10 July 2014. W3C Last Call Working Draft. URL: <a href="http://www.w3.org/TR/dom/" property="dc:requires">http://www.w3.org/TR/dom/</a>
</dd><dt id="bib-HR-TIME">[HR-TIME]</dt><dd>Jatinder Mann. <a href="http://www.w3.org/TR/hr-time/" property="dc:requires"><cite>High Resolution Time</cite></a>. 17 December 2012. W3C Recommendation. URL: <a href="http://www.w3.org/TR/hr-time/" property="dc:requires">http://www.w3.org/TR/hr-time/</a>
</dd><dt id="bib-HTML5">[HTML5]</dt><dd>Ian Hickson; Robin Berjon; Steve Faulkner; Travis Leithead; Erika Doyle Navara; Edward O'Connor; Silvia Pfeiffer. <a href="http://www.w3.org/TR/html5/" property="dc:requires"><cite>HTML5</cite></a>. 28 October 2014. W3C Recommendation. URL: <a href="http://www.w3.org/TR/html5/" property="dc:requires">http://www.w3.org/TR/html5/</a>
</dd><dt id="bib-RFC2119">[RFC2119]</dt><dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119" property="dc:requires"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119" property="dc:requires">https://tools.ietf.org/html/rfc2119</a>
</dd><dt id="bib-RFC2397">[RFC2397]</dt><dd>L. Masinter. <a href="https://tools.ietf.org/html/rfc2397" property="dc:requires"><cite>The "data" URL scheme</cite></a>. August 1998. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc2397" property="dc:requires">https://tools.ietf.org/html/rfc2397</a>
</dd><dt id="bib-RFC6454">[RFC6454]</dt><dd>A. Barth. <a href="https://tools.ietf.org/html/rfc6454" property="dc:requires"><cite>The Web Origin Concept</cite></a>. December 2011. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6454" property="dc:requires">https://tools.ietf.org/html/rfc6454</a>
</dd><dt id="bib-RFC7230">[RFC7230]</dt><dd>R. Fielding, Ed.; J. Reschke, Ed.. <a href="https://tools.ietf.org/html/rfc7230" property="dc:requires"><cite>Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing</cite></a>. June 2014. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7230" property="dc:requires">https://tools.ietf.org/html/rfc7230</a>
</dd><dt id="bib-RFC7231">[RFC7231]</dt><dd>R. Fielding, Ed.; J. Reschke, Ed.. <a href="https://tools.ietf.org/html/rfc7231" property="dc:requires"><cite>Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content</cite></a>. June 2014. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7231" property="dc:requires">https://tools.ietf.org/html/rfc7231</a>
</dd><dt id="bib-RFC7234">[RFC7234]</dt><dd>R. Fielding, Ed.; M. Nottingham, Ed.; J. Reschke, Ed.. <a href="https://tools.ietf.org/html/rfc7234" property="dc:requires"><cite>Hypertext Transfer Protocol (HTTP/1.1): Caching</cite></a>. June 2014. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7234" property="dc:requires">https://tools.ietf.org/html/rfc7234</a>
</dd><dt id="bib-RFC7301">[RFC7301]</dt><dd>S. Friedl; A. Popov; A. Langley; E. Stephan. <a href="https://tools.ietf.org/html/rfc7301" property="dc:requires"><cite>Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension</cite></a>. July 2014. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7301" property="dc:requires">https://tools.ietf.org/html/rfc7301</a>
</dd><dt id="bib-URL">[URL]</dt><dd>Anne van Kesteren; Sam Ruby. <a href="http://www.w3.org/TR/url-1/" property="dc:requires"><cite>URL</cite></a>. 9 December 2014. W3C Working Draft. URL: <a href="http://www.w3.org/TR/url-1/" property="dc:requires">http://www.w3.org/TR/url-1/</a>
</dd><dt id="bib-WebIDL">[WebIDL]</dt><dd>Cameron McCormack. <a href="http://www.w3.org/TR/WebIDL/" property="dc:requires"><cite>Web IDL</cite></a>. 19 April 2012. W3C Candidate Recommendation. URL: <a href="http://www.w3.org/TR/WebIDL/" property="dc:requires">http://www.w3.org/TR/WebIDL/</a>
</dd><dt id="bib-XMLHttpRequest">[XMLHttpRequest]</dt><dd>Anne van Kesteren; Julian Aubourg; Jungkee Song; Hallvord Steen et al. <a href="http://www.w3.org/TR/XMLHttpRequest/" property="dc:requires"><cite>XMLHttpRequest Level 1</cite></a>. 30 January 2014. W3C Working Draft. URL: <a href="http://www.w3.org/TR/XMLHttpRequest/" property="dc:requires">http://www.w3.org/TR/XMLHttpRequest/</a>
</dd><dt id="bib-performance-timeline">[performance-timeline]</dt><dd>Jatinder Mann; Zhiheng Wang. <a href="http://www.w3.org/TR/performance-timeline/" property="dc:requires"><cite>Performance Timeline</cite></a>. 12 December 2013. W3C Recommendation. URL: <a href="http://www.w3.org/TR/performance-timeline/" property="dc:requires">http://www.w3.org/TR/performance-timeline/</a>
</dd></dl></section><section id="informative-references" typeof="bibo:Chapter" resource="#informative-references" property="bibo:hasPart"><h3 id="h-informative-references" resource="#h-informative-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">B.2 </span>Informative references</span></h3><dl class="bibliography" resource=""><dt id="bib-ECMA-262">[ECMA-262]</dt><dd><a href="http://www.ecma-international.org/publications/standards/Ecma-262.htm" property="dc:references"><cite>ECMAScript Language Specification, Edition 5.1</cite></a>. June 2011. URL: <a href="http://www.ecma-international.org/publications/standards/Ecma-262.htm" property="dc:references">http://www.ecma-international.org/publications/standards/Ecma-262.htm</a>
</dd><dt id="bib-NAVIGATION-TIMING">[NAVIGATION-TIMING]</dt><dd>Zhiheng Wang. <a href="http://www.w3.org/TR/navigation-timing/" property="dc:references"><cite>Navigation Timing</cite></a>. 17 December 2012. W3C Recommendation. URL: <a href="http://www.w3.org/TR/navigation-timing/" property="dc:references">http://www.w3.org/TR/navigation-timing/</a>
</dd><dt id="bib-RFC2817">[RFC2817]</dt><dd>R. Khare; S. Lawrence. <a href="https://tools.ietf.org/html/rfc2817" property="dc:references"><cite>Upgrading to TLS Within HTTP/1.1</cite></a>. May 2000. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc2817" property="dc:references">https://tools.ietf.org/html/rfc2817</a>
</dd><dt id="bib-SVG11">[SVG11]</dt><dd>Erik Dahlström; Patrick Dengler; Anthony Grasso; Chris Lilley; Cameron McCormack; Doug Schepers; Jonathan Watt; Jon Ferraiolo; Jun Fujisawa; Dean Jackson et al. <a href="http://www.w3.org/TR/SVG11/" property="dc:references"><cite>Scalable Vector Graphics (SVG) 1.1 (Second Edition)</cite></a>. 16 August 2011. W3C Recommendation. URL: <a href="http://www.w3.org/TR/SVG11/" property="dc:references">http://www.w3.org/TR/SVG11/</a>
</dd><dt id="bib-navigation-timing-2">[navigation-timing-2]</dt><dd>Jatinder Mann; Tobin Titus; Arvind Jain. <a href="http://www.w3.org/TR/navigation-timing-2/" property="dc:references"><cite>Navigation Timing 2</cite></a>. 20 January 2015. W3C Working Draft. URL: <a href="http://www.w3.org/TR/navigation-timing-2/" property="dc:references">http://www.w3.org/TR/navigation-timing-2/</a>
</dd></dl></section></section>
</body></html>
