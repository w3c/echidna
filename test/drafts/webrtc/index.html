
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>WebRTC 1.0: Real-time Communication Between Browsers</title>
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-{{status}}"><link rel="canonical" href="https://www.w3.org/TR/webrtc/">
</head>
<body class="h-entry toc-inline"><div class="head">
  <a href="https://www.w3.org/" class="logo">
      <img alt="W3C" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72" height="48">
  </a>
  <h1 class="title p-name" id="title">WebRTC 1.0: Real-time Communication Between Browsers</h1>

  <h2 id="w3c-candidate-recommendation-21-june-2018"><abbr title="World Wide Web Consortium">W3C</abbr> Candidate Recommendation Snapshot {{DD}} {{MM}} {{YYYY}}</h2>
  <dl>
    <dt>This version:</dt><dd><a class="u-url" href="{{thisVersion}}">{{thisVersion}}</a></dd><dt>Latest published version:</dt><dd><a href="{{latestVersion}}">{{latestVersion}}</a></dd>
    <dt>Latest editor's draft:</dt><dd><a href="{{editorsDraft}}">{{editorsDraft}}</a></dd>
    <dt>Test suite:</dt><dd><a href="https://github.com/web-platform-tests/wpt/tree/master/webrtc">https://github.com/web-platform-tests/wpt/tree/master/webrtc</a></dd>
    <dt>Implementation report:</dt><dd><a href="https://wpt.fyi/webrtc">https://wpt.fyi/webrtc</a></dd>


    <dt>Previous version:</dt><dd><a href="{{previousVersion}}">{{previousVersion}}</a></dd>

    <dt>Editors:</dt>
    <dd class="p-author h-card vcard" data-editor-id="45507"><span class="p-name fn">Adam Bergkvist</span>, Ericsson</dd><dd class="p-author h-card vcard" data-editor-id="85118"><span class="p-name fn">Daniel C. Burnett</span>, Invited Expert</dd><dd class="p-author h-card vcard" data-editor-id="25254"><span class="p-name fn">Cullen Jennings</span>, Cisco</dd><dd class="p-author h-card vcard" data-editor-id="47326"><span class="p-name fn">Anant Narayanan</span>, Mozilla (until November 2012)</dd><dd class="p-author h-card vcard" data-editor-id="65611"><span class="p-name fn">Bernard Aboba</span>, Microsoft Corporation (until March 2017)</dd><dd class="p-author h-card vcard" data-editor-id="82908"><span class="p-name fn">Taylor Brandstetter</span>, Google</dd><dd class="p-author h-card vcard" data-editor-id="79152"><span class="p-name fn">Jan-Ivar Bruaroey</span>, Mozilla</dd>

    <dt>Participate:</dt><dd>
      <a href="https://lists.w3.org/Archives/Public/public-webrtc/">Mailing list</a>
    </dd><dd>
      <a href="https://github.com/w3c/webrtc-pc/issues">Browse open issues</a>
    </dd><dd>
      <a href="https://tools.ietf.org/wg/rtcweb/">IETF RTCWEB Working Group</a>
    </dd>
  </dl>



  <p class="copyright">Initial Author of this Specification was Ian Hickson, Google Inc., with the following copyright statement:<br> © Copyright 2004-2011 Apple Computer, Inc., Mozilla Foundation, and Opera Software ASA. You are granted a license to use, reproduce and create derivative works of this document.</p><p class="copyright">All subsequent changes since 26 July 2011 done by the <abbr title="World Wide Web Consortium">W3C</abbr> WebRTC Working Group are under the following <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>:<br>© 2011-2018 <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). <a href="https://www.w3.org/Consortium/Legal/copyright-documents">Document use</a>  rules apply.</p><p class="copyright">For the entire publication on the <abbr title="World Wide Web Consortium">W3C</abbr> site the <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a> and <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> rules apply.</p>
  <hr title="Separator for header">
</div>
  <section id="abstract" class="introductory"><h2 id="abstract-0">Abstract</h2>
    <p>This document defines a set of ECMAScript APIs in WebIDL to allow media
    to be sent to and received from another browser or device implementing the
    appropriate set of real-time protocols. This specification is being
    developed in conjunction with a protocol specification developed by the
    IETF RTCWEB group and an API specification to get access to local media
    devices developed by the Media Capture Task Force.</p>
  </section>
  <section id="sotd" class="introductory"><h2 id="status-of-this-document">Status of This Document</h2><p>
        <em>This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision of this technical report can be found in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at https://www.w3.org/TR/.</em>
    </p><p>The API is based on preliminary work done in the WHATWG.</p><p>While the specification is feature complete and is expected to be stable, there are also a number of <a href="https://github.com/w3c/webrtc-pc/issues?utf8=%E2%9C%93&amp;q=is%3Aopen%20is%3Aissue%20-label%3AEditorial%20">known substantive issues</a> on the specification that will be addressed during the Candidate Recommendation period based on implementation experience feedback.</p><p>It might also evolve based on feedback gathered as its <a href="https://github.com/web-platform-tests/wpt/tree/master/webrtc">associated test suite</a> evolves. This test suite will be used to build an <a href="https://wpt.fyi/webrtc">implementation report</a> of the API.</p>
    <p>Since the <a href="https://www.w3.org/TR/2017/CR-webrtc-20171102/">previous publication as Candidate Recommendation</a>, the specification was updated with a number of bug fixes and clarifications in its algorithms. The following new APIs were added as part of these improvements: <code>RTCRtpSender.setStreams()</code>, <code>RTCRtpTransceiver.currentDirection</code>, <code>RTCSctpTransport.maxChannels</code>, <code>RTCPeerConnection.onstatsended</code>, and the <code>RTCStatsEvent</code> interface.</p>

    <p>To go into Proposed Recommendation status, the group expects to demonstrate implementation of each feature in at least two deployed browsers, and at least one implementation of each optional feature. Mandatory feature with only one implementation may be marked as optional in a revised Candidate Recommendation where applicable.</p><p>The following features are marked as at risk:</p><ul>
      <li>The value <a href="#dom-rtcrtcpmuxpolicy-negotiate"><code>negotiate</code></a> of RTCRtcpMuxPolicy</li>
      <li>The <code>encodings</code> attribute of <code><a href="#dom-rtcrtpreceiveparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiveParameters</code></a></code></li>
    </ul><p>
          <p>This document was published by the <a href="https://www.w3.org/groups/wg/webrtc">Web Real-Time Communications Working Group</a> as a Candidate Recommendation Snapshot.
          This document is intended to become a <abbr title="World Wide Web Consortium">W3C</abbr> Recommendation.

            <abbr title="World Wide Web Consortium">W3C</abbr> publishes a Candidate Recommendation to indicate that the document is believed to be
            stable and to encourage implementation by the developer community. This Candidate
            Recommendation is expected to advance to Proposed Recommendation no earlier than
            {{DD}} {{MM}} {{YYYY}}.

        </p><p>Publication as a Candidate Recommendation does not imply endorsement by the W3C Membership. A Candidate Recommendation Snapshot has received <a href="https://www.w3.org/2020/Process-20200915/#dfn-wide-review">wide review</a> and is intended to gather implementation experience.</p><p>
            This document was produced by
            a group
            operating under the
            <a href="{{patentPolicy}}"><abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.



              <abbr title="World Wide Web Consortium">W3C</abbr> maintains a <a rel="disclosure" href="https://www.w3.org/2004/01/pp-impl/47318/status">public list of any patent
              disclosures</a>
            made in connection with the deliverables of
            the group; that page also includes
            instructions for disclosing a patent. An individual who has actual knowledge of a patent
            which the individual believes contains
            <a href="{{patentPolicy}}#def-essential">Essential
            Claim(s)</a> must disclose the information in accordance with
            <a href="{{patentPolicy}}#sec-Disclosure">section
            6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.


        </p><p>This document is governed by the <a id="w3c_process_revision" href="https://www.w3.org/2020/Process-20200915/">15 September 2020 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
        </p></section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a href="#intro" class="tocxref"><span class="secno">1. </span>Introduction</a></li><li class="tocline"><a href="#conformance" class="tocxref"><span class="secno">2. </span>Conformance</a></li><li class="tocline"><a href="#terminology" class="tocxref"><span class="secno">3. </span>Terminology</a></li><li class="tocline"><a href="#peer-to-peer-connections" class="tocxref"><span class="secno">4. </span>Peer-to-peer connections</a><ol class="toc"><li class="tocline"><a href="#introduction" class="tocxref"><span class="secno">4.1 </span>Introduction</a></li><li class="tocline"><a href="#configuration" class="tocxref"><span class="secno">4.2 </span>Configuration</a><ol class="toc"><li class="tocline"><a href="#rtcconfiguration-dictionary" class="tocxref"><span class="secno">4.2.1 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCConfiguration" data-dfn-for=""><code>RTCConfiguration</code></span> Dictionary</a></li><li class="tocline"><a href="#rtcicecredentialtype-enum" class="tocxref"><span class="secno">4.2.2 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCIceCredentialType" data-dfn-for=""><code>RTCIceCredentialType</code></span> Enum</a></li><li class="tocline"><a href="#rtcoauthcredential-dictionary" class="tocxref"><span class="secno">4.2.3 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCOAuthCredential" data-dfn-for=""><code>RTCOAuthCredential</code></span> Dictionary</a></li><li class="tocline"><a href="#rtciceserver-dictionary" class="tocxref"><span class="secno">4.2.4 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCIceServer" data-dfn-for=""><code>RTCIceServer</code></span> Dictionary</a></li><li class="tocline"><a href="#rtcicetransportpolicy-enum" class="tocxref"><span class="secno">4.2.5 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCIceTransportPolicy" data-dfn-for=""><code>RTCIceTransportPolicy</code></span> Enum</a></li><li class="tocline"><a href="#rtcbundlepolicy-enum" class="tocxref"><span class="secno">4.2.6 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCBundlePolicy" data-dfn-for=""><code>RTCBundlePolicy</code></span> Enum</a></li><li class="tocline"><a href="#rtcrtcpmuxpolicy-enum" class="tocxref"><span class="secno">4.2.7 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCRtcpMuxPolicy" data-dfn-for=""><code>RTCRtcpMuxPolicy</code></span> Enum</a></li><li class="tocline"><a href="#offer-answer-options" class="tocxref"><span class="secno">4.2.8 </span>Offer/Answer Options</a></li></ol></li><li class="tocline"><a href="#state-definitions" class="tocxref"><span class="secno">4.3 </span>State Definitions</a><ol class="toc"><li class="tocline"><a href="#rtcsignalingstate-enum" class="tocxref"><span class="secno">4.3.1 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCSignalingState" data-dfn-for=""><code>RTCSignalingState</code></span> Enum</a></li><li class="tocline"><a href="#rtcicegatheringstate-enum" class="tocxref"><span class="secno">4.3.2 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCIceGatheringState" data-dfn-for=""><code>RTCIceGatheringState</code></span> Enum</a></li><li class="tocline"><a href="#rtcpeerconnectionstate-enum" class="tocxref"><span class="secno">4.3.3 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCPeerConnectionState" data-dfn-for=""><code>RTCPeerConnectionState</code></span> Enum</a></li><li class="tocline"><a href="#rtciceconnectionstate-enum" class="tocxref"><span class="secno">4.3.4 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCIceConnectionState" data-dfn-for=""><code>RTCIceConnectionState</code></span> Enum</a></li></ol></li><li class="tocline"><a href="#rtcpeerconnection-interface" class="tocxref"><span class="secno">4.4 </span>RTCPeerConnection Interface</a><ol class="toc"><li class="tocline"><a href="#operation" class="tocxref"><span class="secno">4.4.1 </span>Operation</a><ol class="toc"><li class="tocline"><a href="#constructor" class="tocxref"><span class="secno">4.4.1.1 </span>Constructor</a></li><li class="tocline"><a href="#enqueue-an-operation" class="tocxref"><span class="secno">4.4.1.2 </span>Enqueue an operation</a></li><li class="tocline"><a href="#update-the-connection-state" class="tocxref"><span class="secno">4.4.1.3 </span>Update the connection state</a></li><li class="tocline"><a href="#update-the-ice-gathering-state" class="tocxref"><span class="secno">4.4.1.4 </span>Update the ICE gathering state</a></li><li class="tocline"><a href="#update-the-ice-connection-state" class="tocxref"><span class="secno">4.4.1.5 </span>Update the ICE connection state</a></li><li class="tocline"><a href="#set-the-rtcsessiondescription" class="tocxref"><span class="secno">4.4.1.6 </span>Set the RTCSessionDescription</a></li><li class="tocline"><a href="#set-the-configuration" class="tocxref"><span class="secno">4.4.1.7 </span>Set the configuration</a></li></ol></li><li class="tocline"><a href="#interface-definition" class="tocxref"><span class="secno">4.4.2 </span>Interface Definition</a></li><li class="tocline"><a href="#legacy-interface-extensions" class="tocxref"><span class="secno">4.4.3 </span>Legacy Interface Extensions</a><ol class="toc"><li class="tocline"><a href="#method-extensions" class="tocxref"><span class="secno">4.4.3.1 </span>Method extensions</a></li><li class="tocline"><a href="#legacy-configuration-extensions" class="tocxref"><span class="secno">4.4.3.2 </span>Legacy configuration extensions</a></li></ol></li><li class="tocline"><a href="#garbage-collection" class="tocxref"><span class="secno">4.4.4 </span>Garbage collection</a></li></ol></li><li class="tocline"><a href="#error-handling" class="tocxref"><span class="secno">4.5 </span>Error Handling</a><ol class="toc"><li class="tocline"><a href="#general-principles" class="tocxref"><span class="secno">4.5.1 </span>General Principles</a></li></ol></li><li class="tocline"><a href="#session-description-model" class="tocxref"><span class="secno">4.6 </span>Session Description Model</a><ol class="toc"><li class="tocline"><a href="#rtcsdptype" class="tocxref"><span class="secno">4.6.1 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCSdpType" data-dfn-for=""><code>RTCSdpType</code></span></a></li><li class="tocline"><a href="#rtcsessiondescription-class" class="tocxref"><span class="secno">4.6.2 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCSessionDescription" data-dfn-for=""><code>RTCSessionDescription</code></span> Class</a></li></ol></li><li class="tocline"><a href="#session-negotiation-model" class="tocxref"><span class="secno">4.7 </span>Session Negotiation Model</a><ol class="toc"><li class="tocline"><a href="#setting-negotiation-needed" class="tocxref"><span class="secno">4.7.1 </span>Setting Negotiation-Needed</a></li><li class="tocline"><a href="#clearing-negotiation-needed" class="tocxref"><span class="secno">4.7.2 </span>Clearing Negotiation-Needed</a></li><li class="tocline"><a href="#updating-the-negotiation-needed-flag" class="tocxref"><span class="secno">4.7.3 </span>Updating the Negotiation-Needed flag</a></li></ol></li><li class="tocline"><a href="#interfaces-for-connectivity-establishment" class="tocxref"><span class="secno">4.8 </span>Interfaces for Connectivity Establishment</a><ol class="toc"><li class="tocline"><a href="#rtcicecandidate-interface" class="tocxref"><span class="secno">4.8.1 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCIceCandidate" data-dfn-for=""><code>RTCIceCandidate</code></span> Interface</a><ol class="toc"><li class="tocline"><a href="#candidate-attribute-grammar" class="tocxref"><span class="secno">4.8.1.1 </span><span data-idl="" data-dfn-type="dfn"><code>candidate-attribute</code></span> Grammar</a></li><li class="tocline"><a href="#rtciceprotocol-enum" class="tocxref"><span class="secno">4.8.1.2 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCIceProtocol" data-dfn-for=""><code>RTCIceProtocol</code></span> Enum</a></li><li class="tocline"><a href="#rtcicetcpcandidatetype-enum" class="tocxref"><span class="secno">4.8.1.3 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCIceTcpCandidateType" data-dfn-for=""><code>RTCIceTcpCandidateType</code></span> Enum</a></li><li class="tocline"><a href="#rtcicecandidatetype-enum" class="tocxref"><span class="secno">4.8.1.4 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCIceCandidateType" data-dfn-for=""><code>RTCIceCandidateType</code></span> Enum</a></li></ol></li><li class="tocline"><a href="#rtcpeerconnectioniceevent" class="tocxref"><span class="secno">4.8.2 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCPeerConnectionIceEvent" data-dfn-for=""><code>RTCPeerConnectionIceEvent</code></span></a></li><li class="tocline"><a href="#rtcpeerconnectioniceerrorevent" class="tocxref"><span class="secno">4.8.3 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCPeerConnectionIceErrorEvent" data-dfn-for=""><code>RTCPeerConnectionIceErrorEvent</code></span></a></li></ol></li><li class="tocline"><a href="#priority-and-qos-model" class="tocxref"><span class="secno">4.9 </span>Priority and QoS Model</a><ol class="toc"><li class="tocline"><a href="#rtcprioritytype-enum" class="tocxref"><span class="secno">4.9.1 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCPriorityType" data-dfn-for=""><code>RTCPriorityType</code></span> Enum</a></li></ol></li><li class="tocline"><a href="#sec.cert-mgmt" class="tocxref"><span class="secno">4.10 </span>Certificate Management</a><ol class="toc"><li class="tocline"><a href="#rtccertificateexpiration-dictionary" class="tocxref"><span class="secno">4.10.1 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCCertificateExpiration" data-dfn-for=""><code>RTCCertificateExpiration</code></span> Dictionary</a></li><li class="tocline"><a href="#rtccertificate-interface" class="tocxref"><span class="secno">4.10.2 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCCertificate" data-dfn-for=""><code>RTCCertificate</code></span> Interface</a></li></ol></li></ol></li><li class="tocline"><a href="#rtp-media-api" class="tocxref"><span class="secno">5. </span>RTP Media API</a><ol class="toc"><li class="tocline"><a href="#rtcpeerconnection-interface-extensions" class="tocxref"><span class="secno">5.1 </span>RTCPeerConnection Interface Extensions</a><ol class="toc"><li class="tocline"><a href="#processing-remote-mediastreamtracks" class="tocxref"><span class="secno">5.1.1 </span>Processing Remote MediaStreamTracks</a></li></ol></li><li class="tocline"><a href="#rtcrtpsender-interface" class="tocxref"><span class="secno">5.2 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCRtpSender" data-dfn-for=""><code>RTCRtpSender</code></span> Interface</a><ol class="toc"><li class="tocline"><a href="#rtcrtpparameters" class="tocxref"><span class="secno">5.2.1 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCRtpParameters" data-dfn-for=""><code>RTCRtpParameters</code></span> Dictionary</a></li><li class="tocline"><a href="#rtcsendrtpparameters" class="tocxref"><span class="secno">5.2.2 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCRtpSendParameters" data-dfn-for=""><code>RTCRtpSendParameters</code></span> Dictionary</a></li><li class="tocline"><a href="#rtcreceivertpparameters" class="tocxref"><span class="secno">5.2.3 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCRtpReceiveParameters" data-dfn-for=""><code>RTCRtpReceiveParameters</code></span> Dictionary</a></li><li class="tocline"><a href="#rtcrtpcodingparameters" class="tocxref"><span class="secno">5.2.4 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCRtpCodingParameters" data-dfn-for=""><code>RTCRtpCodingParameters</code></span> Dictionary</a></li><li class="tocline"><a href="#rtcrtpdecodingparameters" class="tocxref"><span class="secno">5.2.5 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCRtpDecodingParameters" data-dfn-for=""><code>RTCRtpDecodingParameters</code></span> Dictionary</a></li><li class="tocline"><a href="#rtcrtpencodingparameters" class="tocxref"><span class="secno">5.2.6 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCRtpEncodingParameters" data-dfn-for=""><code>RTCRtpEncodingParameters</code></span> Dictionary</a></li><li class="tocline"><a href="#rtcdtxstatus" class="tocxref"><span class="secno">5.2.7 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCDtxStatus" data-dfn-for=""><code>RTCDtxStatus</code></span> Enum</a></li><li class="tocline"><a href="#rtcdegradationpreference" class="tocxref"><span class="secno">5.2.8 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCDegradationPreference" data-dfn-for=""><code>RTCDegradationPreference</code></span> Enum</a></li><li class="tocline"><a href="#rtcrtcpparameters" class="tocxref"><span class="secno">5.2.9 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCRtcpParameters" data-dfn-for=""><code>RTCRtcpParameters</code></span> Dictionary</a></li><li class="tocline"><a href="#rtcrtpheaderextensionparameters" class="tocxref"><span class="secno">5.2.10 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCRtpHeaderExtensionParameters" data-dfn-for=""><code>RTCRtpHeaderExtensionParameters</code></span> Dictionary</a></li><li class="tocline"><a href="#rtcrtpcodecparameters" class="tocxref"><span class="secno">5.2.11 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCRtpCodecParameters" data-dfn-for=""><code>RTCRtpCodecParameters</code></span> Dictionary</a></li><li class="tocline"><a href="#rtcrtpcapabilities" class="tocxref"><span class="secno">5.2.12 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCRtpCapabilities" data-dfn-for=""><code>RTCRtpCapabilities</code></span> Dictionary</a></li><li class="tocline"><a href="#rtcrtpcodeccapability" class="tocxref"><span class="secno">5.2.13 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCRtpCodecCapability" data-dfn-for=""><code>RTCRtpCodecCapability</code></span> Dictionary</a></li><li class="tocline"><a href="#rtcrtpheaderextensioncapability" class="tocxref"><span class="secno">5.2.14 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCRtpHeaderExtensionCapability" data-dfn-for=""><code>RTCRtpHeaderExtensionCapability</code></span> Dictionary</a></li></ol></li><li class="tocline"><a href="#rtcrtpreceiver-interface" class="tocxref"><span class="secno">5.3 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCRtpReceiver" data-dfn-for=""><code>RTCRtpReceiver</code></span> Interface</a></li><li class="tocline"><a href="#rtcrtptransceiver-interface" class="tocxref"><span class="secno">5.4 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCRtpTransceiver" data-dfn-for=""><code>RTCRtpTransceiver</code></span> Interface</a><ol class="toc"><li class="tocline"><a href="#hold-functionality" class="tocxref"><span class="secno">5.4.1 </span>"Hold" functionality</a></li></ol></li><li class="tocline"><a href="#rtcdtlstransport-interface" class="tocxref"><span class="secno">5.5 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCDtlsTransport" data-dfn-for=""><code>RTCDtlsTransport</code></span> Interface</a><ol class="toc"><li class="tocline"><a href="#rtcdtlsfingerprint" class="tocxref"><span class="secno">5.5.1 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCDtlsFingerprint" data-dfn-for=""><code>RTCDtlsFingerprint</code></span> Dictionary</a></li></ol></li><li class="tocline"><a href="#rtcicetransport" class="tocxref"><span class="secno">5.6 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCIceTransport" data-dfn-for=""><code>RTCIceTransport</code></span> Interface</a><ol class="toc"><li class="tocline"><a href="#rtciceparameters" class="tocxref"><span class="secno">5.6.1 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCIceParameters" data-dfn-for=""><code>RTCIceParameters</code></span> Dictionary</a></li><li class="tocline"><a href="#rtcicecandidatepair" class="tocxref"><span class="secno">5.6.2 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCIceCandidatePair" data-dfn-for=""><code>RTCIceCandidatePair</code></span> Dictionary</a></li><li class="tocline"><a href="#rtcicegathererstate" class="tocxref"><span class="secno">5.6.3 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCIceGathererState" data-dfn-for=""><code>RTCIceGathererState</code></span> Enum</a></li><li class="tocline"><a href="#rtcicetransportstate" class="tocxref"><span class="secno">5.6.4 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCIceTransportState" data-dfn-for=""><code>RTCIceTransportState</code></span> Enum</a></li><li class="tocline"><a href="#rtcicerole" class="tocxref"><span class="secno">5.6.5 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCIceRole" data-dfn-for=""><code>RTCIceRole</code></span> Enum</a></li><li class="tocline"><a href="#rtcicecomponent" class="tocxref"><span class="secno">5.6.6 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCIceComponent" data-dfn-for=""><code>RTCIceComponent</code></span> Enum</a></li></ol></li><li class="tocline"><a href="#rtctrackevent" class="tocxref"><span class="secno">5.7 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCTrackEvent" data-dfn-for=""><code>RTCTrackEvent</code></span></a></li></ol></li><li class="tocline"><a href="#peer-to-peer-data-api" class="tocxref"><span class="secno">6. </span>Peer-to-peer Data API</a><ol class="toc"><li class="tocline"><a href="#rtcpeerconnection-interface-extensions-0" class="tocxref"><span class="secno">6.1 </span>RTCPeerConnection Interface Extensions</a><ol class="toc"><li class="tocline"><a href="#rtcsctptransport-interface" class="tocxref"><span class="secno">6.1.1 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCSctpTransport" data-dfn-for=""><code>RTCSctpTransport</code></span> Interface</a><ol class="toc"><li class="tocline"><a href="#sctp-transport-create" class="tocxref"><span class="secno">6.1.1.1 </span>Create an instance</a></li><li class="tocline"><a href="#sctp-transport-update-mms" class="tocxref"><span class="secno">6.1.1.2 </span>Update max message
          size</a></li><li class="tocline"><a href="#sctp-transport-connected" class="tocxref"><span class="secno">6.1.1.3 </span>Connected procedure</a></li></ol></li><li class="tocline"><a href="#rtcsctptransportstate" class="tocxref"><span class="secno">6.1.2 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCSctpTransportState" data-dfn-for=""><code>RTCSctpTransportState</code></span> Enum</a></li></ol></li><li class="tocline"><a href="#rtcdatachannel" class="tocxref"><span class="secno">6.2 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCDataChannel" data-dfn-for=""><code>RTCDataChannel</code></span></a></li><li class="tocline"><a href="#rtcdatachannelevent" class="tocxref"><span class="secno">6.3 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCDataChannelEvent" data-dfn-for=""><code>RTCDataChannelEvent</code></span></a></li><li class="tocline"><a href="#garbage-collection-0" class="tocxref"><span class="secno">6.4 </span>Garbage Collection</a></li></ol></li><li class="tocline"><a href="#peer-to-peer-dtmf" class="tocxref"><span class="secno">7. </span>Peer-to-peer DTMF</a><ol class="toc"><li class="tocline"><a href="#rtcrtpsender-interface-extensions" class="tocxref"><span class="secno">7.1 </span>RTCRtpSender Interface Extensions</a></li><li class="tocline"><a href="#rtcdtmfsender" class="tocxref"><span class="secno">7.2 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCDTMFSender" data-dfn-for=""><code>RTCDTMFSender</code></span></a></li><li class="tocline"><a href="#rtcdtmftonechangeevent" class="tocxref"><span class="secno">7.3 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCDTMFToneChangeEvent" data-dfn-for=""><code>RTCDTMFToneChangeEvent</code></span></a></li></ol></li><li class="tocline"><a href="#sec.stats-model" class="tocxref"><span class="secno">8. </span>Statistics Model</a><ol class="toc"><li class="tocline"><a href="#introduction-0" class="tocxref"><span class="secno">8.1 </span>Introduction</a></li><li class="tocline"><a href="#rtcpeerconnection-interface-extensions-1" class="tocxref"><span class="secno">8.2 </span>RTCPeerConnection Interface Extensions</a></li><li class="tocline"><a href="#rtcstatsreport-object" class="tocxref"><span class="secno">8.3 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCStatsReport" data-dfn-for=""><code>RTCStatsReport</code></span> Object</a></li><li class="tocline"><a href="#rtcstats-dictionary" class="tocxref"><span class="secno">8.4 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCStats" data-dfn-for=""><code>RTCStats</code></span> Dictionary</a></li><li class="tocline"><a href="#rtcstatsevent" class="tocxref"><span class="secno">8.5 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCStatsEvent" data-dfn-for=""><code>RTCStatsEvent</code></span></a></li><li class="tocline"><a href="#the-stats-selection-algorithm" class="tocxref"><span class="secno">8.6 </span>The stats selection algorithm</a></li><li class="tocline"><a href="#mandatory-to-implement-stats" class="tocxref"><span class="secno">8.7 </span>Mandatory To Implement Stats</a></li><li class="tocline"><a href="#getstats-example" class="tocxref"><span class="secno">8.8 </span>GetStats Example</a></li></ol></li><li class="tocline"><a href="#sec.identity-proxy" class="tocxref"><span class="secno">9. </span>Identity</a><ol class="toc"><li class="tocline"><a href="#identity-provider-interaction" class="tocxref"><span class="secno">9.1 </span>Identity Provider Interaction</a><ol class="toc"><li class="tocline"><a href="#sec.identity-proxy-communications" class="tocxref"><span class="secno">9.1.1 </span>Identity Provider
        Selection</a></li><li class="tocline"><a href="#sec.create-identity-proxy" class="tocxref"><span class="secno">9.1.2 </span>Instantiating an IdP Proxy</a><ol class="toc"><li class="tocline"><a href="#sec.implement-idp" class="tocxref"><span class="secno">9.1.2.1 </span>Implementing an IdP Securely</a></li></ol></li></ol></li><li class="tocline"><a href="#sec.register-idp" class="tocxref"><span class="secno">9.2 </span>Registering an IdP Proxy</a><ol class="toc"><li class="tocline"><a href="#interface-exposed-by-identity-providers" class="tocxref"><span class="secno">9.2.1 </span>Interface Exposed by Identity Providers</a></li><li class="tocline"><a href="#identity-assertion-and-validation-results" class="tocxref"><span class="secno">9.2.2 </span>Identity Assertion and Validation Results</a></li></ol></li><li class="tocline"><a href="#sec.identity-proxy-assertion-request" class="tocxref"><span class="secno">9.3 </span>Requesting Identity
      Assertions</a><ol class="toc"><li class="tocline"><a href="#sec.idp-loginneeded" class="tocxref"><span class="secno">9.3.1 </span>User Login Procedure</a></li></ol></li><li class="tocline"><a href="#sec.identity-verify-assertion" class="tocxref"><span class="secno">9.4 </span>Verifying Identity Assertions</a></li><li class="tocline"><a href="#sec.idp-error-handling" class="tocxref"><span class="secno">9.5 </span>IdP Error Handling</a></li><li class="tocline"><a href="#rtcpeerconnection-interface-extensions-2" class="tocxref"><span class="secno">9.6 </span>RTCPeerConnection Interface Extensions</a></li><li class="tocline"><a href="#identity-examples" class="tocxref"><span class="secno">9.7 </span>Identity Examples</a></li></ol></li><li class="tocline"><a href="#media-stream-api-extensions-for-network-use" class="tocxref"><span class="secno">10. </span>Media Stream API Extensions for Network Use</a><ol class="toc"><li class="tocline"><a href="#introduction-1" class="tocxref"><span class="secno">10.1 </span>Introduction</a></li><li class="tocline"><a href="#mediastream-network-use" class="tocxref"><span class="secno">10.2 </span>MediaStream</a><ol class="toc"><li class="tocline"><a href="#id" class="tocxref"><span class="secno">10.2.1 </span>id</a></li></ol></li><li class="tocline"><a href="#mediastreamtrack-network-use" class="tocxref"><span class="secno">10.3 </span>MediaStreamTrack</a><ol class="toc"><li class="tocline"><a href="#mediatracksupportedconstraints-mediatrackcapabilities-mediatrackconstraints-and-mediatracksettings" class="tocxref"><span class="secno">10.3.1 </span>MediaTrackSupportedConstraints, MediaTrackCapabilities,
        MediaTrackConstraints and MediaTrackSettings</a></li></ol></li><li class="tocline"><a href="#isolated-media-streams" class="tocxref"><span class="secno">10.4 </span>Isolated Media Streams</a><ol class="toc"><li class="tocline"><a href="#isolated-track" class="tocxref"><span class="secno">10.4.1 </span>Extended MediaStreamTrack Properties</a></li><li class="tocline"><a href="#isolated-pc" class="tocxref"><span class="secno">10.4.2 </span>Isolated Streams and RTCPeerConnection</a></li><li class="tocline"><a href="#isolation-protection" class="tocxref"><span class="secno">10.4.3 </span>Protection Afforded by Media Isolation</a></li></ol></li></ol></li><li class="tocline"><a href="#examples-and-call-flows" class="tocxref"><span class="secno">11. </span>Examples and Call Flows</a><ol class="toc"><li class="tocline"><a href="#simple-peer-to-peer-example" class="tocxref"><span class="secno">11.1 </span>Simple Peer-to-peer Example</a></li><li class="tocline"><a href="#advanced-peer-to-peer-example-with-warm-up" class="tocxref"><span class="secno">11.2 </span>Advanced Peer-to-peer Example with Warm-up</a></li><li class="tocline"><a href="#peer-to-peer-example-with-media-before-signaling" class="tocxref"><span class="secno">11.3 </span>Peer-to-peer Example with media before signaling</a></li><li class="tocline"><a href="#simulcast-example" class="tocxref"><span class="secno">11.4 </span>Simulcast Example</a></li><li class="tocline"><a href="#peer-to-peer-data-example" class="tocxref"><span class="secno">11.5 </span>Peer-to-peer Data Example</a></li><li class="tocline"><a href="#call-flow-browser-to-browser" class="tocxref"><span class="secno">11.6 </span>Call Flow Browser to Browser</a></li><li class="tocline"><a href="#dtmf-example" class="tocxref"><span class="secno">11.7 </span>DTMF Example</a></li></ol></li><li class="tocline"><a href="#error-handling-0" class="tocxref"><span class="secno">12. </span>Error Handling</a><ol class="toc"><li class="tocline"><a href="#ecmascript-6-terminology" class="tocxref"><span class="secno">12.1 </span>ECMAScript 6 Terminology</a></li><li class="tocline"><a href="#rtcerror-object" class="tocxref"><span class="secno">12.2 </span><span data-dfn-type="dfn">RTCError</span> Object</a><ol class="toc"><li class="tocline"><a href="#rtcerror-constructor" class="tocxref"><span class="secno">12.2.1 </span>RTCError Constructor</a><ol class="toc"><li class="tocline"><a href="#rtcerrordetailtype-enum" class="tocxref"><span class="secno">12.2.1.1 </span><span data-dfn-type="dfn" data-idl="" data-title="RTCErrorDetailType" data-dfn-for=""><code>RTCErrorDetailType</code></span> Enum</a></li><li class="tocline"><a href="#rtcerror-errordetail-message" class="tocxref"><span class="secno">12.2.1.2 </span>RTCError ( errorDetail, message )</a></li></ol></li><li class="tocline"><a href="#properties-of-the-rtcerror-constructor" class="tocxref"><span class="secno">12.2.2 </span>Properties of the RTCError Constructor</a><ol class="toc"><li class="tocline"><a href="#rtcerror-prototype" class="tocxref"><span class="secno">12.2.2.1 </span>RTCError.prototype</a></li></ol></li><li class="tocline"><a href="#properties-of-the-rtcerror-prototype-object" class="tocxref"><span class="secno">12.2.3 </span>Properties of the RTCError Prototype Object</a><ol class="toc"><li class="tocline"><a href="#rtcerror-prototype-constructor" class="tocxref"><span class="secno">12.2.3.1 </span>RTCError.prototype.constructor</a></li><li class="tocline"><a href="#rtcerror-prototype-errordetail" class="tocxref"><span class="secno">12.2.3.2 </span>RTCError.prototype.errorDetail</a></li><li class="tocline"><a href="#rtcerror-prototype-sdplinenumber" class="tocxref"><span class="secno">12.2.3.3 </span>RTCError.prototype.sdpLineNumber</a></li><li class="tocline"><a href="#rtcerror-prototype-httprequeststatuscode" class="tocxref"><span class="secno">12.2.3.4 </span>RTCError.prototype.httpRequestStatusCode</a></li><li class="tocline"><a href="#rtcerror-prototype-sctpcausecode" class="tocxref"><span class="secno">12.2.3.5 </span>RTCError.prototype.sctpCauseCode</a></li><li class="tocline"><a href="#rtcerror-prototype-receivedalert" class="tocxref"><span class="secno">12.2.3.6 </span>RTCError.prototype.receivedAlert</a></li><li class="tocline"><a href="#rtcerror-prototype-sentalert" class="tocxref"><span class="secno">12.2.3.7 </span>RTCError.prototype.sentAlert</a></li><li class="tocline"><a href="#rtcerror-prototype-message" class="tocxref"><span class="secno">12.2.3.8 </span>RTCError.prototype.message</a></li><li class="tocline"><a href="#rtcerror-prototype-name" class="tocxref"><span class="secno">12.2.3.9 </span>RTCError.prototype.name</a></li></ol></li><li class="tocline"><a href="#properties-of-rtcerror-instances" class="tocxref"><span class="secno">12.2.4 </span>Properties of RTCError Instances</a></li></ol></li></ol></li><li class="tocline"><a href="#event-summary" class="tocxref"><span class="secno">13. </span>Event summary</a></li><li class="tocline"><a href="#privacy-and-security-considerations" class="tocxref"><span class="secno">14. </span>Privacy and Security Considerations</a><ol class="toc"><li class="tocline"><a href="#impact-on-same-origin-policy" class="tocxref"><span class="secno">14.1 </span>Impact on same origin policy</a></li><li class="tocline"><a href="#revealing-ip-addresses" class="tocxref"><span class="secno">14.2 </span>Revealing IP addresses</a></li><li class="tocline"><a href="#impact-on-local-network" class="tocxref"><span class="secno">14.3 </span>Impact on local network</a></li><li class="tocline"><a href="#confidentiality-of-communications" class="tocxref"><span class="secno">14.4 </span>Confidentiality of Communications</a></li><li class="tocline"><a href="#persistent-information-exposed-by-webrtc" class="tocxref"><span class="secno">14.5 </span>Persistent information exposed by WebRTC</a></li></ol></li><li class="tocline"><a href="#change-log" class="tocxref"><span class="secno">15. </span>Change Log</a></li><li class="tocline"><a href="#acknowledgements" class="tocxref"><span class="secno">A. </span>Acknowledgements</a></li><li class="tocline"><a href="#references" class="tocxref"><span class="secno">B. </span>References</a><ol class="toc"><li class="tocline"><a href="#normative-references" class="tocxref"><span class="secno">B.1 </span>Normative references</a></li><li class="tocline"><a href="#informative-references" class="tocxref"><span class="secno">B.2 </span>Informative references</a></li></ol></li></ol></nav>
  <section class="informative" id="intro">
    <!--OddPage--><h2 id="x1-introduction"><span class="secno">1. </span>Introduction</h2><p><em>This section is non-normative.</em></p>
    <p>There are a number of facets to peer-to-peer communications and
    video-conferencing in HTML covered by this specification:</p>
    <ul>
      <li>Connecting to remote peers using NAT-traversal technologies such as
      ICE, STUN, and TURN.</li>
      <li>Sending the locally-produced tracks to remote peers and receiving
      tracks from remote peers.</li>
      <li>Sending arbitrary data directly to remote peers.</li>
    </ul>
    <p>This document defines the APIs used for these features. This
    specification is being developed in conjunction with a protocol
    specification developed by the <a href="https://datatracker.ietf.org/wg/rtcweb/">IETF RTCWEB group</a> and an API
    specification to get access to local media devices [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>]
    developed by the <a href="https://www.w3.org/wiki/Media_Capture">Media
    Capture Task Force</a>. An overview of the system can be found in
    [<cite><a class="bibref" href="#bib-RTCWEB-OVERVIEW">RTCWEB-OVERVIEW</a></cite>] and [<cite><a class="bibref" href="#bib-RTCWEB-SECURITY">RTCWEB-SECURITY</a></cite>].</p>
  </section>
  <section id="conformance"><!--OddPage--><h2 id="x2-conformance"><span class="secno">2. </span>Conformance</h2><p>
  As well as sections marked as non-normative, all authoring guidelines, diagrams, examples,
  and notes in this specification are non-normative. Everything else in this specification is
  normative.
</p><p id="respecRFC2119">The key words  <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, <em class="rfc2119">MUST NOT</em>, <em class="rfc2119">SHALL</em>, and <em class="rfc2119">SHOULD</em> are
  to be interpreted as described in [<cite><a class="bibref" href="#bib-RFC2119">RFC2119</a></cite>].
</p>
    <p>This specification defines conformance criteria that apply to a single
    product: the <dfn data-dfn-type="dfn" id="dfn-user-agent">user agent</dfn> that implements the interfaces that it
    contains.</p>
    <p>Conformance requirements phrased as algorithms or specific steps may be
    implemented in any manner, so long as the end result is equivalent. (In
    particular, the algorithms defined in this specification are intended to be
    easy to follow, and not intended to be performant.)</p>
    <p>Implementations that use ECMAScript to implement the APIs defined in
    this specification <em class="rfc2119" title="MUST">MUST</em> implement them in a manner consistent with the
    ECMAScript Bindings defined in the Web IDL specification [<cite><a class="bibref" href="#bib-WEBIDL-1">WEBIDL-1</a></cite>], as
    this specification uses that specification and terminology.</p>
  </section>
  <section id="terminology">
    <!--OddPage--><h2 id="x3-terminology"><span class="secno">3. </span>Terminology</h2>
    <p>The <code><a href="https://www.w3.org/TR/html51/webappapis.html#event-handler">EventHandler</a></code>
    interface, representing a callback used for event handlers, and the
    <code><dfn data-dfn-type="dfn" id="dfn-errorevent"><a href="https://www.w3.org/TR/html51/webappapis.html#errorevent-errorevent">
    ErrorEvent</a></dfn></code> interface are defined in [<cite><a class="bibref" href="#bib-HTML51">HTML51</a></cite>].</p>
    <p>The concepts <dfn data-dfn-type="dfn" id="dfn-queue-a-task"><a href="https://www.w3.org/TR/html51/webappapis.html#queuing">queue a
    task</a></dfn>, <dfn data-dfn-type="dfn" id="dfn-fire-a-simple-event"><a href="https://www.w3.org/TR/html51/infrastructure.html#fire">fire a
    simple event</a></dfn> and <dfn data-dfn-type="dfn" id="dfn-networking-task-source"><a href="https://www.w3.org/TR/html51/webappapis.html#networking-task-source">networking
    task source</a></dfn> are defined in [<cite><a class="bibref" href="#bib-HTML51">HTML51</a></cite>].</p>
    <p>The terms <dfn data-dfn-type="dfn" id="dfn-event">event</dfn>, <dfn data-dfn-type="dfn" id="dfn-event-handlers"><a href="https://www.w3.org/TR/html51/webappapis.html#events-event-handlers">event
    handlers</a></dfn> and <dfn data-dfn-type="dfn" id="dfn-event-handler-event-types"><a href="https://www.w3.org/TR/html51/webappapis.html#event-handler-event-type">event
    handler event types</a></dfn> are defined in [<cite><a class="bibref" href="#bib-HTML51">HTML51</a></cite>].</p>
    <p><code><dfn data-dfn-type="dfn" id="dfn-performance-timeorigin"><a href="https://www.w3.org/TR/hr-time-2/#dom-performance-timeorigin">performance.timeOrigin</a></dfn></code>
    and <code><dfn data-dfn-type="dfn" id="dfn-performance-now"><a href="https://www.w3.org/TR/hr-time-2/#dom-performance-now">performance.now()</a></dfn></code>
    are defined in [<cite><a class="bibref" href="#bib-HIGHRES-TIME">HIGHRES-TIME</a></cite>].</p>
    <p>The terms <dfn data-dfn-type="dfn" id="dfn-mediastream">MediaStream</dfn>, <dfn data-dfn-type="dfn" id="dom-mediastreamtrack" data-idl="" data-title="MediaStreamTrack" data-dfn-for=""><code>MediaStreamTrack</code></dfn>, and
    <dfn data-dfn-type="dfn" id="dom-mediastreamconstraints" data-idl="" data-title="MediaStreamConstraints" data-dfn-for=""><code>MediaStreamConstraints</code></dfn> are defined in [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>].
    Note that <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> is extended in <code><a href="#mediastream-network-use">
    the MediaStream section</a></code> in this document while <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code>
    is extended in <code><a href="#mediastreamtrack-network-use">
    the MediaStreamTrack section</a></code> in this document.</p>
    <p>The term <dfn data-dfn-type="dfn" id="dfn-blob">Blob</dfn> is defined in [<cite><a class="bibref" href="#bib-FILEAPI">FILEAPI</a></cite>].</p>
    <p>The term <dfn data-dfn-type="dfn" id="dfn-media-description">media description</dfn> is defined in [<cite><a class="bibref" href="#bib-RFC4566">RFC4566</a></cite>].</p>
    <p>The term <dfn data-dfn-type="dfn" id="dfn-media-transport">media transport</dfn> is defined in [<cite><a class="bibref" href="#bib-RFC7656">RFC7656</a></cite>].</p>
    <p>The term <dfn data-dfn-type="dfn" id="dfn-generation">generation</dfn> is defined in [<cite><a class="bibref" href="#bib-TRICKLE-ICE">TRICKLE-ICE</a></cite>] Section 2.</p>
    <p>The terms <dfn data-dfn-type="dfn" id="dfn-rtcstatstype"><a href="https://www.w3.org/TR/webrtc-stats/#dom-rtcstatstype">RTCStatsType</a></dfn>, <dfn data-dfn-type="dfn" id="dfn-stats-object"><a href="https://www.w3.org/TR/webrtc-stats/#dfn-stats-object">stats object</a></dfn> and <dfn data-dfn-type="dfn" id="dfn-monitored-object"><a href="https://www.w3.org/TR/webrtc-stats/#dfn-monitored-object">monitored object</a></dfn> are defined in [<cite><a class="bibref" href="#bib-WEBRTC-STATS">WEBRTC-STATS</a></cite>].
    </p><p>When referring to exceptions, the terms <dfn data-dfn-type="dfn" id="dfn-throw"><a href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a></dfn> and
    <dfn data-dfn-type="dfn" id="dfn-create"><a href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">create</a></dfn> are
    defined in [<cite><a class="bibref" href="#bib-WEBIDL-1">WEBIDL-1</a></cite>].</p>
    <p>The term "throw" is used as specified in [<cite><a class="bibref" href="#bib-INFRA">INFRA</a></cite>]: it terminates
      the current processing steps.
    </p>
    <p>The terms <dfn data-lt="fulfill|fulfillment|fulfilled" data-dfn-type="dfn" id="dfn-fulfill">fulfilled</dfn>, <dfn data-lt="reject|rejection|rejecting|rejected" data-dfn-type="dfn" id="dfn-reject">rejected</dfn>, <dfn data-lt="resolve|resolves|resolved" data-dfn-type="dfn" id="dfn-resolve">resolved</dfn>, <dfn data-dfn-type="dfn" id="dfn-pending">pending</dfn> and
    <dfn data-dfn-type="dfn" id="dfn-settled">settled</dfn> used in the context of Promises are defined in
    [<cite><a class="bibref" href="#bib-ECMASCRIPT-6.0">ECMASCRIPT-6.0</a></cite>].</p>
    <p>The terms <dfn data-dfn-type="dfn" id="dfn-bundle">bundle</dfn>, <dfn data-dfn-type="dfn" id="dfn-bundle-only">bundle-only</dfn> and <dfn data-dfn-type="dfn" id="dfn-bundle-policy">bundle-policy</dfn>
    are defined in [<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>].</p>
    <p>The <dfn data-dfn-type="dfn" id="dfn-oauth-client">OAuth Client</dfn> and <dfn data-dfn-type="dfn" id="dfn-authorization-server">Authorization Server</dfn> roles
    are defined in [<cite><a class="bibref" href="#bib-RFC6749">RFC6749</a></cite>] Section 1.1.</p>
  </section>
  <section id="peer-to-peer-connections">
    <!--OddPage--><h2 id="x4-peer-to-peer-connections"><span class="secno">4. </span>Peer-to-peer connections</h2>
    <section id="introduction">
      <h3 id="x4-1-introduction"><span class="secno">4.1 </span>Introduction</h3>
      <p>An <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> instance allows an
      application to establish peer-to-peer communications with another
      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> instance in another browser, or to
      another endpoint implementing the required protocols. Communications are coordinated by the
      exchange of control messages (called a signaling protocol) over a
      signaling channel which is provided by unspecified means, but generally
      by a script in the page via the server, e.g. using
      <code>XMLHttpRequest</code> [<cite><a class="bibref" href="#bib-XMLHttpRequest">XMLHttpRequest</a></cite>] or Web Sockets
      [<cite><a class="bibref" href="#bib-WEBSOCKETS-API">WEBSOCKETS-API</a></cite>].</p>
    </section>
    <section id="configuration">
      <h3 id="x4-2-configuration"><span class="secno">4.2 </span>Configuration</h3>
      <section id="rtcconfiguration-dictionary">
        <h4 id="x4-2-1-rtcconfiguration-dictionary"><span class="secno">4.2.1 </span><dfn data-dfn-type="dfn" id="dom-rtcconfiguration" data-idl="" data-title="RTCConfiguration" data-dfn-for=""><code>RTCConfiguration</code></dfn> Dictionary</h4>
        <p>The <code>RTCConfiguration</code> defines a set of parameters to
        configure how the peer-to-peer communication established via
        <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> is established or
        re-established.</p>
        <div>
          <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcconfiguration" data-idl="" data-title="RTCConfiguration">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code>RTCConfiguration</code></a></span> {
<span class="idlMember" id="idl-def-rtcconfiguration-iceservers" data-idl="" data-title="iceServers" data-dfn-for="rtcconfiguration">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-rtciceserver" class="internalDFN" data-link-type="dfn"><code>RTCIceServer</code></a>&gt;</span>   <span class="idlMemberName"><a data-no-default="" data-link-for="rtcconfiguration" data-lt="" href="#dom-rtcconfiguration-iceservers" class="internalDFN" data-link-type="dfn"><code>iceServers</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcconfiguration-icetransportpolicy" data-idl="" data-title="iceTransportPolicy" data-dfn-for="rtcconfiguration">    <span class="idlMemberType"><a href="#dom-rtcicetransportpolicy" class="internalDFN" data-link-type="dfn"><code>RTCIceTransportPolicy</code></a></span>    <span class="idlMemberName"><a data-no-default="" data-link-for="rtcconfiguration" data-lt="" href="#dom-rtcconfiguration-icetransportpolicy" class="internalDFN" data-link-type="dfn"><code>iceTransportPolicy</code></a></span> = <span class="idlMemberValue">"all"</span>;</span>
<span class="idlMember" id="idl-def-rtcconfiguration-bundlepolicy" data-idl="" data-title="bundlePolicy" data-dfn-for="rtcconfiguration">    <span class="idlMemberType"><a href="#dom-rtcbundlepolicy" class="internalDFN" data-link-type="dfn"><code>RTCBundlePolicy</code></a></span>          <span class="idlMemberName"><a data-no-default="" data-link-for="rtcconfiguration" data-lt="" href="#dom-rtcconfiguration-bundlepolicy" class="internalDFN" data-link-type="dfn"><code>bundlePolicy</code></a></span> = <span class="idlMemberValue">"balanced"</span>;</span>
<span class="idlMember" id="idl-def-rtcconfiguration-rtcpmuxpolicy" data-idl="" data-title="rtcpMuxPolicy" data-dfn-for="rtcconfiguration">    <span class="idlMemberType"><a href="#dom-rtcrtcpmuxpolicy" class="internalDFN" data-link-type="dfn"><code>RTCRtcpMuxPolicy</code></a></span>         <span class="idlMemberName"><a data-no-default="" data-link-for="rtcconfiguration" data-lt="" href="#dom-rtcconfiguration-rtcpmuxpolicy" class="internalDFN" data-link-type="dfn"><code>rtcpMuxPolicy</code></a></span> = <span class="idlMemberValue">"require"</span>;</span>
<span class="idlMember" id="idl-def-rtcconfiguration-peeridentity" data-idl="" data-title="peerIdentity" data-dfn-for="rtcconfiguration">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>                <span class="idlMemberName"><a data-no-default="" data-link-for="rtcconfiguration" data-lt="" href="#dom-rtcconfiguration-peeridentity" class="internalDFN" data-link-type="dfn"><code>peerIdentity</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcconfiguration-certificates" data-idl="" data-title="certificates" data-dfn-for="rtcconfiguration">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-rtccertificate" class="internalDFN" data-link-type="dfn"><code>RTCCertificate</code></a>&gt;</span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcconfiguration" data-lt="" href="#dom-rtcconfiguration-certificates" class="internalDFN" data-link-type="dfn"><code>certificates</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcconfiguration-icecandidatepoolsize" data-idl="" data-title="iceCandidatePoolSize" data-dfn-for="rtcconfiguration">    [<span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#EnforceRange">EnforceRange</a></span></span>]
    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-octet">octet</a></span>                    <span class="idlMemberName"><a data-no-default="" data-link-for="rtcconfiguration" data-lt="" href="#dom-rtcconfiguration-icecandidatepoolsize" class="internalDFN" data-link-type="dfn"><code>iceCandidatePoolSize</code></a></span> = <span class="idlMemberValue">0</span>;</span>
};</span></pre></div>
          <section>
            <h5 id="dictionary-rtcconfiguration-members">Dictionary <a class="idlType internalDFN" href="#dom-rtcconfiguration" data-link-type="dfn"><code>RTCConfiguration</code></a> Members</h5>
            <dl data-link-for="RTCConfiguration" data-dfn-for="RTCConfiguration" class="dictionary-members">
              <dt><dfn data-idl="" data-dfn-for="rtcconfiguration" data-dfn-type="dfn" id="dom-rtcconfiguration-iceservers" data-title="iceServers"><code>iceServers</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#dom-rtciceserver" class="internalDFN" data-link-type="dfn"><code>RTCIceServer</code></a>&gt;</span></dt>
              <dd>
                <p>An array of objects describing servers available to be used
                by ICE, such as STUN and TURN servers.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcconfiguration" data-dfn-type="dfn" id="dom-rtcconfiguration-icetransportpolicy" data-title="iceTransportPolicy"><code>iceTransportPolicy</code></dfn> of type
              <span class="idlMemberType"><a href="#dom-rtcicetransportpolicy" class="internalDFN" data-link-type="dfn"><code>RTCIceTransportPolicy</code></a></span>,
              defaulting to <code>"all"</code></dt>
              <dd>
                <p>Indicates which candidates the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> is allowed
                to use.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcconfiguration" data-dfn-type="dfn" id="dom-rtcconfiguration-bundlepolicy" data-title="bundlePolicy"><code>bundlePolicy</code></dfn> of type <span class="idlMemberType"><a href="#dom-rtcbundlepolicy" class="internalDFN" data-link-type="dfn"><code>RTCBundlePolicy</code></a></span>, defaulting to
              <code>"balanced"</code></dt>
              <dd>
                <p>Indicates which media-bundling policy to use when
                gathering ICE candidates.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcconfiguration" data-dfn-type="dfn" id="dom-rtcconfiguration-rtcpmuxpolicy" data-title="rtcpMuxPolicy"><code>rtcpMuxPolicy</code></dfn> of type <span class="idlMemberType"><a href="#dom-rtcrtcpmuxpolicy" class="internalDFN" data-link-type="dfn"><code>RTCRtcpMuxPolicy</code></a></span>, defaulting to
              <code>"require"</code></dt>
              <dd>
                <p>Indicates which rtcp-mux policy to use when gathering
                ICE candidates.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcconfiguration" data-dfn-type="dfn" id="dom-rtcconfiguration-peeridentity" data-title="peerIdentity"><code>peerIdentity</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>
                <p>Sets the <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer identity</a> for the
                <a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>. The <a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a> will not
                establish a connection to a remote peer unless it can be
                successfully authenticated with the provided name.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcconfiguration" data-dfn-type="dfn" id="dom-rtcconfiguration-certificates" data-title="certificates"><code>certificates</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#dom-rtccertificate" class="internalDFN" data-link-type="dfn"><code>RTCCertificate</code></a>&gt;</span></dt>
              <dd>
                <p>A set of certificates that the
                <a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code><code>RTCPeerConnection</code></code></a> uses to authenticate.</p>
                <p>Valid values for this parameter are created through calls to
                the <a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-generatecertificate" class="internalDFN" data-link-type="dfn"><code><code>generateCertificate</code></code></a>
                function.</p>
                <p>Although any given DTLS connection will use only one
                certificate, this attribute allows the caller to provide
                multiple certificates that support different algorithms. The
                final certificate will be selected based on the DTLS handshake,
                which establishes which certificates are allowed. The
                <code>RTCPeerConnection</code> implementation selects which of
                the certificates is used for a given connection; how
                certificates are selected is outside the scope of this
                specification.</p>
                <p>If this value is absent, then a default set of certificates
                is generated for each <a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code><code>RTCPeerConnection</code></code></a>
                instance.</p>
                <p>This option allows applications to establish key continuity.
                An <code>RTCCertificate</code> can be persisted in
                [<cite><a class="bibref" href="#bib-INDEXEDDB">INDEXEDDB</a></cite>] and reused. Persistence and reuse also avoids the
                cost of key generation.</p>
                <p>The value for this configuration option cannot change after
                its value is initially selected.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcconfiguration" data-dfn-type="dfn" id="dom-rtcconfiguration-icecandidatepoolsize" data-title="iceCandidatePoolSize"><code>iceCandidatePoolSize</code></dfn> of type
              <span class="idlMemberType">octet</span>, defaulting to
              <code>0</code></dt>
              <dd>
                <p>Size of the prefetched ICE pool as defined in
                <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-3.5.4">section 3.5.4.</a> and <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-4.1.1">section 4.1.1.</a>)</span>.</p>
              </dd>
            </dl>
          </section>
        </div>
      </section>
      <section id="rtcicecredentialtype-enum">
        <h4 id="x4-2-2-rtcicecredentialtype-enum"><span class="secno">4.2.2 </span><dfn data-dfn-type="dfn" id="dom-rtcicecredentialtype" data-idl="" data-title="RTCIceCredentialType" data-dfn-for=""><code>RTCIceCredentialType</code></dfn> Enum</h4>
        <div>
          <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtcicecredentialtype" data-idl="" data-title="RTCIceCredentialType">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcicecredentialtype" class="internalDFN" data-link-type="dfn"><code>RTCIceCredentialType</code></a></span> {
    <a href="#dom-rtcicecredentialtype-password" class="idlEnumItem">"password"</a>,
    <a href="#dom-rtcicecredentialtype-oauth" class="idlEnumItem">"oauth"</a>
};</span></pre></div>
          <table data-link-for="RTCIceCredentialType" data-dfn-for="RTCIceCredentialType" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description</th>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcicecredentialtype" data-dfn-type="dfn" id="dom-rtcicecredentialtype-password" data-title="password"><code>password</code></dfn></td>
                <td>The credential is a long-term authentication username and
                password, as described in [<cite><a class="bibref" href="#bib-RFC5389">RFC5389</a></cite>], Section 10.2.
                </td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcicecredentialtype" data-dfn-type="dfn" id="dom-rtcicecredentialtype-oauth" data-title="oauth"><code>oauth</code></dfn></td>
                <td><p>An OAuth 2.0 based authentication method, as described
                in [<cite><a class="bibref" href="#bib-RFC7635">RFC7635</a></cite>].
                </p>
                <p>For OAuth Authentication, the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> requires three
                pieces of credential information. The credential is composed of
                a <code>kid</code>, which the <a href="#dom-rtciceserver" class="internalDFN" data-link-type="dfn"><code>RTCIceServer</code></a>
                <code>username</code> member is used for, and
                <code>macKey</code> and <code> accessToken</code>, which are
                placed in the <a href="#dom-rtcoauthcredential" class="internalDFN" data-link-type="dfn"><code>RTCOAuthCredential</code></a> dictionary.
                </p>
                <div class="note"><div role="heading" class="note-title marker" id="h-note" aria-level="5"><span>Note</span></div><p class="">
                This specification does not define how an application (acting
                as the <a href="#dfn-oauth-client" class="internalDFN" data-link-type="dfn">OAuth Client</a>) obtains the
                <code>accessToken</code>, <code>kid</code> and
                <code>macKey</code> from the <a href="#dfn-authorization-server" class="internalDFN" data-link-type="dfn">Authorization Server</a>, as
                WebRTC only handles the interaction between the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE
                agent</a> and TURN server. For example, the application may use
                the OAuth 2.0 Implicit Grant type, with PoP (Proof-of-Possession)
                Token type, as described in [<cite><a class="bibref" href="#bib-RFC6749">RFC6749</a></cite>] and
                [<cite><a class="bibref" href="#bib-OAUTH-POP-KEY-DISTRIBUTION">OAUTH-POP-KEY-DISTRIBUTION</a></cite>]; an example of this is provided
                in [<cite><a class="bibref" href="#bib-RFC7635">RFC7635</a></cite>], Appendix B.
                </p></div>
                <p>
                The application, acting as the <a href="#dfn-oauth-client" class="internalDFN" data-link-type="dfn">OAuth
                Client</a>, is responsible for refreshing the credential
                information and updating the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> with fresh new
                credentials before the <code>accessToken</code> expires. The
                <a href="#dfn-oauth-client" class="internalDFN" data-link-type="dfn">OAuth Client</a> can use the <a href="#interface-definition"><code>RTCPeerConnection</code></a>
                <a data-lt="setConfiguration" href="#dom-rtcpeerconnection-setconfiguration"><code>
                setConfiguration</code></a> method to periodically refresh the
                TURN credentials.</p>
                <p>The length of the HMAC key
                (<code>RTCOAuthCredential.macKey</code>) <em class="rfc2119" title="MAY">MAY</em> be any integer
                number of bytes greater than 20 (160 bits).</p>
                <div class="note"><div role="heading" class="note-title marker" id="h-note-0" aria-level="5"><span>Note</span></div><p class="">According to [<cite><a class="bibref" href="#bib-RFC7635">RFC7635</a></cite>] Section 4.1, the
                HMAC key <em class="rfc2119" title="MUST">MUST</em> be a symmetric key, as asymmetric keys would
                result in large access tokens which may not fit in a single
                STUN message.
                </p></div>
                <div class="note"><div role="heading" class="note-title marker" id="h-note-1" aria-level="5"><span>Note</span></div><p class="">Currently the STUN/TURN protocols use only SHA-1 and SHA-2
                family hash algorithms for Message Integrity Protection, as
                defined in [<cite><a class="bibref" href="#bib-RFC5389">RFC5389</a></cite>] Section 15.4, and [<cite><a class="bibref" href="#bib-STUN-BIS">STUN-BIS</a></cite>]
                Section 14.6.
                </p></div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
      <section id="rtcoauthcredential-dictionary">
        <h4 id="x4-2-3-rtcoauthcredential-dictionary"><span class="secno">4.2.3 </span><dfn data-dfn-type="dfn" id="dom-rtcoauthcredential" data-idl="" data-title="RTCOAuthCredential" data-dfn-for=""><code>RTCOAuthCredential</code></dfn> Dictionary</h4>
        <p>The <code>RTCOAuthCredential</code> dictionary is used to describe
        the OAuth auth credential information which is used by the STUN/TURN
        client (inside the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>) to authenticate against a STUN/TURN
        server, as described in [<cite><a class="bibref" href="#bib-RFC7635">RFC7635</a></cite>]. Note that the <code>kid</code>
        parameter is not located in this dictionary, but in
        <code>RTCIceServer</code>'s <code>username</code> member.
        </p>
        <div>
          <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcoauthcredential" data-idl="" data-title="RTCOAuthCredential">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcoauthcredential" class="internalDFN" data-link-type="dfn"><code>RTCOAuthCredential</code></a></span> {
<span class="idlMember" id="idl-def-rtcoauthcredential-mackey" data-idl="" data-title="macKey" data-dfn-for="rtcoauthcredential">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcoauthcredential" data-lt="" href="#dom-rtcoauthcredential-mackey" class="internalDFN" data-link-type="dfn"><code>macKey</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcoauthcredential-accesstoken" data-idl="" data-title="accessToken" data-dfn-for="rtcoauthcredential">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcoauthcredential" data-lt="" href="#dom-rtcoauthcredential-accesstoken" class="internalDFN" data-link-type="dfn"><code>accessToken</code></a></span>;</span>
};</span></pre></div>
          <section>
            <h5 id="dictionary-rtcoauthcredential-members">Dictionary <a class="idlType internalDFN" href="#dom-rtcoauthcredential" data-link-type="dfn"><code>RTCOAuthCredential</code></a> Members
            </h5>
            <dl data-link-for="RTCOAuthCredential" data-dfn-for="RTCOAuthCredential" class="dictionary-members">
              <dt><dfn data-idl="" data-dfn-for="rtcoauthcredential" data-dfn-type="dfn" id="dom-rtcoauthcredential-mackey" data-title="macKey"><code>macKey</code></dfn> of type <span class="idlMemberType">DOMString</span>, required</dt>
              <dd>
                <p>The "mac_key", as described in [<cite><a class="bibref" href="#bib-RFC7635">RFC7635</a></cite>], Section 6.2, in
                a base64-url encoded format. It is used in STUN message
                integrity hash calculation (as the password is used in password
                based authentication). Note that the OAuth response "key"
                parameter is a JSON Web Key (JWK) or a JWK encrypted with a JWE
                format. Also note that this is the only OAuth parameter whose
                value is not used directly, but must be extracted from the "k"
                parameter value from the JWK, which contains the needed
                base64-encoded "mac_key".</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcoauthcredential" data-dfn-type="dfn" id="dom-rtcoauthcredential-accesstoken" data-title="accessToken"><code>accessToken</code></dfn> of type <span class="idlMemberType">DOMString</span>, required</dt>
              <dd>
                <p>The "access_token", as described in [<cite><a class="bibref" href="#bib-RFC7635">RFC7635</a></cite>], Section
                6.2, in a base64-encoded format. This is an encrypted
                self-contained token that is opaque to the application.
                Authenticated encryption is used for message encryption and
                integrity protection. The access token contains a non-encrypted
                nonce value, which is used by the Authorization Server for unique
                mac_key generation. The second part of the token is protected
                by Authenticated Encryption. It contains the mac_key, a
                timestamp and a lifetime. The timestamp combined with lifetime
                provides expiry information; this information describes the
                time window during which the token credential is valid and
                accepted by the TURN server.
                </p>
              </dd>
           </dl>
          </section>
        </div>
        <p>An example of an RTCOAuthCredential dictionary is:</p>
        <div class="example"><div class="example-title marker"><span>Example 1</span></div><pre class="highlight hljs css" aria-busy="false">
{
  <span class="hljs-attribute">macKey</span>: <span class="hljs-string">'WmtzanB3ZW9peFhtdm42NzUzNG0='</span>,
  accessToken: <span class="hljs-string">'AAwg3kPHWPfvk9bDFL936wYvkoctMADzQ5VhNDgeMR3+ZlZ35byg972fW8QjpEl7bx91YLBPFsIhsxloWcXPhA=='</span>
}
        </pre></div>
      </section>
      <section id="rtciceserver-dictionary">
         <h4 id="x4-2-4-rtciceserver-dictionary"><span class="secno">4.2.4 </span><dfn data-dfn-type="dfn" id="dom-rtciceserver" data-idl="" data-title="RTCIceServer" data-dfn-for=""><code>RTCIceServer</code></dfn> Dictionary</h4>
        <p>The <code>RTCIceServer</code> dictionary is used to describe the
        STUN and TURN servers that can be used by the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> to
        establish a connection with a peer.</p>
        <div>
          <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtciceserver" data-idl="" data-title="RTCIceServer">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtciceserver" class="internalDFN" data-link-type="dfn"><code>RTCIceServer</code></a></span> {
<span class="idlMember" id="idl-def-rtciceserver-urls" data-idl="" data-title="urls" data-dfn-for="rtciceserver">    required <span class="idlMemberType">(<a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a> or <a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>&gt;)</span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtciceserver" data-lt="" href="#dom-rtciceserver-urls" class="internalDFN" data-link-type="dfn"><code>urls</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtciceserver-username" data-idl="" data-title="username" data-dfn-for="rtciceserver">             <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>                          <span class="idlMemberName"><a data-no-default="" data-link-for="rtciceserver" data-lt="" href="#dom-rtciceserver-username" class="internalDFN" data-link-type="dfn"><code>username</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtciceserver-credential" data-idl="" data-title="credential" data-dfn-for="rtciceserver">             <span class="idlMemberType">(<a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a> or <a href="#dom-rtcoauthcredential" class="internalDFN" data-link-type="dfn"><code>RTCOAuthCredential</code></a>)</span>  <span class="idlMemberName"><a data-no-default="" data-link-for="rtciceserver" data-lt="" href="#dom-rtciceserver-credential" class="internalDFN" data-link-type="dfn"><code>credential</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtciceserver-credentialtype" data-idl="" data-title="credentialType" data-dfn-for="rtciceserver">             <span class="idlMemberType"><a href="#dom-rtcicecredentialtype" class="internalDFN" data-link-type="dfn"><code>RTCIceCredentialType</code></a></span>               <span class="idlMemberName"><a data-no-default="" data-link-for="rtciceserver" data-lt="" href="#dom-rtciceserver-credentialtype" class="internalDFN" data-link-type="dfn"><code>credentialType</code></a></span> = <span class="idlMemberValue">"password"</span>;</span>
};</span></pre></div>
          <section>
            <h5 id="dictionary-rtciceserver-members">Dictionary <a class="idlType internalDFN" href="#dom-rtciceserver" data-link-type="dfn"><code>RTCIceServer</code></a> Members</h5>
            <dl data-link-for="RTCIceServer" data-dfn-for="RTCIceServer" class="dictionary-members">
              <dt><dfn data-idl="" data-dfn-for="rtciceserver" data-dfn-type="dfn" id="dom-rtciceserver-urls" data-title="urls"><code>urls</code></dfn> of type <span class="idlMemberType">(DOMString or
              sequence&lt;DOMString&gt;)</span>, required</dt>
              <dd>
                <p>STUN or TURN URI(s) as defined in [<cite><a class="bibref" href="#bib-RFC7064">RFC7064</a></cite>] and
                [<cite><a class="bibref" href="#bib-RFC7065">RFC7065</a></cite>] or other URI types.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtciceserver" data-dfn-type="dfn" id="dom-rtciceserver-username" data-title="username"><code>username</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>
                <p>If this <code><a href="#dom-rtciceserver" class="internalDFN" data-link-type="dfn"><code>RTCIceServer</code></a></code> object represents a
                TURN server, and <code>credentialType</code> is
                <code>"password"</code>, then this attribute specifies the
                username to use with that TURN server.</p>
                <p>If this <code><a href="#dom-rtciceserver" class="internalDFN" data-link-type="dfn"><code>RTCIceServer</code></a></code> object represents a
                TURN server, and <code>credentialType</code> is
                <code>"oauth"</code>, then this attribute specifies the Key ID
                (<code>kid</code>) of the shared symmetric key, which is shared
                between the TURN server and the Authorization Server, as described
                in [<cite><a class="bibref" href="#bib-RFC7635">RFC7635</a></cite>]. It is an ephemeral and unique key identifier.
                The <code>kid</code> allows the TURN server to select the
                appropriate keying material for decryption of the Access-Token,
                so the key identified by this <code>kid</code> is used in the
                Authenticated Encryption of the "access_token". The
                <code>kid</code> value is equal with the OAuth response "kid"
                parameter, as defined in [<cite><a class="bibref" href="#bib-RFC7515">RFC7515</a></cite>] Section 4.1.4.
              </p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtciceserver" data-dfn-type="dfn" id="dom-rtciceserver-credential" data-title="credential"><code>credential</code></dfn> of type <span class="idlMemberType">(DOMString or <a href="#dom-rtcoauthcredential" class="internalDFN" data-link-type="dfn"><code>RTCOAuthCredential</code></a>)
              </span></dt>
              <dd>
                <p>If this <code><a href="#dom-rtciceserver" class="internalDFN" data-link-type="dfn"><code>RTCIceServer</code></a></code> object represents a
                TURN server, then this attribute specifies the credential to
                use with that TURN server.</p>
                <p>If <code>credentialType</code> is <code>"password"</code>,
                <code>credential</code> is a DOMString, and represents a
                long-term authentication password, as described in
                [<cite><a class="bibref" href="#bib-RFC5389">RFC5389</a></cite>], Section 10.2.</p>
                <p>If <code>credentialType</code> is <code>"oauth"</code>,
                <code>credential</code> is an <a href="#dom-rtcoauthcredential" class="internalDFN" data-link-type="dfn"><code>RTCOAuthCredential</code></a>, which
                contains the OAuth access token and MAC key.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtciceserver" data-dfn-type="dfn" id="dom-rtciceserver-credentialtype" data-title="credentialType"><code>credentialType</code></dfn> of type <span class="idlMemberType"><a href="#dom-rtcicecredentialtype" class="internalDFN" data-link-type="dfn"><code>RTCIceCredentialType</code></a></span>, defaulting to
              <code>"password"</code></dt>
              <dd>
                <p>If this <code><a href="#dom-rtciceserver" class="internalDFN" data-link-type="dfn"><code>RTCIceServer</code></a></code> object represents a
                TURN server, then this attribute specifies how
                <var>credential</var> should be used when that TURN server
                requests authorization.</p>
              </dd>
            </dl>
          </section>
        </div>
        <p>An example array of RTCIceServer objects is:</p>
        <div class="example"><div class="example-title marker"><span>Example 2</span></div><pre class="highlight hljs javascript" aria-busy="false">
[
  {<span class="hljs-attr">urls</span>: <span class="hljs-string">'stun:stun1.example.net'</span>},
  {<span class="hljs-attr">urls</span>: [<span class="hljs-string">'turns:turn.example.org'</span>, <span class="hljs-string">'turn:turn.example.net'</span>],
    <span class="hljs-attr">username</span>: <span class="hljs-string">'user'</span>,
    <span class="hljs-attr">credential</span>: <span class="hljs-string">'myPassword'</span>,
    <span class="hljs-attr">credentialType</span>: <span class="hljs-string">'password'</span>},
  {<span class="hljs-attr">urls</span>: <span class="hljs-string">'turns:turn2.example.net'</span>,
    <span class="hljs-attr">username</span>: <span class="hljs-string">'22BIjxU93h/IgwEb'</span>,
    <span class="hljs-attr">credential</span>: {
      <span class="hljs-attr">macKey</span>: <span class="hljs-string">'WmtzanB3ZW9peFhtdm42NzUzNG0='</span>,
      <span class="hljs-attr">accessToken</span>: <span class="hljs-string">'AAwg3kPHWPfvk9bDFL936wYvkoctMADzQ5VhNDgeMR3+ZlZ35byg972fW8QjpEl7bx91YLBPFsIhsxloWcXPhA=='</span>
    },
    <span class="hljs-attr">credentialType</span>: <span class="hljs-string">'oauth'</span>}
];
        </pre></div>
      </section>
      <section id="rtcicetransportpolicy-enum">
        <h4 id="x4-2-5-rtcicetransportpolicy-enum"><span class="secno">4.2.5 </span><dfn data-dfn-type="dfn" id="dom-rtcicetransportpolicy" data-idl="" data-title="RTCIceTransportPolicy" data-dfn-for=""><code>RTCIceTransportPolicy</code></dfn> Enum</h4>
        <p>As described in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-4.1.1">section 4.1.1.</a>)</span>, if the
        <a data-link-for="RTCConfiguration" href="#dom-rtcconfiguration-icetransportpolicy" class="internalDFN" data-link-type="dfn"><code>iceTransportPolicy</code></a> member of
        the <code>RTCConfiguration</code> is specified, it defines the
        <span>ICE candidate policy
        [<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-3.5.3">section 3.5.3.</a>)</span> the browser uses to surface the permitted candidates
        to the application; only these candidates will be used for connectivity
        checks.</p>
        <div>
          <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtcicetransportpolicy" data-idl="" data-title="RTCIceTransportPolicy">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcicetransportpolicy" class="internalDFN" data-link-type="dfn"><code>RTCIceTransportPolicy</code></a></span> {
    <a href="#dom-rtcicetransportpolicy-relay" class="idlEnumItem">"relay"</a>,
    <a href="#dom-rtcicetransportpolicy-all" class="idlEnumItem">"all"</a>
};</span></pre></div>
          <table data-link-for="RTCIceTransportPolicy" data-dfn-for="RTCIceTransportPolicy" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description (non-normative)</th>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcicetransportpolicy" data-dfn-type="dfn" id="dom-rtcicetransportpolicy-relay" data-title="relay"><code>relay</code></dfn></td>
                <td>
                  <p>
                    The <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> uses only media relay candidates
                    such as candidates passing through a TURN server.
                  </p>
                  <div class="note"><div role="heading" class="note-title marker" id="h-note-2" aria-level="5"><span>Note</span></div><div class="">
                    This can be used to prevent the remote endpoint from learning
                    the user's IP addresses, which may be desired in certain
                    use cases. For example, in a "call"-based application, the
                    application may want to prevent an unknown caller from
                    learning the callee's IP addresses until the callee has
                    consented in some way.
                  </div></div>
                </td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcicetransportpolicy" data-dfn-type="dfn" id="dom-rtcicetransportpolicy-all" data-title="all"><code>all</code></dfn></td>
                <td>
                  <p>
                    The <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> can use any type of candidate when
                    this value is specified.
                  </p>
                  <div class="note"><div role="heading" class="note-title marker" id="h-note-3" aria-level="5"><span>Note</span></div><div class="">
                    The implementation can still use its own candidate
                    filtering policy in order to limit the IP addresses exposed
                    to the application, as noted in the description of
                    <code>RTCIceCandidate.<a data-link-for="RTCIceCandidate" href="#dom-rtcicecandidate-ip" class="internalDFN" data-link-type="dfn"><code>ip</code></a></code>.
                  </div></div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
      <section id="rtcbundlepolicy-enum">
        <h4 id="x4-2-6-rtcbundlepolicy-enum"><span class="secno">4.2.6 </span><dfn data-dfn-type="dfn" id="dom-rtcbundlepolicy" data-idl="" data-title="RTCBundlePolicy" data-dfn-for=""><code>RTCBundlePolicy</code></dfn> Enum</h4>
        <p>As described in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-4.1.1">section 4.1.1.</a>)</span>,
        bundle policy affects which media tracks are negotiated if the remote
        endpoint is not bundle-aware, and what ICE candidates are gathered. If
        the remote endpoint is bundle-aware, all media tracks and data channels
        are bundled onto the same transport.</p>
        <div>
          <div><pre class="def idl" id="target-bundle-policy"><span class="idlEnum" id="idl-def-rtcbundlepolicy" data-idl="" data-title="RTCBundlePolicy">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcbundlepolicy" class="internalDFN" data-link-type="dfn"><code>RTCBundlePolicy</code></a></span> {
    <a href="#dom-rtcbundlepolicy-balanced" class="idlEnumItem">"balanced"</a>,
    <a href="#dom-rtcbundlepolicy-max-compat" class="idlEnumItem">"max-compat"</a>,
    <a href="#dom-rtcbundlepolicy-max-bundle" class="idlEnumItem">"max-bundle"</a>
};</span></pre></div>
          <table data-link-for="RTCBundlePolicy" data-dfn-for="RTCBundlePolicy" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description (non-normative)</th>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcbundlepolicy" data-dfn-type="dfn" id="dom-rtcbundlepolicy-balanced" data-title="balanced"><code>balanced</code></dfn></td>
                <td>Gather ICE candidates for each media type in use (audio,
                video, and data). If the remote endpoint is not bundle-aware,
                negotiate only one audio and video track on separate
                transports.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcbundlepolicy" data-dfn-type="dfn" id="dom-rtcbundlepolicy-max-compat" data-title="max-compat"><code>max-compat</code></dfn></td>
                <td>Gather ICE candidates for each track. If the remote
                endpoint is not bundle-aware, negotiate all media tracks on
                separate transports.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcbundlepolicy" data-dfn-type="dfn" id="dom-rtcbundlepolicy-max-bundle" data-title="max-bundle"><code>max-bundle</code></dfn></td>
                <td>Gather ICE candidates for only one track. If the remote
                endpoint is not bundle-aware, negotiate only one media
                track.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
      <section id="rtcrtcpmuxpolicy-enum">
        <h4 id="x4-2-7-rtcrtcpmuxpolicy-enum"><span class="secno">4.2.7 </span><dfn data-dfn-type="dfn" id="dom-rtcrtcpmuxpolicy" data-idl="" data-title="RTCRtcpMuxPolicy" data-dfn-for=""><code>RTCRtcpMuxPolicy</code></dfn> Enum</h4>
        <p>As described in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-4.1.1">section 4.1.1.</a>)</span>, the
        RtcpMuxPolicy affects what ICE candidates are gathered to support
        non-multiplexed RTCP.</p>
        <div>
          <div><pre class="def idl" id="target-rtcp-mux-policy"><span class="idlEnum" id="idl-def-rtcrtcpmuxpolicy" data-idl="" data-title="RTCRtcpMuxPolicy">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtcpmuxpolicy" class="internalDFN" data-link-type="dfn"><code>RTCRtcpMuxPolicy</code></a></span> {
<span class="idlSectionComment">    // At risk due to lack of implementers' interest.</span>
    <a href="#dom-rtcrtcpmuxpolicy-negotiate" class="idlEnumItem">"negotiate"</a>,
    <a href="#dom-rtcrtcpmuxpolicy-require" class="idlEnumItem">"require"</a>
};</span></pre></div>
          <table data-link-for="RTCRtcpMuxPolicy" data-dfn-for="RTCRtcpMuxPolicy" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description (non-normative)</th>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcrtcpmuxpolicy" data-dfn-type="dfn" id="dom-rtcrtcpmuxpolicy-negotiate" data-title="negotiate"><code>negotiate</code></dfn></td>
                <td>Gather ICE candidates for both RTP and RTCP candidates. If
                the remote-endpoint is capable of multiplexing RTCP, multiplex
                RTCP on the RTP candidates. If it is not, use both the RTP and
                RTCP candidates separately. Note that, as stated in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-4.1.1">section 4.1.1.</a>)</span>, the user agent
                <em class="rfc2119" title="MAY">MAY</em> not implement non-multiplexed RTCP, in which case it will
                reject attempts to construct an <a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a> with the
                <code>negotiate</code> policy.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcrtcpmuxpolicy" data-dfn-type="dfn" id="dom-rtcrtcpmuxpolicy-require" data-title="require"><code>require</code></dfn></td>
                <td>Gather ICE candidates only for RTP and multiplex RTCP on
                the RTP candidates. If the remote endpoint is not capable of
                rtcp-mux, session negotiation will fail.</td>
              </tr>
            </tbody>
          </table>
          <div class="issue atrisk" id="issue-1"><div role="heading" class="issue-title marker" id="h-issue" aria-level="5"><span>Feature at Risk 1</span></div><div class="atrisk">
            <p>Aspects of this specification supporting non-multiplexed RTP/RTCP are marked
              as features at risk, since there is no clear commitment from implementers.
              This includes:</p>
            <ol>
              <li>The value <code>negotiate</code>, since there is no clear commitment
                from implementers for the behavior associated with this.</li>
              <li>Support for the <code>rtcpTransport</code> attribute within the
                <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> and <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code>.</li>
            </ol>
          </div></div>
        </div>
      </section>
      <section id="offer-answer-options">
        <h4 id="x4-2-8-offer-answer-options"><span class="secno">4.2.8 </span>Offer/Answer Options</h4>
        <p>These dictionaries describe the options that can be used to control
        the offer/answer creation process.</p>
        <div>
          <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcofferansweroptions" data-idl="" data-title="RTCOfferAnswerOptions">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcofferansweroptions" class="internalDFN" data-link-type="dfn"><code>RTCOfferAnswerOptions</code></a></span> {
<span class="idlMember" id="idl-def-rtcofferansweroptions-voiceactivitydetection" data-idl="" data-title="voiceActivityDetection" data-dfn-for="rtcofferansweroptions">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcofferansweroptions" data-lt="" href="#dom-rtcofferansweroptions-voiceactivitydetection" class="internalDFN" data-link-type="dfn"><code>voiceActivityDetection</code></a></span> = <span class="idlMemberValue">true</span>;</span>
};</span></pre></div>
          <section>
            <h5 id="dictionary-rtcofferansweroptions-members">Dictionary <dfn data-dfn-type="dfn" id="dom-rtcofferansweroptions" data-idl="" data-title="RTCOfferAnswerOptions" data-dfn-for=""><code>RTCOfferAnswerOptions</code></dfn>
            Members</h5>
            <dl data-link-for="RTCOfferAnswerOptions" data-dfn-for="RTCOfferAnswerOptions" class="dictionary-members">
              <dt><dfn data-idl="" data-dfn-for="rtcofferansweroptions" data-dfn-type="dfn" id="dom-rtcofferansweroptions-voiceactivitydetection" data-title="voiceActivityDetection"><code>voiceActivityDetection</code></dfn> of type
              <span class="idlMemberType">boolean</span>, defaulting to
              <code>true</code></dt>
              <dd>
                <p>Many codecs and systems are capable of detecting "silence"
                and changing their behavior in this case by doing things such
                as not transmitting any media. In many cases, such as when
                dealing with emergency calling or sounds other than spoken
                voice, it is desirable to be able to turn off this behavior.
                This option allows the application to provide information about
                whether it wishes this type of processing enabled or
                disabled.</p>
              </dd>
            </dl>
          </section>
        </div>
        <div>
          <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcofferoptions" data-idl="" data-title="RTCOfferOptions">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcofferoptions" class="internalDFN" data-link-type="dfn"><code>RTCOfferOptions</code></a></span> : <span class="idlSuperclass"><a href="#dom-rtcofferansweroptions" class="internalDFN" data-link-type="dfn"><code>RTCOfferAnswerOptions</code></a></span> {
<span class="idlMember" id="idl-def-rtcofferoptions-icerestart" data-idl="" data-title="iceRestart" data-dfn-for="rtcofferoptions">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcofferoptions" data-lt="" href="#dom-rtcofferoptions-icerestart" class="internalDFN" data-link-type="dfn"><code>iceRestart</code></a></span> = <span class="idlMemberValue">false</span>;</span>
};</span></pre></div>
          <section>
            <h5 id="dictionary-rtcofferoptions-members">Dictionary <dfn data-dfn-type="dfn" id="dom-rtcofferoptions" data-idl="" data-title="RTCOfferOptions" data-dfn-for=""><code>RTCOfferOptions</code></dfn> Members</h5>
            <dl data-link-for="RTCOfferOptions" data-dfn-for="RTCOfferOptions" class="dictionary-members">
              <dt><dfn data-idl="" data-dfn-for="rtcofferoptions" data-dfn-type="dfn" id="dom-rtcofferoptions-icerestart" data-title="iceRestart"><code>iceRestart</code></dfn> of type <span class="idlMemberType">boolean</span>, defaulting to
              <code>false</code></dt>
              <dd>
                <p>When the value of this dictionary member is true, the
                generated description will have ICE credentials that are
                different from the current credentials (as visible in the
                <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-localdescription" class="internalDFN" data-link-type="dfn"><code>localDescription</code></a></code> attribute's
                SDP). Applying the generated description will restart ICE, as
                described in section 9.1.1.1 of [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>].</p>
                <p>When the value of this dictionary member is false, and the
                <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-localdescription" class="internalDFN" data-link-type="dfn"><code>localDescription</code></a></code> attribute has
                valid ICE credentials, the generated description will have the
                same ICE credentials as the current value from the
                <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-localdescription" class="internalDFN" data-link-type="dfn"><code>localDescription</code></a></code> attribute.</p>
              </dd>
            </dl>
          </section>
        </div>
        <div>
          <p>The <dfn data-dfn-type="dfn" id="dom-rtcansweroptions" data-idl="" data-title="RTCAnswerOptions" data-dfn-for=""><code>RTCAnswerOptions</code></dfn> dictionary describe options specific to session description of type <code>answer</code> (none in this version of the specification).</p>
          <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcansweroptions" data-idl="" data-title="RTCAnswerOptions">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcansweroptions" class="internalDFN" data-link-type="dfn"><code>RTCAnswerOptions</code></a></span> : <span class="idlSuperclass"><a href="#dom-rtcofferansweroptions" class="internalDFN" data-link-type="dfn"><code>RTCOfferAnswerOptions</code></a></span> {
};</span></pre></div>
        </div>
      </section>
    </section>
    <section id="state-definitions">
      <h3 id="x4-3-state-definitions"><span class="secno">4.3 </span>State Definitions</h3>
      <section id="rtcsignalingstate-enum">
        <h4 id="x4-3-1-rtcsignalingstate-enum"><span class="secno">4.3.1 </span><dfn data-dfn-type="dfn" id="dom-rtcsignalingstate" data-idl="" data-title="RTCSignalingState" data-dfn-for=""><code>RTCSignalingState</code></dfn> Enum</h4>
        <div>
          <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtcsignalingstate" data-idl="" data-title="RTCSignalingState">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcsignalingstate" class="internalDFN" data-link-type="dfn"><code>RTCSignalingState</code></a></span> {
    <a href="#dom-rtcsignalingstate-stable" class="idlEnumItem">"stable"</a>,
    <a href="#dom-rtcsignalingstate-have-local-offer" class="idlEnumItem">"have-local-offer"</a>,
    <a href="#dom-rtcsignalingstate-have-remote-offer" class="idlEnumItem">"have-remote-offer"</a>,
    <a href="#dom-rtcsignalingstate-have-local-pranswer" class="idlEnumItem">"have-local-pranswer"</a>,
    <a href="#dom-rtcsignalingstate-have-remote-pranswer" class="idlEnumItem">"have-remote-pranswer"</a>,
    <a href="#dom-rtcsignalingstate-closed" class="idlEnumItem">"closed"</a>
};</span></pre></div>
          <table data-link-for="RTCSignalingState" data-dfn-for="RTCSignalingState" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description</th>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcsignalingstate" data-dfn-type="dfn" id="dom-rtcsignalingstate-stable" data-title="stable"><code>stable</code></dfn></td>
                <td>There is no offer­answer exchange in progress. This is
                also the initial state in which case the local and remote
                descriptions are empty.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcsignalingstate" data-dfn-type="dfn" id="dom-rtcsignalingstate-have-local-offer" data-title="have-local-offer"><code>have-local-offer</code></dfn></td>
                <td>A local description, of type <code>"offer"</code>, has been successfully
                applied.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcsignalingstate" data-dfn-type="dfn" id="dom-rtcsignalingstate-have-remote-offer" data-title="have-remote-offer"><code>have-remote-offer</code></dfn></td>
                <td>A remote description, of type <code>"offer"</code>, has been
                successfully applied.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcsignalingstate" data-dfn-type="dfn" id="dom-rtcsignalingstate-have-local-pranswer" data-title="have-local-pranswer"><code>have-local-pranswer</code></dfn></td>
                <td>A remote description of type <code>"offer"</code> has been successfully
                applied and a local description of type <code>"pranswer"</code> has been
                successfully applied.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcsignalingstate" data-dfn-type="dfn" id="dom-rtcsignalingstate-have-remote-pranswer" data-title="have-remote-pranswer"><code>have-remote-pranswer</code></dfn></td>
                <td>A local description of type <code>"offer"</code> has been successfully
                applied and a remote description of type <code>"pranswer"</code> has been
                successfully applied.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcsignalingstate" data-dfn-type="dfn" id="dom-rtcsignalingstate-closed" data-title="closed"><code>closed</code></dfn></td>
                <td>The <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> has been closed;
                its <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is <code>true</code>.</td>
              </tr>
            </tbody>
          </table>
        </div>
        <figure id="fig-non-normative-signalling-state-transitions-diagram">
          <figcaption>Figure <span class="figno">1</span> <span class="fig-title">
            Non-normative signalling state transitions diagram
          </span></figcaption>
        </figure>
        <p>An example set of transitions might be:</p>
        <dl>
          <dt>Caller transition:</dt>
          <dd>
            <ul>
              <li>new RTCPeerConnection(): <code>stable</code></li>
              <li>setLocal(offer): <code>have-local-offer</code></li>
              <li>setRemote(pranswer): <code>have-remote-pranswer</code></li>
              <li>setRemote(answer): <code>stable</code></li>
            </ul>
          </dd>
          <dt>Callee transition:</dt>
          <dd>
            <ul>
              <li>new RTCPeerConnection(): <code>stable</code></li>
              <li>setRemote(offer): <code>have-remote-offer</code></li>
              <li>setLocal(pranswer): <code>have-local-pranswer</code></li>
              <li>setLocal(answer): <code>stable</code></li>
            </ul>
          </dd>
        </dl>
      </section>
      <section id="rtcicegatheringstate-enum">
        <h4 id="x4-3-2-rtcicegatheringstate-enum"><span class="secno">4.3.2 </span><dfn data-dfn-type="dfn" id="dom-rtcicegatheringstate" data-idl="" data-title="RTCIceGatheringState" data-dfn-for=""><code>RTCIceGatheringState</code></dfn> Enum</h4>
        <div>
          <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtcicegatheringstate" data-idl="" data-title="RTCIceGatheringState">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcicegatheringstate" class="internalDFN" data-link-type="dfn"><code>RTCIceGatheringState</code></a></span> {
    <a href="#dom-rtcicegatheringstate-new" class="idlEnumItem">"new"</a>,
    <a href="#dom-rtcicegatheringstate-gathering" class="idlEnumItem">"gathering"</a>,
    <a href="#dom-rtcicegatheringstate-complete" class="idlEnumItem">"complete"</a>
};</span></pre></div>
          <table data-link-for="RTCIceGatheringState" data-dfn-for="RTCIceGatheringState" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description</th>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcicegatheringstate" data-dfn-type="dfn" id="dom-rtcicegatheringstate-new" data-title="new"><code>new</code></dfn></td>
                <td>Any of the <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>s are in the
                <code>"new"</code> gathering state and none of the transports are
                in the <code>"gathering"</code> state, or there are no
                transports.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcicegatheringstate" data-dfn-type="dfn" id="dom-rtcicegatheringstate-gathering" data-title="gathering"><code>gathering</code></dfn></td>
                <td>Any of the <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>s are in the
                <code>"gathering"</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcicegatheringstate" data-dfn-type="dfn" id="dom-rtcicegatheringstate-complete" data-title="complete"><code>complete</code></dfn></td>
                <td>At least one <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> exists,
                and all <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>s are in the
                <code>"completed"</code> gathering state.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
      <section id="rtcpeerconnectionstate-enum">
        <h4 id="x4-3-3-rtcpeerconnectionstate-enum"><span class="secno">4.3.3 </span><dfn data-dfn-type="dfn" id="dom-rtcpeerconnectionstate" data-idl="" data-title="RTCPeerConnectionState" data-dfn-for=""><code>RTCPeerConnectionState</code></dfn> Enum</h4>
        <div>
          <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtcpeerconnectionstate" data-idl="" data-title="RTCPeerConnectionState">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcpeerconnectionstate" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionState</code></a></span> {
    <a href="#dom-rtcpeerconnectionstate-new" class="idlEnumItem">"new"</a>,
    <a href="#dom-rtcpeerconnectionstate-connecting" class="idlEnumItem">"connecting"</a>,
    <a href="#dom-rtcpeerconnectionstate-connected" class="idlEnumItem">"connected"</a>,
    <a href="#dom-rtcpeerconnectionstate-disconnected" class="idlEnumItem">"disconnected"</a>,
    <a href="#dom-rtcpeerconnectionstate-failed" class="idlEnumItem">"failed"</a>,
    <a href="#dom-rtcpeerconnectionstate-closed" class="idlEnumItem">"closed"</a>
};</span></pre></div>
          <table data-link-for="RTCPeerConnectionState" data-dfn-for="RTCPeerConnectionState" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description</th>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcpeerconnectionstate" data-dfn-type="dfn" id="dom-rtcpeerconnectionstate-new" data-title="new"><code>new</code></dfn></td>
                <td>Any of the <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>s or
                <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code>s are in the
                <code>"new"</code> state and none of the transports are in the
                <code>"connecting"</code>, <code>"checking"</code>,
                <code>"failed"</code> or <code>"disconnected"</code> state, or all
                transports are in the <code>"closed"</code> state, or there are
                no transports.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcpeerconnectionstate" data-dfn-type="dfn" id="dom-rtcpeerconnectionstate-connecting" data-title="connecting"><code>connecting</code></dfn></td>
                <td>Any of the <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>s or
                <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code>s are in the
                <code>"connecting"</code> or <code>"checking"</code> state and none
                of them is in the <code>"failed"</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcpeerconnectionstate" data-dfn-type="dfn" id="dom-rtcpeerconnectionstate-connected" data-title="connected"><code>connected</code></dfn></td>
                <td>All <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>s and
                <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code>s are in the
                <code>"connected"</code>, <code>"completed"</code> or
                <code>"closed"</code> state and at least one of them is in the
                <code>"connected"</code> or <code>"completed"</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcpeerconnectionstate" data-dfn-type="dfn" id="dom-rtcpeerconnectionstate-disconnected" data-title="disconnected"><code>disconnected</code></dfn></td>
                <td>Any of the <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>s or
                <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code>s are in the
                <code>"disconnected"</code> state and none of them are in the
                <code>"failed"</code> or <code>"connecting"</code> or
                <code>"checking"</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcpeerconnectionstate" data-dfn-type="dfn" id="dom-rtcpeerconnectionstate-failed" data-title="failed"><code>failed</code></dfn></td>
                <td>Any of the <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>s or
                <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code>s are in a
                <code>"failed"</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcpeerconnectionstate" data-dfn-type="dfn" id="dom-rtcpeerconnectionstate-closed" data-title="closed"><code>closed</code></dfn></td>
                <td>
                  The <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object's
                  <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is <code>true</code>.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
      <section id="rtciceconnectionstate-enum">
        <h4 id="x4-3-4-rtciceconnectionstate-enum"><span class="secno">4.3.4 </span><dfn data-dfn-type="dfn" id="dom-rtciceconnectionstate" data-idl="" data-title="RTCIceConnectionState" data-dfn-for=""><code>RTCIceConnectionState</code></dfn> Enum</h4>
        <div>
          <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtciceconnectionstate" data-idl="" data-title="RTCIceConnectionState">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtciceconnectionstate" class="internalDFN" data-link-type="dfn"><code>RTCIceConnectionState</code></a></span> {
    <a href="#dom-rtciceconnectionstate-new" class="idlEnumItem">"new"</a>,
    <a href="#dom-rtciceconnectionstate-checking" class="idlEnumItem">"checking"</a>,
    <a href="#dom-rtciceconnectionstate-connected" class="idlEnumItem">"connected"</a>,
    <a href="#dom-rtciceconnectionstate-completed" class="idlEnumItem">"completed"</a>,
    <a href="#dom-rtciceconnectionstate-disconnected" class="idlEnumItem">"disconnected"</a>,
    <a href="#dom-rtciceconnectionstate-failed" class="idlEnumItem">"failed"</a>,
    <a href="#dom-rtciceconnectionstate-closed" class="idlEnumItem">"closed"</a>
};</span></pre></div>
          <table data-link-for="RTCIceConnectionState" data-dfn-for="RTCIceConnectionState" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description</th>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtciceconnectionstate" data-dfn-type="dfn" id="dom-rtciceconnectionstate-new" data-title="new"><code>new</code></dfn></td>
                <td>Any of the <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>s are in the
                <code>"new"</code> state and none of them are in the
                <code>"checking"</code>, <code>"disconnected"</code> or
                <code>"failed"</code> state, or all
                <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>s are in the
                <code>"closed"</code> state, or there are no transports.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtciceconnectionstate" data-dfn-type="dfn" id="dom-rtciceconnectionstate-checking" data-title="checking"><code>checking</code></dfn></td>
                <td>Any of the <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>s are in the
                <code>"checking"</code> state and none of them are in the
                <code>"disconnected"</code> or <code>"failed"</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtciceconnectionstate" data-dfn-type="dfn" id="dom-rtciceconnectionstate-connected" data-title="connected"><code>connected</code></dfn></td>
                <td>All <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>s are in the
                <code>"connected"</code>, <code>"completed"</code> or
                <code>"closed"</code> state and at least one of them is in the
                <code>"connected"</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtciceconnectionstate" data-dfn-type="dfn" id="dom-rtciceconnectionstate-completed" data-title="completed"><code>completed</code></dfn></td>
                <td>All <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>s are in the
                <code>"completed"</code> or <code>"closed"</code> state and at
                least one of them is in the <code>"completed"</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtciceconnectionstate" data-dfn-type="dfn" id="dom-rtciceconnectionstate-disconnected" data-title="disconnected"><code>disconnected</code></dfn></td>
                <td>Any of the <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>s are in the
                <code>"disconnected"</code> state and none of them are in the
                <code>"failed"</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtciceconnectionstate" data-dfn-type="dfn" id="dom-rtciceconnectionstate-failed" data-title="failed"><code>failed</code></dfn></td>
                <td>Any of the <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>s are in the
                <code>"failed"</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtciceconnectionstate" data-dfn-type="dfn" id="dom-rtciceconnectionstate-closed" data-title="closed"><code>closed</code></dfn></td>
                <td>
                  The <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object's
                  <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is <code>true</code>.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <p>Note that if an <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> is discarded as
        a result of signaling (e.g. RTCP mux or bundling), or created as a
        result of signaling (e.g. adding a new <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a>), the
        state may advance directly from one state to another.</p>
      </section>
    </section>
    <section id="rtcpeerconnection-interface">
      <h3 id="x4-4-rtcpeerconnection-interface"><span class="secno">4.4 </span>RTCPeerConnection Interface</h3>
      <p>The [<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] specification, as a whole, describes the details of how
      the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> operates. References to
      specific subsections of [<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] are provided as appropriate.</p>
      <section id="operation">
        <h4 id="x4-4-1-operation"><span class="secno">4.4.1 </span>Operation</h4>
        <p>Calling <code>new <a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>(<var>configuration</var>)
        </code> creates an <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object.</p>
        <p><code><var>configuration</var>.servers</code> contains information
        used to find and access the servers used by ICE. The application can
        supply multiple servers of each type, and any TURN server <em class="rfc2119" title="MAY">MAY</em> also be
        used as a STUN server for the purposes of gathering server reflexive
        candidates.</p>
        <p>An <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object has a <dfn data-dfn-type="dfn" id="dfn-signaling-state">signaling
        state</dfn>, a <dfn data-dfn-type="dfn" id="dfn-connection-state">connection state</dfn>, an <dfn data-dfn-type="dfn" id="dfn-ice-gathering-state">ICE gathering
        state</dfn>, and an <dfn data-dfn-type="dfn" id="dfn-ice-connection-state">ICE connection state</dfn>. These are
        initialized when the object is created.</p>

        <p data-link-for="RTCPeerConnection">The ICE protocol implementation of
        an <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> is represented by an <dfn data-dfn-type="dfn" id="dfn-ice-agent">ICE
        agent</dfn> [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>]. Certain <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>
        methods involve interactions with the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>, namely
        <code><a href="#dom-rtcpeerconnection-addicecandidate" class="internalDFN" data-link-type="dfn"><code>addIceCandidate</code></a></code>, <code><a href="#dom-rtcpeerconnection-setconfiguration" class="internalDFN" data-link-type="dfn"><code>setConfiguration</code></a></code>,
        <code><a href="#dom-rtcpeerconnection-setlocaldescription" class="internalDFN" data-link-type="dfn"><code>setLocalDescription</code></a></code>,
        <code><a href="#dom-rtcpeerconnection-setremotedescription" class="internalDFN" data-link-type="dfn"><code>setRemoteDescription</code></a></code> and <code><a href="#dom-rtcpeerconnection-close" class="internalDFN" data-link-type="dfn"><code>close</code></a></code>.
        These interactions are described in the relevant sections in this
        document and in [<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>]. The <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> also provides
        indications to the user agent when the state of its internal
        representation of an <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> changes, as
        described in <a href="#rtcicetransport" class="sec-ref"><span class="secno">5.6</span> <span class="sec-title">RTCIceTransport Interface</span></a>.</p>

        <p>The task source for the tasks listed in this section is the
        <a data-link-type="dfn" href="https://www.w3.org/TR/html51/webappapis.html#networking-task-source">networking task source</a>.</p>

        <section id="constructor">
        <h5 id="x4-4-1-1-constructor"><span class="secno">4.4.1.1 </span>Constructor</h5>
        <p>When the <dfn id="dom-peerconnection" data-dfn-type="dfn"><code>RTCPeerConnection()</code></dfn> constructor
        is invoked, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
        <ol>
          <li>
            <p>If any of the steps enumerated below fails for a reason not
              specified here, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an <code>UnknownError</code>
              with the "message" field set to an appropriate description.
            </p>
          </li>
          <li>
            <p>Let <var>connection</var> be a newly created
            <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object.</p>
          </li>
          <li>
            <p>If the <code>certificates</code> value in
            <var>configuration</var> is non-empty, check that
            the <code>expires</code> on each value is in the future. If a
            certificate has expired or a the [[Origin]] internal slot of
            the certificate does not match the current origin, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an
            <code>InvalidAccessError</code>; otherwise, store the certificates.
            If no <code>certificates</code> value was specified, one or more
            new <code>RTCCertificate</code> instances are generated for use
            with this <code>RTCPeerConnection</code> instance. This <em class="rfc2119" title="MAY">MAY</em> happen
            asynchronously and the value of <code>certificates</code> remains
            undefined for the subsequent steps.</p>
          </li>
          <li>
            <p>If <code><var>configuration</var>.<a data-link-for="RTCConfiguration" href="#dom-rtcconfiguration-rtcpmuxpolicy" class="internalDFN" data-link-type="dfn"><code>rtcpMuxPolicy</code></a></code> is
            <code>"negotiate"</code>, and the user agent does not implement
            non-muxed RTCP, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> a <code>NotSupportedError</code>.</p>
          </li>
          <li>
            <p>Initialize <var>connection</var>'s <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>.</p>
          </li>
          <li>
            <p>Let <var>connection</var> have a <dfn data-dfn-type="dfn" id="dfn-configuration">[[Configuration]]</dfn>
            internal slot. <a href="#set-pc-configuration" class="internalDFN" data-link-type="dfn">Set the configuration</a> specified by
            <var>configuration</var>.</p>
          </li>
          <li>
            <p>Let <var>connection</var> have an <dfn data-dfn-type="dfn" id="dfn-isclosed">[[IsClosed]]</dfn>
            internal slot, initialized to <code>false</code>.</p>
          </li>
          <li>
            <p>Let <var>connection</var> have a <dfn data-dfn-type="dfn" id="dfn-negotiationneeded">[[NegotiationNeeded]]</dfn>
            internal slot, initialized to <code>false</code>.</p>
          </li>
          <li>
            <p>Let <var>connection</var> have an <dfn data-dfn-type="dfn" id="dfn-sctptransport">[[SctpTransport]]</dfn>
            internal slot, initialized to <code>null</code>.</p>
          </li>
          <li>
            <p>Let <var>connection</var> have an <dfn data-dfn-type="dfn" id="dfn-operations">[[Operations]]</dfn>
            internal slot, representing an <a href="#dfn-operations-queue" class="internalDFN" data-link-type="dfn">operations queue</a>, initialized
            to an empty list.</p>
          </li>
          <li>
            <p>Let <var>connection</var> have an <dfn data-dfn-type="dfn" id="dfn-lastoffer">[[LastOffer]]</dfn>
              internal slot, initialized to "".</p>
          </li>
          <li>
            <p>Let <var>connection</var> have an <dfn data-dfn-type="dfn" id="dfn-lastanswer">[[LastAnswer]]</dfn>
              internal slot, initialized to "".</p>
          </li>
          <li>
            <p>Set <var>connection</var>'s <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> to
            <code>"stable"</code>.</p>
          </li>
          <li>
            <p>Set <var>connection</var>'s <a href="#dfn-ice-connection-state" class="internalDFN" data-link-type="dfn">ICE connection state</a> to
            <code>"new"</code>.</p>
          </li>
          <li>
            <p>Set <var>connection</var>'s <a href="#dfn-ice-gathering-state" class="internalDFN" data-link-type="dfn">ICE gathering state</a> to
            <code>"new"</code>.</p>
          </li>
          <li>
            <p>Set <var>connection</var>'s <a href="#dfn-connection-state" class="internalDFN" data-link-type="dfn">connection state</a> to
            <code>"new"</code>.</p>
          </li>
          <li>
            <p>Let <var>connection</var> have a
            <dfn data-dfn-type="dfn" id="dfn-pendinglocaldescription">[[PendingLocalDescription]]</dfn> internal slot, initialized
            to <code>null</code>.</p>
          </li>
          <li>
            <p>Let <var>connection</var> have a
            <dfn data-dfn-type="dfn" id="dfn-currentlocaldescription">[[CurrentLocalDescription]]</dfn> internal slot, initialized
            to <code>null</code>.</p>
          </li>
          <li>
            <p>Let <var>connection</var> have a
            <dfn data-dfn-type="dfn" id="dfn-pendingremotedescription">[[PendingRemoteDescription]]</dfn> internal slot, initialized
            to <code>null</code>.</p>
          </li>
          <li>
            <p>Let <var>connection</var> have a
            <dfn data-dfn-type="dfn" id="dfn-currentremotedescription">[[CurrentRemoteDescription]]</dfn> internal slot, initialized
            to <code>null</code>.</p>
          </li>
          <li>
            <p>Return <var>connection</var>.</p>
          </li>
        </ol>
        </section>

        <section id="enqueue-an-operation">
        <h5 id="x4-4-1-2-enqueue-an-operation"><span class="secno">4.4.1.2 </span>Enqueue an operation</h5>
        <p>An <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object has an
        <dfn data-dfn-type="dfn" id="dfn-operations-queue">operations queue</dfn>, <a href="#dfn-operations" class="internalDFN" data-link-type="dfn">[[Operations]]</a>, which ensures that
        only one asynchronous operation in the queue is executed concurrently.
        If subsequent calls are made while the returned promise of a previous
        call is still not <a href="#dfn-settled" class="internalDFN" data-link-type="dfn">settled</a>, they are added to the queue and executed
        when all the previous calls have finished executing and their promises
        have <a href="#dfn-settled" class="internalDFN" data-link-type="dfn">settled</a>.</p>
        <p>To <dfn data-dfn-type="dfn" id="dfn-enqueue-an-operation">enqueue an operation</dfn> to an
        <a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code><code>RTCPeerConnection</code></code></a> object's operation queue, run
        the following steps:</p>
        <ol>
          <li>
            <p>Let <var>connection</var> be the
            <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object.</p>
          </li>
          <li>
            <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
            <code>true</code>, return a promise <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> with a newly
            <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
            <code>InvalidStateError</code>.</p>
          </li>
          <li>
            <p>Let <var>operation</var> be the operation to be enqueued.</p>
          </li>
          <li>
            <p>Let <var>p</var> be a new promise.</p>
          </li>
          <li>
            <p>Append <var>operation</var> to <a href="#dfn-operations" class="internalDFN" data-link-type="dfn">[[Operations]]</a>.</p>
          </li>
          <li>
            <p>If the length of <a href="#dfn-operations" class="internalDFN" data-link-type="dfn">[[Operations]]</a> is exactly 1, execute
            <var>operation</var>.</p>
          </li>
          <li>
            <p>Upon <a href="#dfn-fulfill" class="internalDFN" data-link-type="dfn">fulfillment</a> or <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejection</a> of the promise returned by the
            <var>operation</var>, run the following steps:</p>
            <ol>
              <li>
                <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
                <code>true</code>, abort these steps.</p>
              </li>
              <li>
                <p>If the promise returned by <var>operation</var> was
                <a href="#dfn-fulfill" class="internalDFN" data-link-type="dfn">fulfilled</a> with a value, <a href="#dfn-fulfill" class="internalDFN" data-link-type="dfn">fulfill</a> <var>p</var> with that
                value.</p>
              </li>
              <li>
                <p>If the promise returned by <var>operation</var> was <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a>
                with a value, <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a> <var>p</var> with that value.</p>
              </li>
              <li>
                <p>Upon <a href="#dfn-fulfill" class="internalDFN" data-link-type="dfn">fulfillment</a> or <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejection</a> of <var>p</var>, execute the
                following steps:</p>
                <ol>
                  <li>
                    <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
                    <code>true</code>, abort these steps.</p>
                  </li>
                  <li>
                    <p>Remove the first element of <a href="#dfn-operations" class="internalDFN" data-link-type="dfn">[[Operations]]</a>.</p>
                  </li>
                  <li>
                    <p>If <a href="#dfn-operations" class="internalDFN" data-link-type="dfn">[[Operations]]</a> is non-empty, execute the
                    operation represented by the first element of
                    <a href="#dfn-operations" class="internalDFN" data-link-type="dfn">[[Operations]]</a>.</p>
                  </li>
                </ol>
              </li>
            </ol>
          </li>
          <li>
            <p>Return <var>p</var>.</p>
          </li>
        </ol>
        </section>

        <section id="update-the-connection-state">
        <h5 id="x4-4-1-3-update-the-connection-state"><span class="secno">4.4.1.3 </span>Update the connection state</h5>
        <p>An <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object has an aggregated
        <a href="#dfn-connection-state" class="internalDFN" data-link-type="dfn">connection state</a>. Whenever the state of an
        <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code> or
        <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> changes or when the
        <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot turns <code>true</code>, the user agent <em class="rfc2119" title="MUST">MUST</em>
        <dfn data-dfn-type="dfn" id="dfn-update-the-connection-state">update the connection state</dfn> by queueing a task that runs the
        following steps:</p>
        <ol>
          <li>
            <p>Let <var>connection</var> be this
            <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object.</p>
          </li>
          <li>
            <p>Let <var>newState</var> be the value of deriving a new state
            value as described by the
            <a href="#dom-rtcpeerconnectionstate" class="internalDFN" data-link-type="dfn"><code><code>RTCPeerConnectionState</code></code></a> enum.</p>
          </li>
          <li>
            <p>If <var>connection</var>'s <a href="#dfn-connection-state" class="internalDFN" data-link-type="dfn">connection state</a> is equal to
            <var>newState</var>, abort these steps.</p>
          </li>
          <li>
            <p>Let <var>connection</var>'s <a href="#dfn-connection-state" class="internalDFN" data-link-type="dfn">connection state</a> be
            <var>newState</var>.</p>
          </li>
          <li>
            <p>Fire a simple event named
            <code><a href="#event-connectionstatechange" class="internalDFN" data-link-type="dfn"><code>connectionstatechange</code></a></code> at
            <var>connection</var>.</p>
          </li>
        </ol>
        </section>

        <section id="update-the-ice-gathering-state">
        <h5 id="x4-4-1-4-update-the-ice-gathering-state"><span class="secno">4.4.1.4 </span>Update the ICE gathering state</h5>
        <p>To <dfn id="update-ice-gathering-state" data-dfn-type="dfn">update the <a href="#dfn-ice-gathering-state" class="internalDFN" data-link-type="dfn">ICE gathering
        state</a></dfn> of an <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> instance
        <var>connection</var>, the user agent <em class="rfc2119" title="MUST">MUST</em> queue a task that runs the
        following steps:</p>
        <ol>
          <li>
            <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
            <code>true</code>, abort these steps.</p>
          </li>
          <li>
            <p>Let <var>newState</var> be the value of deriving a new state
            value as described by the <a href="#dom-rtcicegatheringstate" class="internalDFN" data-link-type="dfn"><code><code>RTCIceGatheringState</code></code></a>
            enum.</p>
          </li>
          <li>
            <p>If <var>connection</var>'s <a href="#dfn-ice-gathering-state" class="internalDFN" data-link-type="dfn">ICE gathering state</a> is equal to
            <var>newState</var>, abort these steps.</p>
          </li>
          <li>
            <p>Set <var>connection</var>'s <a href="#dfn-ice-gathering-state" class="internalDFN" data-link-type="dfn">ice gathering state</a> to
            <var>newState</var>.</p>
          </li>
          <li>
            <p>Fire a simple event named
            <code><a href="#event-icegatheringstatechange" class="internalDFN" data-link-type="dfn"><code>icegatheringstatechange</code></a></code> at
            <var>connection</var>.</p>
          </li>
          <li>
            <p>If <var>newState</var> is <code>"completed"</code>, <a href="#dfn-fire-an-ice-candidate-event" class="internalDFN" data-link-type="dfn">fire an ice candidate event</a>
            named <code><a href="#event-icecandidate" class="internalDFN" data-link-type="dfn"><code>icecandidate</code></a></code> with <code>null</code> at
            <var>connection</var>.</p>
            <div class="note"><div role="heading" class="note-title marker" id="h-note-4" aria-level="6"><span>Note</span></div><div class="">The null candidate event is fired to ensure
            legacy compatibility. New code should monitor the gathering state
            of <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> and/or <code>
            <a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>.</div></div>
          </li>
        </ol>
        </section>

        <section id="update-the-ice-connection-state">
        <h5 id="x4-4-1-5-update-the-ice-connection-state"><span class="secno">4.4.1.5 </span>Update the ICE connection state</h5>
        <p>To <dfn id="update-ice-connection-state" data-dfn-type="dfn">update the <a href="#dfn-ice-connection-state" class="internalDFN" data-link-type="dfn">ICE
        connection state</a></dfn> of an <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>
        instance <var>connection</var>, the user agent <em class="rfc2119" title="MUST">MUST</em> queue a task that
        runs the following steps:</p>
        <ol>
          <li>
            <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
            <code>true</code>, abort these steps.</p>
          </li>
          <li>
            <p>Let <var>newState</var> be the value of deriving a new state
            value as described by the <a href="#dom-rtciceconnectionstate" class="internalDFN" data-link-type="dfn"><code><code>RTCIceConnectionState</code></code></a>
            enum.</p>
          </li>
          <li>
            <p>If <var>connection</var>'s <a href="#dfn-ice-connection-state" class="internalDFN" data-link-type="dfn">ICE connection state</a> is equal
            to <var>newState</var>, abort these steps.</p>
          </li>
          <li>
            <p>Set <var>connection</var>'s <a href="#dfn-ice-connection-state" class="internalDFN" data-link-type="dfn">ice connection state</a> to
            <var>newState</var>.</p>
          </li>
          <li>
            <p>Fire a simple event named
            <code><a href="#event-iceconnectionstatechange" class="internalDFN" data-link-type="dfn"><code>iceconnectionstatechange</code></a></code> at
            <var>connection</var>.</p>
          </li>
        </ol>
        </section>

        <section id="set-the-rtcsessiondescription">
        <h5 id="x4-4-1-6-set-the-rtcsessiondescription"><span class="secno">4.4.1.6 </span>Set the RTCSessionDescription</h5>
        <p>To <dfn id="set-description" data-lt="set the rtcsessiondescription|set an rtcsessiondescription" data-dfn-type="dfn">set an RTCSessionDescription</dfn>
        <var>description</var> on an <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>
        object <var>connection</var>, <a href="#enqueue-an-operation">enqueue</a> the following steps to
        <var>connection</var>'s operation queue:</p>
        <ol>
          <li>
            <p>Let <var>p</var> be a new promise.</p>
          </li>
          <li>
            <p>In parallel, start the process to apply <var>description</var>
            as described in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.5">section 5.5.</a> and <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.6">section 5.6.</a>)</span>.</p>
            <ol>
              <li>
                <p>If the process to apply <var>description</var> fails for any
                reason, then user agent <em class="rfc2119" title="MUST">MUST</em> queue a task that runs the following
                steps:</p>
                <ol>
                  <li>
                    <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
                    <code>true</code>, then abort these steps.</p>
                  </li>
                  <li>
                    <p>If the <var>description</var>'s <code><a data-link-for="RTCSessionDescription" href="#dom-rtcsessiondescription-type" class="internalDFN" data-link-type="dfn"><code>type</code></a></code> is invalid for the
                    current <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> of <var>connection</var>
                    as described in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.5">section 5.5.</a> and <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.6">section 5.6.</a>)</span>,
                    then <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a> <var>p</var> with a newly
                    <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                    <code>InvalidStateError</code> and abort these steps.</p>
                  </li>
                  <li>
                    If <var>description</var> is set as a local description,
                    if <code><var>description</var>.type</code> is
                    <code>offer</code> and <code><var>description</var>.sdp</code>
                    is not equal to <var>connection</var>'s <a href="#dfn-lastoffer" class="internalDFN" data-link-type="dfn">[[LastOffer]]</a> slot,
                    then <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a> <var>p</var> with a newly <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                    <code>InvalidModificationError</code> and abort these steps.
                  </li>
                  <li>
                    <p>If <var>description</var> is set as a local description,
                    if <code><var>description</var>.type</code> is <code>"rollback"</code>
                    and <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> is <code>"stable"</code>
                    then <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a> <var>p</var> with a newly <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                    <code>InvalidStateError</code> and abort these steps.</p>
                  </li>
                  <li>
                    If <var>description</var> is set as a local description,
                    if <code><var>description</var>.type</code> is
                    <code>"answer"</code> or <code>"pranswer"</code> and
                    <code><var>description</var>.sdp</code> is not equal
                    to <var>connection</var>'s <a href="#dfn-lastanswer" class="internalDFN" data-link-type="dfn">[[LastAnswer]]</a> slot,
                    then <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a> <var>p</var> with a newly <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                    <code>InvalidModificationError</code> and abort these steps.
                  </li>
                  <li>
                    <p>If the content of <var>description</var> is not
                    valid SDP syntax, then <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a> <var>p</var> with an
                    <code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> (with <code>errorDetail</code>
                    set to "sdp-syntax-error" and the sdpLineNumber
                    attribute set to the line number in the SDP where
                    the syntax error was detected) and abort these steps.</p>
                  </li>
                  <li>
                    <p>If the content of <var>description</var> is invalid,
                    then <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a> <var>p</var> with a newly
                    <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                    <code>InvalidAccessError</code> and abort these steps.</p>
                  </li>
                  <li>
                    <p>For all other errors, <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a> <var>p</var> with a newly
                    <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                    <code>OperationError</code>.</p>
                  </li>
                </ol>
              </li>
              <li>
                <p>If <var>description</var> is applied successfully, the user
                agent <em class="rfc2119" title="MUST">MUST</em> queue a task that runs the following steps:</p>
                <ol>
                  <li>
                    <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
                    <code>true</code>, then abort these steps.</p>
                  </li>
                  <li>
                    <p>If <var>description</var> is set as a local description,
                    then run one of the following steps:</p>
                    <ul>
                      <!-- A) transition stable to haveLocalOffer -->
                      <li>
                        <p>If <var>description</var> is of type <code>"offer"</code>, set
                        <var>connection</var>.<a href="#dfn-pendinglocaldescription" class="internalDFN" data-link-type="dfn">[[PendingLocalDescription]]</a>
                        to a new <code><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></code> object
                        constructed from <var>description</var>, and set
                        <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> to <code>"have-local-offer"</code>.</p>
                      </li>
                      <!-- C) transition haveRemoteOffer or haveLocalProvAnswer to
                      stable -->
                      <li>
                        <p>If <var>description</var> is of type <code>"answer"</code>, then
                        this completes an offer answer negotiation. Set
                        <var>connection</var>.<a href="#dfn-currentlocaldescription" class="internalDFN" data-link-type="dfn">[[CurrentLocalDescription]]</a>
                        to a new <code><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></code> object
                        constructed from <var>description</var>, and set
                        <var>connection</var>.<a href="#dfn-currentremotedescription" class="internalDFN" data-link-type="dfn">[[CurrentRemoteDescription]]</a>
                        to <var>connection</var>.<a href="#dfn-pendingremotedescription" class="internalDFN" data-link-type="dfn">[[PendingRemoteDescription]]</a>.
                        Set both <var>connection</var>.<a href="#dfn-pendingremotedescription" class="internalDFN" data-link-type="dfn">[[PendingRemoteDescription]]</a>
                        and <var>connection</var>.<a href="#dfn-pendinglocaldescription" class="internalDFN" data-link-type="dfn">[[PendingLocalDescription]]</a>
                        to <code>null</code>. Finally set <var>connection</var>'s
                        <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> to <code>"stable"</code>.</p>
                      </li>
                      <!-- B) transition rollback to haveLocalOffer to stable -->
                      <li>
                        <p>If <var>description</var> is of type <code>"rollback"</code>,
                        then this is a rollback. Set
                        <var>connection</var>.<a href="#dfn-pendinglocaldescription" class="internalDFN" data-link-type="dfn">[[PendingLocalDescription]]</a>
                        to <code>null</code>, and set <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> to
                        <code>"stable"</code>.</p>
                      </li>
                      <!-- G) transition haveRemoteOffer to haveLocalProvAnswer -->
                      <li>
                        <p>If <var>description</var> is of type <code>"pranswer"</code>,
                        then set <var>connection</var>.<a href="#dfn-pendinglocaldescription" class="internalDFN" data-link-type="dfn">[[PendingLocalDescription]]</a>
                        to a new <code><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></code> object
                        constructed from <var>description</var>, and set <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a>
                        to <code>"have-local-pranswer"</code>.</p>
                      </li>
                    </ul>
                  </li>
                  <li>
                    <p>Otherwise, if <var>description</var> is set as a remote
                    description, then run one of the following steps:</p>
                    <ul>
                      <li>
                        <p>If <var>description</var> is set as a remote description,
                        if <code><var>description</var>.type</code> is <code>"rollback"</code>
                        and <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> is <code>"stable"</code>
                        then <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a> <var>p</var> with a newly <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                        <code>InvalidStateError</code> and abort these steps.</p>
                      </li>
                      <!-- D) transition stable to haveRemoteOffer -->
                      <li>
                        <p>If <var>description</var> is of type <code>"offer"</code>, set
                        <var>connection</var>.<a href="#dfn-pendingremotedescription" class="internalDFN" data-link-type="dfn">[[PendingRemoteDescription]]</a>
                        attribute to a new <code><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></code>
                        object constructed from <var>description</var>, and set
                        <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> to <code>"have-remote-offer"</code>.</p>
                      </li>
                      <!-- F) transition haveRemoteOffer or haveLocalProvAnswer to
                      stable -->
                      <li>
                        <p>If <var>description</var> is of type <code>"answer"</code>, then
                        this completes an offer answer negotiation. Set
                        <var>connection</var>.<a href="#dfn-currentremotedescription" class="internalDFN" data-link-type="dfn">[[CurrentRemoteDescription]]</a>
                        to a new <code><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></code> object
                        constructed from <var>description</var>, and set
                        <var>connection</var>.<a href="#dfn-currentlocaldescription" class="internalDFN" data-link-type="dfn">[[CurrentLocalDescription]]</a>
                        to <var>connection</var>.<a href="#dfn-pendinglocaldescription" class="internalDFN" data-link-type="dfn">[[PendingLocalDescription]]</a>.
                        Set both <var>connection</var>.<a href="#dfn-pendingremotedescription" class="internalDFN" data-link-type="dfn">[[PendingRemoteDescription]]</a>
                        and <var>connection</var>.<a href="#dfn-pendinglocaldescription" class="internalDFN" data-link-type="dfn">[[PendingLocalDescription]]</a>
                        to <code>null</code>. Finally set <var>connection</var>'s
                        <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> to <code>"stable"</code>.</p>
                      </li>
                      <!-- E) transition rollback to haveRemoteOffer to stable -->
                      <li>
                        <p>If <var>description</var> is of type <code>"rollback"</code>,
                        then this is a rollback. Set
                        <var>connection</var>.<a href="#dfn-pendingremotedescription" class="internalDFN" data-link-type="dfn">[[PendingRemoteDescription]]</a>
                        to <code>null</code>, and set <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> to
                        <code>"stable"</code>.</p>
                      </li>
                      <!-- H) transition haveRemoteOffer to haveLocalProvAnswer -->
                      <li>
                        <p>If <var>description</var> is of type <code>"pranswer"</code>,
                        then set <var>connection</var>.<a href="#dfn-pendingremotedescription" class="internalDFN" data-link-type="dfn">[[PendingRemoteDescription]]</a>
                        to a new <code><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></code> object
                        constructed from <var>description</var> and
                        <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> to <code>"have-remote-pranswer"</code>.</p>
                      </li>
                    </ul>
                  </li>
                  <li>
                    <p>If <var>description</var> is of type <code>"answer"</code>, and it
                    initiates the closure of an existing SCTP association, as
                    defined in [<cite><a class="bibref" href="#bib-SCTP-SDP">SCTP-SDP</a></cite>], Sections 10.3 and 10.4, set the
                    value of <var>connection</var>'s
                    <a href="#dfn-sctptransport" class="internalDFN" data-link-type="dfn">[[SctpTransport]]</a> internal slot to
                    <code>null</code>.</p>
                  </li>
                  <li>
                    <p>If <var>description</var> is of type <code>"answer"</code> or
                      <code>"pranswer"</code>, then run the following steps:</p>
                    <ol>
                      <li>
                        <p>If <var>description</var> initiates the
                        establishment of a new SCTP association, as defined in
                        [<cite><a class="bibref" href="#bib-SCTP-SDP">SCTP-SDP</a></cite>], Sections 10.3 and 10.4, <a href="#dfn-create-an-rtcsctptransport" class="internalDFN" data-link-type="dfn">create an
                        RTCSctpTransport</a> with an initial state of
                        <code>"connecting"</code> and assign the result to the
                        <a href="#dfn-sctptransport" class="internalDFN" data-link-type="dfn">[[SctpTransport]]</a> slot.</p>
                      </li>
                      <li>
                        <p>Otherwise, if an SCTP association is established,
                        but the "max-message-size" SDP attribute is updated,
                        <a href="#dfn-update-the-data-max-message-size" class="internalDFN" data-link-type="dfn">update the data max message size</a> of
                        <var>connection</var>'s <a href="#dfn-sctptransport" class="internalDFN" data-link-type="dfn">[[SctpTransport]]</a>.</p>
                      </li>
                      <li>
                        <p>If <var>description</var> negotiates the DTLS role
                        of the SCTP transport, and there is an
                        <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> with a <code>null</code>
                        <code><a data-link-for="RTCDataChannel" href="#dom-rtcdatachannel-id" class="internalDFN" data-link-type="dfn"><code>id</code></a></code>,
                        then generate an ID according to
                        [<cite><a class="bibref" href="#bib-RTCWEB-DATA-PROTOCOL">RTCWEB-DATA-PROTOCOL</a></cite>]. If no available ID could be
                        generated, then run the following steps:</p>
                        <ol>
                          <li>
                            <p>Let <var>channel</var> be the
                            <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object for which
                            an ID could not be generated.</p>
                          </li>
                          <li>
                            <p>Set <var>channel</var>'s <a href="#dfn-readystate" class="internalDFN" data-link-type="dfn">[[ReadyState]]</a> slot
                            to <code>"closed"</code>.</p>
                          </li>
                          <li>
                            <p>Fire an event named <code><a data-link-for="RTCDataChannel" href="#dfn-error" class="internalDFN" data-link-type="dfn"><code>error</code></a></code> with an
                            <code>OperationError</code> exception at
                            <var>channel</var>.</p>
                          </li>
                          <li>
                            <p>Fire a simple event named
                            <code><a href="#dfn-close" class="internalDFN" data-link-type="dfn"><code>close</code></a></code> at
                            <var>channel</var>.</p>
                          </li>
                        </ol>
                      </li>
                    </ol>
                  </li>
                  <li>
                    <p>Let <var>trackEvents</var>, <var>muteTracks</var>,
                    <var>addList</var>, and <var>removeList</var> be empty
                    lists.</p>
                  </li>
                  <li>
                    <p>If <var>description</var> is set as a local description,
                    then run the following steps:</p>
                    <ol>
                      <li>
                        <p>Run the following steps for each <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a>
                        in <var>description</var>:</p>
                        <ol>
                          <li>
                            <p>If the <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a> is not yet <a href="#dfn-associated" class="internalDFN" data-link-type="dfn">associated</a>
                            with an <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> object then run
                            the following steps:</p>
                            <ol>
                              <li>
                                <p>Let <var>transceiver</var> be the <code>
                                <a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> used to create the
                                <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a>.</p>
                              </li>
                              <li>
                                <p>Set <var>transceiver</var>'s <code><a data-link-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-mid" class="internalDFN" data-link-type="dfn"><code>mid</code></a></code> value to the mid of
                                the <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a>.</p>
                              </li>
                              <li>
                                <p>If <var>transceiver</var>'s <a href="#dfn-stopped" class="internalDFN" data-link-type="dfn">[[Stopped]]</a> slot
                                is <code>true</code>, abort these sub steps.</p>
                              </li>
                              <li>
                                <p>
                                  If the <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a> is indicated as using
                                  an existing <a href="#dfn-media-transport" class="internalDFN" data-link-type="dfn">media transport</a> according to
                                  [<cite><a class="bibref" href="#bib-BUNDLE">BUNDLE</a></cite>], let <var>transport</var> and
                                  <var>rtcpTransport</var> be the
                                  <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code> objects
                                  representing the RTP and RTCP components of that
                                  transport, respectively.
                                </p>
                              </li>
                              <li>
                                <p>
                                  Otherwise, let <var>transport</var> and
                                  <var>rtcpTransport</var> be newly created
                                  <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code> objects, each
                                  with a new underlying
                                  <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>. Though if RTCP
                                  multiplexing is negotiated according to [<cite><a class="bibref" href="#bib-RFC5761">RFC5761</a></cite>],
                                  or if <var>connection</var>'s
                                  <code><a href="#dom-rtcrtcpmuxpolicy" class="internalDFN" data-link-type="dfn"><code>RTCRtcpMuxPolicy</code></a></code> is <code><a data-link-for="RTCRtcpMuxPolicy" href="#dom-rtcrtcpmuxpolicy-require" class="internalDFN" data-link-type="dfn"><code>require</code></a></code>,
                                  do not create any RTCP-specific transport objects,
                                  and instead let <var>rtcpTransport</var> equal
                                  <var>transport</var>.
                                </p>
                              </li>
                              <li>
                                <p>
                                  Set <var>transceiver</var>.<a href="#dfn-sender" class="internalDFN" data-link-type="dfn">[[Sender]]</a>.<a href="#dfn-sendertransport" class="internalDFN" data-link-type="dfn">[[SenderTransport]]</a>
                                  to <var>transport</var>.
                                </p>
                              </li>
                              <li>
                                <p>
                                  Set <var>transceiver</var>.<a href="#dfn-sender" class="internalDFN" data-link-type="dfn">[[Sender]]</a>.<a href="#dfn-senderrtcptransport" class="internalDFN" data-link-type="dfn">[[SenderRtcpTransport]]</a>
                                  to <var>rtcpTransport</var>.
                                </p>
                              </li>
                              <li>
                                <p>
                                  Set <var>transceiver</var>.<a href="#dfn-receiver" class="internalDFN" data-link-type="dfn">[[Receiver]]</a>.<a href="#dfn-receivertransport" class="internalDFN" data-link-type="dfn">[[ReceiverTransport]]</a>
                                  to <var>transport</var>.
                                </p>
                              </li>
                              <li>
                                <p>
                                  Set <var>transceiver</var>.<a href="#dfn-receiver" class="internalDFN" data-link-type="dfn">[[Receiver]]</a>.<a href="#dfn-receiverrtcptransport" class="internalDFN" data-link-type="dfn">[[ReceiverRtcpTransport]]</a>
                                  to <var>rtcpTransport</var>.
                                </p>
                              </li>
                            </ol>
                          </li>
                          <li>
                            <p>Let <var>transceiver</var> be the <code>
                            <a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> <a href="#dfn-associated" class="internalDFN" data-link-type="dfn">associated</a> with the
                            <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a>.</p>
                          </li>
                          <li>
                            <p>If <var>transceiver</var>'s <a href="#dfn-stopped" class="internalDFN" data-link-type="dfn">[[Stopped]]</a> slot
                            is <code>true</code>, abort these sub steps.</p>
                          </li>
                          <li>
                            <p>Let <var>direction</var> be an <code>
                            <a href="#dom-rtcrtptransceiverdirection" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiverDirection</code></a></code> value
                            representing the direction from the <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media
                            description</a>.</p>
                          </li>
                          <li>
                            <p>If <var>direction</var> is <code>"sendrecv"</code> or
                            <code>"recvonly"</code>,
                            set <var>transceiver</var>'s <a href="#dfn-receptive" class="internalDFN" data-link-type="dfn">[[Receptive]]</a> slot
                            to <code>true</code>, otherwise set it to <code>false</code>.</p>
                          </li>
                          <li>
                            <p>If <var>description</var> is of type
                            <code>"answer"</code> or <code>"pranswer"</code>,
                            then run the following steps:</p>
                            <ol>
                              <li>
                                <p>If <var>direction</var> is
                                <code>"sendonly"</code> or <code>"inactive"</code>,
                                and <var>transceiver</var>'s
                                <a href="#dfn-fireddirection" class="internalDFN" data-link-type="dfn">[[FiredDirection]]</a> slot is either
                                <code>"sendrecv"</code> or <code>"recvonly"</code>,
                                <a href="#process-remote-track-removal" class="internalDFN" data-link-type="dfn">process the removal of a remote track</a> for
                                the <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a>, given <var>transceiver</var>,
                                <var>removeList</var>, and <var>muteTracks</var>.</p>
                              </li>
                              <li>
                                <p>Set <var>transceiver</var>'s
                                <a href="#dfn-currentdirection" class="internalDFN" data-link-type="dfn">[[CurrentDirection]]</a> and
                                <a href="#dfn-fireddirection" class="internalDFN" data-link-type="dfn">[[FiredDirection]]</a> slots to
                                <var>direction</var>.</p>
                              </li>
                            </ol>
                          </li>
                        </ol>
                      </li>
                    </ol>
                  </li>
                  <li>
                    <p>If <var>description</var> is set as a remote description,
                    then run the following steps:</p>
                    <ol>
                      <li>
                        <p>Run the following steps for each <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a>
                        in <var>description</var>:</p>
                        <ol>
                          <li>
                            <p>Let <var>direction</var> be an <code>
                            <a href="#dom-rtcrtptransceiverdirection" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiverDirection</code></a></code> value
                            representing the direction from the <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media
                            description</a>, but with the send and receive
                            directions reversed to represent this peer's point
                            of view.</p>
                          </li>
                          <li>
                            <p>As described by <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.10">section 5.10.</a>)</span>, attempt to
                            find an existing <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>
                            object, <var>transceiver</var>, to represent the <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media
                            description</a>.</p>
                          </li>
                          <li>
                            <p> If no suitable transceiver is found
                            (<var>transceiver</var> is unset), run the following
                            steps:</p>
                            <ol>
                              <li>
                                <p><a href="#dfn-create-an-rtcrtpsender" class="internalDFN" data-link-type="dfn">Create an RTCRtpSender</a>, <var>sender</var>,
                                from the <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a>.</p>
                              </li>
                              <li>
                                <p><a href="#dfn-create-an-rtcrtpreceiver" class="internalDFN" data-link-type="dfn">Create an RTCRtpReceiver</a>,
                                <var>receiver</var>, from the <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a>.</p>
                              </li>
                              <li>
                                <p><a href="#dfn-create-an-rtcrtptransceiver" class="internalDFN" data-link-type="dfn">Create an RTCRtpTransceiver</a> with
                                <var>sender</var>, <var>receiver</var> and
                                an <code><a href="#dom-rtcrtptransceiverdirection" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiverDirection</code></a></code>
                                value of <code>"recvonly"</code>, and let
                                <var>transceiver</var> be the result.</p>
                              </li>
                            </ol>
                          </li>
                          <li>
                            <p>Set <var>transceiver</var>'s <code><a data-link-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-mid" class="internalDFN" data-link-type="dfn"><code>mid</code></a></code> value to the mid of
                            the corresponding <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a>. If the <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media
                            description</a> has no MID, and <var>transceiver</var>'s
                            <code><a data-link-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-mid" class="internalDFN" data-link-type="dfn"><code>mid</code></a></code>
                            is unset, generate a random value as
                            described in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.10">section 5.10.</a>)</span>.</p>
                          </li>
                          <li>
                            <p>If <var>direction</var> is <code>"sendrecv"</code> or
                            <code>"recvonly"</code>, and
                            <var>transceiver</var>'s
                            <a href="#dfn-fireddirection" class="internalDFN" data-link-type="dfn">[[FiredDirection]]</a> slot
                            is neither <code>"sendrecv"</code> nor <code>"recvonly"</code>,
                            <a href="#process-remote-track-addition" class="internalDFN" data-link-type="dfn">process the addition of a remote track</a> for
                            the <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a>, given <var>transceiver</var>,
                            <var>addList</var>, and <var>trackEvents</var>.</p>
                          </li>
                          <li>
                            <p>If <var>direction</var> is <code>"sendonly"</code> or
                            <code>"inactive"</code>,
                            set <var>transceiver</var>'s <a href="#dfn-receptive" class="internalDFN" data-link-type="dfn">[[Receptive]]</a> slot
                            to <code>false</code>.</p>
                          </li>
                          <li>
                            <p>If <var>direction</var> is
                            <code>"sendonly"</code> or <code>"inactive"</code>, and
                            <var>transceiver</var>'s
                            <a href="#dfn-fireddirection" class="internalDFN" data-link-type="dfn">[[FiredDirection]]</a> slot
                            is either <code>"sendrecv"</code> or <code>"recvonly"</code>,
                            <a href="#process-remote-track-removal" class="internalDFN" data-link-type="dfn">process the removal of a remote track</a> for
                            the <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a>, given <var>transceiver</var>,
                            <var>removeList</var>, and <var>muteTracks</var>.</p>
                          </li>
                          <li>
                            <p>Set <var>transceiver</var>'s
                            <a href="#dfn-fireddirection" class="internalDFN" data-link-type="dfn">[[FiredDirection]]</a> slot to
                            <var>direction</var>.</p>
                          </li>
                          <li>
                            <p>If <var>description</var> is of type
                            <code>"answer"</code> or <code>"pranswer"</code>, then run
                            the following steps:</p>
                            <ol>
                              <li>
                                <p>Set <var>transceiver</var>'s
                                <a href="#dfn-currentdirection" class="internalDFN" data-link-type="dfn">[[CurrentDirection]]</a> slot to
                                <var>direction</var>.</p>
                              </li>
                              <li>
                                <p>
                                  Let <var>transport</var> and <var>rtcpTransport</var> be the
                                  <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code> objects representing the RTP
                                  and RTCP components of the <a href="#dfn-media-transport" class="internalDFN" data-link-type="dfn">media transport</a> used by
                                  <var>transceiver</var>'s <a href="#dfn-associated" class="internalDFN" data-link-type="dfn">associated</a> <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a>,
                                  according to [<cite><a class="bibref" href="#bib-BUNDLE">BUNDLE</a></cite>].
                                </p>
                              </li>
                              <li>
                                <p>
                                  Set <var>transceiver</var>.<a href="#dfn-sender" class="internalDFN" data-link-type="dfn">[[Sender]]</a>.<a href="#dfn-sendertransport" class="internalDFN" data-link-type="dfn">[[SenderTransport]]</a>
                                  to <var>transport</var>.
                                </p>
                              </li>
                              <li>
                                <p>
                                  Set <var>transceiver</var>.<a href="#dfn-sender" class="internalDFN" data-link-type="dfn">[[Sender]]</a>.<a href="#dfn-senderrtcptransport" class="internalDFN" data-link-type="dfn">[[SenderRtcpTransport]]</a>
                                  to <var>rtcpTransport</var>.
                                </p>
                              </li>
                              <li>
                                <p>
                                  Set <var>transceiver</var>.<a href="#dfn-receiver" class="internalDFN" data-link-type="dfn">[[Receiver]]</a>.<a href="#dfn-receivertransport" class="internalDFN" data-link-type="dfn">[[ReceiverTransport]]</a>
                                  to <var>transport</var>.
                                </p>
                              </li>
                              <li>
                                <p>
                                  Set <var>transceiver</var>.<a href="#dfn-receiver" class="internalDFN" data-link-type="dfn">[[Receiver]]</a>.<a href="#dfn-receiverrtcptransport" class="internalDFN" data-link-type="dfn">[[ReceiverRtcpTransport]]</a>
                                  to <var>rtcpTransport</var>.
                                </p>
                              </li>
                            </ol>
                          </li>
                          <li>
                            <p>If the <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a> is rejected, and
                            <var>transceiver</var> is not already stopped, <a href="#dfn-stop-the-rtcrtptransceiver" class="internalDFN" data-link-type="dfn">stop
                            the RTCRtpTransceiver</a> <var>transceiver</var>.</p>
                          </li>
                        </ol>
                      </li>
                    </ol>
                  </li>
                  <li>
                    <p>If <var>description</var> is of type <code>"rollback"</code>, then run
                    the following steps:</p>
                    <ol>
                      <li>
                        <p>If the <code><a data-link-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-mid" class="internalDFN" data-link-type="dfn"><code>mid</code></a></code> value of an
                        <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> was set to a
                        non-null value by the
                        <code><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></code> that is being
                        rolled back, set the <code><a data-link-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-mid" class="internalDFN" data-link-type="dfn"><code>mid</code></a></code> value of that
                        transceiver to null, as described by <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-4.1.8.2">section 4.1.8.2.</a>)</span>.</p>
                      </li>
                      <li>
                        <p>If an <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> was
                        created by applying the
                        <code><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></code> that is
                        being rolled back, and a track has not been attached to
                        it via <code>addTrack</code>, remove that
                        transceiver from <var>connection</var>'s <a href="#transceivers-set">set of transceivers</a>, as
                        described by <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-4.1.8.2">section 4.1.8.2.</a>)</span>.</p>
                      </li>
                      <li>For the <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>s
                        remaining on <var>connection</var>, revert
                        any changes to the <a href="#dfn-currentdirection" class="internalDFN" data-link-type="dfn">[[CurrentDirection]]</a> and
                        <a href="#dfn-receptive" class="internalDFN" data-link-type="dfn">[[Receptive]]</a> internal slots made by the application
                        of the <code><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></code>
                        that is being rolled back.
                      </li>
                      <li>
                        <p>Restore the value of <var>connection</var>'s
                        <a href="#dfn-sctptransport" class="internalDFN" data-link-type="dfn">[[SctpTransport]]</a> internal slot to
                        its value at the last <code>stable</code>
                        <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a>.</p>
                      </li>
                    </ol>
                  </li>
                  <li>
                    <p>If <var>connection</var>'s <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a>
                    changed above, fire a simple event named
                    <code><a href="#event-signalingstatechange" class="internalDFN" data-link-type="dfn"><code>signalingstatechange</code></a></code> at
                    <var>connection</var>.</p>
                  </li>
                  <li>
                    <p>For each <var>track</var> in <var>muteTracks</var>,
                    <a href="#set-track-muted" class="internalDFN" data-link-type="dfn">set the muted state</a> of <var>track</var> to the
                    value <code>true</code>.</p>
                  </li>
                  <li>
                    <p>For each <var>stream</var> and <var>track</var> pair
                    in <var>removeList</var>, <a href="#remove-track" class="internalDFN" data-link-type="dfn">remove the track</a>
                    <var>track</var> from <var>stream</var>.</p>
                  </li>
                  <li>
                    <p>For each <var>stream</var> and <var>track</var> pair
                    in <var>addList</var>, <a href="#add-track" class="internalDFN" data-link-type="dfn">add the track</a>
                    <var>track</var> to <var>stream</var>.</p>
                  </li>
                  <li>
                    <p>For each <code><a href="#dom-rtctrackevent" class="internalDFN" data-link-type="dfn"><code>RTCTrackEvent</code></a></code>
                    <var>trackEvent</var> in <var>trackEvents</var>,
                    <a href="#fire-track-event" class="internalDFN" data-link-type="dfn">fire a track event</a> named <code title="event-track"><a href="#event-track" class="internalDFN" data-link-type="dfn"><code>track</code></a></code> with <var>trackEvent</var>
                    at the <var>connection</var> object.</p>
                  </li>
                  <li>
                    <p>If <var>connection</var>'s <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> is now
                    <code>"stable"</code>, <a href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">update the negotiation-needed
                    flag</a>. If <var>connection</var>'s
                    <a href="#dfn-negotiationneeded" class="internalDFN" data-link-type="dfn">[[NegotiationNeeded]]</a> slot was <code>true</code> both
                    before and after this update, queue a task that runs the
                    following steps:</p>
                    <ol>
                      <li>
                        <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot
                        is <code>true</code>, abort these steps.</p>
                      </li>
                      <li>
                        <p>If <var>connection</var>'s <a href="#dfn-negotiationneeded" class="internalDFN" data-link-type="dfn">[[NegotiationNeeded]]</a>
                        slot is <code>false</code>, abort these steps.</p>
                      </li>
                      <li>
                        <p>Fire a simple event named <a href="#event-negotiation" class="internalDFN" data-link-type="dfn"><code>negotiationneeded</code></a>
                        at <var>connection</var>.</p>
                      </li>
                    </ol>
                  </li>
                  <li>
                    <p><a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">Resolve</a> <var>p</var> with <var>undefined</var>.</p>
                  </li>
                </ol>
              </li>
            </ol>
          </li>
          <li>
            <p>Return <var>p</var>.</p>
          </li>
        </ol>
        </section>
        <section id="set-the-configuration">
          <h5 id="x4-4-1-7-set-the-configuration"><span class="secno">4.4.1.7 </span>Set the configuration</h5>
          <p>To <dfn data-lt="set the configuration|set a configuration" id="set-pc-configuration" data-dfn-type="dfn">set a configuration</dfn>, run the
          following steps:</p>
          <ol>
            <li>Let <var>configuration</var> be the
            <code><a href="#dom-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code>RTCConfiguration</code></a></code> dictionary to be
            processed.</li>
            <li>Let <var>connection</var> be the target
            <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object.</li>
            <li>If <code><var>configuration</var>.peerIdentity</code> is
            set and its value differs from the <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer
            identity</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an <code>InvalidModificationError</code>.
            </li>
            <li>If <code><var>configuration</var>.certificates</code> is
            set and the set of certificates differs from the ones used
            when <var>connection</var> was constructed, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an
            <code>InvalidModificationError</code>.</li>
            <li>If the value of <code><var>configuration</var>.<a data-link-for="RTCConfiguration" href="#dom-rtcconfiguration-bundlepolicy" class="internalDFN" data-link-type="dfn"><code>bundlePolicy</code></a></code> differs from the
            <var>connection</var>'s bundle policy, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a>
            an <code>InvalidModificationError</code>.</li>
            <li>If the value of <code><var>configuration</var>.<a data-link-for="RTCConfiguration" href="#dom-rtcconfiguration-rtcpmuxpolicy" class="internalDFN" data-link-type="dfn"><code>rtcpMuxPolicy</code></a></code> differs from the
            <var>connection</var>'s rtcpMux policy, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an
            <code>InvalidModificationError</code>.</li>
            <li>If the value of <code><var>configuration</var>.<a data-link-for="RTCConfiguration" href="#dom-rtcconfiguration-icecandidatepoolsize" class="internalDFN" data-link-type="dfn"><code>iceCandidatePoolSize</code></a></code> differs from
            the <var>connection</var>'s previously set
            <code>iceCandidatePoolSize</code>, and <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setlocaldescription" class="internalDFN" data-link-type="dfn"><code>setLocalDescription</code></a></code> has
            already been called, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an
            <code>InvalidModificationError</code>.</li>
            <li>
              <p>Set the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>'s <dfn id="ice-transports-setting" data-dfn-type="dfn">ICE transports setting</dfn> to
              the value of <code><var>configuration</var>.<a data-link-for="RTCConfiguration" href="#dom-rtcconfiguration-icetransportpolicy" class="internalDFN" data-link-type="dfn"><code>iceTransportPolicy</code></a></code>. As defined
              in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-4.1.16">section 4.1.16.</a>)</span>, if
              the new <a href="#ice-transports-setting" class="internalDFN" data-link-type="dfn">ICE transports setting</a> changes the existing
              setting, no action will be taken until the next gathering
              phase. If a script wants this to happen immediately, it
              should do an ICE restart.</p>
            </li>
            <li>
              <p>Set the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>'s prefetched <dfn data-dfn-type="dfn" id="dfn-ice-candidate-pool-size">ICE candidate
              pool size</dfn> as defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-3.5.4">section 3.5.4.</a> and <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-4.1.1">section 4.1.1.</a>)</span> to the
              value of <code><var>configuration</var>.<a data-link-for="RTCConfiguration" href="#dom-rtcconfiguration-icecandidatepoolsize" class="internalDFN" data-link-type="dfn"><code>iceCandidatePoolSize</code></a></code>. If the
              new <a href="#dfn-ice-candidate-pool-size" class="internalDFN" data-link-type="dfn">ICE candidate pool size</a> changes the existing
              setting, this may result in immediate gathering of new
              pooled candidates, or discarding of existing pooled
              candidates, as defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-4.1.16">section 4.1.16.</a>)</span>.</p>
            </li>
            <li>
              <p>Let <var>validatedServers</var> be an empty list.</p>
            </li>
            <li>
              <p>If <code><var>configuration</var>.<a data-link-for="RTCConfiguration" href="#dom-rtcconfiguration-iceservers" class="internalDFN" data-link-type="dfn"><code>iceServers</code></a></code> is defined, then
              run the following steps for each element:</p>
              <ol>
                <li>
                  <p>Let <var>server</var> be the current list
                  element.</p>
                </li>
                <li>
                  <p>If <code><var>server</var>.urls</code> is a string,
                  let <code><var>server</var>.urls</code> be a list
                  consisting of just that string.</p>
                </li>
                <li>
                  <p>For each <var>url</var> in
                  <code><var>server</var>.urls</code> run the following steps:
                  </p><ol>
                    <li>
                      <p>Parse the
                      <var>url</var> using the generic URI syntax
                      defined in [<cite><a class="bibref" href="#bib-RFC3986">RFC3986</a></cite>] and obtain the
                      <var>scheme name</var>. If the parsing based
                      on the syntax defined in [<cite><a class="bibref" href="#bib-RFC3986">RFC3986</a></cite>] fails,
                      <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> a <code>SyntaxError</code>.  If
                      the <var>scheme name</var> is not implemented
                      by the browser <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> a
                      <code>NotSupportedError</code>. If
                      <var>scheme name</var> is <code>turn</code> or
                      <code>turns</code>, and parsing the
                      <var>url</var> using the syntax defined in
                      [<cite><a class="bibref" href="#bib-RFC7064">RFC7064</a></cite>] fails, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> a
                      <code>SyntaxError</code>. If <var>scheme
                      name</var> is <code>stun</code> or
                      <code>stuns</code>, and parsing the
                      <var>url</var> using the syntax defined in
                      [<cite><a class="bibref" href="#bib-RFC7065">RFC7065</a></cite>] fails, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> a
                      <code>SyntaxError</code>. </p>
                    </li>
                    <li>
                      <p>If <var>scheme name</var> is <code>turn</code> or
                      <code>turns</code>, and either of
                      <code><var>server</var>.username</code> or
                      <code><var>server</var>.credential</code> are omitted,
                      then <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an <code>InvalidAccessError</code>.</p>
                    </li>
                    <li>
                      <p>If <var>scheme name</var> is <code>turn</code> or
                      <code>turns</code>, and
                      <code><var>server</var>.credentialType</code> is
                      <code>"password"</code>, and
                      <code><var>server</var>.credential</code> is not a
                      <span class="idlMemberType">DOMString</span>, then
                      <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an <code>InvalidAccessError</code>.</p>
                    </li>
                    <li>
                      <p>If <var>scheme name</var> is <code>turn</code> or
                      <code>turns</code>, and
                      <code><var>server</var>.credentialType</code> is
                      <code>"oauth"</code>, and
                      <code><var>server</var>.credential</code> is not an
                      <a href="#dom-rtcoauthcredential" class="internalDFN" data-link-type="dfn"><code>RTCOAuthCredential</code></a>, then throw an
                      <code>InvalidAccessError</code>.</p>
                    </li>
                  </ol>
                </li>
                <li>
                  <p>Append <var>server</var> to
                  <var>validatedServers</var>.</p>
                </li>
              </ol>
              <p>Let <var>validatedServers</var> be the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE
              Agent</a>'s <dfn id="ice-servers-list" data-dfn-type="dfn">ICE servers
              list</dfn>.</p>
              <p>As defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-4.1.16">section 4.1.16.</a>)</span>, if a new list
              of servers replaces the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>'s existing ICE
              servers list, no action will be taken until the next
              gathering phase. If a script wants this to happen
              immediately, it should do an ICE restart. However, if the
              <a data-lt="ICE candidate pool size" href="#dfn-ice-candidate-pool-size" class="internalDFN" data-link-type="dfn">ICE candidate pool</a>
              has a nonzero size, any existing pooled candidates will be
              discarded, and new candidates will be gathered from the new
              servers.</p>
            </li>
            <li>
              <p>Store the configuration in the
              <a href="#dfn-configuration" class="internalDFN" data-link-type="dfn">[[Configuration]]</a> internal slot.</p>
            </li>
          </ol>
        </section>
      </section>
      <section id="interface-definition">
        <h4 id="x4-4-2-interface-definition"><span class="secno">4.4.2 </span>Interface Definition</h4>
        <p>The <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> interface presented in
        this section is extended by several partial interfaces throughout this
        specification. Notably, the <a href="#dfn-rtp-media-api" class="internalDFN" data-link-type="dfn">RTP Media API</a> section, which adds
        the APIs to send and receive <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code>
        objects.</p>
        <div>
          <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcpeerconnection" data-idl="" data-title="RTCPeerConnection">[<span class="idlCtor"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a></span>(<span class="idlParam">optional <span class="idlParamType"><a href="#dom-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code>RTCConfiguration</code></a></span> <span class="idlParamName">configuration</span></span>)</span>,
 <span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></span> : <span class="idlSuperclass">EventTarget</span> {
<span class="idlMethod" id="idl-def-rtcpeerconnection-createoffer-options" data-idl="" data-title="createOffer" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="#dom-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a>&gt;</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="createOffer|createoffer()" href="#dom-rtcpeerconnection-createoffer" class="internalDFN" data-link-type="dfn"><code>createOffer</code></a></span>(<span class="idlParam">optional <span class="idlParamType"><a href="#dom-rtcofferoptions" class="internalDFN" data-link-type="dfn"><code>RTCOfferOptions</code></a></span> <span class="idlParamName">options</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-createanswer-options" data-idl="" data-title="createAnswer" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="#dom-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a>&gt;</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="createAnswer|createanswer()" href="#dom-rtcpeerconnection-createanswer" class="internalDFN" data-link-type="dfn"><code>createAnswer</code></a></span>(<span class="idlParam">optional <span class="idlParamType"><a href="#dom-rtcansweroptions" class="internalDFN" data-link-type="dfn"><code>RTCAnswerOptions</code></a></span> <span class="idlParamName">options</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-setlocaldescription-description" data-idl="" data-title="setLocalDescription" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span>                      <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="setLocalDescription|setlocaldescription()" href="#dom-rtcpeerconnection-setlocaldescription" class="internalDFN" data-link-type="dfn"><code>setLocalDescription</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a></span> <span class="idlParamName">description</span></span>);</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-localdescription" data-idl="" data-title="localDescription" data-dfn-for="rtcpeerconnection">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>?</span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-localdescription" class="internalDFN" data-link-type="dfn"><code>localDescription</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-currentlocaldescription" data-idl="" data-title="currentLocalDescription" data-dfn-for="rtcpeerconnection">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>?</span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-currentlocaldescription" class="internalDFN" data-link-type="dfn"><code>currentLocalDescription</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-pendinglocaldescription" data-idl="" data-title="pendingLocalDescription" data-dfn-for="rtcpeerconnection">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>?</span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-pendinglocaldescription" class="internalDFN" data-link-type="dfn"><code>pendingLocalDescription</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-setremotedescription-description" data-idl="" data-title="setRemoteDescription" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span>                      <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="setRemoteDescription|setremotedescription()" href="#dom-rtcpeerconnection-setremotedescription" class="internalDFN" data-link-type="dfn"><code>setRemoteDescription</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a></span> <span class="idlParamName">description</span></span>);</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-remotedescription" data-idl="" data-title="remoteDescription" data-dfn-for="rtcpeerconnection">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>?</span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-remotedescription" class="internalDFN" data-link-type="dfn"><code>remoteDescription</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-currentremotedescription" data-idl="" data-title="currentRemoteDescription" data-dfn-for="rtcpeerconnection">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>?</span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-currentremotedescription" class="internalDFN" data-link-type="dfn"><code>currentRemoteDescription</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-pendingremotedescription" data-idl="" data-title="pendingRemoteDescription" data-dfn-for="rtcpeerconnection">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>?</span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-pendingremotedescription" class="internalDFN" data-link-type="dfn"><code>pendingRemoteDescription</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-addicecandidate-candidate" data-idl="" data-title="addIceCandidate" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span>                      <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="addIceCandidate|addicecandidate()" href="#dom-rtcpeerconnection-addicecandidate" class="internalDFN" data-link-type="dfn"><code>addIceCandidate</code></a></span>(<span class="idlParam"><span class="idlParamType">(<a href="#dom-rtcicecandidateinit" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidateInit</code></a> or <a href="#dom-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a>)</span> <span class="idlParamName">candidate</span></span>);</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-signalingstate" data-idl="" data-title="signalingState" data-dfn-for="rtcpeerconnection">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcsignalingstate" class="internalDFN" data-link-type="dfn"><code>RTCSignalingState</code></a></span>      <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-signalingstate" class="internalDFN" data-link-type="dfn"><code>signalingState</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-icegatheringstate" data-idl="" data-title="iceGatheringState" data-dfn-for="rtcpeerconnection">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcicegatheringstate" class="internalDFN" data-link-type="dfn"><code>RTCIceGatheringState</code></a></span>   <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-icegatheringstate" class="internalDFN" data-link-type="dfn"><code>iceGatheringState</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-iceconnectionstate" data-idl="" data-title="iceConnectionState" data-dfn-for="rtcpeerconnection">    readonly attribute <span class="idlAttrType"><a href="#dom-rtciceconnectionstate" class="internalDFN" data-link-type="dfn"><code>RTCIceConnectionState</code></a></span>  <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-iceconnectionstate" class="internalDFN" data-link-type="dfn"><code>iceConnectionState</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-connectionstate" data-idl="" data-title="connectionState" data-dfn-for="rtcpeerconnection">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcpeerconnectionstate" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionState</code></a></span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-connectionstate" class="internalDFN" data-link-type="dfn"><code>connectionState</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-cantrickleicecandidates" data-idl="" data-title="canTrickleIceCandidates" data-dfn-for="rtcpeerconnection">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a>?</span>               <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-cantrickleicecandidates" class="internalDFN" data-link-type="dfn"><code>canTrickleIceCandidates</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-getdefaulticeservers" data-idl="" data-title="getDefaultIceServers" data-dfn-for="rtcpeerconnection">    static <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-rtciceserver" class="internalDFN" data-link-type="dfn"><code>RTCIceServer</code></a>&gt;</span>      <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="getDefaultIceServers|getdefaulticeservers()" href="#dom-rtcpeerconnection-getdefaulticeservers" class="internalDFN" data-link-type="dfn"><code>getDefaultIceServers</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-getconfiguration" data-idl="" data-title="getConfiguration" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="#dom-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code>RTCConfiguration</code></a></span>                   <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="getConfiguration|getconfiguration()" href="#dom-rtcpeerconnection-getconfiguration" class="internalDFN" data-link-type="dfn"><code>getConfiguration</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-setconfiguration-configuration" data-idl="" data-title="setConfiguration" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">void</span>                               <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="setConfiguration|setconfiguration()" href="#dom-rtcpeerconnection-setconfiguration" class="internalDFN" data-link-type="dfn"><code>setConfiguration</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code>RTCConfiguration</code></a></span> <span class="idlParamName">configuration</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-close" data-idl="" data-title="close" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">void</span>                               <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="close|close()" href="#dom-rtcpeerconnection-close" class="internalDFN" data-link-type="dfn"><code>close</code></a></span>();</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-onnegotiationneeded" data-idl="" data-title="onnegotiationneeded" data-dfn-for="rtcpeerconnection">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span>           <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-onnegotiationneeded" class="internalDFN" data-link-type="dfn"><code>onnegotiationneeded</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-onicecandidate" data-idl="" data-title="onicecandidate" data-dfn-for="rtcpeerconnection">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span>           <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-onicecandidate" class="internalDFN" data-link-type="dfn"><code>onicecandidate</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-onicecandidateerror" data-idl="" data-title="onicecandidateerror" data-dfn-for="rtcpeerconnection">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span>           <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-onicecandidateerror" class="internalDFN" data-link-type="dfn"><code>onicecandidateerror</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-onsignalingstatechange" data-idl="" data-title="onsignalingstatechange" data-dfn-for="rtcpeerconnection">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span>           <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-onsignalingstatechange" class="internalDFN" data-link-type="dfn"><code>onsignalingstatechange</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-oniceconnectionstatechange" data-idl="" data-title="oniceconnectionstatechange" data-dfn-for="rtcpeerconnection">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span>           <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-oniceconnectionstatechange" class="internalDFN" data-link-type="dfn"><code>oniceconnectionstatechange</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-onicegatheringstatechange" data-idl="" data-title="onicegatheringstatechange" data-dfn-for="rtcpeerconnection">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span>           <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-onicegatheringstatechange" class="internalDFN" data-link-type="dfn"><code>onicegatheringstatechange</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-onconnectionstatechange" data-idl="" data-title="onconnectionstatechange" data-dfn-for="rtcpeerconnection">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span>           <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-onconnectionstatechange" class="internalDFN" data-link-type="dfn"><code>onconnectionstatechange</code></a></span>;</span>
};</span></pre></div>
          <section>
            <h5 id="constructors">Constructors</h5>
            <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="constructors">
              <dt><dfn data-idl="" data-dfn-for="" data-dfn-type="dfn" id="dom-rtcpeerconnection" data-title="RTCPeerConnection"><code>RTCPeerConnection</code></dfn></dt>
              <dd>
                See the <a data-lt="RTCPeerConnection()" href="#dom-peerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection
                constructor algorithm</code></a>.
              </dd>
            </dl>
          </section>
          <section>
            <h5 id="attributes">Attributes</h5>
            <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="attributes">
              <dt><code>localDescription</code> of type <span class="idlAttrType"><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></span>, readonly,
              nullable</dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-localdescription" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl="" data-title="localDescription"><code>localDescription</code></dfn>
                attribute <em class="rfc2119" title="MUST">MUST</em> return <a href="#dfn-pendinglocaldescription" class="internalDFN" data-link-type="dfn">[[PendingLocalDescription]]</a> if it is
                not null and otherwise it <em class="rfc2119" title="MUST">MUST</em> return
                <a href="#dfn-currentlocaldescription" class="internalDFN" data-link-type="dfn">[[CurrentLocalDescription]]</a>.</p>

                <p>Note that <a href="#dfn-currentlocaldescription" class="internalDFN" data-link-type="dfn">[[CurrentLocalDescription]]</a>.sdp and
                <a href="#dfn-pendinglocaldescription" class="internalDFN" data-link-type="dfn">[[PendingLocalDescription]]</a>.sdp need not be
                string-wise identical to the SDP value passed to the corresponding
                <a href="#dom-rtcpeerconnection-setlocaldescription" class="internalDFN" data-link-type="dfn"><code><code>setLocalDescription</code></code></a> call (i.e. SDP
                may be parsed and reformatted, and ICE candidates may be
                added).</p>
              </dd>
              <dt><code>currentLocalDescription</code> of type <span class="idlAttrType"><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></span>, readonly,
              nullable</dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-currentlocaldescription" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl="" data-title="currentLocalDescription"><code>currentLocalDescription</code></dfn>
                attribute <em class="rfc2119" title="MUST">MUST</em> return <a href="#dfn-currentlocaldescription" class="internalDFN" data-link-type="dfn">[[CurrentLocalDescription]]</a>.</p>
                <p>It represents the local description that was successfully
                negotiated the last time the <code>RTCPeerConnection</code>
                transitioned into the stable state plus any local candidates
                that have been generated by the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> since the offer
                or answer was created.</p>
              </dd>
              <dt><code>pendingLocalDescription</code> of type <span class="idlAttrType"><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></span>, readonly,
              nullable</dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-pendinglocaldescription" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl="" data-title="pendingLocalDescription"><code>pendingLocalDescription</code></dfn>
                attribute <em class="rfc2119" title="MUST">MUST</em> return <a href="#dfn-pendinglocaldescription" class="internalDFN" data-link-type="dfn">[[PendingLocalDescription]]</a>.</p>
                <p>It represents a local description that is in the
                process of being negotiated plus any local candidates that have
                been generated by the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> since the offer or
                answer was created. If the <code>RTCPeerConnection</code> is in
                the stable state, the value is <code>null</code>.</p>
              </dd>
              <dt><code>remoteDescription</code> of type <span class="idlAttrType"><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></span>, readonly,
              nullable</dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-remotedescription" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl="" data-title="remoteDescription"><code>remoteDescription</code></dfn>
                attribute <em class="rfc2119" title="MUST">MUST</em> return <a href="#dfn-pendingremotedescription" class="internalDFN" data-link-type="dfn">[[PendingRemoteDescription]]</a> if it
                is not <code>null</code> and otherwise it <em class="rfc2119" title="MUST">MUST</em> return
                <a href="#dfn-currentremotedescription" class="internalDFN" data-link-type="dfn">[[CurrentRemoteDescription]]</a>.</p>

                <p>Note that <a href="#dfn-currentremotedescription" class="internalDFN" data-link-type="dfn">[[CurrentRemoteDescription]]</a>.sdp and
                <a href="#dfn-pendingremotedescription" class="internalDFN" data-link-type="dfn">[[PendingRemoteDescription]]</a>.sdp need not be
                string-wise identical to the SDP value passed to the corresponding
                <a href="#dom-rtcpeerconnection-setremotedescription" class="internalDFN" data-link-type="dfn"><code><code>setRemoteDescription</code></code></a> call (i.e. SDP
                may be parsed and reformatted, and ICE candidates may be
                added).</p>
              </dd>
              <dt><code>currentRemoteDescription</code> of type <span class="idlAttrType"><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></span>, readonly,
              nullable</dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-currentremotedescription" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl="" data-title="currentRemoteDescription"><code>currentRemoteDescription</code></dfn>
                attribute <em class="rfc2119" title="MUST">MUST</em> return <a href="#dfn-currentremotedescription" class="internalDFN" data-link-type="dfn">[[CurrentRemoteDescription]]</a>.</p>
                <p>It represents the last remote description that was successfully
                negotiated the last time the <code>RTCPeerConnection</code>
                transitioned into the stable state plus any remote candidates
                that have been supplied via <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-addicecandidate" class="internalDFN" data-link-type="dfn">addIceCandidate()</a></code> since the
                offer or answer was created.</p>
              </dd>
              <dt><code>pendingRemoteDescription</code> of type <span class="idlAttrType"><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></span>, readonly,
              nullable</dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-pendingremotedescription" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl="" data-title="pendingRemoteDescription"><code>pendingRemoteDescription</code></dfn>
                attribute <em class="rfc2119" title="MUST">MUST</em> return <a href="#dfn-pendingremotedescription" class="internalDFN" data-link-type="dfn">[[PendingRemoteDescription]]</a>.</p>
                <p>It  represents a remote description that is in the
                process of being negotiated, complete with any remote
                candidates that have been supplied via <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-addicecandidate" class="internalDFN" data-link-type="dfn">addIceCandidate()</a></code> since the
                offer or answer was created. If the
                <code>RTCPeerConnection</code> is in the stable state, the
                value is <code>null</code>.</p>
              </dd>
              <dt><code>signalingState</code> of type <span class="idlAttrType"><a href="#dom-rtcsignalingstate" class="internalDFN" data-link-type="dfn"><code>RTCSignalingState</code></a></span>, readonly</dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-signalingstate" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl="" data-title="signalingState"><code>signalingState</code></dfn>
                attribute <em class="rfc2119" title="MUST">MUST</em> return the <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object's
                <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a>.</p>
              </dd>
              <dt><code>iceGatheringState</code> of type <span class="idlAttrType"><a href="#dom-rtcicegatheringstate" class="internalDFN" data-link-type="dfn"><code>RTCIceGatheringState</code></a></span>, readonly</dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-icegatheringstate" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl="" data-title="iceGatheringState"><code>iceGatheringState</code></dfn>
                attribute <em class="rfc2119" title="MUST">MUST</em> return the <a href="#dfn-ice-gathering-state" class="internalDFN" data-link-type="dfn">ICE gathering state</a> of the
                <code>RTCPeerConnection</code> instance.</p>
              </dd>
              <dt><code>iceConnectionState</code> of type <span class="idlAttrType"><a href="#dom-rtciceconnectionstate" class="internalDFN" data-link-type="dfn"><code>RTCIceConnectionState</code></a></span>, readonly</dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-iceconnectionstate" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl="" data-title="iceConnectionState"><code>iceConnectionState</code></dfn>
                attribute <em class="rfc2119" title="MUST">MUST</em> return the <a href="#dfn-ice-connection-state" class="internalDFN" data-link-type="dfn">ICE connection state</a> of the
                <code>RTCPeerConnection</code> instance.</p>
              </dd>
              <dt><code>connectionState</code> of type <span class="idlAttrType"><a href="#dom-rtcpeerconnectionstate" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionState</code></a></span>, readonly</dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-connectionstate" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl="" data-title="connectionState"><code>connectionState</code></dfn>
                attribute <em class="rfc2119" title="MUST">MUST</em> return the <a href="#dfn-connection-state" class="internalDFN" data-link-type="dfn">connection state</a> of the
                <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> instance.</p>
              </dd>
              <dt><code>canTrickleIceCandidates</code> of type <span class="idlAttrType">boolean</span>, readonly, nullable</dt>
              <dd>
                <p>The <dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-cantrickleicecandidates" data-title="canTrickleIceCandidates"><code>canTrickleIceCandidates</code></dfn>
                attribute indicates whether the remote peer is able to accept
                trickled ICE candidates [<cite><a class="bibref" href="#bib-TRICKLE-ICE">TRICKLE-ICE</a></cite>]. The value is
                determined based on whether a remote description indicates
                support for trickle ICE, as defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-4.1.15">section 4.1.15.</a>)</span>. Prior to the completion of
                <a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setremotedescription" class="internalDFN" data-link-type="dfn"><code><code>setRemoteDescription</code></code></a>, this
                value is <code>null</code>.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-onnegotiationneeded" data-title="onnegotiationneeded"><code>onnegotiationneeded</code></dfn> of type
              <span class="idlAttrType">EventHandler</span></dt>
              <dd>The event type of this event handler is
              <code><a href="#event-negotiation" class="internalDFN" data-link-type="dfn"><code>negotiationneeded</code></a></code>.</dd>
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-onicecandidate" data-title="onicecandidate"><code>onicecandidate</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
              <dd>The event type of this event handler is
              <code><a href="#event-icecandidate" class="internalDFN" data-link-type="dfn"><code>icecandidate</code></a></code>.</dd>
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-onicecandidateerror" data-title="onicecandidateerror"><code>onicecandidateerror</code></dfn> of type
              <span class="idlAttrType">EventHandler</span></dt>
              <dd>The event type of this event handler is
              <code><a href="#event-icecandidateerror" class="internalDFN" data-link-type="dfn"><code>icecandidateerror</code></a></code>.</dd>
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-onsignalingstatechange" data-title="onsignalingstatechange"><code>onsignalingstatechange</code></dfn> of type
              <span class="idlAttrType">EventHandler</span></dt>
              <dd>The event type of this event handler is
              <code><a href="#event-signalingstatechange" class="internalDFN" data-link-type="dfn"><code>signalingstatechange</code></a></code>.</dd>
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-oniceconnectionstatechange" data-title="oniceconnectionstatechange"><code>oniceconnectionstatechange</code></dfn> of type
              <span class="idlAttrType">EventHandler</span></dt>
              <dd>The event type of this event handler is
              <code><a href="#event-iceconnectionstatechange" class="internalDFN" data-link-type="dfn"><code>iceconnectionstatechange</code></a></code></dd>
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-onicegatheringstatechange" data-title="onicegatheringstatechange"><code>onicegatheringstatechange</code></dfn> of type
              <span class="idlAttrType">EventHandler</span></dt>
              <dd>The event type of this event handler is
              <code><a href="#event-icegatheringstatechange" class="internalDFN" data-link-type="dfn"><code>icegatheringstatechange</code></a></code>.</dd>
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-onconnectionstatechange" data-title="onconnectionstatechange"><code>onconnectionstatechange</code></dfn> of type
              <span class="idlAttrType">EventHandler</span></dt>
              <dd>The event type of this event handler is
              <code><a href="#event-connectionstatechange" class="internalDFN" data-link-type="dfn"><code>connectionstatechange</code></a></code>.</dd>
            </dl>
          </section>
          <section>
            <h5 id="methods">Methods</h5>
            <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="methods">
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-createoffer" data-title="createOffer" data-lt="createOffer|createoffer()"><code>createOffer</code></dfn></dt>
              <dd>
                <p>The <code>createOffer</code> method generates a blob of SDP that contains
                an RFC 3264 offer with the supported configurations for the
                session, including descriptions of the local
                <code>MediaStreamTrack</code>s attached to this
                <code>RTCPeerConnection</code>, the codec/RTP/RTCP capabilities
                supported by this implementation, and parameters of the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE
                agent</a> and the DTLS connection. The <code>options</code>
                parameter may be supplied to provide additional control over
                the offer generated.</p>
                <p>If a system has limited resources (e.g. a finite number of
                decoders), <code>createOffer</code> needs to return an offer
                that reflects the current state of the system, so that
                <code>setLocalDescription</code> will succeed when it attempts
                to acquire those resources. The session descriptions <em class="rfc2119" title="MUST">MUST</em>
                remain usable by <code>setLocalDescription</code> without
                causing an error until at least the end of the <a href="#dfn-fulfill" class="internalDFN" data-link-type="dfn">fulfillment</a>
                callback of the returned promise.</p>
                <p>Creating the SDP <em class="rfc2119" title="MUST">MUST</em> follow the appropriate process for
                generating an offer described in [<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>].
                As an offer, the generated SDP will contain the full set of
                codec/RTP/RTCP capabilities supported by the session (as
                opposed to an answer, which will include only a specific
                negotiated subset to use). In the event
                <code>createOffer</code> is called after the session is
                established, <code>createOffer</code> will generate an offer
                that is compatible with the current session, incorporating any
                changes that have been made to the session since the last
                complete offer-answer exchange, such as addition or removal of
                tracks. If no changes have been made, the offer will include
                the capabilities of the current local description as well as
                any additional capabilities that could be negotiated in an
                updated offer.</p>
                <p>The generated SDP will also contain the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE agent</a>'s
                <a data-link-for="RTCIceParameters" href="#dom-rtciceparameters-usernamefragment" class="internalDFN" data-link-type="dfn"><code>usernameFragment</code></a>,
                <a data-link-for="RTCIceParameters" href="#dom-rtciceparameters-password" class="internalDFN" data-link-type="dfn"><code>password</code></a> and
                ICE options (as defined in [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>], Section 14) and may also contain
                any local candidates that have been gathered by the agent.</p>
                <p>The <code>certificates</code> value in <var>configuration</var>
                for the <code>RTCPeerConnection</code> provides the
                certificates configured by the application for the
                <code>RTCPeerConnection</code>.  These certificates,
                along with any default certificates are used to produce a set of
                certificate fingerprints. These certificate fingerprints are
                used in the construction of SDP and as input to requests for
                identity assertions.</p>
                <p>If the <code>RTCPeerConnection</code> is configured to
                generate Identity assertions by calling
                <code><a href="#dom-rtcpeerconnection-setidentityprovider" class="internalDFN" data-link-type="dfn"><code>setIdentityProvider</code></a></code>, then the session description
                <em class="rfc2119" title="SHALL">SHALL</em> contain an appropriate assertion.</p>
                <p class="fingerprint">The process of generating an SDP exposes a
                subset of the media capabilities of the underlying system,
                which provides generally persistent cross-origin information on
                the device. It thus increases the fingerprinting surface of the
                application. In privacy-sensitive contexts, browsers can
                consider mitigations such as generating SDP matching only a
                common subset of the capabilities.</p>
                <p>When the method is called, the user agent <em class="rfc2119" title="MUST">MUST</em> run the
                following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>connection</var> be the
                    <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object on which the
                    method was invoked.</p>
                  </li>
                  <li>
                    <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
                    <code>true</code>, return a promise <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> with a newly
                    <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                    <code>InvalidStateError</code>.</p>
                  </li>
                  <li>
                    <p>If <var>connection</var> is configured with an identity
                    provider, then begin <a href="#sec.identity-proxy-assertion-request">the identity
                    assertion request process</a> if it has not already
                    begun.</p>
                  </li>
                  <li>
                    <p>Return the result of <a href="#enqueue-an-operation">enqueuing</a> the following
                    steps to <var>connection</var>'s operation queue:</p>
                    <ol>
                      <li>
                        <p>Let <var>p</var> be a new promise.</p>
                      </li>
                      <li>
                        <p>In parallel, begin the <a href="#dfn-steps-to-create-an-offer" class="internalDFN" data-link-type="dfn">steps to create an
                        offer</a>, given <var>p</var>.</p>
                      </li>
                      <li>
                        <p>Return <var>p</var>.</p>
                      </li>
                    </ol>
                  </li>
                </ol>
                <p>The <dfn data-dfn-type="dfn" id="dfn-steps-to-create-an-offer">steps to create an offer</dfn> given a promise
                <var>p</var> are as follows:</p>
                <ol>
                  <li>
                    <p>If <var>connection</var> was not constructed with a set
                    of certificates, and one has not yet been generated, wait
                    for it to be generated.</p>
                  </li>
                  <li>
                    <p>Let <var>provider</var> be <var>connection</var>'s
                    currently configured identity provider if one has been
                    configured, or <code>null</code> otherwise.</p>
                  </li>
                  <li>
                    <p>If <var>provider</var> is non-null, wait for
                    <a href="#sec.identity-proxy-assertion-request">the
                    identity assertion request process</a> to complete.</p>
                  </li>
                  <li>
                    <p>If <var>provider</var> was unable to produce an
                    identity assertion, <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a> <var>p</var> with a newly
                    <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                    <code>NotReadableError</code> and abort these steps.</p>
                  </li>
                  <li>
                    <p>Inspect the system state to determine the currently
                    available resources as necessary for generating the offer,
                    as described in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-4.1.6">section 4.1.6.</a>)</span>.</p>
                  </li>
                  <li>
                    <p>If this inspection failed for any reason, <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a>
                    <var>p</var> with a newly
                    <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                    <code>OperationError</code> and abort these steps.</p>
                  </li>
                  <li>
                    <p>Queue a task that runs the <a href="#dfn-final-steps-to-create-an-offer" class="internalDFN" data-link-type="dfn">final steps to create an
                    offer</a>, given <var>p</var>.</p>
                  </li>
                </ol>
                <p>The <dfn data-dfn-type="dfn" id="dfn-final-steps-to-create-an-offer">final steps to create an offer</dfn> given a
                promise <var>p</var> are as follows:</p>
                <ol>
                  <li>
                    <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
                    <code>true</code>, then abort these steps.</p>
                  </li>
                  <li>
                    <p>If <var>connection</var> was modified in such a way that
                    additional inspection of the system state is necessary, or
                    if its configured indentity provider is no longer
                    <var>provider</var>, then in parallel begin the <a href="#dfn-steps-to-create-an-offer" class="internalDFN" data-link-type="dfn">steps to
                    create an offer</a> again, given <var>p</var>, and abort
                    these steps.</p>
                    <div class="note"><div role="heading" class="note-title marker" id="h-note-5" aria-level="6"><span>Note</span></div><div class="">
                      This may be necessary if, for example,
                      <code>createOffer</code> was called when only an audio
                      <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> was added to
                      <var>connection</var>, but while performing the <a href="#dfn-steps-to-create-an-offer" class="internalDFN" data-link-type="dfn">steps
                      to create an offer</a> in parallel, a video
                      <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> was added,
                      requiring additional inspection of video system
                      resources.
                    </div></div>
                  </li>
                  <li>
                    <p>Given the information that was obtained from previous
                    inspection, the current state of <var>connection</var>
                    and its <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>s, and the
                    identity assertion from <var>provider</var> (if non-null),
                    generate an SDP offer, <var>sdpString</var>, as described
                    in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.2">section 5.2.</a>)</span>.</p>
                  </li>
                  <li>
                    <p>Let <var>offer</var> be a newly created
                    <code><a href="#dom-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a></code> dictionary
                    with its <code>type</code> member initialized to the string
                    <code>"offer"</code> and its <code>sdp</code> member
                    initialized to <var>sdpString</var>.</p>
                  </li>
                  <li><p>Set the <a href="#dfn-lastoffer" class="internalDFN" data-link-type="dfn">[[LastOffer]]</a> internal slot to
                    <var>sdpString</var>.</p>
                  </li>
                  <li>
                    <p><a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">Resolve</a> <var>p</var> with <var>offer</var>.</p>
                  </li>
                </ol>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-createanswer" data-title="createAnswer" data-lt="createAnswer|createanswer()"><code>createAnswer</code></dfn></dt>
              <dd>
                <p>The <code>createAnswer</code> method generates an [<cite><a class="bibref" href="#bib-SDP">SDP</a></cite>]
                answer with the supported configuration for the session that is
                compatible with the parameters in the remote configuration.
                Like <code>createOffer</code>, the returned blob of SDP contains
                descriptions of the local <code>MediaStreamTrack</code>s
                attached to this <code>RTCPeerConnection</code>, the
                codec/RTP/RTCP options negotiated for this session, and any
                candidates that have been gathered by the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>. The
                <code>options</code> parameter may be supplied to provide
                additional control over the generated answer.</p>
                <p>Like <code>createOffer</code>, the
                returned description <em class="rfc2119" title="SHOULD">SHOULD</em> reflect the current state of the
                system. The session descriptions <em class="rfc2119" title="MUST">MUST</em> remain usable by
                <code>setLocalDescription</code> without causing an error until
                at least the end of the <a href="#dfn-fulfill" class="internalDFN" data-link-type="dfn">fulfillment</a> callback of the returned
                promise.</p>
                <p>As an answer, the generated SDP will contain a specific
                codec/RTP/RTCP configuration that, along with the corresponding offer,
                specifies how the media plane should be established. The
                generation of the SDP <em class="rfc2119" title="MUST">MUST</em> follow the appropriate process for
                generating an answer described in [<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>].</p>
                <p>The generated SDP will also contain the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE agent</a>'s
                <a data-link-for="RTCIceParameters" href="#dom-rtciceparameters-usernamefragment" class="internalDFN" data-link-type="dfn"><code>usernameFragment</code></a>,
                <a data-link-for="RTCIceParameters" href="#dom-rtciceparameters-password" class="internalDFN" data-link-type="dfn"><code>password</code></a> and
                ICE options (as defined in [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>], Section 14) and may also contain
                any local candidates that have been gathered by the agent.</p>
                <p>The <code>certificates</code> value in <var>configuration</var>
                for the <code>RTCPeerConnection</code> provides the
                certificates configured by the application for the
                <code>RTCPeerConnection</code>.  These certificates,
                along with any default certificates are used to produce a set of
                certificate fingerprints. These certificate fingerprints are
                used in the construction of SDP and as input to requests for
                identity assertions.</p>
                <p>An answer can be marked as provisional, as described in
                <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-4.1.8.1">section 4.1.8.1.</a>)</span>,
                by setting the <code><a data-link-for="RTCSessionDescription" href="#dom-rtcsessiondescription-type" class="internalDFN" data-link-type="dfn"><code>type</code></a></code> to
                <code>"pranswer"</code>.</p>
                <p>If the <code>RTCPeerConnection</code> is configured to
                generate Identity assertions by calling
                <code><a href="#dom-rtcpeerconnection-setidentityprovider" class="internalDFN" data-link-type="dfn"><code>setIdentityProvider</code></a></code>, then the session description <em class="rfc2119" title="SHALL">SHALL</em>
                contain an appropriate assertion.</p>
                <p>When the method is called, the user agent <em class="rfc2119" title="MUST">MUST</em> run the
                following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>connection</var> be the
                    <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object on which the
                    method was invoked.</p>
                  </li>
                  <li>
                    <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
                    <code>true</code>, return a promise <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> with a newly
                    <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                    <code>InvalidStateError</code>.</p>
                  </li>
                  <li>
                    <p>If <var>connection</var> is configured with an identity
                    provider, then begin <a href="#sec.identity-proxy-assertion-request">the identity
                    assertion request process</a> if it has not already
                    begun.</p>
                  </li>
                  <li>
                    <p>Return the result of <a href="#enqueue-an-operation">enqueuing</a> the following
                    steps to <var>connection</var>'s operation queue:</p>
                    <ol>
                      <li>
                        <p>If <var>connection</var>'s <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a>
                        is neither <code>"have-remote-offer"</code> nor
                        <code>"have-local-pranswer"</code>, return a promise
                        <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> with a newly <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                        <code>InvalidStateError</code>.</p>
                      </li>
                      <li>
                        <p>Let <var>p</var> be a new promise.</p>
                      </li>
                      <li>
                        <p>In parallel, begin the <a href="#dfn-steps-to-create-an-answer" class="internalDFN" data-link-type="dfn">steps to create an
                        answer</a>, given <var>p</var>.</p>
                      </li>
                      <li>
                        <p>Return <var>p</var>.</p>
                      </li>
                    </ol>
                  </li>
                </ol>
                <p>The <dfn data-dfn-type="dfn" id="dfn-steps-to-create-an-answer">steps to create an answer</dfn> given a promise
                <var>p</var> are as follows:</p>
                <ol>
                  <li>
                    <p>If <var>connection</var> was not constructed with a set
                    of certificates, and one has not yet been generated, wait
                    for it to be generated.</p>
                  </li>
                  <li>
                    <p>Let <var>provider</var> be <var>connection</var>'s
                    currently configured identity provider if one has been
                    configured, or <code>null</code> otherwise.</p>
                  </li>
                  <li>
                    <p>If <var>provider</var> is non-null, wait for
                    <a href="#sec.identity-proxy-assertion-request">the
                    identity assertion request process</a> to complete.</p>
                  </li>
                  <li>
                    <p>If <var>provider</var> was unable to produce an
                    identity assertion, <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a> <var>p</var> with a newly
                    <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                    <code>NotReadableError</code> and abort these steps.</p>
                  </li>
                  <li>
                    <p>Inspect the system state to determine the currently
                    available resources as necessary for generating the answer,
                    as described in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-4.1.7">section 4.1.7.</a>)</span>.</p>
                  </li>
                  <li>
                    <p>If this inspection failed for any reason, <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a>
                    <var>p</var> with a newly
                    <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                    <code>OperationError</code> and abort these steps.</p>
                  </li>
                  <li>
                    <p>Queue a task that runs the <a href="#dfn-final-steps-to-create-an-answer" class="internalDFN" data-link-type="dfn">final steps to create an
                    answer</a>, given <var>p</var>.</p>
                  </li>
                </ol>
                <p>The <dfn data-dfn-type="dfn" id="dfn-final-steps-to-create-an-answer">final steps to create an answer</dfn> given a
                promise <var>p</var> are as follows:</p>
                <ol>
                  <li>
                    <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
                    <code>true</code>, then abort these steps.</p>
                  </li>
                  <li>
                    <p>If <var>connection</var> was modified in such a way that
                    additional inspection of the system state is necessary, or
                    if its configured indentity provider is no longer
                    <var>provider</var>, then in parallel begin the <a href="#dfn-steps-to-create-an-answer" class="internalDFN" data-link-type="dfn">steps to
                    create an answer</a> again, given <var>p</var>, and abort
                    these steps.</p>
                    <div class="note"><div role="heading" class="note-title marker" id="h-note-6" aria-level="6"><span>Note</span></div><div class="">
                      This may be necessary if, for example,
                      <code>createAnswer</code> was called when an
                      <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>'s direction was
                      <code>"recvonly"</code>, but while performing the <a href="#dfn-steps-to-create-an-answer" class="internalDFN" data-link-type="dfn">steps to create
                      an answer</a> in parallel, the direction was changed to
                      <code>"sendrecv"</code>, requiring additional inspection of video
                      encoding resources.
                    </div></div>
                  </li>
                  <li>
                    <p>Given the information that was obtained from previous
                    inspection and the current state of <var>connection</var>
                    and its <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>s, and the
                    identity assertion from <var>provider</var> (if non-null),
                    generate an SDP answer, <var>sdpString</var>, as described
                    in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.3">section 5.3.</a>)</span>.
                    </p>
                  </li>
                  <li>
                    <p>Let <var>answer</var> be a newly created
                    <code><a href="#dom-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a></code> dictionary
                    with its <code>type</code> member initialized to the string
                    <code>"answer"</code> and its <code>sdp</code> member
                    initialized to <var>sdpString</var>.</p>
                  </li>
                  <li><p>Set the <a href="#dfn-lastanswer" class="internalDFN" data-link-type="dfn">[[LastAnswer]]</a> internal slot to
                    <var>sdpString</var>.</p>
                  </li>
                  <li>
                    <p><a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">Resolve</a> <var>p</var> with <var>answer</var>.</p>
                  </li>
                </ol>
              </dd>
              <dt><code>setLocalDescription</code></dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-setlocaldescription" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl="" data-title="setLocalDescription" data-lt="setLocalDescription|setlocaldescription()"><code>setLocalDescription</code></dfn>
                method instructs the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> to
                apply the supplied
                <code><a href="#dom-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a></code> as the local
                description.</p>
                <p>This API changes the local media state. In order to
                successfully handle scenarios where the application wants to
                offer to change from one media format to a different,
                incompatible format, the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>
                <em class="rfc2119" title="MUST">MUST</em> be able to simultaneously support use of both the current
                and pending local descriptions (e.g. support codecs that exist
                in both descriptions) until a final answer is received, at
                which point the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> can fully
                adopt the pending local description, or rollback to the current
                description if the remote side rejected the change.</p>
                <p>As noted in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.4">section 5.4.</a>)</span>
                the SDP returned from <code>createOffer</code> or
                <code>createAnswer</code> <em class="rfc2119" title="MUST NOT">MUST NOT</em> be changed
                before passing it to <code>setLocalDescription</code>. As
                a result, when the method is invoked, the user agent <em class="rfc2119" title="MUST">MUST</em>
                run the following steps:</p>
                <ol>
                  <li>Let <var>description</var> be the first argument to
                  <code>setLocalDescription</code>.</li>
                  <li>If <code><var>description</var>.sdp</code> is the
                  empty string and <code><var>description</var>.type</code>
                  is <code>"answer"</code> or <code>"pranswer"</code>,
                  set <code><var>description</var>.sdp</code> to the value of
                  <var>connection</var>'s <a href="#dfn-lastanswer" class="internalDFN" data-link-type="dfn">[[LastAnswer]]</a> slot.</li>
                  <li>If <code><var>description</var>.sdp</code> is the
                  empty string and <code><var>description</var>.type</code>
                  is <code>"offer"</code>, set <code><var>description</var>.sdp</code>
                  to the value of <var>connection</var>'s
                  <a href="#dfn-lastoffer" class="internalDFN" data-link-type="dfn">[[LastOffer]]</a> slot.</li>
                  <li>Return the result of <a href="#set-description">setting
                  the RTCSessionDescription</a> indicated by
                  <code><var>description</var></code>.</li>
                </ol>
                <div class="note"><div role="heading" class="note-title marker" id="h-note-7" aria-level="6"><span>Note</span></div><div class="">
                  <p>As noted in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.9">section 5.9.</a>)</span>,
                  calling this method may trigger the ICE candidate gathering process
                  by the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>.</p>
                </div></div>
              </dd>
              <dt><code>setRemoteDescription</code></dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-setremotedescription" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl="" data-title="setRemoteDescription" data-lt="setRemoteDescription|setremotedescription()"><code>setRemoteDescription</code></dfn>
                method instructs the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> to
                apply the supplied
                <code><a href="#dom-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a></code> as the remote
                offer or answer. This API changes the local media state.</p>
                <p>When the method is invoked, the user agent <em class="rfc2119" title="MUST">MUST</em> return the
                result of <a href="#set-description">setting the
                RTCSessionDescription</a> indicated by the method's first
                argument.</p>
                <p>In addition, a remote description is processed to determine
                and verify the identity of the peer.</p>
                <p>If an <code>a=identity</code> attribute is present in the
                session description, the browser <a href="#sec.identity-verify-assertion">validates the identity
                assertion.</a>.</p>
                <p>If the "peerIdentity" configuration is applied to the
                <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>, this establishes a
                <dfn id="target-peer-identity" data-dfn-type="dfn">target peer identity</dfn> of
                the provided value. Alternatively, if the
                <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> has previously
                authenticated the identity of the peer (that is, there is a
                current value for <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-peeridentity" class="internalDFN" data-link-type="dfn"><code>peerIdentity</code></a></code> ), then this also
                establishes a <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer identity</a>.</p>
                <p>The <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer identity</a> cannot be changed once set.
                Once set, if a different value is provided, the user agent <em class="rfc2119" title="MUST">MUST</em>
                <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a> the returned promise with a newly
                <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                <code>InvalidModificationError</code> and abort this operation.
                The <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> <em class="rfc2119" title="MUST">MUST</em> be closed if the
                validated peer identity does not match the <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer
                identity</a>.</p>
                <p>If there is no <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer identity</a>, then
                <code>setRemoteDescription</code> does not await the completion
                of identity validation.</p>
              </dd>
              <dt><code>addIceCandidate</code></dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-addicecandidate" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl="" data-title="addIceCandidate" data-lt="addIceCandidate|addicecandidate()"><code>addIceCandidate</code></dfn>
                method provides a remote candidate to the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>.
                This method can also be used to indicate the end of remote
                candidates when called with an empty string for the <code><a data-link-for="RTCIceCandidate" href="#dom-rtcicecandidate-candidate" class="internalDFN" data-link-type="dfn"><code>candidate</code></a></code> member. The only
                members of the argument used by this method are <code><a data-link-for="RTCIceCandidate" href="#dom-rtcicecandidate-candidate" class="internalDFN" data-link-type="dfn"><code>candidate</code></a></code>, <code><a data-link-for="RTCIceCandidate" href="#dom-rtcicecandidate-sdpmid" class="internalDFN" data-link-type="dfn"><code>sdpMid</code></a></code>, <code><a data-link-for="RTCIceCandidate" href="#dom-rtcicecandidate-sdpmlineindex" class="internalDFN" data-link-type="dfn"><code>sdpMLineIndex</code></a></code>, and
                <code><a data-link-for="RTCIceCandidate" href="#dom-rtcicecandidate-usernamefragment" class="internalDFN" data-link-type="dfn"><code>usernameFragment</code></a></code>; the rest
                are ignored. When the method is invoked, the user agent <em class="rfc2119" title="MUST">MUST</em>
                run the following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>candidate</var> be the method's argument.</p>
                  </li>
                  <li>
                    <p>Let <var>connection</var> be the
                    <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object on which the
                    method was invoked.</p>
                  </li>
                  <li>
                    <p>If both <var>sdpMid</var> and <var>sdpMLineIndex</var> are
                    <code>null</code>, return a promise <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> with a newly
                    <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                    <code>TypeError</code>.</p>
                  </li>
                  <li>
                    <p>Return the result of <a href="#enqueue-an-operation">enqueuing</a> the following
                    steps to <var>connection</var>'s operation queue:</p>
                    <ol>
                      <li>
                        <p>If <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-remotedescription" class="internalDFN" data-link-type="dfn"><code>remoteDescription</code></a></code> is
                        <code>null</code> return a promise <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> with a newly
                        <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created
                        </a> <code>InvalidStateError</code>.</p>
                      </li>
                      <li>
                        <p>Let <var>p</var> be a new promise.</p>
                      </li>
                      <li>
                        <p>If <var>candidate.sdpMid</var> is not null, run the
                        following steps:</p>
                        <ol>
                          <li>
                            <p>If <var>candidate.sdpMid</var> is not equal to
                            the mid of any media description in
                            <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-remotedescription" class="internalDFN" data-link-type="dfn"><code>remoteDescription</code></a></code>,
                            <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a> <var>p</var> with a newly
                            <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">
                            created</a> <code>OperationError</code> and abort
                            these steps.</p>
                          </li>
                        </ol>
                      </li>
                      <li>
                        <p>Else, if <var>candidate.sdpMLineIndex</var> is not
                        null, run the following steps:</p>
                        <ol>
                          <li>
                            <p>If <var>candidate.sdpMLineIndex</var> is equal
                            to or larger than the number of media descriptions
                            in <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-remotedescription" class="internalDFN" data-link-type="dfn"><code>remoteDescription</code></a></code>,
                            <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a> <var>p</var> with a newly
                            <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">
                            created</a> <code>OperationError</code> and abort
                            these steps.</p>
                          </li>
                        </ol>
                      </li>
                      <li>
                        <p>If <code><var>candidate</var>.usernameFragment</code> is neither
                        <code>undefined</code> nor <code>null</code>, and is not
                        equal to any username fragment present in the corresponding
                        <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a> of an applied remote
                        description, <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a> <var>p</var> with a newly
                        <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created
                        </a> <code>OperationError</code> and abort these steps.
                        </p>
                      </li>
                      <li>
                        <p>In parallel, add the ICE candidate
                        <var>candidate</var> as described in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-4.1.17">section 4.1.17.</a>)</span>. Use
                        <code><var>candidate</var>.usernameFragment</code> to identify the
                        ICE <a href="#dfn-generation" class="internalDFN" data-link-type="dfn">generation</a>; if <code>usernameFragment</code> is null, process the
                        <var>candidate</var> for the most recent ICE
                        <a href="#dfn-generation" class="internalDFN" data-link-type="dfn">generation</a>. If
                        <code><var>candidate</var>.candidate</code> is an empty
                        string, process <var>candidate</var> as an
                        end-of-candidates indication for the corresponding
                        <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a> and ICE candidate
                        <a href="#dfn-generation" class="internalDFN" data-link-type="dfn">generation</a>.</p>
                        <ol>
                          <li>
                            <p>If <var>candidate</var> could not be
                            successfully added the user agent <em class="rfc2119" title="MUST">MUST</em> queue a task
                            that runs the following steps:</p>
                            <ol>
                              <li>
                                <p>If <var>connection</var>'s
                                <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is <code>true</code>,
                                then abort these steps.</p>
                              </li>
                              <li>
                                <p><a href="#dfn-reject" class="internalDFN" data-link-type="dfn">Reject</a> <var>p</var> with a
                                <code>DOMException</code> object whose
                                <code>name</code> attribute has the value
                                <code>OperationError</code> and abort these
                                steps.</p>
                              </li>
                            </ol>
                          </li>
                          <li>
                            <p>If <var>candidate</var> is applied successfully,
                            the user agent <em class="rfc2119" title="MUST">MUST</em> queue a task that runs the
                            following steps:</p>
                            <ol>
                              <li>
                                <p>If <var>connection</var>'s
                                <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is <code>true</code>,
                                then abort these steps.</p>
                              </li>
                              <li>
                                <p>If <var>connection</var>.<a href="#dfn-pendingremotedescription" class="internalDFN" data-link-type="dfn">[[PendingRemoteDescription]]</a>
                                is not <code>null</code>, and represents the ICE <a href="#dfn-generation" class="internalDFN" data-link-type="dfn">generation</a>
                                for which <var>candidate</var> was processed, add <var>candidate</var>
                                to the <var>connection</var>.<a href="#dfn-pendingremotedescription" class="internalDFN" data-link-type="dfn">[[PendingRemoteDescription]]</a>.sdp.</p>
                              </li>
                              <li>
                                <p>If <var>connection</var>.<a href="#dfn-currentremotedescription" class="internalDFN" data-link-type="dfn">[[CurrentRemoteDescription]]</a>
                                is not <code>null</code>, and represents the ICE <a href="#dfn-generation" class="internalDFN" data-link-type="dfn">generation</a>
                                for which <var>candidate</var> was processed, add <var>candidate</var>
                                to the <var>connection</var>.<a href="#dfn-currentremotedescription" class="internalDFN" data-link-type="dfn">[[CurrentRemoteDescription]]</a>.sdp.</p>
                              </li>
                              <li>
                                <p><a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">Resolve</a> <var>p</var> with
                                <code>undefined</code>.</p>
                              </li>
                            </ol>
                          </li>
                        </ol>
                      </li>
                      <li>
                        <p>Return <var>p</var>.</p>
                      </li>
                    </ol>
                  </li>
                </ol>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-getdefaulticeservers" data-title="getDefaultIceServers" data-lt="getDefaultIceServers|getdefaulticeservers()"><code>getDefaultIceServers</code></dfn></dt>
              <dd>
                <p>Returns a list of ICE servers that are configured into the
                browser. A browser might be configured to use local or private
                STUN or TURN servers. This method allows an application to learn
                about these servers and optionally use them.</p>
                <p class="fingerprint">This list is likely to be persistent and
                is the same across origins. It thus increases the
                fingerprinting surface of the browser. In privacy-sensitive
                contexts, browsers can consider mitigations such as only
                providing this data to whitelisted origins (or not providing it
                at all.)</p>
                <div class="note"><div role="heading" class="note-title marker" id="h-note-8" aria-level="6"><span>Note</span></div><p class="">Since the use of this information is left to
                the discretion of application developers, configuring a user
                agent with these defaults does not per se increase a user's
                ability to limit the exposure of their IP addresses.</p></div>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-getconfiguration" data-title="getConfiguration" data-lt="getConfiguration|getconfiguration()"><code>getConfiguration</code></dfn></dt>
              <dd>
                <p>Returns an <code><a href="#dom-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code>RTCConfiguration</code></a></code> object
                representing the current configuration of this
                <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object.</p>
                <p>When this method is called, the user agent <em class="rfc2119" title="MUST">MUST</em> return the
                <code><a href="#dom-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code>RTCConfiguration</code></a></code> object stored in the
                <a href="#dfn-configuration" class="internalDFN" data-link-type="dfn">[[Configuration]]</a> internal slot.</p>
              </dd>
              <dt><code>setConfiguration</code></dt>
              <dd>
                <p>The <code>setConfiguration</code> method updates the
                configuration of this <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>
                object. This includes changing the configuration of the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE
                Agent</a>. As noted in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-3.5.1">section 3.5.1.</a>)</span>, when the ICE
                configuration changes in a way that requires a new gathering
                phase, an ICE restart is required.</p>
                <p>When the <dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-setconfiguration" data-title="setConfiguration" data-lt="setConfiguration|setconfiguration()"><code>setConfiguration</code></dfn> method is
                invoked, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>connection</var> be the
                    <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> on which the method
                    was invoked.</p>
                  </li>
                  <li>
                    <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
                    <code>true</code>, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an
                    <code>InvalidStateError</code>.</p>
                  </li>
                  <li>
                    <p><a href="#set-pc-configuration" class="internalDFN" data-link-type="dfn">Set the configuration</a> specified by
                    <var>configuration</var>.</p>
                  </li>
                </ol>
              </dd>
              <dt><code>close</code></dt>
              <dd>
                <p>When the <dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-close" data-title="close" data-lt="close|close()"><code>close</code></dfn> method is invoked,
                the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>connection</var> be the
                    <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object on which the
                    method was invoked.</p>
                  </li>
                  <li>
                    <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
                    <code>true</code>, abort these steps.</p>
                  </li>
                  <li>
                    <p>Set <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot to
                    <code>true</code>.</p>
                  </li>
                  <li>
                    <p>Set <var>connection</var>'s <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> to
                    <code>"closed"</code>.</p>
                  </li>
                  <li>
                    <p>Let <var>transceivers</var> be the result of executing the
                    <code><a href="#dfn-collecttransceivers" class="internalDFN" data-link-type="dfn">CollectTransceivers</a></code> algorithm. For every
                    <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> <var>transceiver</var> in
                    <var>transceivers</var>, run the following steps:</p>
                    <ol>
                      <li>
                        <p>If <var>transceiver</var>'s <a href="#dfn-stopped" class="internalDFN" data-link-type="dfn">[[Stopped]]</a> slot
                        is <code>true</code>, abort these steps.</p>
                      </li>
                      <li>
                        <p>Let <var>sender</var> be <var>transceiver</var>'s
                        <a href="#dfn-sender" class="internalDFN" data-link-type="dfn">[[Sender]]</a>.</p>
                      </li>
                      <li>
                        <p>Let <var>receiver</var> be <var>transceiver</var>'s
                        <a href="#dfn-receiver" class="internalDFN" data-link-type="dfn">[[Receiver]]</a>.</p>
                      </li>
                      <li>
                        <p>Stop sending media with <var>sender</var>.</p>
                      </li>
                      <li>
                        <p>Send an RTCP BYE for each RTP stream that was being
                        sent by <var>sender</var>, as specified in [<cite><a class="bibref" href="#bib-RFC3550">RFC3550</a></cite>].</p>
                      </li>
                      <li>
                        <p>Stop receiving media with <var>receiver</var>.</p>
                      </li>
                      <li>
                        <p>Set the <code>readyState</code> of
                        <var>receiver</var>'s <a href="#dfn-receivertrack" class="internalDFN" data-link-type="dfn">[[ReceiverTrack]]</a> to
                        <code>"ended"</code>.</p>
                      </li>
                      <li>
                        <p>Set <var>transceiver</var>'s <a href="#dfn-stopped" class="internalDFN" data-link-type="dfn">[[Stopped]]</a> slot
                        to <code>true</code>.</p>
                      </li>
                    </ol>
                  </li>
                  <li>
                    <p>Set the <a href="#dfn-readystate" class="internalDFN" data-link-type="dfn">[[ReadyState]]</a> slot of each of
                    <var>connection</var>'s <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>s
                    to <code>"closed"</code></p>
                    <div class="note"><div role="heading" class="note-title marker" id="h-note-9" aria-level="6"><span>Note</span></div><div class="">The <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>s
                    will be closed abruptly and the closing procedure
                    will not be invoked.</div></div>
                  </li>
                  <li>
                    <p>If the <var>connection</var>'s <a href="#dfn-sctptransport" class="internalDFN" data-link-type="dfn">[[SctpTransport]]</a>
                    is not <code>null</code>, tear down the underlying SCTP
                    association by sending an SCTP ABORT chunk and set the
                    <a href="#dfn-sctptransportstate" class="internalDFN" data-link-type="dfn">[[SctpTransportState]]</a> to <code>"closed"</code>.</p>
                  </li>
                  <li>
                    <p>Set the <a href="#dfn-dtlstransportstate" class="internalDFN" data-link-type="dfn">[[DtlsTransportState]]</a> slot of each of
                    <var>connection</var>'s <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code>s
                    to <code>"closed"</code>.</p>
                  </li>
                  <li>
                    <p>Destroy <var>connection</var>'s <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>,
                    abruptly ending any active ICE processing and
                    releasing any relevant resources (e.g. TURN
                    permissions).</p>
                  </li>
                  <li>
                    <p>Set the <a href="#dfn-icetransportstate" class="internalDFN" data-link-type="dfn">[[IceTransportState]]</a> slot of each of
                    <var>connection</var>'s <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>s
                    to <code>"closed"</code>.</p>
                  </li>
                  <li>
                    <p>Set <var>connection</var>'s <a href="#dfn-ice-connection-state" class="internalDFN" data-link-type="dfn">ICE connection state</a> to
                    <code>"closed"</code>.</p>
                  </li>
                  <li>
                    <p>Set <var>connection</var>'s <a href="#dfn-connection-state" class="internalDFN" data-link-type="dfn">connection state</a> to
                    <code>"closed"</code>.</p>
                  </li>
                </ol>
              </dd>
            </dl>
          </section>
        </div>
      </section>
      <section id="legacy-interface-extensions">
        <h4 id="x4-4-3-legacy-interface-extensions"><span class="secno">4.4.3 </span>Legacy Interface Extensions</h4>
          <p>Supporting the methods in this section is optional. However,
          if these methods are supported it is mandatory to implement
          according to what is specified here.</p>
        <div class="note"><div role="heading" class="note-title marker" id="h-note-10" aria-level="5"><span>Note</span></div><div class="">
          The addStream method that used to exist on
          <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> is easy to polyfill as:
          <pre aria-busy="false" class="hljs javascript">RTCPeerConnection.prototype.addStream = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">stream</span>) </span>{
  stream.getTracks().forEach(<span class="hljs-function">(<span class="hljs-params">track</span>) =&gt;</span> <span class="hljs-keyword">this</span>.addTrack(track, stream));
};</pre>
        </div></div>
        <section id="method-extensions">
          <h5 id="x4-4-3-1-method-extensions"><span class="secno">4.4.3.1 </span>Method extensions</h5>
        <div>
          <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcpeerconnection-partial-1" data-idl="" data-title="RTCPeerConnection">partial interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></span> {
<span class="idlMethod" id="idl-def-rtcpeerconnection-createoffer!overload-1" data-idl="" data-title="createOffer" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="createoffer!overload-1" href="#dom-rtcpeerconnection-createoffer!overload-1" class="internalDFN" data-link-type="dfn"><code>createOffer</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-rtcsessiondescriptioncallback" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionCallback</code></a></span> <span class="idlParamName">successCallback</span></span>,
                              <span class="idlParam"><span class="idlParamType"><a href="#dom-rtcpeerconnectionerrorcallback" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionErrorCallback</code></a></span> <span class="idlParamName">failureCallback</span></span>,
                              <span class="idlParam">optional <span class="idlParamType"><a href="#dom-rtcofferoptions" class="internalDFN" data-link-type="dfn"><code>RTCOfferOptions</code></a></span> <span class="idlParamName">options</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-setlocaldescription!overload-1" data-idl="" data-title="setLocalDescription" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="setlocaldescription!overload-1" href="#dom-rtcpeerconnection-setlocaldescription!overload-1" class="internalDFN" data-link-type="dfn"><code>setLocalDescription</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a></span> <span class="idlParamName">description</span></span>,
                                      <span class="idlParam"><span class="idlParamType">VoidFunction</span> <span class="idlParamName">successCallback</span></span>,
                                      <span class="idlParam"><span class="idlParamType"><a href="#dom-rtcpeerconnectionerrorcallback" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionErrorCallback</code></a></span> <span class="idlParamName">failureCallback</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-createanswer!overload-1" data-idl="" data-title="createAnswer" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="createanswer!overload-1" href="#dom-rtcpeerconnection-createanswer!overload-1" class="internalDFN" data-link-type="dfn"><code>createAnswer</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-rtcsessiondescriptioncallback" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionCallback</code></a></span> <span class="idlParamName">successCallback</span></span>,
                               <span class="idlParam"><span class="idlParamType"><a href="#dom-rtcpeerconnectionerrorcallback" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionErrorCallback</code></a></span> <span class="idlParamName">failureCallback</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-setremotedescription!overload-1" data-idl="" data-title="setRemoteDescription" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="setremotedescription!overload-1" href="#dom-rtcpeerconnection-setremotedescription!overload-1" class="internalDFN" data-link-type="dfn"><code>setRemoteDescription</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a></span> <span class="idlParamName">description</span></span>,
                                       <span class="idlParam"><span class="idlParamType">VoidFunction</span> <span class="idlParamName">successCallback</span></span>,
                                       <span class="idlParam"><span class="idlParamType"><a href="#dom-rtcpeerconnectionerrorcallback" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionErrorCallback</code></a></span> <span class="idlParamName">failureCallback</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-addicecandidate!overload-1" data-idl="" data-title="addIceCandidate" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="addicecandidate!overload-1" href="#dom-rtcpeerconnection-addicecandidate!overload-1" class="internalDFN" data-link-type="dfn"><code>addIceCandidate</code></a></span>(<span class="idlParam"><span class="idlParamType">(<a href="#dom-rtcicecandidateinit" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidateInit</code></a> or <a href="#dom-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a>)</span> <span class="idlParamName">candidate</span></span>,
                                  <span class="idlParam"><span class="idlParamType">VoidFunction</span> <span class="idlParamName">successCallback</span></span>,
                                  <span class="idlParam"><span class="idlParamType"><a href="#dom-rtcpeerconnectionerrorcallback" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionErrorCallback</code></a></span> <span class="idlParamName">failureCallback</span></span>);</span>
};</span></pre></div>
          <section>
            <h6 id="methods-0">Methods</h6>
            <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="methods">
              <dt><dfn data-lt="createoffer!overload-1" data-lt-nodefault="true" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-createoffer!overload-1" data-idl="" data-title="createOffer"><code>createOffer</code></dfn></dt>
              <dd>
                <p>When the <code>createOffer</code> method is called, the user
                agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>successCallback</var> be the method's first
                    argument.</p>
                  </li>
                  <li>
                    <p>Let <var>failureCallback</var> be the callback indicated
                    by the method's second argument.</p>
                  </li>
                  <li>
                    <p>Let <var>options</var> be the callback indicated by the
                    method's third argument.</p>
                  </li>
                  <li>
                    <p>Run the steps specified by
                    <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>'s <a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-createoffer" class="internalDFN" data-link-type="dfn">createOffer()</a> method with
                    <var>options</var> as the sole argument, and let
                    <var>p</var> be the resulting promise.</p>
                  </li>
                  <li>
                    <p>Upon <a href="#dfn-fulfill" class="internalDFN" data-link-type="dfn">fulfillment</a> of <var>p</var> with value
                    <var>offer</var>, invoke <var>successCallback</var> with
                    <var>offer</var> as the argument.</p>
                  </li>
                  <li>
                    <p>Upon <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejection</a> of <var>p</var> with reason <var>r</var>,
                    invoke <var>failureCallback</var> with <var>r</var> as the
                    argument.</p>
                  </li>
                  <li>
                    <p>Return a promise <a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">resolved</a> with
                    <code>undefined</code>.</p>
                  </li>
                </ol>
              </dd>
              <dt><dfn data-lt="setlocaldescription!overload-1" data-lt-nodefault="true" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-setlocaldescription!overload-1" data-idl="" data-title="setLocalDescription"><code>setLocalDescription</code></dfn></dt>
              <dd>
                <p>When the <code>setLocalDescription</code> method is called,
                the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>description</var> be the method's first
                    argument.</p>
                  </li>
                  <li>
                    <p>Let <var>successCallback</var> be the callback indicated
                    by the method's second argument.</p>
                  </li>
                  <li>
                    <p>Let <var>failureCallback</var> be the callback indicated
                    by the method's third argument.</p>
                  </li>
                  <li>
                    <p>Run the steps specified by
                    <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>'s <a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setlocaldescription" class="internalDFN" data-link-type="dfn"><code>setLocalDescription</code></a> method with
                    <var>description</var> as the sole argument, and let
                    <var>p</var> be the resulting promise.</p>
                  </li>
                  <li>
                    <p>Upon <a href="#dfn-fulfill" class="internalDFN" data-link-type="dfn">fulfillment</a> of <var>p</var>, invoke
                    <var>successCallback</var> with <code>undefined</code> as
                    the argument.</p>
                  </li>
                  <li>
                    <p>Upon <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejection</a> of <var>p</var> with reason <var>r</var>,
                    invoke <var>failureCallback</var> with <var>r</var> as the
                    argument.</p>
                  </li>
                  <li>
                    <p>Return a promise <a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">resolved</a> with
                    <code>undefined</code>.</p>
                  </li>
                </ol>
              </dd>
              <dt><dfn data-lt="createanswer!overload-1" data-lt-nodefault="true" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-createanswer!overload-1" data-idl="" data-title="createAnswer"><code>createAnswer</code></dfn></dt>
              <dd>
                <div class="note"><div role="heading" class="note-title marker" id="h-note-11" aria-level="7"><span>Note</span></div><div class="">The legacy <code>createAnswer</code> method
                does not take an <code><a href="#dom-rtcansweroptions" class="internalDFN" data-link-type="dfn"><code>RTCAnswerOptions</code></a></code>
                parameter, since no known legacy <code>createAnswer</code>
                implementation ever supported it.</div></div>

                <p>When the <code>createAnswer</code> method is called, the
                user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>successCallback</var> be the method's first
                    argument.</p>
                  </li>
                  <li>
                    <p>Let <var>failureCallback</var> be the callback indicated
                    by the method's second argument.</p>
                  </li>
                  <li>
                    <p>Run the steps specified by
                    <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>'s <a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-createanswer" class="internalDFN" data-link-type="dfn">createAnswer()</a> method with no
                    arguments, and let <var>p</var> be the resulting
                    promise.</p>
                  </li>
                  <li>
                    <p>Upon <a href="#dfn-fulfill" class="internalDFN" data-link-type="dfn">fulfillment</a> of <var>p</var> with value
                    <var>answer</var>, invoke <var>successCallback</var> with
                    <var>answer</var> as the argument.</p>
                  </li>
                  <li>
                    <p>Upon <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejection</a> of <var>p</var> with reason <var>r</var>,
                    invoke <var>failureCallback</var> with <var>r</var> as the
                    argument.</p>
                  </li>
                  <li>
                    <p>Return a promise <a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">resolved</a> with
                    <code>undefined</code>.</p>
                  </li>
                </ol>
              </dd>
              <dt><dfn data-lt="setremotedescription!overload-1" data-lt-nodefault="true" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-setremotedescription!overload-1" data-idl="" data-title="setRemoteDescription"><code>setRemoteDescription</code></dfn></dt>
              <dd>
                <p>When the <code>setRemoteDescription</code> method is called,
                the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>description</var> be the method's first
                    argument.</p>
                  </li>
                  <li>
                    <p>Let <var>successCallback</var> be the callback indicated
                    by the method's second argument.</p>
                  </li>
                  <li>
                    <p>Let <var>failureCallback</var> be the callback indicated
                    by the method's third argument.</p>
                  </li>
                  <li>
                    <p>Run the steps specified by
                    <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>'s <a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setremotedescription" class="internalDFN" data-link-type="dfn"><code>setRemoteDescription</code></a> method with
                    <var>description</var> as the sole argument, and let
                    <var>p</var> be the resulting promise.</p>
                  </li>
                  <li>
                    <p>Upon <a href="#dfn-fulfill" class="internalDFN" data-link-type="dfn">fulfillment</a> of <var>p</var>, invoke
                    <var>successCallback</var> with <code>undefined</code> as
                    the argument.</p>
                  </li>
                  <li>
                    <p>Upon <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejection</a> of <var>p</var> with reason <var>r</var>,
                    invoke <var>failureCallback</var> with <var>r</var> as the
                    argument.</p>
                  </li>
                  <li>
                    <p>Return a promise <a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">resolved</a> with
                    <code>undefined</code>.</p>
                  </li>
                </ol>
              </dd>
              <dt><code>addIceCandidate</code></dt>
              <dd>
                <p>When the <dfn data-lt="addicecandidate!overload-1" data-lt-nodefault="true" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-addicecandidate!overload-1" data-idl="" data-title="addIceCandidate"><code>addIceCandidate</code></dfn> method is called, the
                user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>candidate</var> be the method's first
                    argument.</p>
                  </li>
                  <li>
                    <p>Let <var>successCallback</var> be the callback indicated
                    by the method's second argument.</p>
                  </li>
                  <li>
                    <p>Let <var>failureCallback</var> be the callback indicated
                    by the method's third argument.</p>
                  </li>
                  <li>
                    <p>Run the steps specified by
                    <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>'s <a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-addicecandidate" class="internalDFN" data-link-type="dfn">addIceCandidate()</a> method with
                    <var>candidate</var> as the sole argument, and let
                    <var>p</var> be the resulting promise.</p>
                  </li>
                  <li>
                    <p>Upon <a href="#dfn-fulfill" class="internalDFN" data-link-type="dfn">fulfillment</a> of <var>p</var>, invoke
                    <var>successCallback</var> with <code>undefined</code> as
                    the argument.</p>
                  </li>
                  <li>
                    <p>Upon <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejection</a> of <var>p</var> with reason <var>r</var>,
                    invoke <var>failureCallback</var> with <var>r</var> as the
                    argument.</p>
                  </li>
                  <li>
                    <p>Return a promise <a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">resolved</a> with
                    <code>undefined</code>.</p>
                  </li>
                </ol>
              </dd>
            </dl>
            <h6 id="callback-definitions">Callback Definitions</h6>
            <p>These callbacks are only used on the legacy APIs.</p>
            <section>
              <h6 id="rtcpeerconnectionerrorcallback"><dfn data-dfn-type="dfn" id="dom-rtcpeerconnectionerrorcallback" data-idl="" data-title="RTCPeerConnectionErrorCallback" data-dfn-for=""><code>RTCPeerConnectionErrorCallback</code></dfn></h6>
              <div>
                <div><pre class="def idl"><span class="idlCallback" id="idl-def-rtcpeerconnectionerrorcallback" data-idl="" data-title="RTCPeerConnectionErrorCallback">callback <span class="idlCallbackID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcpeerconnectionerrorcallback" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionErrorCallback</code></a></span> = <span class="idlCallbackType">void</span> (<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMException">DOMException</a></span> <span class="idlParamName">error</span></span>);</span></pre></div>
                <section>
                  <h6 id="callback-rtcpeerconnectionerrorcallback-parameters">Callback <a class="idlType internalDFN" href="#dom-rtcpeerconnectionerrorcallback" data-link-type="dfn"><code>RTCPeerConnectionErrorCallback</code></a>
                  Parameters</h6>
                  <dl data-link-for="RTCPeerConnectionErrorCallback" data-dfn-for="RTCPeerConnectionErrorCallback" class="callback-members">
                    <dt><code>error</code> of type <span class="idlMemberType">DOMException</span></dt>
                    <dd>An error object encapsulating information about what went
                    wrong.</dd>
                  </dl>
                </section>
              </div>
            </section>
            <section>
              <h6 id="rtcsessiondescriptioncallback"><dfn data-dfn-type="dfn" id="dom-rtcsessiondescriptioncallback" data-idl="" data-title="RTCSessionDescriptionCallback" data-dfn-for=""><code>RTCSessionDescriptionCallback</code></dfn></h6>
              <div>
                <div><pre class="def idl"><span class="idlCallback" id="idl-def-rtcsessiondescriptioncallback" data-idl="" data-title="RTCSessionDescriptionCallback">callback <span class="idlCallbackID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcsessiondescriptioncallback" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionCallback</code></a></span> = <span class="idlCallbackType">void</span> (<span class="idlParam"><span class="idlParamType"><a href="#dom-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a></span> <span class="idlParamName">description</span></span>);</span></pre></div>
                <section>
                  <h6 id="callback-rtcsessiondescriptioncallback-parameters">Callback <a class="idlType internalDFN" href="#dom-rtcsessiondescriptioncallback" data-link-type="dfn"><code>RTCSessionDescriptionCallback</code></a>
                  Parameters</h6>
                  <dl data-link-for="RTCSessionDescriptionCallback" data-dfn-for="RTCSessionDescriptionCallback" class="callback-members">
                    <dt><code>description</code> of type <span class="idlMemberType"><a href="#dom-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a></span></dt>
                    <dd>The object containing the SDP [<cite><a class="bibref" href="#bib-SDP">SDP</a></cite>].</dd>
                  </dl>
                </section>
              </div>
            </section>
          </section>
        </div>
        </section>
      <section id="legacy-configuration-extensions">
        <h5 id="x4-4-3-2-legacy-configuration-extensions"><span class="secno">4.4.3.2 </span>Legacy configuration extensions</h5>
        <p>This section describes a set of legacy extensions that may be used to
        influence how an offer is created, in addition to the media added to
        the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>. Developers are encouraged to
        use the <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> API instead.</p>
        <p>When <a href="#dom-rtcpeerconnection-createoffer">createOffer</a>
        is called with any of the legacy options specified in this section,
        run the followings steps instead of the regular <a href="#dom-rtcpeerconnection-createoffer">createOffer</a> steps:</p>
        <ol>
          <li>
            <p>Let <var>options</var> be the methods first argument.</p>
          </li>
          <li>
            <p>Let <var>connection</var> be the current <code>
            <a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object.</p>
          </li>
          <li>
            <p>For each "offerToReceive&lt;Kind&gt;" member in <var>options</var> with
            kind, <var>kind</var>, run the following steps:</p>
            <ol>
              <li>
                <p>If the value of the dictionary member is false,</p>
                <ol>
                  <li>
                    <p>For each non-stopped "sendrecv" transceiver of
                    <a href="#dfn-transceiver-kind" class="internalDFN" data-link-type="dfn">transceiver kind</a> <var>kind</var>, set
                    <var>transceiver</var>'s <a href="#dfn-direction" class="internalDFN" data-link-type="dfn">[[Direction]]</a> slot to
                    "sendonly".</p>
                  </li>
                  <li>
                    <p>For each non-stopped "recvonly" transceiver of
                    <a href="#dfn-transceiver-kind" class="internalDFN" data-link-type="dfn">transceiver kind</a> <var>kind</var>, set
                    <var>transceiver</var>'s <a href="#dfn-direction" class="internalDFN" data-link-type="dfn">[[Direction]]</a> slot to
                    "inactive".</p>
                  </li>
                </ol>
                <p>Continue with the next option, if any.</p>
              </li>
              <li>
                <p>If <var>connection</var> has any non-stopped "sendrecv"
                or "recvonly" transceivers of <a href="#dfn-transceiver-kind" class="internalDFN" data-link-type="dfn">transceiver kind</a>
                <var>kind</var>, continue with the next option, if any.</p>
              </li>
              <li>
                <p>Let <var>transceiver</var> be the result of invoking the
                equivalent of
                <code>connection.addTransceiver(kind)</code>, except
                that this operation <em class="rfc2119" title="MUST NOT">MUST NOT</em> <a href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">update the
                negotiation-needed flag</a>.</p>
              </li>
              <li>
                <p>If <var>transceiver</var> is unset because the previous
                operation threw an error, abort these steps.</p>
              </li>
              <li>
                <p>Set <var>transceiver</var>'s <a href="#dfn-direction" class="internalDFN" data-link-type="dfn">[[Direction]]</a> slot
                to "recvonly".</p>
              </li>
            </ol>
          </li>
          <li>
            <p>Run the steps specified by <a href="#dom-rtcpeerconnection-createoffer">createOffer</a> to create
          the offer.</p>
          </li>
        </ol>
        <div>
          <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcofferoptions-partial-1" data-idl="" data-title="RTCOfferOptions">partial dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcofferoptions" class="internalDFN" data-link-type="dfn"><code>RTCOfferOptions</code></a></span> {
<span class="idlMember" id="idl-def-rtcofferoptions-offertoreceiveaudio" data-idl="" data-title="offerToReceiveAudio" data-dfn-for="rtcofferoptions">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcofferoptions" data-lt="" href="#dom-rtcofferoptions-offertoreceiveaudio" class="internalDFN" data-link-type="dfn"><code>offerToReceiveAudio</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcofferoptions-offertoreceivevideo" data-idl="" data-title="offerToReceiveVideo" data-dfn-for="rtcofferoptions">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcofferoptions" data-lt="" href="#dom-rtcofferoptions-offertoreceivevideo" class="internalDFN" data-link-type="dfn"><code>offerToReceiveVideo</code></a></span>;</span>
};</span></pre></div>
          <section>
            <h6 id="attributes-0">Attributes</h6>
            <dl data-link-for="RTCOfferOptions" data-dfn-for="RTCOfferOptions" class="dictionary-members">
              <dt><dfn data-dfn-for="rtcofferoptions" data-dfn-type="dfn" id="dom-rtcofferoptions-offertoreceiveaudio" data-idl="" data-title="offerToReceiveAudio"><code>offerToReceiveAudio</code></dfn> of type <span class="idlMemberType">boolean</span></dt>
              <dd>
                <p>This setting provides additional control over the
                directionality of audio. For example, it can be used to ensure
                that audio can be received, regardless if audio is
                sent or not.</p>
              </dd>
              <dt><dfn data-dfn-for="rtcofferoptions" data-dfn-type="dfn" id="dom-rtcofferoptions-offertoreceivevideo" data-idl="" data-title="offerToReceiveVideo"><code>offerToReceiveVideo</code></dfn> of type <span class="idlMemberType">boolean</span></dt>
              <dd>
                <p>This setting provides additional control over the
                directionality of video. For example, it can be used to ensure
                that video can be received, regardless if video is sent or
                not.</p>
              </dd>
            </dl>
          </section>
        </div>
      </section>
      </section>
      <section id="garbage-collection">
        <h4 id="x4-4-4-garbage-collection"><span class="secno">4.4.4 </span>Garbage collection</h4>
        <p>An <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object <em class="rfc2119" title="MUST">MUST</em> not be garbage
        collected as long as any event can cause an event handler to be
        triggered on the object. When the object's <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> internal
        slot is <code>true</code>, no such event handler can be triggered and
        it is therefore safe to garbage collect the object.</p>
        <p>All <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> and
        <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code> objects that are connected to an
        <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> have a strong reference to the
        <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object.</p>
      </section>
    </section>
    <section id="error-handling">
      <h3 id="x4-5-error-handling"><span class="secno">4.5 </span>Error Handling</h3>
      <section id="general-principles">
        <h4 id="x4-5-1-general-principles"><span class="secno">4.5.1 </span>General Principles</h4>
        <p>All methods that return promises are governed by the standard error
        handling rules of promises. Methods that do not return promises may
        throw exceptions to indicate errors.</p>
      </section>
    </section>
    <section id="session-description-model">
      <h3 id="x4-6-session-description-model"><span class="secno">4.6 </span>Session Description Model</h3>
      <section id="rtcsdptype">
        <h4 id="x4-6-1-rtcsdptype"><span class="secno">4.6.1 </span><dfn data-dfn-type="dfn" id="dom-rtcsdptype" data-idl="" data-title="RTCSdpType" data-dfn-for=""><code>RTCSdpType</code></dfn></h4>
        <p>The RTCSdpType enum describes the type of an
        <code><a href="#dom-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a></code> or
        <code><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></code> instance.</p>
        <div>
          <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtcsdptype" data-idl="" data-title="RTCSdpType">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcsdptype" class="internalDFN" data-link-type="dfn"><code>RTCSdpType</code></a></span> {
    <a href="#dom-rtcsdptype-offer" class="idlEnumItem">"offer"</a>,
    <a href="#dom-rtcsdptype-pranswer" class="idlEnumItem">"pranswer"</a>,
    <a href="#dom-rtcsdptype-answer" class="idlEnumItem">"answer"</a>,
    <a href="#dom-rtcsdptype-rollback" class="idlEnumItem">"rollback"</a>
};</span></pre></div>
          <table data-link-for="RTCSdpType" data-dfn-for="RTCSdpType" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description</th>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcsdptype" data-dfn-type="dfn" id="dom-rtcsdptype-offer" data-title="offer"><code>offer</code></dfn></td>
                <td>
                  <p>An <code>RTCSdpType</code> of <code>offer</code> indicates
                  that a description <em class="rfc2119" title="MUST">MUST</em> be treated as an [<cite><a class="bibref" href="#bib-SDP">SDP</a></cite>] offer.</p>
                </td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcsdptype" data-dfn-type="dfn" id="dom-rtcsdptype-pranswer" data-title="pranswer"><code>pranswer</code></dfn></td>
                <td>
                  <p>An <code>RTCSdpType</code> of <code>pranswer</code>
                  indicates that a description <em class="rfc2119" title="MUST">MUST</em> be treated as an [<cite><a class="bibref" href="#bib-SDP">SDP</a></cite>]
                  answer, but not a final answer. A description used as an SDP
                  <code>pranswer</code> may be applied as a response to an SDP
                  offer, or an update to a previously sent SDP pranswer.</p>
                </td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcsdptype" data-dfn-type="dfn" id="dom-rtcsdptype-answer" data-title="answer"><code>answer</code></dfn></td>
                <td>
                  <p>An <code>RTCSdpType</code> of <code>answer</code>
                  indicates that a description <em class="rfc2119" title="MUST">MUST</em> be treated as an [<cite><a class="bibref" href="#bib-SDP">SDP</a></cite>]
                  final answer, and the offer-answer exchange <em class="rfc2119" title="MUST">MUST</em> be
                  considered complete. A description used as an SDP answer may
                  be applied as a response to an SDP offer or as an update to a
                  previously sent SDP pranswer.</p>
                </td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcsdptype" data-dfn-type="dfn" id="dom-rtcsdptype-rollback" data-title="rollback"><code>rollback</code></dfn></td>
                <td>
                  <p>An <code>RTCSdpType</code> of <code>rollback</code>
                  indicates that a description <em class="rfc2119" title="MUST">MUST</em> be treated as canceling the
                  current SDP negotiation and moving the SDP [<cite><a class="bibref" href="#bib-SDP">SDP</a></cite>] offer and
                  answer back to what it was in the previous stable state. Note
                  the local or remote SDP descriptions in the previous stable
                  state could be null if there has not yet been a successful
                  offer-answer negotiation.</p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
      <section id="rtcsessiondescription-class">
        <h4 id="x4-6-2-rtcsessiondescription-class"><span class="secno">4.6.2 </span><dfn data-dfn-type="dfn" id="dom-rtcsessiondescription" data-idl="" data-title="RTCSessionDescription" data-dfn-for=""><code>RTCSessionDescription</code></dfn> Class</h4>
        <p>The <code>RTCSessionDescription</code> class is used by
        <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> to expose local and remote
        session descriptions.</p>
        <div>
          <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcsessiondescription" data-idl="" data-title="RTCSessionDescription">[<span class="idlCtor"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a></span> <span class="idlParamName">descriptionInitDict</span></span>)</span>,
 <span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></span> {
<span class="idlAttribute" id="idl-def-rtcsessiondescription-type" data-idl="" data-title="type" data-dfn-for="rtcsessiondescription">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcsdptype" class="internalDFN" data-link-type="dfn"><code>RTCSdpType</code></a></span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcsessiondescription" data-lt="" href="#dom-rtcsessiondescription-type" class="internalDFN" data-link-type="dfn"><code>type</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcsessiondescription-sdp" data-idl="" data-title="sdp" data-dfn-for="rtcsessiondescription">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>  <span class="idlAttrName"><a data-no-default="" data-link-for="rtcsessiondescription" data-lt="" href="#dom-rtcsessiondescription-sdp" class="internalDFN" data-link-type="dfn"><code>sdp</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcsessiondescription-tojson" data-idl="" data-title="toJSON" data-dfn-for="rtcsessiondescription">    [<span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Default">Default</a></span></span>] <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-object">object</a></span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcsessiondescription" data-lt="tojson()|toJSON" href="#dom-rtcsessiondescription-tojson" class="internalDFN" data-link-type="dfn">toJSON</a></span>();</span>
};</span></pre></div>
          <section>
            <h5 id="constructors-0">Constructors</h5>
            <dl data-link-for="RTCSessionDescription" data-dfn-for="RTCSessionDescription" class="constructors">
              <dt><code>RTCSessionDescription</code></dt>
              <dd>
                The <dfn id="dom-sessiondescription" data-dfn-type="dfn"><code>RTCSessionDescription()</code></dfn>
                constructor takes a dictionary argument,
                <var>descriptionInitDict</var>, whose content is used to
                initialize the new <code><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></code>
                object. This constructor is deprecated; it exists for legacy
                compatibility reasons only.
              </dd>
            </dl>
          </section>
          <section>
            <h5 id="attributes-1">Attributes</h5>
            <dl data-link-for="RTCSessionDescription" data-dfn-for="RTCSessionDescription" class="attributes">
              <dt><dfn data-idl="" data-dfn-for="rtcsessiondescription" data-dfn-type="dfn" id="dom-rtcsessiondescription-type" data-title="type"><code>type</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcsdptype" class="internalDFN" data-link-type="dfn"><code>RTCSdpType</code></a></span>, readonly</dt>
              <dd>The type of this RTCSessionDescription.</dd>
              <dt><dfn data-idl="" data-dfn-for="rtcsessiondescription" data-dfn-type="dfn" id="dom-rtcsessiondescription-sdp" data-title="sdp"><code>sdp</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
              <dd>The string representation of the SDP [<cite><a class="bibref" href="#bib-SDP">SDP</a></cite>].</dd>
            </dl>
          </section>
          <section>
            <h5 id="methods-1">Methods</h5>
            <dl data-link-for="RTCSessionDescription" data-dfn-for="RTCSessionDescription" class="methods">
              <dt><dfn data-idl="" data-dfn-for="rtcsessiondescription" data-dfn-type="dfn" id="dom-rtcsessiondescription-tojson" data-title="toJSON()" data-lt="tojson()|toJSON"><code>toJSON()</code></dfn></dt>
              <dd>When called, run [<cite><a class="bibref" href="#bib-WEBIDL-1">WEBIDL-1</a></cite>]'s <a href="https://heycam.github.io/webidl/#default-tojson-operation">default toJSON
              operation</a>.</dd>
            </dl>
          </section>
        </div>
        <div>
          <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcsessiondescriptioninit" data-idl="" data-title="RTCSessionDescriptionInit">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a></span> {
<span class="idlMember" id="idl-def-rtcsessiondescriptioninit-type" data-idl="" data-title="type" data-dfn-for="rtcsessiondescriptioninit">    required <span class="idlMemberType"><a href="#dom-rtcsdptype" class="internalDFN" data-link-type="dfn"><code>RTCSdpType</code></a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcsessiondescriptioninit" data-lt="" href="#dom-rtcsessiondescriptioninit-type" class="internalDFN" data-link-type="dfn"><code>type</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcsessiondescriptioninit-sdp" data-idl="" data-title="sdp" data-dfn-for="rtcsessiondescriptioninit">             <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>  <span class="idlMemberName"><a data-no-default="" data-link-for="rtcsessiondescriptioninit" data-lt="" href="#dom-rtcsessiondescriptioninit-sdp" class="internalDFN" data-link-type="dfn"><code>sdp</code></a></span> = <span class="idlMemberValue">""</span>;</span>
};</span></pre></div>
          <section>
            <h5 id="dictionary-rtcsessiondescriptioninit-members">Dictionary <dfn data-dfn-type="dfn" id="dom-rtcsessiondescriptioninit" data-idl="" data-title="RTCSessionDescriptionInit" data-dfn-for=""><code>RTCSessionDescriptionInit</code></dfn>
            Members</h5>
            <dl data-link-for="RTCSessionDescriptionInit" data-dfn-for="RTCSessionDescriptionInit" class="dictionary-members">
              <dt><dfn data-idl="" data-dfn-for="rtcsessiondescriptioninit" data-dfn-type="dfn" id="dom-rtcsessiondescriptioninit-type" data-title="type"><code>type</code></dfn> of type <span class="idlMemberType"><a href="#dom-rtcsdptype" class="internalDFN" data-link-type="dfn"><code>RTCSdpType</code></a></span>, required</dt>
              <dd>DOMString sdp</dd>
              <dt><dfn data-idl="" data-dfn-for="rtcsessiondescriptioninit" data-dfn-type="dfn" id="dom-rtcsessiondescriptioninit-sdp" data-title="sdp"><code>sdp</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>The string representation of the SDP [<cite><a class="bibref" href="#bib-SDP">SDP</a></cite>]; if
              <code>type</code> is <code>"rollback"</code>, this member is unused.
              </dd>
            </dl>
          </section>
        </div>
      </section>
    </section>
    <section id="session-negotiation-model">
      <h3 id="x4-7-session-negotiation-model"><span class="secno">4.7 </span>Session Negotiation Model</h3>
      <p>Many changes to state of an <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> will
      require communication with the remote side via the signaling channel, in
      order to have the desired effect. The app can be kept informed as to when
      it needs to do signaling, by listening to the
      <code>negotiationneeded</code> event. This event is fired according to
      the state of the connection's <dfn data-dfn-type="dfn" id="dfn-negotiation-needed-flag">negotiation-needed flag</dfn>,
      represented by a <a href="#dfn-negotiationneeded" class="internalDFN" data-link-type="dfn">[[NegotiationNeeded]]</a> internal slot.</p>
      <section class="informative" id="setting-negotiation-needed">
        <h4 id="x4-7-1-setting-negotiation-needed"><span class="secno">4.7.1 </span>Setting Negotiation-Needed</h4><p><em>This section is non-normative.</em></p>
        <p>If an operation is performed on an
        <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> that requires signaling, the
        connection will be marked as needing negotiation. Examples of such
        operations include adding or stopping an
        <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>, or adding the first <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>
        RTCDataChannel</code></a></code>.</p>
        <p>Internal changes within the implementation can also result in the
        connection being marked as needing negotiation.</p>
        <p>Note that the exact procedures for <a data-lt="update the
        negotiation-needed flag" href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">updating the negotiation-needed flag</a>
        are specified below.</p>
      </section>
      <section class="informative" id="clearing-negotiation-needed">
        <h4 id="x4-7-2-clearing-negotiation-needed"><span class="secno">4.7.2 </span>Clearing Negotiation-Needed</h4><p><em>This section is non-normative.</em></p>
        <p>The negotiation-needed flag is cleared when an
        <code><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></code> of type "answer" <a href="#set-description">is applied</a>, and the supplied description matches
        the state of the
        <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>s and
        <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>s that currently exist on the
        <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>. Specifically, this means that all
        non-<a data-link-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-stopped" class="internalDFN" data-link-type="dfn"><code>stopped</code></a> transceivers have an
        <a href="#dfn-associated" class="internalDFN" data-link-type="dfn">associated</a> section in the local description with matching properties,
        and, if any data channels have been created, a data section exists in
        the local description.</p>
        <p>Note that the exact procedures for <a data-lt="update the
        negotiation-needed flag" href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">updating the negotiation-needed flag</a>
        are specified below.</p>
      </section>
      <section id="updating-the-negotiation-needed-flag">
        <h4 id="x4-7-3-updating-the-negotiation-needed-flag"><span class="secno">4.7.3 </span>Updating the Negotiation-Needed flag</h4>
        <p>The process below occurs where referenced elsewhere in this document.
        It also may occur as a result of internal changes within the
        implementation that affect negotiation. If such changes occur, the user
        agent <em class="rfc2119" title="MUST">MUST</em> queue a task to <a href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">update the negotiation-needed
        flag</a>.</p>
        <p>To <dfn data-dfn-type="dfn" id="dfn-update-the-negotiation-needed-flag">update the negotiation-needed flag</dfn> for
        <var>connection</var>, run the following steps:</p>
        <ol>
          <li>
            <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
            <code>true</code>, abort these steps.</p>
          </li>
          <li>
            <p>If <var>connection</var>'s <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> is not
            <code>"stable"</code>, abort these steps.</p><p>

            </p><div class="note"><div role="heading" class="note-title marker" id="h-note-12" aria-level="5"><span>Note</span></div><p class="">The negotiation-needed flag will be
            updated once the state transitions to "stable", as part of the steps
            for <a href="#set-description">setting an RTCSessionDescription</a>.
            </p></div>
          </li>
          <li>
            <p>If the result of <a data-lt="check if negotiation is needed" href="#dfn-check-if-negotiation-is-needed" class="internalDFN" data-link-type="dfn">
            checking if negotiation is needed</a> is <code>false</code>,
            <dfn data-dfn-type="dfn" id="dfn-clear-the-negotiation-needed-flag">clear the negotiation-needed flag</dfn> by setting
            <var>connection</var>'s <a href="#dfn-negotiationneeded" class="internalDFN" data-link-type="dfn">[[NegotiationNeeded]]</a> slot to
            <code>false</code>, and abort these steps.</p>
          </li>
          <li>
            <p>If <var>connection</var>'s <a href="#dfn-negotiationneeded" class="internalDFN" data-link-type="dfn">[[NegotiationNeeded]]</a> slot is
            already <code>true</code>, abort these steps.</p>
          </li>
          <li>
            <p>Set <var>connection</var>'s <a href="#dfn-negotiationneeded" class="internalDFN" data-link-type="dfn">[[NegotiationNeeded]]</a> slot to
            <code>true</code>.</p>
          </li>
          <li>
            <p>Queue a task that runs the following steps:</p>
            <ol>
              <li>
                <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot
                is <code>true</code>, abort these steps.</p>
              </li>
              <li>
                <p>If <var>connection</var>'s <a href="#dfn-negotiationneeded" class="internalDFN" data-link-type="dfn">[[NegotiationNeeded]]</a>
                slot is <code>false</code>, abort these steps.</p>
              </li>
              <li>
                <p>Fire a simple event named <a href="#event-negotiation" class="internalDFN" data-link-type="dfn"><code>negotiationneeded</code></a>
                at <var>connection</var>.</p>
              </li>
            </ol>
            <div class="note"><div role="heading" class="note-title marker" id="h-note-13" aria-level="5"><span>Note</span></div><p class="">This queueing prevents <a href="#event-negotiation" class="internalDFN" data-link-type="dfn"><code>negotiationneeded</code></a> from
            firing prematurely, in the common situation where multiple
            modifications to <var>connection</var> are being made at once.</p></div>
          </li>
        </ol>
        <p>To <dfn data-dfn-type="dfn" id="dfn-check-if-negotiation-is-needed">check if negotiation is needed</dfn> for
        <var>connection</var>, perform the following checks:</p>
        <ol>
          <li>
            <p>If any implementation-specific negotiation is required, as
            described at the start of this section, return <code>true</code>.
            </p>
          </li>
            <li>
              <p>Let <var>description</var> be
              <var>connection</var>.<a href="#dfn-currentlocaldescription" class="internalDFN" data-link-type="dfn">[[CurrentLocalDescription]]</a>.</p>
            </li>
          <li>
            <p>If <var>connection</var> has created any
            <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>s, and no m= section in
            <var>description</var> has been negotiated yet for data, return
            <code>true</code>.</p>
          </li>
          <li>
            <p>For each <var>transceiver</var> in <var>connection</var>'s
            <a href="#transceivers-set" class="internalDFN" data-link-type="dfn">set of transceivers</a>, perform the following checks:</p>
            <ol>
              <li>
                <p>If <var>transceiver</var> isn't <a data-link-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-stopped" class="internalDFN" data-link-type="dfn"><code>
                stopped</code></a> and isn't yet <a href="#dfn-associated" class="internalDFN" data-link-type="dfn">associated</a> with an m= section
                in <var>description</var>, return <code>true</code>.</p>
              </li>
              <li>
                <p>If <var>transceiver</var> isn't <a data-link-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-stopped" class="internalDFN" data-link-type="dfn"><code>
                stopped</code></a> and is <a href="#dfn-associated" class="internalDFN" data-link-type="dfn">associated</a> with an m= section
                in <var>description</var> then perform the following checks:</p>
                <ol>
                  <li>
                    <p>If <var>transceiver</var>.<a href="#dfn-direction" class="internalDFN" data-link-type="dfn">[[Direction]]</a> is
                    <code>"sendrecv"</code> or <code>"sendonly"</code>,
                    and the <a href="#dfn-associated" class="internalDFN" data-link-type="dfn">associated</a> m= section in <var>description</var>
                    either doesn't contain a single "a=msid" line, or the number
                    of MSIDs from the "a=msid" lines in this m= section,
                    or the MSID values themselves, differ from what is in
                    <var>transceiver</var>.sender.<a href="#dfn-associatedmediastreamids" class="internalDFN" data-link-type="dfn">[[AssociatedMediaStreamIds]]</a>,
                    return <code>true</code>.
                    </p>
                  </li>
                  <li>
                    <p>If <var>description</var> is of type <code>"offer"</code>,
                    and the direction of the <a href="#dfn-associated" class="internalDFN" data-link-type="dfn">associated</a> m=
                    section in neither
                    <var>connection</var>.<a href="#dfn-currentlocaldescription" class="internalDFN" data-link-type="dfn">[[CurrentLocalDescription]]</a> nor
                    <var>connection</var>.<a href="#dfn-currentremotedescription" class="internalDFN" data-link-type="dfn">[[CurrentRemoteDescription]]</a>
                    matches <var>transceiver</var>.<a href="#dfn-direction" class="internalDFN" data-link-type="dfn">[[Direction]]</a>,
                    return <code>true</code>.</p>
                  </li>
                  <li>
                    <p>If <var>description</var> is of type <code>"answer"</code>,
                    and the direction of the <a href="#dfn-associated" class="internalDFN" data-link-type="dfn">associated</a> m=
                    section in the <var>description</var> does not match
                    <var>transceiver</var>.<a href="#dfn-direction" class="internalDFN" data-link-type="dfn">[[Direction]]</a>
                    intersected with the offered direction (as described in
                    <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.3.1">section 5.3.1.</a>)</span>), return
                    <code>true</code>.</p>
                  </li>
                </ol>
              </li>
              <li>
                <p>If <var>transceiver</var> is <a data-link-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-stopped" class="internalDFN" data-link-type="dfn"><code>
                stopped</code></a> and is <a href="#dfn-associated" class="internalDFN" data-link-type="dfn">associated</a> with an m= section, but the
                associated m= section is not yet rejected in
                <var>connection</var>.<a href="#dfn-currentlocaldescription" class="internalDFN" data-link-type="dfn">[[CurrentLocalDescription]]</a> or
                <var>connection</var>.<a href="#dfn-currentremotedescription" class="internalDFN" data-link-type="dfn">[[CurrentRemoteDescription]]</a>,
                return <code>true</code>.</p>
              </li>
            </ol>
          </li>
          <li>
            <p>If all the preceding checks were performed and <code>true</code>
            was not returned, nothing remains to be negotiated; return
            <code>false</code>.</p>
          </li>
        </ol>
      </section>
    </section>
    <section id="interfaces-for-connectivity-establishment">
      <h3 id="x4-8-interfaces-for-connectivity-establishment"><span class="secno">4.8 </span>Interfaces for Connectivity Establishment</h3>
      <section id="rtcicecandidate-interface">
        <h4 id="x4-8-1-rtcicecandidate-interface"><span class="secno">4.8.1 </span><dfn data-dfn-type="dfn" id="dom-rtcicecandidate" data-idl="" data-title="RTCIceCandidate" data-dfn-for=""><code>RTCIceCandidate</code></dfn> Interface</h4>
        <p>This interface describes an ICE candidate, described in
        [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>] Section 2. Other than
        <code>candidate</code>, <code>sdpMid</code>,
        <code>sdpMLineIndex</code>, and <code>usernameFragment</code>,
        the remaining attributes are derived from parsing the
        <code>candidate</code> member in <var>candidateInitDict</var>,
        if it is well formed.</p>
        <div>
          <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcicecandidate" data-idl="" data-title="RTCIceCandidate">[<span class="idlCtor"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a></span>(<span class="idlParam">optional <span class="idlParamType"><a href="#dom-rtcicecandidateinit" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidateInit</code></a></span> <span class="idlParamName">candidateInitDict</span></span>)</span>,
 <span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a></span> {
<span class="idlAttribute" id="idl-def-rtcicecandidate-candidate" data-idl="" data-title="candidate" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>               <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicecandidate" data-lt="" href="#dom-rtcicecandidate-candidate" class="internalDFN" data-link-type="dfn"><code>candidate</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-sdpmid" data-idl="" data-title="sdpMid" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span>              <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicecandidate" data-lt="" href="#dom-rtcicecandidate-sdpmid" class="internalDFN" data-link-type="dfn"><code>sdpMid</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-sdpmlineindex" data-idl="" data-title="sdpMLineIndex" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-unsigned-short">unsigned short</a>?</span>         <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicecandidate" data-lt="" href="#dom-rtcicecandidate-sdpmlineindex" class="internalDFN" data-link-type="dfn"><code>sdpMLineIndex</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-foundation" data-idl="" data-title="foundation" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span>              <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicecandidate" data-lt="" href="#dom-rtcicecandidate-foundation" class="internalDFN" data-link-type="dfn"><code>foundation</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-component" data-idl="" data-title="component" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcicecomponent" class="internalDFN" data-link-type="dfn"><code>RTCIceComponent</code></a>?</span>        <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicecandidate" data-lt="" href="#dom-rtcicecandidate-component" class="internalDFN" data-link-type="dfn"><code>component</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-priority" data-idl="" data-title="priority" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-unsigned-long">unsigned long</a>?</span>          <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicecandidate" data-lt="" href="#dom-rtcicecandidate-priority" class="internalDFN" data-link-type="dfn"><code>priority</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-ip" data-idl="" data-title="ip" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span>              <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicecandidate" data-lt="" href="#dom-rtcicecandidate-ip" class="internalDFN" data-link-type="dfn"><code>ip</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-protocol" data-idl="" data-title="protocol" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType"><a href="#dom-rtciceprotocol" class="internalDFN" data-link-type="dfn"><code>RTCIceProtocol</code></a>?</span>         <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicecandidate" data-lt="" href="#dom-rtcicecandidate-protocol" class="internalDFN" data-link-type="dfn"><code>protocol</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-port" data-idl="" data-title="port" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-unsigned-short">unsigned short</a>?</span>         <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicecandidate" data-lt="" href="#dom-rtcicecandidate-port" class="internalDFN" data-link-type="dfn"><code>port</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-type" data-idl="" data-title="type" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcicecandidatetype" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidateType</code></a>?</span>    <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicecandidate" data-lt="" href="#dom-rtcicecandidate-type" class="internalDFN" data-link-type="dfn"><code>type</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-tcptype" data-idl="" data-title="tcpType" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcicetcpcandidatetype" class="internalDFN" data-link-type="dfn"><code>RTCIceTcpCandidateType</code></a>?</span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicecandidate" data-lt="" href="#dom-rtcicecandidate-tcptype" class="internalDFN" data-link-type="dfn"><code>tcpType</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-relatedaddress" data-idl="" data-title="relatedAddress" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span>              <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicecandidate" data-lt="" href="#dom-rtcicecandidate-relatedaddress" class="internalDFN" data-link-type="dfn"><code>relatedAddress</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-relatedport" data-idl="" data-title="relatedPort" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-unsigned-short">unsigned short</a>?</span>         <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicecandidate" data-lt="" href="#dom-rtcicecandidate-relatedport" class="internalDFN" data-link-type="dfn"><code>relatedPort</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-usernamefragment" data-idl="" data-title="usernameFragment" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span>              <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicecandidate" data-lt="" href="#dom-rtcicecandidate-usernamefragment" class="internalDFN" data-link-type="dfn"><code>usernameFragment</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcicecandidate-tojson" data-idl="" data-title="toJSON" data-dfn-for="rtcicecandidate">    <span class="idlMethType"><a href="#dom-rtcicecandidateinit" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidateInit</code></a></span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcicecandidate" data-lt="tojson()|toJSON" href="#dom-rtcicecandidate-tojson" class="internalDFN" data-link-type="dfn">toJSON</a></span>();</span>
};</span></pre></div>
          <section>
            <h5 id="constructor-0">Constructor</h5>
            <dl data-link-for="RTCIceCandidate" data-dfn-for="RTCIceCandidate" class="constructors">
              <dt><code>RTCIceCandidate</code></dt>
              <dd>
                <p>The <dfn data-dfn-type="dfn" id="dfn-rtcicecandidate"><code>RTCIceCandidate()</code></dfn> constructor takes
                a dictionary argument, <var>candidateInitDict</var>, whose
                content is used to initialize the new <a class="idlType internalDFN" href="#dom-rtcicecandidate" data-link-type="dfn"><code><code>RTCIceCandidate</code></code></a> object.</p>
                <p>When invoked, run the following steps:</p>
                <ol>
                  <li>If both the <code>
                  <a data-dfn-for="idl-def-rtcicecandidateinit-sdpmid" href="#dom-rtcicecandidate-sdpmid" class="internalDFN" data-link-type="dfn"><code>sdpMid</code></a></code> and <code>
                  <a data-dfn-for="idl-def-rtcicecandidateinit-sdpmlineindex" href="#dom-rtcicecandidate-sdpmlineindex" class="internalDFN" data-link-type="dfn"><code>sdpMLineIndex</code></a>
                  </code> dictionary members in <var>candidateInitDict</var> are
                  <code>null</code>, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> a <code>TypeError</code>.</li>
                  <li>Let <var>iceCandidate</var> be a newly created
                  <code>RTCIceCandidate</code> object.</li>
                  <li>Initialize the following attributes of <var>iceCandidate</var> to
                  <code>null</code>: <a href="#dom-rtcicecandidate-foundation" class="internalDFN" data-link-type="dfn"><code><code>foundation</code></code></a>,
                  <a href="#dom-rtcicecandidate-component" class="internalDFN" data-link-type="dfn"><code><code>component</code></code></a>, <a href="#dom-rtcicecandidate-priority" class="internalDFN" data-link-type="dfn"><code><code>priority</code></code></a>,
                  <a href="#dom-rtcicecandidate-ip" class="internalDFN" data-link-type="dfn"><code><code>ip</code></code></a>, <a href="#dom-rtcicecandidate-protocol" class="internalDFN" data-link-type="dfn"><code><code>protocol</code></code></a>,
                  <a href="#dom-rtcicecandidate-port" class="internalDFN" data-link-type="dfn"><code><code>port</code></code></a>, <a href="#dom-rtcicecandidate-type" class="internalDFN" data-link-type="dfn"><code><code>type</code></code></a>,
                  <a href="#dom-rtcicecandidate-tcptype" class="internalDFN" data-link-type="dfn"><code><code>tcpType</code></code></a>, <a href="#dom-rtcicecandidate-relatedaddress" class="internalDFN" data-link-type="dfn"><code><code>relatedAddress</code></code></a>,
                  and <a href="#dom-rtcicecandidate-relatedport" class="internalDFN" data-link-type="dfn"><code><code>relatedPort</code></code></a>.</li>
                  <li>Set the <a href="#dom-rtcicecandidate-candidate" class="internalDFN" data-link-type="dfn"><code><code>candidate</code></code></a>, <a href="#dom-rtcicecandidate-sdpmid" class="internalDFN" data-link-type="dfn"><code><code>sdpMid</code></code></a>,
                  <a href="#dom-rtcicecandidate-sdpmlineindex" class="internalDFN" data-link-type="dfn"><code><code>sdpMLineIndex</code></code></a>, <a href="#dom-rtcicecandidate-usernamefragment" class="internalDFN" data-link-type="dfn"><code><code>usernameFragment</code></code></a> attributes
                  of <var>iceCandidate</var> with the corresponding dictionary member values
                  of <var>candidateInitDict</var>.</li>
                  <li>Let <var>candidate</var> be the <code>
                  <a data-dfn-for="idl-def-rtcicecandidateinit-candidate" href="#dom-rtcicecandidate-candidate" class="internalDFN" data-link-type="dfn"><code>candidate</code></a></code>
                  dictionary member of <var>candidateInitDict</var>. If
                  <var>candidate</var> is not an empty string, run the following steps:
                  <ol>
                    <li>Parse <var>candidate</var> using the <a href="#dfn-candidate-attribute" class="internalDFN" data-link-type="dfn"><code>candidate-attribute</code>
                    </a> grammar.</li>
                    <li>If parsing of <a href="#dfn-candidate-attribute" class="internalDFN" data-link-type="dfn"><code>candidate-attribute</code></a> has failed, abort
                    these steps.</li>
                    <li>If any field in the parse result represents an invalid value for the
                    corresponding attribute in <var>iceCandidate</var>, abort these steps.</li>
                    <li>Set the corresponding attributes in <var>iceCandidate</var> to
                    the field values of the parsed result.</li>
                  </ol></li>
                  <li>Return <var>iceCandidate</var>.</li>
                </ol>
                <div class="note"><div role="heading" class="note-title marker" id="h-note-14" aria-level="6"><span>Note</span></div><div class="">
                  <p>The constructor for <code>RTCIceCandidate</code> only does basic
                  parsing and type checking for the dictionary members in
                  <var>candidateInitDict</var>. Detailed validation on the well-formedness
                  of <code>candidate</code>, <code>sdpMid</code>, <code>sdpMLineIndex</code>,
                  <code>usernameFragment</code> with the corresponding session description is done
                  when passing the <code>RTCIceCandidate</code> object to
                  <code>addIceCandidate()</code>.</p>

                  <p>To maintain backward compatibility, any error on parsing the
                  <var>candidate</var> attribute is ignored. In such case, the
                  <a href="#dom-rtcicecandidate-candidate" class="internalDFN" data-link-type="dfn"><code><code>candidate</code></code></a> attribute holds the raw
                  <a data-dfn-for="idl-def-rtcicecandidateinit-candidate" href="#dom-rtcicecandidate-candidate" class="internalDFN" data-link-type="dfn"><code>
                  <code>candidate</code></code></a> string given in <var>candidateInitDict</var>,
                  but derivative attributes such as <a href="#dom-rtcicecandidate-foundation" class="internalDFN" data-link-type="dfn"><code><code>foundation</code></code></a>,
                  <a href="#dom-rtcicecandidate-priority" class="internalDFN" data-link-type="dfn"><code><code>priority</code></code></a>, etc are set to <code>null</code>.</p>
                </div></div>
              </dd>
            </dl>
          </section>
          <section>
            <h5 id="attributes-2">Attributes</h5>
            <p>Most attributes below are defined in section 15.1 of [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>].</p>
            <dl data-link-for="RTCIceCandidate" data-dfn-for="RTCIceCandidate" class="attributes">
              <dt><dfn data-idl="" data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-candidate" data-title="candidate"><code>candidate</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
              <dd>This carries the <a href="#dfn-candidate-attribute" class="internalDFN" data-link-type="dfn"><code>candidate-attribute</code></a> as defined
              in section 15.1 of [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>]. If this <code>RTCIceCandidate</code>
              represents an end-of-candidates indication,
              <code>candidate</code> is an empty string.</dd>
              <dt><dfn data-idl="" data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-sdpmid" data-title="sdpMid"><code>sdpMid</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly, nullable</dt>
              <dd>If not <code>null</code>, this contains the media stream
              "identification-tag" defined in [<cite><a class="bibref" href="#bib-RFC5888">RFC5888</a></cite>] for the
              media component this candidate is associated with.</dd>
              <dt><dfn data-idl="" data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-sdpmlineindex" data-title="sdpMLineIndex"><code>sdpMLineIndex</code></dfn> of type <span class="idlAttrType">unsigned short</span>, readonly,
              nullable</dt>
              <dd>
                If not <code>null</code>, this indicates the index (starting at
                zero) of the <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a> in the SDP this candidate
                is associated with.
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-foundation" data-title="foundation"><code>foundation</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly, nullable</dt>
              <dd>A unique identifier that allows ICE to correlate candidates
              that appear on multiple
              <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>s.</dd>
              <dt><dfn data-idl="" data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-component" data-title="component"><code>component</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcicecomponent" class="internalDFN" data-link-type="dfn"><code>RTCIceComponent</code></a></span>, readonly, nullable</dt>
              <dd>The assigned network component of the candidate
              (<code>rtp</code> or <code>rtcp</code>). This corresponds to the
              <code>component-id</code> field in <a href="#dfn-candidate-attribute" class="internalDFN" data-link-type="dfn"><code>candidate-attribute</code></a>,
              decoded to the string representation as defined in
              <a href="#dom-rtcicecomponent" class="internalDFN" data-link-type="dfn"><code><code>RTCIceComponent</code></code></a>.</dd>
              <dt><dfn data-idl="" data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-priority" data-title="priority"><code>priority</code></dfn> of type <span class="idlAttrType">unsigned long</span>, readonly, nullable</dt>
              <dd>The assigned priority of the candidate.</dd>
              <dt><dfn data-idl="" data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-ip" data-title="ip"><code>ip</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly, nullable</dt>
              <dd>
                <p>The IP address of the candidate. This corresponds to the
                <code>connection-address</code> field in
                <a href="#dfn-candidate-attribute" class="internalDFN" data-link-type="dfn"><code>candidate-attribute</code></a>.</p>
                <div class="note"><div role="heading" class="note-title marker" id="h-note-15" aria-level="6"><span>Note</span></div><div class="">
                  <p>The IP addresses exposed in candidates gathered via ICE
                  and made visibile to the application in
                  <code>RTCIceCandidate</code> instances can reveal more
                  information about the device and the user (e.g. location,
                  local network topology) than the user might have expected in
                  a non-WebRTC enabled browser.</p>
                  <p>These IP addresses are always exposed to the application,
                  and potentially exposed to the communicating party, and can
                  be exposed without any specific user consent (e.g. for peer
                  connections used with data channels, or to receive media
                  only).</p>
                  <p class="fingerprint">These IP addresses can also be used as
                  temporary or persistent cross-origin states, and thus
                  contribute to the fingerprinting surface of the device.</p>
                  <p>Applications can avoid exposing IP addresses to the
                  communicating party, either temporarily or permanently, by
                  forcing the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> to report only relay candidates
                  via the <code>iceTransportPolicy</code> member of
                  <code><a href="#dom-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code>RTCConfiguration</code></a></code>.</p>
                  <p>To limit the IP addresses exposed to the application
                  itself, browsers can offer their users different policies
                  regarding sharing local IP addresses, as defined in
                  [<cite><a class="bibref" href="#bib-RTCWEB-IP-HANDLING">RTCWEB-IP-HANDLING</a></cite>].</p>
                </div></div>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-protocol" data-title="protocol"><code>protocol</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtciceprotocol" class="internalDFN" data-link-type="dfn"><code>RTCIceProtocol</code></a></span>, readonly, nullable</dt>
              <dd>The protocol of the candidate
              (<code>udp</code>/<code>tcp</code>). This corresponds to the
              <code>transport</code> field in <a href="#dfn-candidate-attribute" class="internalDFN" data-link-type="dfn"><code>candidate-attribute</code></a>.</dd>
              <dt><dfn data-idl="" data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-port" data-title="port"><code>port</code></dfn> of type <span class="idlAttrType">unsigned short</span>, readonly, nullable</dt>
              <dd>The port of the candidate.</dd>
              <dt><dfn data-idl="" data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-type" data-title="type"><code>type</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcicecandidatetype" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidateType</code></a></span>, readonly, nullable</dt>
              <dd>The type of the candidate. This corresponds to the
              <code>candidate-types</code> field in <a href="#dfn-candidate-attribute" class="internalDFN" data-link-type="dfn"><code>candidate-attribute</code></a>.</dd>
              <dt><dfn data-idl="" data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-tcptype" data-title="tcpType"><code>tcpType</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcicetcpcandidatetype" class="internalDFN" data-link-type="dfn"><code>RTCIceTcpCandidateType</code></a></span>, readonly,
               nullable</dt>
              <dd>If <code>protocol</code> is <code>tcp</code>,
              <code>tcpType</code> represents the type of TCP candidate.
              Otherwise, <code>tcpType</code> is <code>null</code>. This corresponds
              to the <code>tcp-type</code> field in <a href="#dfn-candidate-attribute" class="internalDFN" data-link-type="dfn"><code>candidate-attribute</code></a>.</dd>
              <dt><code>relatedAddress</code> of type <span class="idlAttrType">DOMString</span>, readonly, nullable</dt>
              <dd>For a candidate that is derived from another, such as a relay
              or reflexive candidate, the <dfn data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-relatedaddress" data-idl="" data-title="relatedAddress"><code>relatedAddress</code></dfn> is the IP
              address of the candidate that it is derived from. For host
              candidates, the <code>relatedAddress</code> is
              <code>null</code>. This corresponds to the <code>rel-address</code>
              field in <a href="#dfn-candidate-attribute" class="internalDFN" data-link-type="dfn"><code>candidate-attribute</code></a>.</dd>
              <dt><code>relatedPort</code> of type <span class="idlAttrType">unsigned short</span>, readonly,
              nullable</dt>
              <dd>For a candidate that is derived from another, such as a relay
              or reflexive candidate, the <dfn data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-relatedport" data-idl="" data-title="relatedPort"><code>relatedPort</code></dfn> is the port of
              the candidate that it is derived from. For host candidates, the
              <code>relatedPort</code> is <code>null</code>. This corresponds to
              the <code>rel-port</code> field in <a href="#dfn-candidate-attribute" class="internalDFN" data-link-type="dfn"><code>candidate-attribute</code></a>.</dd>
              <dt><code><dfn data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-usernamefragment" data-idl="" data-title="usernameFragment">usernameFragment</dfn></code> of type <span class="idlAttrType">DOMString</span>, readonly, nullable</dt>
              <dd>This carries the <code>ufrag</code> as defined in section
              15.4 of [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>].</dd>
            </dl>
          </section>
          <section>
            <h5 id="methods-2">Methods</h5>
            <dl data-link-for="RTCIceCandidate" data-dfn-for="RTCIceCandidate" class="methods">
              <dt><dfn data-idl="" data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-tojson" data-title="toJSON()" data-lt="tojson()|toJSON"><code>toJSON()</code></dfn></dt>
              <dd>To invoke the <code>toJSON()</code> operation of the <code>RTCIceCandidate</code> interface, run the following steps:
                <ol>
                  <li>Let <var>json</var> be a new <code>RTCIceCandidateInit</code> dictionary.</li>
                  <li>For each attribute identifier <var>attr</var> in «"candidate", "sdpMid", "sdpMLineIndex", "usernameFragment"»:
                    <ol>
                      <li>Let <var>value</var> be the result of getting the underlying value of the attribute identified by <var>attr</var>, given this <code>RTCIceCandidate</code> object.</li>
                      <li>Set <code><var>json</var>[<var>attr</var>]</code> to <var>value</var>.</li>
                    </ol>
                  </li>
                  <li>Return <var>json</var>.</li>
                </ol>
              </dd>
              </dl>
          </section>
        </div>
        <div>
          <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcicecandidateinit" data-idl="" data-title="RTCIceCandidateInit">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcicecandidateinit" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidateInit</code></a></span> {
<span class="idlMember" id="idl-def-rtcicecandidateinit-candidate" data-idl="" data-title="candidate" data-dfn-for="rtcicecandidateinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>       <span class="idlMemberName"><a data-no-default="" data-link-for="rtcicecandidateinit" data-lt="" href="#dom-rtcicecandidateinit-candidate" class="internalDFN" data-link-type="dfn"><code>candidate</code></a></span> = <span class="idlMemberValue">""</span>;</span>
<span class="idlMember" id="idl-def-rtcicecandidateinit-sdpmid" data-idl="" data-title="sdpMid" data-dfn-for="rtcicecandidateinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span>      <span class="idlMemberName"><a data-no-default="" data-link-for="rtcicecandidateinit" data-lt="" href="#dom-rtcicecandidateinit-sdpmid" class="internalDFN" data-link-type="dfn"><code>sdpMid</code></a></span> = <span class="idlMemberValue">null</span>;</span>
<span class="idlMember" id="idl-def-rtcicecandidateinit-sdpmlineindex" data-idl="" data-title="sdpMLineIndex" data-dfn-for="rtcicecandidateinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-unsigned-short">unsigned short</a>?</span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcicecandidateinit" data-lt="" href="#dom-rtcicecandidateinit-sdpmlineindex" class="internalDFN" data-link-type="dfn"><code>sdpMLineIndex</code></a></span> = <span class="idlMemberValue">null</span>;</span>
<span class="idlMember" id="idl-def-rtcicecandidateinit-usernamefragment" data-idl="" data-title="usernameFragment" data-dfn-for="rtcicecandidateinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>       <span class="idlMemberName"><a data-no-default="" data-link-for="rtcicecandidateinit" data-lt="" href="#dom-rtcicecandidateinit-usernamefragment" class="internalDFN" data-link-type="dfn"><code>usernameFragment</code></a></span>;</span>
};</span></pre></div>
          <section>
            <h5 id="dictionary-rtcicecandidateinit-members">Dictionary <dfn data-dfn-type="dfn" id="dom-rtcicecandidateinit" data-idl="" data-title="RTCIceCandidateInit" data-dfn-for=""><code>RTCIceCandidateInit</code></dfn>
            Members</h5>
            <dl data-link-for="RTCIceCandidateInit" data-dfn-for="RTCIceCandidateInit" class="dictionary-members">
              <dt><dfn data-idl="" data-dfn-for="rtcicecandidateinit" data-dfn-type="dfn" id="dom-rtcicecandidateinit-candidate" data-title="candidate"><code>candidate</code></dfn> of type <span class="idlMemberType">DOMString</span>, defaulting to
              <code>""</code></dt>
              <dd>This carries the <code>candidate-attribute</code> as defined
              in section 15.1 of [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>]. If this represents an
              end-of-candidates indication, <code>candidate</code>
              is an empty string.</dd>
              <dt><dfn data-idl="" data-dfn-for="rtcicecandidateinit" data-dfn-type="dfn" id="dom-rtcicecandidateinit-sdpmid" data-title="sdpMid"><code>sdpMid</code></dfn> of type <span class="idlMemberType">DOMString</span>, nullable, defaulting to
              <code>null</code></dt>
              <dd>If not <code>null</code>, this contains the media stream
              "identification-tag" defined in [<cite><a class="bibref" href="#bib-RFC5888">RFC5888</a></cite>] for the
              media component this candidate is associated with.</dd>
              <dt><dfn data-idl="" data-dfn-for="rtcicecandidateinit" data-dfn-type="dfn" id="dom-rtcicecandidateinit-sdpmlineindex" data-title="sdpMLineIndex"><code>sdpMLineIndex</code></dfn> of type <span class="idlMemberType">unsigned short</span>, nullable,
              defaulting to <code>null</code></dt>
              <dd>If not <code>null</code>, this indicates the index (starting at
              zero) of the <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a> in the SDP this candidate
              is associated with.</dd>
              <dt><dfn data-idl="" data-dfn-for="rtcicecandidateinit" data-dfn-type="dfn" id="dom-rtcicecandidateinit-usernamefragment" data-title="usernameFragment"><code>usernameFragment</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>This carries the <code>ufrag</code> as defined in section
              15.4 of [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>].</dd>
            </dl>
          </section>
        </div>
        <section id="candidate-attribute-grammar">
          <h5 id="x4-8-1-1-candidate-attribute-grammar"><span class="secno">4.8.1.1 </span><dfn data-idl="" data-dfn-type="dfn" id="dfn-candidate-attribute"><code>candidate-attribute</code></dfn> Grammar</h5>
          <p>The <code>candidate-attribute</code> grammar is used to parse
          the <a href="#idl-def-rtcicecandidateinit-candidate">
          <code>candidate</code></a> member of <var>candidateInitDict</var>
          in the <a href="#dfn-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code><code>RTCIceCandidate()</code></code></a> constructor.</p>
          <p>The primary grammar for <code>candidate-attribute</code>
          is defined in section 15.1 of [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>]. In addition, the browser
          <em class="rfc2119" title="MUST">MUST</em> support the grammar extension for ICE TCP as defined in
          section 4.5 of [<cite><a class="bibref" href="#bib-RFC6544">RFC6544</a></cite>].</p>
          <p>The browser <em class="rfc2119" title="MAY">MAY</em> support other grammar extensions for
          <code>candidate-attribute</code> as defined in other RFCs.</p>
        </section>
        <section id="rtciceprotocol-enum">
          <h5 id="x4-8-1-2-rtciceprotocol-enum"><span class="secno">4.8.1.2 </span><dfn data-dfn-type="dfn" id="dom-rtciceprotocol" data-idl="" data-title="RTCIceProtocol" data-dfn-for=""><code>RTCIceProtocol</code></dfn> Enum</h5>
          <p>The <code>RTCIceProtocol</code> represents the protocol of the ICE
          candidate.</p>
          <div>
            <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtciceprotocol" data-idl="" data-title="RTCIceProtocol">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtciceprotocol" class="internalDFN" data-link-type="dfn"><code>RTCIceProtocol</code></a></span> {
    <a href="#dom-rtciceprotocol-udp" class="idlEnumItem">"udp"</a>,
    <a href="#dom-rtciceprotocol-tcp" class="idlEnumItem">"tcp"</a>
};</span></pre></div>
            <table data-link-for="RTCIceProtocol" data-dfn-for="RTCIceProtocol" class="simple">
              <tbody>
                <tr>
                  <th colspan="2">Enumeration description</th>
                </tr>
                <tr>
                  <td><dfn data-idl="" data-dfn-for="rtciceprotocol" data-dfn-type="dfn" id="dom-rtciceprotocol-udp" data-title="udp"><code>udp</code></dfn></td>
                  <td>A UDP candidate, as described in [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>].</td>
                </tr>
                <tr>
                  <td><dfn data-idl="" data-dfn-for="rtciceprotocol" data-dfn-type="dfn" id="dom-rtciceprotocol-tcp" data-title="tcp"><code>tcp</code></dfn></td>
                  <td>A TCP candidate, as described in [<cite><a class="bibref" href="#bib-RFC6544">RFC6544</a></cite>].</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
        <section id="rtcicetcpcandidatetype-enum">
          <h5 id="x4-8-1-3-rtcicetcpcandidatetype-enum"><span class="secno">4.8.1.3 </span><dfn data-dfn-type="dfn" id="dom-rtcicetcpcandidatetype" data-idl="" data-title="RTCIceTcpCandidateType" data-dfn-for=""><code>RTCIceTcpCandidateType</code></dfn> Enum</h5>
          <p>The <code>RTCIceTcpCandidateType</code> represents the type of the
          ICE TCP candidate, as defined in [<cite><a class="bibref" href="#bib-RFC6544">RFC6544</a></cite>].</p>
          <div>
            <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtcicetcpcandidatetype" data-idl="" data-title="RTCIceTcpCandidateType">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcicetcpcandidatetype" class="internalDFN" data-link-type="dfn"><code>RTCIceTcpCandidateType</code></a></span> {
    <a href="#dom-rtcicetcpcandidatetype-active" class="idlEnumItem">"active"</a>,
    <a href="#dom-rtcicetcpcandidatetype-passive" class="idlEnumItem">"passive"</a>,
    <a href="#dom-rtcicetcpcandidatetype-so" class="idlEnumItem">"so"</a>
};</span></pre></div>
            <table data-link-for="RTCIceTcpCandidateType" data-dfn-for="RTCIceTcpCandidateType" class="simple">
              <tbody>
                <tr>
                  <th colspan="2">Enumeration description</th>
                </tr>
                <tr>
                  <td><dfn data-idl="" data-dfn-for="rtcicetcpcandidatetype" data-dfn-type="dfn" id="dom-rtcicetcpcandidatetype-active" data-title="active"><code>active</code></dfn></td>
                  <td>An <code>active</code> TCP candidate is one for which the
                  transport will attempt to open an outbound connection but
                  will not receive incoming connection requests.</td>
                </tr>
                <tr>
                  <td><dfn data-idl="" data-dfn-for="rtcicetcpcandidatetype" data-dfn-type="dfn" id="dom-rtcicetcpcandidatetype-passive" data-title="passive"><code>passive</code></dfn></td>
                  <td>A <code>passive</code> TCP candidate is one for which the
                  transport will receive incoming connection attempts but not
                  attempt a connection.</td>
                </tr>
                <tr>
                  <td><dfn data-idl="" data-dfn-for="rtcicetcpcandidatetype" data-dfn-type="dfn" id="dom-rtcicetcpcandidatetype-so" data-title="so"><code>so</code></dfn></td>
                  <td>An <code>so</code> candidate is one for which the
                  transport will attempt to open a connection simultaneously
                  with its peer.</td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="note"><div role="heading" class="note-title marker" id="h-note-16" aria-level="6"><span>Note</span></div><p class="">The user agent will typically only gather <code>active</code>
          ICE TCP candidates.</p></div>
        </section>
        <section id="rtcicecandidatetype-enum">
          <h5 id="x4-8-1-4-rtcicecandidatetype-enum"><span class="secno">4.8.1.4 </span><dfn data-dfn-type="dfn" id="dom-rtcicecandidatetype" data-idl="" data-title="RTCIceCandidateType" data-dfn-for=""><code>RTCIceCandidateType</code></dfn> Enum</h5>
          <p>The <code>RTCIceCandidateType</code> represents the type of the ICE
          candidate, as defined in [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>] section 15.1.</p>
          <div>
            <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtcicecandidatetype" data-idl="" data-title="RTCIceCandidateType">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcicecandidatetype" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidateType</code></a></span> {
    <a href="#dom-rtcicecandidatetype-host" class="idlEnumItem">"host"</a>,
    <a href="#dom-rtcicecandidatetype-srflx" class="idlEnumItem">"srflx"</a>,
    <a href="#dom-rtcicecandidatetype-prflx" class="idlEnumItem">"prflx"</a>,
    <a href="#dom-rtcicecandidatetype-relay" class="idlEnumItem">"relay"</a>
};</span></pre></div>
            <table data-link-for="RTCIceCandidateType" data-dfn-for="RTCIceCandidateType" class="simple">
              <tbody>
                <tr>
                  <th colspan="2">Enumeration description</th>
                </tr>
                <tr>
                  <td><dfn data-idl="" data-dfn-for="rtcicecandidatetype" data-dfn-type="dfn" id="dom-rtcicecandidatetype-host" data-title="host"><code>host</code></dfn></td>
                  <td>A host candidate, as defined in Section 4.1.1.1 of
                  [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>].</td>
                </tr>
                <tr>
                  <td><dfn data-idl="" data-dfn-for="rtcicecandidatetype" data-dfn-type="dfn" id="dom-rtcicecandidatetype-srflx" data-title="srflx"><code>srflx</code></dfn></td>
                  <td>A server reflexive candidate, as defined in Section
                  4.1.1.2 of [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>].</td>
                </tr>
                <tr>
                  <td><dfn data-idl="" data-dfn-for="rtcicecandidatetype" data-dfn-type="dfn" id="dom-rtcicecandidatetype-prflx" data-title="prflx"><code>prflx</code></dfn></td>
                  <td>A peer reflexive candidate, as defined in Section 4.1.1.2
                  of [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>].</td>
                </tr>
                <tr>
                  <td><dfn data-idl="" data-dfn-for="rtcicecandidatetype" data-dfn-type="dfn" id="dom-rtcicecandidatetype-relay" data-title="relay"><code>relay</code></dfn></td>
                  <td>A relay candidate, as defined in Section 7.1.3.2.1 of
                  [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>].</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
      </section>
      <section id="rtcpeerconnectioniceevent">
        <h4 id="x4-8-2-rtcpeerconnectioniceevent"><span class="secno">4.8.2 </span><dfn data-dfn-type="dfn" id="dom-rtcpeerconnectioniceevent" data-idl="" data-title="RTCPeerConnectionIceEvent" data-dfn-for=""><code>RTCPeerConnectionIceEvent</code></dfn></h4>
        <p>The <code>icecandidate</code> event of the RTCPeerConnection uses
        the <code><a href="#dom-rtcpeerconnectioniceevent" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionIceEvent</code></a></code> interface.</p>
        <p><dfn data-lt="fire an ice candidate event|firing an ice candidate event named e" data-dfn-type="dfn" id="dfn-fire-an-ice-candidate-event">Firing an
        ice candidate event named
        <var>e</var></dfn> with an <code><a href="#dom-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a></code>
        <var>candidate</var> means that an event with the name <var>e</var>,
        which does not bubble (except where otherwise stated) and is not
        cancelable (except where otherwise stated), and which uses the
        <code>RTCPeerConnectionIceEvent</code> interface with the
        <code>candidate</code> attribute set to the new ICE candidate, <em class="rfc2119" title="MUST">MUST</em> be
        created and dispatched at the given target.</p>
        <p>When firing an <code><a href="#dom-rtcpeerconnectioniceevent" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionIceEvent</code></a></code> event
        that contains an <code><a href="#dom-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a></code> object, it <em class="rfc2119" title="MUST">MUST</em>
        include values for both <a data-link-for="RTCIceCandidate" href="#dom-rtcicecandidate-sdpmid" class="internalDFN" data-link-type="dfn"><code><code>sdpMid</code></code></a> and <a data-link-for="RTCIceCandidate" href="#dom-rtcicecandidate-sdpmlineindex" class="internalDFN" data-link-type="dfn"><code><code>sdpMLineIndex</code></code></a>. If the
        <code><a href="#dom-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a></code> is of type <code>srflx</code> or
        type <code>relay</code>, the <code>url</code> property of the event
        <em class="rfc2119" title="MUST">MUST</em> be set to the URL of the ICE server from which the candidate was
        obtained.</p>

        <div class="note"><div role="heading" class="note-title marker" id="h-note-17" aria-level="5"><span>Note</span></div><div class="">
          The <code><a href="#event-icecandidate" class="internalDFN" data-link-type="dfn"><code>icecandidate</code></a></code> event is used for three
          different types of indications:
          <ul>
            <li>
              <p>A candidate has been gathered. The <code><a data-link-for="RTCPeerConnectionIceEvent" href="#dom-rtcpeerconnectioniceevent-candidate" class="internalDFN" data-link-type="dfn"><code>candidate</code></a></code>
              member of the event will be populated normally. It should be
              signaled to the remote peer and passed into
              <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-addicecandidate" class="internalDFN" data-link-type="dfn"><code>addIceCandidate</code></a></code>.</p>
            </li>
            <li>
              <p>An <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> has finished gathering a
              <a href="#dfn-generation" class="internalDFN" data-link-type="dfn">generation</a> of candidates, and is providing an end-of-candidates
              indication as defined by Section 8.2 of [<cite><a class="bibref" href="#bib-TRICKLE-ICE">TRICKLE-ICE</a></cite>]. This is
              indicated by <code><a data-link-for="RTCPeerConnectionIceEvent" href="#dom-rtcpeerconnectioniceevent-candidate" class="internalDFN" data-link-type="dfn"><code>candidate</code></a>.<a data-link-for="RTCIceCandidate" href="#dom-rtcicecandidate-candidate" class="internalDFN" data-link-type="dfn"><code>candidate</code></a></code> being set to an
              empty string. The <code><a data-link-for="RTCPeerConnectionIceEvent" href="#dom-rtcpeerconnectioniceevent-candidate" class="internalDFN" data-link-type="dfn"><code>candidate</code></a></code> object
              should be signaled to the remote peer and passed into
              <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-addicecandidate" class="internalDFN" data-link-type="dfn"><code>addIceCandidate</code></a></code>
              like a typical ICE candidate, in order to provide the
              end-of-candidates indication to the remote peer.</p>
            </li>
            <li>
              <p>All <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>s have finished
              gathering candidates, and the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>'s
              <code><a href="#dom-rtcicegatheringstate" class="internalDFN" data-link-type="dfn"><code>RTCIceGatheringState</code></a></code> has transitioned to
              <code>"<a data-link-for="RTCIceGatheringState" href="#dom-rtcicegatheringstate-complete" class="internalDFN" data-link-type="dfn"><code>complete</code></a>"</code>.
              This is indicated by the
              <code><a data-link-for="RTCPeerConnectionIceEvent" href="#dom-rtcpeerconnectioniceevent-candidate" class="internalDFN" data-link-type="dfn"><code>candidate</code></a></code>
              member of the event being set to <code>null</code>. This only
              exists for backwards compatibility, and this event does not need
              to be signaled to the remote peer. It's equivalent to an
              <code>"<a href="#event-icegatheringstatechange" class="internalDFN" data-link-type="dfn"><code>icegatheringstatechange</code></a>"</code> event with the
              <code>"<a data-link-for="RTCIceGatheringState" href="#dom-rtcicegatheringstate-complete" class="internalDFN" data-link-type="dfn"><code>complete</code></a>"</code>
              state.</p>
            </li>
          </ul>
        </div></div>
        <div>
          <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcpeerconnectioniceevent" data-idl="" data-title="RTCPeerConnectionIceEvent">[<span class="idlCtor"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span></span>, <span class="idlParam">optional <span class="idlParamType"><a href="#dom-rtcpeerconnectioniceeventinit" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionIceEventInit</code></a></span> <span class="idlParamName">eventInitDict</span></span>)</span>,
 <span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcpeerconnectioniceevent" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionIceEvent</code></a></span> : <span class="idlSuperclass"><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></span> {
<span class="idlAttribute" id="idl-def-rtcpeerconnectioniceevent-candidate" data-idl="" data-title="candidate" data-dfn-for="rtcpeerconnectioniceevent">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a>?</span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnectioniceevent" data-lt="" href="#dom-rtcpeerconnectioniceevent-candidate" class="internalDFN" data-link-type="dfn"><code>candidate</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnectioniceevent-url" data-idl="" data-title="url" data-dfn-for="rtcpeerconnectioniceevent">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span>       <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnectioniceevent" data-lt="" href="#dom-rtcpeerconnectioniceevent-url" class="internalDFN" data-link-type="dfn"><code>url</code></a></span>;</span>
};</span></pre></div>
          <section>
            <h5 id="constructors-1">Constructors</h5>
            <dl data-link-for="RTCPeerConnectionIceEvent" data-dfn-for="RTCPeerConnectionIceEvent" class="constructors">
              <dt><code>RTCPeerConnectionIceEvent</code></dt>
              <dd>
              </dd>
            </dl>
          </section>
          <section>
            <h5 id="attributes-3">Attributes</h5>
            <dl data-link-for="RTCPeerConnectionIceEvent" data-dfn-for="RTCPeerConnectionIceEvent" class="attributes">
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnectioniceevent" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceevent-candidate" data-title="candidate"><code>candidate</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a></span>, readonly,
              nullable</dt>
              <dd>
                <p>The <code>candidate</code> attribute is the
                <code><a href="#dom-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a></code> object with the new ICE
                candidate that caused the event.</p>
                <p>This attribute is set to <code>null</code> when an event is
                generated to indicate the end of candidate gathering.</p>
                <div class="note"><div role="heading" class="note-title marker" id="h-note-18" aria-level="6"><span>Note</span></div><p class="">Even where there are multiple media components,
                only one event containing a <code>null</code> candidate is
                fired.</p></div>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnectioniceevent" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceevent-url" data-title="url"><code>url</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly, nullable</dt>
              <dd>
                <p>The <code>url</code> attribute is the STUN or TURN URL that
                identifies the STUN or TURN server used to gather this
                candidate. If the candidate was not gathered from a STUN or
                TURN server, this parameter will be set to
                <code>null</code>.</p>
              </dd>
            </dl>
          </section>
        </div>
        <div>
          <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcpeerconnectioniceeventinit" data-idl="" data-title="RTCPeerConnectionIceEventInit">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcpeerconnectioniceeventinit" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionIceEventInit</code></a></span> : <span class="idlSuperclass">EventInit</span> {
<span class="idlMember" id="idl-def-rtcpeerconnectioniceeventinit-candidate" data-idl="" data-title="candidate" data-dfn-for="rtcpeerconnectioniceeventinit">    <span class="idlMemberType"><a href="#dom-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a>?</span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcpeerconnectioniceeventinit" data-lt="" href="#dom-rtcpeerconnectioniceeventinit-candidate" class="internalDFN" data-link-type="dfn"><code>candidate</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcpeerconnectioniceeventinit-url" data-idl="" data-title="url" data-dfn-for="rtcpeerconnectioniceeventinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span>       <span class="idlMemberName"><a data-no-default="" data-link-for="rtcpeerconnectioniceeventinit" data-lt="" href="#dom-rtcpeerconnectioniceeventinit-url" class="internalDFN" data-link-type="dfn"><code>url</code></a></span>;</span>
};</span></pre></div>
          <section>
            <h5 id="dictionary-rtcpeerconnectioniceeventinit-members">Dictionary <dfn data-dfn-type="dfn" id="dom-rtcpeerconnectioniceeventinit" data-idl="" data-title="RTCPeerConnectionIceEventInit" data-dfn-for=""><code>RTCPeerConnectionIceEventInit</code></dfn>
            Members</h5>
            <dl data-link-for="RTCPeerConnectionIceEventInit" data-dfn-for="RTCPeerConnectionIceEventInit" class="dictionary-members">
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnectioniceeventinit" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceeventinit-candidate" data-title="candidate"><code>candidate</code></dfn> of type <span class="idlMemberType"><a href="#dom-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a></span>, nullable</dt>
              <dd>
                <p>See the
                <code>candidate</code> attribute of the
                <code>RTCPeerConnectionIceEvent</code> interface.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnectioniceeventinit" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceeventinit-url" data-title="url"><code>url</code></dfn> of type <span class="idlMemberType">DOMString</span>, nullable</dt>
              <dd>The <code>url</code> attribute is the STUN or TURN URL that
              identifies the STUN or TURN server used to gather this
              candidate.</dd>
            </dl>
          </section>
        </div>
      </section>
      <section id="rtcpeerconnectioniceerrorevent">
        <h4 id="x4-8-3-rtcpeerconnectioniceerrorevent"><span class="secno">4.8.3 </span><dfn data-dfn-type="dfn" id="dom-rtcpeerconnectioniceerrorevent" data-idl="" data-title="RTCPeerConnectionIceErrorEvent" data-dfn-for=""><code>RTCPeerConnectionIceErrorEvent</code></dfn></h4>
        <p>The <code>icecandidateerror</code> event of the RTCPeerConnection
        uses the <code><a href="#dom-rtcpeerconnectioniceerrorevent" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionIceErrorEvent</code></a></code>
        interface.</p>
        <div>
          <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcpeerconnectioniceerrorevent" data-idl="" data-title="RTCPeerConnectionIceErrorEvent">[<span class="idlCtor"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span></span>, <span class="idlParam"><span class="idlParamType"><a href="#dom-rtcpeerconnectioniceerroreventinit" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionIceErrorEventInit</code></a></span> <span class="idlParamName">eventInitDict</span></span>)</span>,
 <span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcpeerconnectioniceerrorevent" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionIceErrorEvent</code></a></span> : <span class="idlSuperclass"><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></span> {
<span class="idlAttribute" id="idl-def-rtcpeerconnectioniceerrorevent-hostcandidate" data-idl="" data-title="hostCandidate" data-dfn-for="rtcpeerconnectioniceerrorevent">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>      <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnectioniceerrorevent" data-lt="" href="#dom-rtcpeerconnectioniceerrorevent-hostcandidate" class="internalDFN" data-link-type="dfn"><code>hostCandidate</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnectioniceerrorevent-url" data-idl="" data-title="url" data-dfn-for="rtcpeerconnectioniceerrorevent">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>      <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnectioniceerrorevent" data-lt="" href="#dom-rtcpeerconnectioniceerrorevent-url" class="internalDFN" data-link-type="dfn"><code>url</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnectioniceerrorevent-errorcode" data-idl="" data-title="errorCode" data-dfn-for="rtcpeerconnectioniceerrorevent">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-unsigned-short">unsigned short</a></span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnectioniceerrorevent" data-lt="" href="#dom-rtcpeerconnectioniceerrorevent-errorcode" class="internalDFN" data-link-type="dfn"><code>errorCode</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnectioniceerrorevent-errortext" data-idl="" data-title="errorText" data-dfn-for="rtcpeerconnectioniceerrorevent">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span>      <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnectioniceerrorevent" data-lt="" href="#dom-rtcpeerconnectioniceerrorevent-errortext" class="internalDFN" data-link-type="dfn"><code>errorText</code></a></span>;</span>
};</span></pre></div>
          <section>
            <h5 id="constructors-2">Constructors</h5>
            <dl data-link-for="RTCPeerConnectionIceErrorEvent" data-dfn-for="RTCPeerConnectionIceErrorEvent" class="constructors">
              <dt><code>RTCPeerConnectionIceErrorEvent</code></dt>
              <dd>
              </dd>
            </dl>
          </section>
          <section>
            <h5 id="attributes-4">Attributes</h5>
            <dl data-link-for="RTCPeerConnectionIceErrorEvent" data-dfn-for="RTCPeerConnectionIceErrorEvent" class="attributes">
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnectioniceerrorevent" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceerrorevent-hostcandidate" data-title="hostCandidate"><code>hostCandidate</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
              <dd>
                <p>The <code>hostCandidate</code> attribute is the local IP
                address and port used to communicate with the STUN or TURN
                server.</p>
                <p>On a multihomed system, multiple interfaces may be used to
                contact the server, and this attribute allows the application
                to figure out on which one the failure occurred.</p>
                <p>If use of multiple interfaces has been prohibited for
                privacy reasons, this attribute will be set to 0.0.0.0:0 or
                [::]:0, as appropriate.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnectioniceerrorevent" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceerrorevent-url" data-title="url"><code>url</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
              <dd>
                <p>The <code>url</code> attribute is the STUN or TURN URL that
                identifies the STUN or TURN server for which the failure
                occurred.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnectioniceerrorevent" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceerrorevent-errorcode" data-title="errorCode"><code>errorCode</code></dfn> of type <span class="idlAttrType">unsigned short</span>, readonly</dt>
              <dd>
                <p>The <code>errorCode</code> attribute is the numeric STUN
                error code returned by the STUN or TURN server
                [<cite><a class="bibref" href="#bib-STUN-PARAMETERS">STUN-PARAMETERS</a></cite>].</p>
                <p>If no host candidate can reach the server,
                <code>errorCode</code> will be set to the value 701 which is
                outside the STUN error code range. This error is only fired
                once per server URL while in the
                <code>RTCIceGatheringState</code> of "gathering".</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnectioniceerrorevent" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceerrorevent-errortext" data-title="errorText"><code>errorText</code></dfn> of type <span class="idlAttrType">USVString</span>, readonly</dt>
              <dd>
                <p>The <code>errorText</code> attribute is the STUN reason text
                returned by the STUN or TURN server [<cite><a class="bibref" href="#bib-STUN-PARAMETERS">STUN-PARAMETERS</a></cite>].</p>
                <p>If the server could not be reached, <code>errorText</code>
                will be set to an implementation-specific value providing
                details about the error.</p>
              </dd>
            </dl>
          </section>
        </div>
        <div>
          <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcpeerconnectioniceerroreventinit" data-idl="" data-title="RTCPeerConnectionIceErrorEventInit">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcpeerconnectioniceerroreventinit" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionIceErrorEventInit</code></a></span> : <span class="idlSuperclass">EventInit</span> {
<span class="idlMember" id="idl-def-rtcpeerconnectioniceerroreventinit-hostcandidate" data-idl="" data-title="hostCandidate" data-dfn-for="rtcpeerconnectioniceerroreventinit">             <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>      <span class="idlMemberName"><a data-no-default="" data-link-for="rtcpeerconnectioniceerroreventinit" data-lt="" href="#dom-rtcpeerconnectioniceerroreventinit-hostcandidate" class="internalDFN" data-link-type="dfn"><code>hostCandidate</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcpeerconnectioniceerroreventinit-url" data-idl="" data-title="url" data-dfn-for="rtcpeerconnectioniceerroreventinit">             <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>      <span class="idlMemberName"><a data-no-default="" data-link-for="rtcpeerconnectioniceerroreventinit" data-lt="" href="#dom-rtcpeerconnectioniceerroreventinit-url" class="internalDFN" data-link-type="dfn"><code>url</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcpeerconnectioniceerroreventinit-errorcode" data-idl="" data-title="errorCode" data-dfn-for="rtcpeerconnectioniceerroreventinit">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-unsigned-short">unsigned short</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcpeerconnectioniceerroreventinit" data-lt="" href="#dom-rtcpeerconnectioniceerroreventinit-errorcode" class="internalDFN" data-link-type="dfn"><code>errorCode</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcpeerconnectioniceerroreventinit-statustext" data-idl="" data-title="statusText" data-dfn-for="rtcpeerconnectioniceerroreventinit">             <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span>      <span class="idlMemberName"><a data-no-default="" data-link-for="rtcpeerconnectioniceerroreventinit" data-lt="" href="#dom-rtcpeerconnectioniceerroreventinit-statustext" class="internalDFN" data-link-type="dfn"><code>statusText</code></a></span>;</span>
};</span></pre></div>
          <section>
            <h5 id="dictionary-rtcpeerconnectioniceerroreventinit-members">Dictionary <dfn data-dfn-type="dfn" id="dom-rtcpeerconnectioniceerroreventinit" data-idl="" data-title="RTCPeerConnectionIceErrorEventInit" data-dfn-for=""><code>RTCPeerConnectionIceErrorEventInit</code></dfn>
              Members</h5>
            <dl data-link-for="RTCPeerConnectionIceErrorEventInit" data-dfn-for="RTCPeerConnectionIceErrorEventInit" class="dictionary-members">
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnectioniceerroreventinit" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceerroreventinit-hostcandidate" data-title="hostCandidate"><code>hostCandidate</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>
                <p>The local IP address and port used to communicate
                 with the STUN or TURN server.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnectioniceerroreventinit" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceerroreventinit-url" data-title="url"><code>url</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>
                <p>The STUN or TURN URL that identifies the STUN
                or TURN server for which the failure occurred.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnectioniceerroreventinit" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceerroreventinit-errorcode" data-title="errorCode"><code>errorCode</code></dfn> of type <span class="idlMemberType">unsigned short</span>, required</dt>
              <dd>
                <p>The numeric STUN error code returned by the STUN
                or TURN server.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcpeerconnectioniceerroreventinit" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceerroreventinit-statustext" data-title="statusText"><code>statusText</code></dfn> of type <span class="idlMemberType">USVString</span></dt>
              <dd>
                <p>The STUN reason text returned by the STUN
                or TURN server.</p>
              </dd>
            </dl>
          </section>
        </div>
      </section>
    </section>
    <section id="priority-and-qos-model">
      <h3 id="x4-9-priority-and-qos-model"><span class="secno">4.9 </span>Priority and QoS Model</h3>
      <p>Many applications have multiple media flows of the same data type and
      often some of the flows are more important than others. WebRTC uses the
      priority and Quality of Service (QoS) framework described in
      [<cite><a class="bibref" href="#bib-RTCWEB-TRANSPORT">RTCWEB-TRANSPORT</a></cite>] and [<cite><a class="bibref" href="#bib-TSVWG-RTCWEB-QOS">TSVWG-RTCWEB-QOS</a></cite>] to provide priority and
      DSCP marking for packets that will help provide QoS in some networking
      environments. The priority setting can be used to indicate the relative
      priority of various flows. The priority API allows the JavaScript
      applications to tell the browser whether a particular media flow is high,
      medium, low or of very low importance to the application by setting the
      <code>priority</code> property of
      <code><a href="#dom-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a></code> objects to one of the
      following values.</p>
      <section id="rtcprioritytype-enum">
        <h4 id="x4-9-1-rtcprioritytype-enum"><span class="secno">4.9.1 </span><dfn data-dfn-type="dfn" id="dom-rtcprioritytype" data-idl="" data-title="RTCPriorityType" data-dfn-for=""><code>RTCPriorityType</code></dfn> Enum</h4>
        <div>
          <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtcprioritytype" data-idl="" data-title="RTCPriorityType">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcprioritytype" class="internalDFN" data-link-type="dfn"><code>RTCPriorityType</code></a></span> {
    <a href="#dom-rtcprioritytype-very-low" class="idlEnumItem">"very-low"</a>,
    <a href="#dom-rtcprioritytype-low" class="idlEnumItem">"low"</a>,
    <a href="#dom-rtcprioritytype-medium" class="idlEnumItem">"medium"</a>,
    <a href="#dom-rtcprioritytype-high" class="idlEnumItem">"high"</a>
};</span></pre></div>
          <table data-link-for="RTCPriorityType" data-dfn-for="RTCPriorityType" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description</th>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcprioritytype" data-dfn-type="dfn" id="dom-rtcprioritytype-very-low" data-title="very-low"><code>very-low</code></dfn></td>
                <td>See [<cite><a class="bibref" href="#bib-RTCWEB-TRANSPORT">RTCWEB-TRANSPORT</a></cite>], Section 4. Corresponds to "below
                normal" as defined in [<cite><a class="bibref" href="#bib-RTCWEB-DATA">RTCWEB-DATA</a></cite>].</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcprioritytype" data-dfn-type="dfn" id="dom-rtcprioritytype-low" data-title="low"><code>low</code></dfn></td>
                <td>See [<cite><a class="bibref" href="#bib-RTCWEB-TRANSPORT">RTCWEB-TRANSPORT</a></cite>], Section 4. Corresponds to
                "normal" as defined in [<cite><a class="bibref" href="#bib-RTCWEB-DATA">RTCWEB-DATA</a></cite>].</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcprioritytype" data-dfn-type="dfn" id="dom-rtcprioritytype-medium" data-title="medium"><code>medium</code></dfn></td>
                <td>See [<cite><a class="bibref" href="#bib-RTCWEB-TRANSPORT">RTCWEB-TRANSPORT</a></cite>], Section 4. Corresponds to "high"
                as defined in [<cite><a class="bibref" href="#bib-RTCWEB-DATA">RTCWEB-DATA</a></cite>].</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcprioritytype" data-dfn-type="dfn" id="dom-rtcprioritytype-high" data-title="high"><code>high</code></dfn></td>
                <td>See [<cite><a class="bibref" href="#bib-RTCWEB-TRANSPORT">RTCWEB-TRANSPORT</a></cite>], Section 4. Corresponds to "extra
                high" as defined in [<cite><a class="bibref" href="#bib-RTCWEB-DATA">RTCWEB-DATA</a></cite>].</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
      <p>Applications that use this API should be aware that often better
      overall user experience is obtained by lowering the priority of things
      that are not as important rather than raising the priority of the things
      that are.</p>
    </section>
    <section>
      <h3 id="sec.cert-mgmt"><span class="secno">4.10 </span>Certificate Management</h3>
      <p>The certificates that <code>RTCPeerConnection</code> instances use to
      authenticate with peers use the <a href="#dom-rtccertificate" class="internalDFN" data-link-type="dfn"><code><code>RTCCertificate</code></code></a>
      interface. These objects can be explicitly generated by applications
      using the <a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-generatecertificate" class="internalDFN" data-link-type="dfn"><code><code>generateCertificate</code></code></a> method and
      can be provided in the <a href="#dom-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code><code>RTCConfiguration</code></code></a> when
      constructing a new <code>RTCPeerConnection</code> instance.</p>
      <p>The explicit certificate management functions provided here are
      optional. If an application does not provide the
      <code>certificates</code> configuration option when constructing an
      <code>RTCPeerConnection</code> a new set of certificates <em class="rfc2119" title="MUST">MUST</em> be
      generated by the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a>. That set <em class="rfc2119" title="MUST">MUST</em> include an ECDSA
      certificate with a private key on the P-256 curve and a signature with a
      SHA-256 hash.</p>
      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcpeerconnection-partial-2" data-idl="" data-title="RTCPeerConnection">partial interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></span> {
<span class="idlMethod" id="idl-def-rtcpeerconnection-generatecertificate-keygenalgorithm" data-idl="" data-title="generateCertificate" data-dfn-for="rtcpeerconnection">    static <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="#dom-rtccertificate" class="internalDFN" data-link-type="dfn"><code>RTCCertificate</code></a>&gt;</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="generateCertificate|generatecertificate()" href="#dom-rtcpeerconnection-generatecertificate" class="internalDFN" data-link-type="dfn"><code>generateCertificate</code></a></span>(<span class="idlParam"><span class="idlParamType">AlgorithmIdentifier</span> <span class="idlParamName">keygenAlgorithm</span></span>);</span>
};</span></pre></div>
        <section>
          <h4 id="methods-3">Methods</h4>
          <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="methods">
            <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-generatecertificate" data-title="generateCertificate" data-lt="generateCertificate|generatecertificate()"><code>generateCertificate</code></dfn>, static</dt>
            <dd>
              <p>The <code>generateCertificate</code> function causes the
              <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> to create and store an X.509 certificate
              [<cite><a class="bibref" href="#bib-X509V3">X509V3</a></cite>] and corresponding private key. A handle to
              information is provided in the form of the
              <code>RTCCertificate</code> interface. The returned
              <code>RTCCertificate</code> can be used to control the
              certificate that is offered in the DTLS sessions established by
              <code>RTCPeerConnection</code>.</p>
              <p>The <var>keygenAlgorithm</var> argument is used to control how
              the private key associated with the certificate is generated. The
              <var>keygenAlgorithm</var> argument uses the WebCrypto
              [<cite><a class="bibref" href="#bib-WebCryptoAPI">WebCryptoAPI</a></cite>] <a href="https://www.w3.org/TR/WebCryptoAPI/#dfn-AlgorithmIdentifier">
              <code>AlgorithmIdentifier</code></a> type. The
              <var>keygenAlgorithm</var> value <em class="rfc2119" title="MUST">MUST</em> be a valid argument to
              <a href="https://www.w3.org/TR/WebCryptoAPI/#SubtleCrypto-method-generateKey">
              <code>window.crypto.subtle.generateKey</code></a>; that is, the
              value <em class="rfc2119" title="MUST">MUST</em> produce a non-error result when normalized according
              to the WebCrypto <a href="https://www.w3.org/TR/WebCryptoAPI/#algorithm-normalization">
              algorithm normalization process</a> [<cite><a class="bibref" href="#bib-WebCryptoAPI">WebCryptoAPI</a></cite>] with an
              operation name of <code>generateKey</code> and a [[<a href="https://www.w3.org/TR/WebCryptoAPI/#dfn-supportedAlgorithms">supportedAlgorithms</a>]]
              value specific to production of certificates for
              <code>RTCPeerConnection</code>. If the algorithm normalization
              process produces an error, the call to
              <code>generateCertificate</code> <em class="rfc2119" title="MUST">MUST</em> be rejected with that
              error.</p>
              <p>Signatures produced by the generated key are used to
              authenticate the DTLS connection. The identified algorithm (as
              identified by the <code>name</code> of the normalized
              <code>AlgorithmIdentifier</code>) <em class="rfc2119" title="MUST">MUST</em> be an asymmetric algorithm
              that can be used to produce a signature.</p>
              <p>The certificate produced by this process also contains a
              signature. The validity of this signature is only relevant for
              compatibility reasons. Only the public key and the resulting
              certificate fingerprint are used by
              <code>RTCPeerConnection</code>, but it is more likely that a
              certificate will be accepted if the certificate is well formed.
              The browser selects the algorithm used to sign the certificate; a
              browser <em class="rfc2119" title="SHOULD">SHOULD</em> select SHA-256 [<cite><a class="bibref" href="#bib-FIPS-180-4">FIPS-180-4</a></cite>] if a hash algorithm
              is needed.</p>
              <p>The resulting certificate <em class="rfc2119" title="MUST NOT">MUST NOT</em> include information that
              can be linked to a user or <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a>. Randomized values
              for distinguished name and serial number <em class="rfc2119" title="SHOULD">SHOULD</em> be used.</p>
              <p>A <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> <em class="rfc2119" title="MUST">MUST</em> reject a call to
              <code>generateCertificate()</code> with a
              <code>DOMException</code> of type <code>NotSupportedError</code>
              if the <var>keygenAlgorithm</var> parameter identifies an
              algorithm that the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> cannot or will not use to
              generate a certificate for <code>RTCPeerConnection</code>.</p>
              <p>The following values <em class="rfc2119" title="MUST">MUST</em> be supported by a <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a>:
              <code>{ name: "<a href="https://www.w3.org/TR/WebCryptoAPI/#rsassa-pkcs1">RSASSA-PKCS1-v1_5</a>",
              modulusLength: 2048, publicExponent: new Uint8Array([1, 0, 1]),
              hash: "SHA-256" }</code>, and <code>{ name: "<a href="https://www.w3.org/TR/WebCryptoAPI/#ecdsa">ECDSA</a>",
              namedCurve: "<a href="https://www.w3.org/TR/WebCryptoAPI/#dfn-NamedCurve">P-256</a>"
              }</code>.</p>
              <div class="note"><div role="heading" class="note-title marker" id="h-note-19" aria-level="5"><span>Note</span></div><p class="">It is expected that a <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> will have
              a small or even fixed set of values that it will accept.</p></div>
            </dd>
          </dl>
        </section>
      </div>
      <section id="rtccertificateexpiration-dictionary">
        <h4 id="x4-10-1-rtccertificateexpiration-dictionary"><span class="secno">4.10.1 </span><dfn data-dfn-type="dfn" id="dom-rtccertificateexpiration" data-idl="" data-title="RTCCertificateExpiration" data-dfn-for=""><code>RTCCertificateExpiration</code></dfn> Dictionary</h4>
        <p><code><a href="#dom-rtccertificateexpiration" class="internalDFN" data-link-type="dfn"><code>RTCCertificateExpiration</code></a></code> is used to set an
        expiration date on certificates generated by <a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-generatecertificate" class="internalDFN" data-link-type="dfn"><code><code>generateCertificate</code></code></a>.</p>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtccertificateexpiration" data-idl="" data-title="RTCCertificateExpiration">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtccertificateexpiration" class="internalDFN" data-link-type="dfn"><code>RTCCertificateExpiration</code></a></span> {
<span class="idlMember" id="idl-def-rtccertificateexpiration-expires" data-idl="" data-title="expires" data-dfn-for="rtccertificateexpiration">    [<span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#EnforceRange">EnforceRange</a></span></span>]
    <span class="idlMemberType">DOMTimeStamp</span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtccertificateexpiration" data-lt="" href="#dom-rtccertificateexpiration-expires" class="internalDFN" data-link-type="dfn"><code>expires</code></a></span>;</span>
};</span></pre></div>
        <dl data-link-for="RTCCertificateExpiration" data-dfn-for="RTCCertificateExpiration" class="methods">
          <dt><dfn data-dfn-for="rtccertificateexpiration" data-dfn-type="dfn" id="dom-rtccertificateexpiration-expires" data-idl="" data-title="expires"><code>expires</code></dfn></dt>
          <dd>
            <p>An optional <code>expires</code> attribute <em class="rfc2119" title="MAY">MAY</em> be added to the
            definition of the algorithm that is passed to <a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-generatecertificate" class="internalDFN" data-link-type="dfn"><code><code>generateCertificate</code></code></a>. If this
            parameter is present it indicates the maximum time that the
            <code><a href="#dom-rtccertificate" class="internalDFN" data-link-type="dfn"><code>RTCCertificate</code></a></code> is valid for relative to the
            current time.</p>
            <p>When <a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-generatecertificate" class="internalDFN" data-link-type="dfn"><code><code>generateCertificate</code></code></a> is called
            with an <code>object</code> argument, the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a>
            attempts to convert the object into an
            <code><a href="#dom-rtccertificateexpiration" class="internalDFN" data-link-type="dfn"><code>RTCCertificateExpiration</code></a></code>. If this is
            unsuccessful, immediately return a promise that is <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> with a
            newly <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
            <code>TypeError</code> and abort processing.</p>
            <p>A <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> generates a certificate that has an
            expiration date set to the current time plus the value of the
            <code>expires</code> attribute. The <a data-link-for="RTCCertificate" href="#dom-rtccertificate-expires" class="internalDFN" data-link-type="dfn"><code><code>expires</code></code></a> attribute of the returned
            <a href="#dom-rtccertificate" class="internalDFN" data-link-type="dfn"><code><code>RTCCertificate</code></code></a> is set to the expiration time of
            the certificate. A <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> <em class="rfc2119" title="MAY">MAY</em> choose to limit the value
            of the <a data-link-for="RTCCertificate" href="#dom-rtccertificate-expires" class="internalDFN" data-link-type="dfn"><code><code>expires</code></code></a>
            attribute.</p>
          </dd>
        </dl>
      </section>
      <section id="rtccertificate-interface">
        <h4 id="x4-10-2-rtccertificate-interface"><span class="secno">4.10.2 </span><dfn data-dfn-type="dfn" id="dom-rtccertificate" data-idl="" data-title="RTCCertificate" data-dfn-for=""><code>RTCCertificate</code></dfn> Interface</h4>
        <p>The <code>RTCCertificate</code> interface represents a
        certificate used to authenticate WebRTC communications. In addition to
        the visible properties, internal slots contain a handle to the
        generated private keying materal (<dfn data-dfn-type="dfn" id="dfn-keyingmaterial">[[KeyingMaterial]]</dfn>), a certificate
        (<dfn data-dfn-type="dfn" id="dfn-certificate">[[Certificate]]</dfn>]]) that <code>RTCPeerConnection</code>
        uses to authenticate with a peer, and the origin (<dfn data-dfn-type="dfn" id="dfn-origin">[[Origin]]</dfn>)
        that created the object.</p>
        <div>
          <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtccertificate" data-idl="" data-title="RTCCertificate">[<span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtccertificate" class="internalDFN" data-link-type="dfn"><code>RTCCertificate</code></a></span> {
<span class="idlAttribute" id="idl-def-rtccertificate-expires" data-idl="" data-title="expires" data-dfn-for="rtccertificate">    readonly attribute <span class="idlAttrType">DOMTimeStamp</span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtccertificate" data-lt="" href="#dom-rtccertificate-expires" class="internalDFN" data-link-type="dfn"><code>expires</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtccertificate-getsupportedalgorithms" data-idl="" data-title="getSupportedAlgorithms" data-dfn-for="rtccertificate">    static <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;AlgorithmIdentifier&gt;</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtccertificate" data-lt="getSupportedAlgorithms|getsupportedalgorithms()" href="#dom-rtccertificate-getsupportedalgorithms" class="internalDFN" data-link-type="dfn"><code>getSupportedAlgorithms</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtccertificate-getfingerprints" data-idl="" data-title="getFingerprints" data-dfn-for="rtccertificate">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-rtcdtlsfingerprint" class="internalDFN" data-link-type="dfn"><code>RTCDtlsFingerprint</code></a>&gt;</span>         <span class="idlMethName"><a data-no-default="" data-link-for="rtccertificate" data-lt="getFingerprints|getfingerprints()" href="#dom-rtccertificate-getfingerprints" class="internalDFN" data-link-type="dfn"><code>getFingerprints</code></a></span>();</span>
};</span></pre></div>
          <section>
            <h5 id="attributes-5">Attributes</h5>
            <dl data-link-for="RTCCertificate" data-dfn-for="RTCCertificate" class="attributes">
              <dt><dfn data-idl="" data-dfn-for="rtccertificate" data-dfn-type="dfn" id="dom-rtccertificate-expires" data-title="expires"><code>expires</code></dfn> of type <span class="idlAttrType">DOMTimeStamp</span>, readonly</dt>
              <dd>
                <p>The <var>expires</var> attribute indicates the date and time
                in milliseconds relative to 1970-01-01T00:00:00Z after which
                the certificate will be considered invalid by the browser.
                After this time, attempts to construct an
                <code>RTCPeerConnection</code> using this certificate fail.</p>
                <p>Note that this value might not be reflected in a
                <code>notAfter</code> parameter in the certificate itself.</p>
              </dd>
            </dl>
          </section>
          <section>
            <h5 id="methods-4">Methods</h5>
            <dl data-link-for="RTCCertificate" data-dfn-for="RTCCertificate" class="methods">
              <dt><dfn data-idl="" data-dfn-for="rtccertificate" data-dfn-type="dfn" id="dom-rtccertificate-getsupportedalgorithms" data-title="getSupportedAlgorithms" data-lt="getSupportedAlgorithms|getsupportedalgorithms()"><code>getSupportedAlgorithms</code></dfn></dt>
              <dd>
                <p>Returns a sequence providing a representative set of supported
                certificate algorithms. At least one algorithm <em class="rfc2119" title="MUST">MUST</em> be returned.</p>
                <div class="note"><div role="heading" class="note-title marker" id="h-note-20" aria-level="6"><span>Note</span></div><div class="">
                  <p>For example, the "RSASSA-PKCS1-v1_5" algorithm dictionary,
                  <code>RsaHashedKeyGenParams</code>, contains fields for the modulus
                  length, public exponent, and hash algorithm. Implementations
                  are likely to support a wide range of modulus lengths and exponents,
                  but a finite number of hash algorithms. So in this case, it would be
                  reasonable for the implementation to return one
                  <code>AlgorithmIdentifier</code> for each supported hash algorithm
                  that can be used with RSA, using default/recommended values for
                  <code>modulusLength</code> and <code>publicExponent</code>
                  (such as 1024 and 65537, respectively).</p>
                </div></div>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtccertificate" data-dfn-type="dfn" id="dom-rtccertificate-getfingerprints" data-title="getFingerprints" data-lt="getFingerprints|getfingerprints()"><code>getFingerprints</code></dfn></dt>
              <dd>
                <p>Returns the list of certificate fingerprints, one of which is
                computed with the digest algorithm used in the certificate
                signature.</p>
              </dd>
            </dl>
          </section>
        </div>
        <p>For the purposes of this API, the <a href="#dfn-certificate" class="internalDFN" data-link-type="dfn">[[Certificate]]</a> slot
        contains unstructured binary data. No mechanism is provided for
        applications to access the <a href="#dfn-keyingmaterial" class="internalDFN" data-link-type="dfn">[[KeyingMaterial]]</a> internal slot.
        Implementations <em class="rfc2119" title="MUST">MUST</em> support applications storing and retrieving
        <code>RTCCertificate</code> objects from persistent storage.
        In implementations where an <code>RTCCertificate</code> might not
        directly hold private keying material (it might be stored in a
        secure module), a reference to the private key can be held in
        the <a href="#dfn-keyingmaterial" class="internalDFN" data-link-type="dfn">[[KeyingMaterial]]</a> internal slot, allowing the
        private key to be stored and used.</p>
        <p>When a <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> is required to obtain a structured
        clone [<cite><a class="bibref" href="#bib-HTML51">HTML51</a></cite>] of an <code>RTCCertificate</code> object,
        it performs the following steps:</p>
        <ol>
          <li>Let <var>input</var> and <var>memory</var> be the corresponding
          inputs defined by the internal structured cloning algorithm, where
          <var>input</var> represents an <code>RTCCertificate</code> object to
          be cloned.</li>
          <li>Let <var>output</var> be a newly constructed
          <code>RTCCertificate</code> object.</li>
          <li>Copy the value of the <code>expires</code> attribute from
          <var>input</var> to <var>output</var>.</li>
          <li>Let the <a href="#dfn-certificate" class="internalDFN" data-link-type="dfn">[[Certificate]]</a> internal slot of <var>output</var>
          be set to the result of invoking the internal structured clone
          algorithm recursively on the corresponding internal slots of
          <var>input</var>, with the slot contents as the new
          "<var>input</var>" argument and <var>memory</var> as the new
          "<var>memory</var>" argument.
          </li>
          <li>Let the <a href="#dfn-keyingmaterial" class="internalDFN" data-link-type="dfn">[[KeyingMaterial]]</a> internal slot of <var>output</var>
          refer to the same private keying material represented by the
          <a href="#dfn-keyingmaterial" class="internalDFN" data-link-type="dfn">[[KeyingMaterial]]</a> internal slot of <var>input</var>.
          </li>
          <li>Let the <a href="#dfn-origin" class="internalDFN" data-link-type="dfn">[[Origin]]</a> internal slot of <var>output</var>
          be a copy of the <a href="#dfn-origin" class="internalDFN" data-link-type="dfn">[[Origin]]</a> internal slot of <var>input</var>.
          </li>
        </ol>
        <div class="note"><div role="heading" class="note-title marker" id="h-note-21" aria-level="5"><span>Note</span></div><p class="">Supporting structured cloning in this manner
        allows <a href="#dom-rtccertificate" class="internalDFN" data-link-type="dfn"><code>RTCCertificate</code></a> instances to be persisted to stores.  It
        also allows instances to be passed to other origins using APIs
        like <code>postMessage</code> [<cite><a class="bibref" href="#bib-webmessaging">webmessaging</a></cite>].  However, the object cannot
        be used by any other origin than the one that originally created it.</p></div>
      </section>
    </section>
  </section>
  <section id="rtp-media-api">
    <!--OddPage--><h2 id="x5-rtp-media-api"><span class="secno">5. </span>RTP Media API</h2>
    <p>The <dfn data-dfn-type="dfn" id="dfn-rtp-media-api">RTP media API</dfn> lets a web application send and receive
    <code>MediaStreamTrack</code>s over a peer-to-peer connection. Tracks, when
    added to an <code>RTCPeerConnection</code>, result in signaling; when this
    signaling is forwarded to a remote peer, it causes corresponding tracks to
    be created on the remote side.</p>
    <p>When sending media, the sender may need to rescale or
    resample the media to meet various requirements including the
    envelope negotiated by SDP.</p>
    <p>Following the rules in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-3.6">section 3.6.</a>)</span>, the
    video <em class="rfc2119" title="MAY">MAY</em> be downscaled in order to fit the SDP constraints. The media <em class="rfc2119" title="MUST NOT">MUST NOT</em> be upscaled to create fake data that did not occur in the input source,
    the media <em class="rfc2119" title="MUST NOT">MUST NOT</em> be cropped except as needed to satisfy constraints on
    pixel counts, and the aspect ratio <em class="rfc2119" title="MUST NOT">MUST NOT</em> be changed.</p>
    <div class="note"><div role="heading" class="note-title marker" id="h-note-22" aria-level="3"><span>Note</span></div><p class="">The WebRTC Working Group is seeking implementation
    feedback on the need and timeline for a more complex handling of this
    situation. Some possible designs have been discussed in <a href="https://github.com/w3c/webrtc-pc/issues/1283">GitHub issue
    1283</a>.</p></div>
    <p>When video is rescaled, for example for certain combinations
    of width or height and
    <code><a data-link-for="RTCRtpEncodingParameters" href="#dom-rtcrtpencodingparameters-scaleresolutiondownby" class="internalDFN" data-link-type="dfn"><code>
    scaleResolutionDownBy</code></a></code> values, situations when the resulting width
    or height is not an integer may occur. In such situations the
    user agent <em class="rfc2119" title="MUST">MUST</em> use <a href="https://tc39.github.io/ecma262/#eqn-floor">the
    integer part of the result</a>. What to transmit if the integer
    part of the scaled width or height is zero is implementation-specific.</p>
    <p>The actual encoding and transmission of <code>MediaStreamTrack</code>s
    is managed through objects called <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code>s.
    Similarly, the reception and decoding of <code>MediaStreamTrack</code>s is
    managed through objects called <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code>s. Each
    <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> is associated with at most one track,
    and each track to be received is associated with exactly
    one <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code>.</p>
    <p>The encoding and transmission of each <code>MediaStreamTrack</code>
    <em class="rfc2119" title="SHOULD">SHOULD</em> be made such that its characteristics (width, height and frameRate
    for video tracks; volume, sampleSize, sampleRate and channelCount for audio
    tracks) are to a reasonable degree retained by the track created on the
    remote side. There are situations when this does not apply, there may for
    example be resource constraints at either endpoint or in the network or
    there may be <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> settings applied that
    instruct the implementation to act differently.</p>
    <p>
      An <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object contains a <dfn id="transceivers-set" data-lt="set of transceivers|set of rtcrtptransceivers" data-dfn-type="dfn">set of
      <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>s</dfn>, representing the paired
      senders and receivers with some shared state. This set is initialized to
      the empty set when the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object is
      created. <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code>s and
      <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code>s are always created at the same time
      as an <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>, which they will remain
      attached to for their lifetime.
      <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>s are created implicitly when the
      application attaches a <code>MediaStreamTrack</code> to an
      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> via the <code>addTrack</code>
      method, or explicitly when the application uses the
      <code>addTransceiver</code> method. They are also created when a remote
      description is applied that includes a new media description.
      Additionally, when a remote description is applied that indicates the
      remote endpoint has media to send, the relevant
      <code>MediaStreamTrack</code> and <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> are
      surfaced to the application via the <code><a href="#event-track" class="internalDFN" data-link-type="dfn"><code>track</code></a></code> event.
    </p>
    <section id="rtcpeerconnection-interface-extensions">
      <h3 id="x5-1-rtcpeerconnection-interface-extensions"><span class="secno">5.1 </span>RTCPeerConnection Interface Extensions</h3>
      <p>The RTP media API extends the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>
      interface as described below.</p>
      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcpeerconnection-partial-3" data-idl="" data-title="RTCPeerConnection">partial interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></span> {
<span class="idlMethod" id="idl-def-rtcpeerconnection-getsenders" data-idl="" data-title="getSenders" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>&gt;</span>      <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="getSenders|getsenders()" href="#dom-rtcpeerconnection-getsenders" class="internalDFN" data-link-type="dfn"><code>getSenders</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-getreceivers" data-idl="" data-title="getReceivers" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>&gt;</span>    <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="getReceivers|getreceivers()" href="#dom-rtcpeerconnection-getreceivers" class="internalDFN" data-link-type="dfn"><code>getReceivers</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-gettransceivers" data-idl="" data-title="getTransceivers" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>&gt;</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="getTransceivers|gettransceivers()" href="#dom-rtcpeerconnection-gettransceivers" class="internalDFN" data-link-type="dfn"><code>getTransceivers</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-addtrack-track-streams" data-idl="" data-title="addTrack" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></span>                <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="addTrack|addtrack()" href="#dom-rtcpeerconnection-addtrack" class="internalDFN" data-link-type="dfn"><code>addTrack</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span> <span class="idlParamName">track</span></span>,
                                         <span class="idlParam"><span class="idlParamType"><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a>...</span> <span class="idlParamName">streams</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-removetrack-sender" data-idl="" data-title="removeTrack" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">void</span>                        <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="removeTrack|removetrack()" href="#dom-rtcpeerconnection-removetrack" class="internalDFN" data-link-type="dfn"><code>removeTrack</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></span> <span class="idlParamName">sender</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-addtransceiver-trackorkind-init" data-idl="" data-title="addTransceiver" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></span>           <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="addTransceiver|addtransceiver()" href="#dom-rtcpeerconnection-addtransceiver" class="internalDFN" data-link-type="dfn"><code>addTransceiver</code></a></span>(<span class="idlParam"><span class="idlParamType">(<a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a> or <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>)</span> <span class="idlParamName">trackOrKind</span></span>,
                                               <span class="idlParam">optional <span class="idlParamType"><a href="#dom-rtcrtptransceiverinit" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiverInit</code></a></span> <span class="idlParamName">init</span></span>);</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-ontrack" data-idl="" data-title="ontrack" data-dfn-for="rtcpeerconnection">    attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-ontrack" class="internalDFN" data-link-type="dfn"><code>ontrack</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="attributes-6">Attributes</h4>
          <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="attributes">
            <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-ontrack" data-title="ontrack"><code>ontrack</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd>
              <p>The event type of this event handler is
              <code><a href="#event-track" class="internalDFN" data-link-type="dfn"><code>track</code></a></code>.</p>
            </dd>
          </dl>
        </section>
        <section>
          <h4 id="methods-5">Methods</h4>
          <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="methods">
            <dt><code>getSenders</code></dt>
            <dd>
              <p>Returns a sequence of <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> objects
              representing the RTP senders that are currently attached to this
              <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object.</p>
              <p>The <dfn id="dom-rtcpeerconnection-getsenders" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl="" data-title="getSenders" data-lt="getSenders|getsenders()"><code>getSenders</code></dfn>
              method <em class="rfc2119" title="MUST">MUST</em> return the result of executing the
              <code><a href="#dfn-collectsenders" class="internalDFN" data-link-type="dfn">CollectSenders</a></code> algorithm.</p>
              <p></p>
              <p>We define the <dfn data-dfn-type="dfn" id="dfn-collectsenders">CollectSenders</dfn> algorithm as
              follows:</p>
              <ol>
                <li>Let <var>transceivers</var> be the result of executing the
                <code><a href="#dfn-collecttransceivers" class="internalDFN" data-link-type="dfn">CollectTransceivers</a></code> algorithm.</li>
                <li>Let <var>senders</var> be a new empty sequence.</li>
                <li>For each <var>transceiver</var> in <var>transceivers</var>,
                  <ol>
                    <li>Let <var>sender</var> be
                    <var>transceiver</var>'s <a href="#dfn-sender" class="internalDFN" data-link-type="dfn">[[Sender]]</a>.</li>
                    <li>Add <var>sender</var> to <var>senders</var>.</li>
                  </ol>
                </li>
                <li>Return <var>senders</var>.</li>
              </ol>
            </dd>
            <dt><code>getReceivers</code></dt>
            <dd>
              <p>Returns a sequence of <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code>
              objects representing the RTP receivers that are currently
              attached to this <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>
              object.</p>
              <p>The <dfn id="dom-rtcpeerconnection-getreceivers" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl="" data-title="getReceivers" data-lt="getReceivers|getreceivers()"><code>getReceivers</code></dfn>
              method <em class="rfc2119" title="MUST">MUST</em> return the result of executing the
              <code><a href="#dfn-collectreceivers" class="internalDFN" data-link-type="dfn">CollectReceivers</a></code> algorithm.</p>
              <p></p>
              <p>We define the <dfn data-dfn-type="dfn" id="dfn-collectreceivers">CollectReceivers</dfn> algorithm as
              follows:</p>
              <ol>
                <li>Let <var>transceivers</var> be the result of executing the
                <code><a href="#dfn-collecttransceivers" class="internalDFN" data-link-type="dfn">CollectTransceivers</a></code> algorithm.</li>
                <li>Let <var>receivers</var> be a new empty sequence.</li>
                <li>For each <var>transceiver</var> in <var>transceivers</var>,
                  <ol>
                    <li>Let <var>receiver</var> be <var>transceiver</var>'s
                    <a href="#dfn-receiver" class="internalDFN" data-link-type="dfn">[[Receiver]]</a>.</li>
                    <li>Add <var>receiver</var> to <var>receivers</var>.</li>
                  </ol>
                </li>
                <li>Return <var>receivers</var>.</li>
              </ol>
            </dd>
            <dt><code>getTransceivers</code></dt>
            <dd>
              <p>Returns a sequence of <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>
              objects representing the RTP transceivers that are currently
              attached to this <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>
              object.</p>
              <p>The <dfn id="dom-rtcpeerconnection-gettransceivers" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl="" data-title="getTransceivers" data-lt="getTransceivers|gettransceivers()"><code>getTransceivers</code></dfn>
              method <em class="rfc2119" title="MUST">MUST</em> return the result of executing the
              <code><a href="#dfn-collecttransceivers" class="internalDFN" data-link-type="dfn">CollectTransceivers</a></code> algorithm.</p>
              <p></p>
              <p>We define the <dfn data-dfn-type="dfn" id="dfn-collecttransceivers">CollectTransceivers</dfn> algorithm as
              follows:</p>
              <ol>
                <li>Let <var>transceivers</var> be a new sequence consisting of
                all <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> objects in this
                <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object's
                <a href="#transceivers-set" class="internalDFN" data-link-type="dfn">set of transceivers</a>, in insertion order.
                </li>
                <li>Return <var>transceivers</var>.</li>
              </ol>
            </dd>
            <dt><code>addTrack</code></dt>
            <dd>
              <p>Adds a new track to the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>,
              and indicates that it is contained in the specified
              <code>MediaStream</code>s.</p>
              <p>When the <dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-addtrack" data-title="addTrack" data-lt="addTrack|addtrack()"><code>addTrack</code></dfn> method is invoked,
              the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>
                  <p>Let <var>connection</var> be the
                  <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object on which this
                  method was invoked.</p>
                </li>
                <li>
                  <p>Let <var>track</var> be the
                  <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code> object indicated by the
                  method's first argument.</p>
                </li>
                <li>
                  <p>Let <var>kind</var> be <var>track.kind</var>.</p>
                </li>
                <li>
                  <p>Let <var>streams</var> be a list of
                  <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> objects constructed from the
                  method's remaining arguments, or an empty list if the method
                  was called with a single argument.</p>
                </li>
                <li>
                  <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
                  <code>true</code>, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an
                  <code>InvalidStateError</code>.</p>
                </li>
                <li>
                  <p>Let <var>senders</var> be the result of executing the
                  <code><a href="#dfn-collectsenders" class="internalDFN" data-link-type="dfn">CollectSenders</a></code> algorithm. If an
                  <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> for <var>track</var> already
                  exists in <var>senders</var>, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an
                  <code>InvalidAccessError</code>.</p>
                </li>
                <li>
                  <p>The steps below describe how to determine if an existing
                  sender can be reused. Doing so will cause future calls to
                  <code>createOffer</code> and <code>createAnswer</code> to
                  mark the corresponding <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a> as
                  <code>sendrecv</code> or <code>sendonly</code> and add the
                  MSID of the track added, as defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.2.2">section 5.2.2.</a> and <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.3.2">section 5.3.2.</a>)</span>.</p>
                  <p>If any <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> object in
                  <var>senders</var> matches all the following criteria, let
                  <var>sender</var> be that object, or <code>null</code>
                  otherwise:</p>
                  <ul>
                    <li>
                      <p>The sender's track is null.</p>
                    </li>
                    <li>
                      <p>The <a href="#dfn-transceiver-kind" class="internalDFN" data-link-type="dfn">transceiver kind</a> of the
                      <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>, associated with
                      the sender, matches <var>kind</var>.</p>
                    </li>
                    <li>
                      <p>The transceiver is not <code>stopped</code>. More
                      precisely, the <a href="#dfn-stopped" class="internalDFN" data-link-type="dfn">[[Stopped]]</a> slot of the
                      <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> associated with the
                      sender is <code>false</code>.</p>
                    </li>
                    <li>
                      <p>The sender has never been used to send. More
                      precisely, the <a href="#dfn-currentdirection" class="internalDFN" data-link-type="dfn">[[CurrentDirection]]</a> slot of the
                      <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> associated with the
                      sender has never had a value of <code>sendrecv</code> or
                      <code>sendonly</code>.</p>
                    </li>
                  </ul>
                </li>
                <li>
                  <p>If <var>sender</var> is not <code>null</code>, run the
                  following steps to use that sender:</p>
                  <ol>
                    <li>
                      <p>Set <var>sender</var>'s <a href="#dfn-sendertrack" class="internalDFN" data-link-type="dfn">[[SenderTrack]]</a> to
                      <var>track</var>.</p>
                    </li>
                    <li>
                      <p>Set <var>sender</var>'s
                      <a href="#dfn-associatedmediastreamids" class="internalDFN" data-link-type="dfn">[[AssociatedMediaStreamIds]]</a> to an empty set.
                      </p>
                    </li>
                    <li>
                      <p>For each <var>stream</var> in <var>streams</var>, add
                      <var>stream.id</var> to
                      <a href="#dfn-associatedmediastreamids" class="internalDFN" data-link-type="dfn">[[AssociatedMediaStreamIds]]</a> if it's not already
                      there.
                      </p>
                    </li>
                    <li>
                      <p>Let <var>transceiver</var> be the
                      <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> associated with
                      <var>sender</var>.</p>
                    </li>
                    <li>
                      <p>If <var>transceiver</var>'s <a href="#dfn-direction" class="internalDFN" data-link-type="dfn">[[Direction]]</a> slot is
                      <code>recvonly</code>, set <var>transceiver</var>'s
                      <a href="#dfn-direction" class="internalDFN" data-link-type="dfn">[[Direction]]</a> slot to <code>sendrecv</code>.</p>
                    </li>
                    <li>
                      <p>If <var>transceiver</var>'s <a href="#dfn-direction" class="internalDFN" data-link-type="dfn">[[Direction]]</a> slot
                      is <code>inactive</code>, set <var>transceiver</var>'s
                      <a href="#dfn-direction" class="internalDFN" data-link-type="dfn">[[Direction]]</a> slot to <code>sendonly</code>.</p>
                    </li>
                  </ol>
                </li>
                <li>
                  <p>If <var>sender</var> is <code>null</code>, run the
                  following steps:</p>
                  <ol>
                    <li>
                      <p><a href="#dfn-create-an-rtcrtpsender" class="internalDFN" data-link-type="dfn">Create an RTCRtpSender</a> with <var>track</var>,
                      <var>kind</var> and <var>streams</var>, and let
                      <var>sender</var> be the result.</p>
                    </li>
                    <li>
                      <p><a href="#dfn-create-an-rtcrtpreceiver" class="internalDFN" data-link-type="dfn">Create an RTCRtpReceiver</a> with <var>kind</var>,
                      and let <var>receiver</var> be the result.</p>
                    </li>
                    <li>
                      <p><a href="#dfn-create-an-rtcrtptransceiver" class="internalDFN" data-link-type="dfn">Create an RTCRtpTransceiver</a> with
                      <var>sender</var>, <var>receiver</var> and
                      an <code><a href="#dom-rtcrtptransceiverdirection" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiverDirection</code></a></code> value
                      of <code>sendrecv</code>, and let <var>transceiver</var>
                      be the result.</p>
                    </li>
                    <li>
                      <p>Add <var>transceiver</var> to <var>connection</var>'s
                      <a href="#transceivers-set">set of transceivers</a></p>
                    </li>
                  </ol>
                </li>
                <li>
                  <p>A track could have contents that are inaccessible to the
                  application. This can be due to being marked with a
                  <code>peerIdentity</code> option or anything that would make
                  a track <a href="https://fetch.spec.whatwg.org/#concept-cors-check">
                  CORS cross-origin</a>. These tracks can be supplied to the
                  <code>addTrack</code> method, and have an
                  <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> created for them, but
                  content <em class="rfc2119" title="MUST NOT">MUST NOT</em> be transmitted, unless they are also marked
                  with <code>peerIdentity</code> and they meet the requirements
                  for sending (see <a href="#isolated-pc">isolated streams and
                  <code>RTCPeerConnection</code></a>).</p>
                  <p>All other tracks that are not accessible to the
                  application <em class="rfc2119" title="MUST NOT">MUST NOT</em> be sent to the peer, with silence
                  (audio), black frames (video) or equivalently absent content
                  being sent in place of track content.</p>
                  <p>Note that this property can change over time.</p>
                </li>
                <li>
                  <p><a data-lt="update the negotiation-needed flag" href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">Update the
                  negotiation-needed flag</a> for <var>connection</var>.</p>
                </li>
                <li>
                  <p>Return <var>sender</var>.</p>
                </li>
              </ol>
            </dd>
            <dt><code>removeTrack</code></dt>
            <dd>
              <p>Stops sending media from <var>sender</var>. The
              <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> will still appear
              in <code>getSenders</code>. Doing so will cause future
              calls to <code>createOffer</code> to mark the
              <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a> for the corresponding transceiver
              as <code>recvonly</code> or <code>inactive</code>,
              as defined in <span>
              [<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.2.2">section 5.2.2.</a>)</span>. <!-- onended --></p>
              <p>When the other peer stops sending a track in this manner, the
              track is removed from any remote <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code>s
              that were initially revealed in the <code>track</code> event, and
              if the <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code> is not already muted,
              a <code title="event-MediaStreamTrack-muted">muted</code> event is
              fired at the track.</p>
              <p>When the <dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-removetrack" data-title="removeTrack" data-lt="removeTrack|removetrack()"><code>removeTrack</code></dfn> method is
              invoked, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>
                  <p>Let <var>sender</var> be the argument to
                  <code>removeTrack</code>.</p>
                </li>
                <li>
                  <p>Let <var>connection</var> be the
                  <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object on which
                  the method was invoked.</p>
                </li>
                <li>
                  <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
                  <code>true</code>, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an
                  <code>InvalidStateError</code>.</p>
                </li>
                <li>
                  <p>If <var>sender</var> was not created by
                  <var>connection</var>, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an
                  <code>InvalidAccessError</code>.</p>
                </li>
                <li>
                  <p>Let <var>senders</var> be the result of executing the
                  <code><a href="#dfn-collectsenders" class="internalDFN" data-link-type="dfn">CollectSenders</a></code> algorithm.</p>
                </li>
                <li>
                  <p>If <var>sender</var> is not in <var>senders</var> (which
                  indicates that it was removed due to <a href="#set-description">setting an RTCSessionDescription</a> of
                  type "rollback"), then abort these steps.</p>
                </li>
                <li>
                  <p>If <var>sender</var>'s <a href="#dfn-sendertrack" class="internalDFN" data-link-type="dfn">[[SenderTrack]]</a> is null,
                  abort these steps.
                </p></li>
                <li>
                  <p>Set <var>sender</var>'s <a href="#dfn-sendertrack" class="internalDFN" data-link-type="dfn">[[SenderTrack]]</a> to null.
                </p></li>
                <li>
                  <p>Let <var>transceiver</var> be the
                  <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> object corresponding
                  to <var>sender</var>.</p>
                </li>
                <li>
                  <p>If <var>transceiver</var>'s <a href="#dfn-direction" class="internalDFN" data-link-type="dfn">[[Direction]]</a> slot is
                  <code>sendrecv</code>, set <var>transceiver</var>'s
                  <a href="#dfn-direction" class="internalDFN" data-link-type="dfn">[[Direction]]</a> slot to <code>recvonly</code>.</p>
                </li>
                <li>
                  <p>If <var>transceiver</var>'s <a href="#dfn-direction" class="internalDFN" data-link-type="dfn">[[Direction]]</a> slot
                  is <code>sendonly</code>, set <var>transceiver</var>'s
                  <a href="#dfn-direction" class="internalDFN" data-link-type="dfn">[[Direction]]</a> slot to <code>inactive</code>.</p>
                </li>
                <li>
                  <p><a data-lt="update the negotiation-needed flag" href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">Update the
                  negotiation-needed flag</a> for <var>connection</var>.</p>
                </li>
              </ol>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-addtransceiver" data-title="addTransceiver" data-lt="addTransceiver|addtransceiver()"><code>addTransceiver</code></dfn></dt>
            <dd>
              <p>Create a new <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> and add it
              to the <a href="#transceivers-set" class="internalDFN" data-link-type="dfn">set of transceivers</a>.</p>
              <p>Adding a transceiver will cause future calls to
              <code>createOffer</code> to add a <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a> for
              the corresponding transceiver, as defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.2.2">section 5.2.2.</a>)</span>.</p>
              <p>The initial value of <code><a data-link-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-mid" class="internalDFN" data-link-type="dfn"><code>mid</code></a></code> is null. Setting a new
              <code><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></code> may change it to a
              non-null value, as defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.5">section 5.5.</a> and <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.6">section 5.6.</a>)</span>.</p>
              <p>The <code>sendEncodings</code> argument can be used to
              specify the number of offered simulcast encodings, and
              optionally their RIDs and encoding parameters.</p>
              <p>When this method is invoked, the user agent <em class="rfc2119" title="MUST">MUST</em> run the
              following steps:</p>
              <ol>
                <li>
                  <p>Let <var>init</var> be the second argument.</p>
                </li>
                <li>
                  <p>Let <var>streams</var> be <var>init</var>'s
                  <code>streams</code> member.</p>
                </li>
                <li>
                  <p>Let <var>sendEncodings</var> be <var>init</var>'s
                  <code>sendEncodings</code> member.</p>
                </li>
                <li>
                  <p>Let <var>direction</var> be <var>init</var>'s
                  <code>direction</code> member.</p>
                </li>
                <li>
                  <p>If the first argument is a string, let it be
                  <var>kind</var> and run the following steps:</p>
                  <ol>
                    <li>
                      <p>If <var>kind</var> is not a legal
                      <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code> <code>kind</code>,
                      <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> a <code>TypeError</code>.</p>
                    </li>
                    <li>
                      <p>Let <var>track</var> be <code>null</code>.</p>
                    </li>
                  </ol>
                </li>
                <li>
                  <p>If the first argument is a
                  <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code>, let it be
                  <var>track</var> and let <var>kind</var> be
                  <var>track.kind</var>.</p>
                </li>
                <li>
                  <p>Verify that each <code><a data-link-for="RTCRtpCodingParameters" href="#dom-rtcrtpcodingparameters-rid" class="internalDFN" data-link-type="dfn"><code>rid</code></a></code>
                  value in <var>sendEncodings</var> is composed only of
                  alphanumeric characters (a-z, A-Z, 0-9) up to
                  a maximum of 16 characters. If one of the RIDs does not meet
                  these requirements, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> a <code>TypeError</code>.</p>
                </li>
                <li>
                  <p>If any <code><a href="#dom-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a></code>
                  dictionary in <var>sendEncodings</var> contains a
                  <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">read-only parameter</a> other than
                  <code><a data-link-for="RTCRtpCodingParameters" href="#dom-rtcrtpcodingparameters-rid" class="internalDFN" data-link-type="dfn"><code>rid</code></a></code>,
                  <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an <code>InvalidAccessError</code>.</p>
                </li>
                <li>
                  <p>Verify that each <code><a data-link-for="RTCRtpEncodingParameters" href="#dom-rtcrtpencodingparameters-scaleresolutiondownby" class="internalDFN" data-link-type="dfn"><code>scaleResolutionDownBy</code></a></code>
                  value in <var>sendEncodings</var> is greater than or equal to 1.0. If
                  one of the <code>scaleResolutionDownBy</code> values does not meet
                  this requirement, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> a <code>RangeError</code>.</p>
                </li>
                <li>
                  <p><a href="#dfn-create-an-rtcrtpsender" class="internalDFN" data-link-type="dfn">Create an RTCRtpSender</a> with <var>track</var>,
                  <var>kind</var>, <var>streams</var> and <var>sendEncodings</var>
                  and let <var>sender</var> be the result.</p>
                  <p>If <var>sendEncodings</var> is set, then subsequent calls
                  to <code>createOffer</code> will be configured to send
                  multiple RTP encodings as defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.2.2">section 5.2.2.</a> and <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.2.1">section 5.2.1.</a>)</span>. When
                  <code>setRemoteDescription</code> is called with a
                  corresponding remote description that is able to receive
                  multiple RTP encodings as defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-3.7">section 3.7.</a>)</span>, the
                  <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> may send multiple RTP
                  encodings and the parameters retrieved via the transceiver's
                  <code>sender.getParameters()</code> will reflect the
                  encodings negotiated.</p>
                </li>
                <li>
                  <p><a href="#dfn-create-an-rtcrtpreceiver" class="internalDFN" data-link-type="dfn">Create an RTCRtpReceiver</a> with <var>kind</var> and
                  let <var>receiver</var> be the result. This specification
                  does not define how to configure <code>createOffer</code> to
                  receive multiple RTP encodings. However when
                  <code>setRemoteDescription</code> is called with a
                  corresponding remote description that is able to send
                  multiple RTP encodings as defined in [<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>], the
                  <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> may receive multiple RTP
                  encodings and the parameters retrieved via the transceiver's
                  <code>receiver.getParameters()</code> will reflect the
                  encodings negotiated.</p>
                  <div class="issue atrisk" id="issue-2"><div role="heading" class="issue-title marker" id="h-issue-0" aria-level="5"><span>Feature at Risk 2</span></div><div class="atrisk">
                    <p>Support for the <code>encodings</code> attribute of
                    <code><a href="#dom-rtcrtpreceiveparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiveParameters</code></a></code> is marked
                    as a feature at risk, since there is no clear
                    commitment from implementers.</p>
                  </div></div>
                </li>
                <li>
                  <p><a href="#dfn-create-an-rtcrtptransceiver" class="internalDFN" data-link-type="dfn">Create an RTCRtpTransceiver</a> with <var>sender</var>,
                  <var>receiver</var> and <var>direction</var>, and let
                  <var>transceiver</var> be the result.</p>
                </li>
                <li>
                  <p>Add <var>transceiver</var> to <var>connection</var>'s
                  <a href="#transceivers-set">set of transceivers</a></p>
                </li>
                <li>
                  <p><a data-lt="update the negotiation-needed flag" href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">Update the
                  negotiation-needed flag</a> for <var>connection</var>.</p>
                </li>
                <li>
                  <p>Return <var>transceiver</var>.</p>
                </li>
              </ol>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtptransceiverinit" data-idl="" data-title="RTCRtpTransceiverInit">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtptransceiverinit" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiverInit</code></a></span> {
<span class="idlMember" id="idl-def-rtcrtptransceiverinit-direction" data-idl="" data-title="direction" data-dfn-for="rtcrtptransceiverinit">    <span class="idlMemberType"><a href="#dom-rtcrtptransceiverdirection" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiverDirection</code></a></span>         <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtptransceiverinit" data-lt="" href="#dom-rtcrtptransceiverinit-direction" class="internalDFN" data-link-type="dfn"><code>direction</code></a></span> = <span class="idlMemberValue">"sendrecv"</span>;</span>
<span class="idlMember" id="idl-def-rtcrtptransceiverinit-streams" data-idl="" data-title="streams" data-dfn-for="rtcrtptransceiverinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a>&gt;</span>              <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtptransceiverinit" data-lt="" href="#dom-rtcrtptransceiverinit-streams" class="internalDFN" data-link-type="dfn"><code>streams</code></a></span> = <span class="idlMemberValue">[]</span>;</span>
<span class="idlMember" id="idl-def-rtcrtptransceiverinit-sendencodings" data-idl="" data-title="sendEncodings" data-dfn-for="rtcrtptransceiverinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a>&gt;</span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtptransceiverinit" data-lt="" href="#dom-rtcrtptransceiverinit-sendencodings" class="internalDFN" data-link-type="dfn"><code>sendEncodings</code></a></span> = <span class="idlMemberValue">[]</span>;</span>
};</span></pre></div>
        <section>
          <h4 id="dictionary-rtcrtptransceiverinit-members">Dictionary <dfn data-dfn-type="dfn" id="dom-rtcrtptransceiverinit" data-idl="" data-title="RTCRtpTransceiverInit" data-dfn-for=""><code>RTCRtpTransceiverInit</code></dfn>
          Members</h4>
          <dl data-link-for="RTCRtpTransceiverInit" data-dfn-for="RTCRtpTransceiverInit" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtcrtptransceiverinit" data-dfn-type="dfn" id="dom-rtcrtptransceiverinit-direction" data-title="direction"><code>direction</code></dfn> of type <span class="idlMemberType"><a href="#dom-rtcrtptransceiverdirection" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiverDirection</code></a></span>,
            defaulting to <code>"sendrecv"</code></dt>
            <dd>The direction of the <code>RTCRtpTransceiver</code>.</dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtptransceiverinit" data-dfn-type="dfn" id="dom-rtcrtptransceiverinit-streams" data-title="streams"><code>streams</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a>&gt;</span></dt>
            <dd>
              <p>When the remote PeerConnection's track event fires
              corresponding to the <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> being
              added, these are the streams that will be put in the event.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtptransceiverinit" data-dfn-type="dfn" id="dom-rtcrtptransceiverinit-sendencodings" data-title="sendEncodings"><code>sendEncodings</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#dom-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a>&gt;</span></dt>
            <dd>
              <p>A sequence containing parameters for sending RTP encodings of
              media.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtcrtptransceiverdirection" data-idl="" data-title="RTCRtpTransceiverDirection">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtptransceiverdirection" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiverDirection</code></a></span> {
    <a href="#dom-rtcrtptransceiverdirection-sendrecv" class="idlEnumItem">"sendrecv"</a>,
    <a href="#dom-rtcrtptransceiverdirection-sendonly" class="idlEnumItem">"sendonly"</a>,
    <a href="#dom-rtcrtptransceiverdirection-recvonly" class="idlEnumItem">"recvonly"</a>,
    <a href="#dom-rtcrtptransceiverdirection-inactive" class="idlEnumItem">"inactive"</a>
};</span></pre></div>
        <table data-link-for="RTCRtpTransceiverDirection" data-dfn-for="RTCRtpTransceiverDirection" class="simple">
          <tbody>
            <tr>
              <th colspan="2"><dfn data-dfn-for="" data-dfn-type="dfn" id="dom-rtcrtptransceiverdirection" data-idl="" data-title="RTCRtpTransceiverDirection"><code>RTCRtpTransceiverDirection</code></dfn> Enumeration description</th>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcrtptransceiverdirection" data-dfn-type="dfn" id="dom-rtcrtptransceiverdirection-sendrecv" data-title="sendrecv"><code>sendrecv</code></dfn></td>
              <td>The <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>'s
              <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> <var>sender</var> will offer to
              send RTP, and will send RTP if the remote peer accepts and
              <code><var>sender.getParameters().encodings[i].active</var></code>
              is <code>true</code> for any value of <var>i</var>. The
              <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>'s
              <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> will offer to receive RTP, and
              will receive RTP if the remote peer accepts.</td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcrtptransceiverdirection" data-dfn-type="dfn" id="dom-rtcrtptransceiverdirection-sendonly" data-title="sendonly"><code>sendonly</code></dfn></td>
              <td>The <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>'s
              <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> <var>sender</var> will offer to
              send RTP, and will send RTP if the remote peer accepts and
              <code><var>sender.getParameters().encodings[i].active</var></code>
              is <code>true</code> for any value of <var>i</var>. The
              <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>'s
              <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> will not offer to receive RTP,
              and will not receive RTP.</td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcrtptransceiverdirection" data-dfn-type="dfn" id="dom-rtcrtptransceiverdirection-recvonly" data-title="recvonly"><code>recvonly</code></dfn></td>
              <td>The <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>'s
              <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> will not offer to send RTP, and
              will not send RTP. The <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>'s
              <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> will offer to receive RTP, and
              will receive RTP if the remote peer accepts.</td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcrtptransceiverdirection" data-dfn-type="dfn" id="dom-rtcrtptransceiverdirection-inactive" data-title="inactive"><code>inactive</code></dfn></td>
              <td>The <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>'s
              <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> will not offer to send RTP, and
              will not send RTP. The <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>'s
              <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> will not offer to receive RTP,
              and will not receive RTP.</td>
            </tr>
          </tbody>
        </table>
      </div>
      <section id="processing-remote-mediastreamtracks">
        <h4 id="x5-1-1-processing-remote-mediastreamtracks"><span class="secno">5.1.1 </span>Processing Remote MediaStreamTracks</h4>
        <p>An application can reject incoming media descriptions by calling
        <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>.stop()</code> to stop both directions,
        or set the transceiver's direction to "sendonly" to reject only the
        incoming side.</p>
        <p>To <dfn id="process-remote-track-addition" data-dfn-type="dfn">
        process the addition of a remote track</dfn> for
        an incoming media description <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.10">section 5.10.</a>)</span> given
        <code>RTCRtpTransceiver</code> <var>transceiver</var>,
        <var>addList</var>, and <var>trackEvents</var>, the user agent <em class="rfc2119" title="MUST">MUST</em> run
        the following steps:</p>
        <ol>
          <li>
            <p>Let <var>receiver</var> be <var>transceiver</var>'s
            <a href="#dfn-receiver" class="internalDFN" data-link-type="dfn">[[Receiver]]</a>.
            </p>
          </li>
          <li>
            <p>Let <var>msids</var> be a list of the MSIDs that the
            media description indicates <var>track</var> is to be associated
            with.</p>
          </li>
          <li>
            <p>Let <var>removeList</var> be an empty list.</p>
          </li>
          <li>
            <p><a href="#set-associated-remote-streams" class="internalDFN" data-link-type="dfn">Set the associated remote streams</a> given
            <var>receiver</var>, <var>msids</var>, <var>addList</var>, and
            <var>removeList</var>.</p>
          </li>
          <li>
            <p>Let <var>track</var> be <var>receiver</var>'s
            <a href="#dfn-receivertrack" class="internalDFN" data-link-type="dfn">[[ReceiverTrack]]</a>.
            </p>
          </li>
          <li>
            <p>Let <var>streams</var> be <var>receiver</var>'s
            <dfn data-dfn-type="dfn" id="dfn-associatedremotemediastreams">[[AssociatedRemoteMediaStreams]]</dfn> slot.
            </p>
          </li>
          <li>
            <p>Add a new <code><a href="#dom-rtctrackevent" class="internalDFN" data-link-type="dfn"><code>RTCTrackEvent</code></a></code> with
            <var>receiver</var>, <var>track</var>,
            <var>streams</var> and <var>transceiver</var> to
            <var>trackEvents</var>.</p>
          </li>
        </ol>
        <p>To <dfn id="process-remote-track-removal" data-dfn-type="dfn">
        process the removal of a remote track</dfn> for
        an incoming media description <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.10">section 5.10.</a>)</span> given
        <code>RTCRtpTransceiver</code> <var>transceiver</var>,
        <var>removeList</var>, and <var>muteTracks</var>, the user agent <em class="rfc2119" title="MUST">MUST</em>
        run the following steps:</p>
        <ol>
          <li>
            <p>Let <var>receiver</var> be <var>transceiver</var>'s
            <a href="#dfn-receiver" class="internalDFN" data-link-type="dfn">[[Receiver]]</a>.
            </p>
          </li>
          <li>
            <p>Let <var>msids</var> and <var>addList</var> be empty lists.
            </p>
          </li>
          <li>
            <p><a href="#set-associated-remote-streams" class="internalDFN" data-link-type="dfn">Set the associated remote streams</a>, given
            <var>receiver</var>, <var>msids</var>, <var>addList</var>, and
            <var>removeList</var>.</p>
          </li>
          <li>
            <p>Let <var>track</var> be <var>receiver</var>'s
            <a href="#dfn-receivertrack" class="internalDFN" data-link-type="dfn">[[ReceiverTrack]]</a>.
            </p>
          </li>
          <li>
            <p>If <var>track.muted</var> is <code>false</code>,
            add <var>track</var> to <var>muteTracks</var>.</p>
          </li>
        </ol>
        <p>To <dfn id="set-associated-remote-streams" data-dfn-type="dfn">set the associated remote streams</dfn> given
        <code>RTCRtpReceiver</code> <var>receiver</var>, <var>msids</var>,
        <var>addList</var>, and <var>removeList</var>, the user agent <em class="rfc2119" title="MUST">MUST</em> run
        the following steps:</p>
        <ol>
          <li>
            <p>Let <var>connection</var> be the
            <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object associated with
            <var>receiver</var>.</p>
          </li>
          <li>
            <p>For each MSID in <var>msids</var>, unless a
            <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> object has previously been created
            with that <code>id</code> for this <var>connection</var>, create a
            <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> object with that
            <code>id</code>.</p>
          </li>
          <li>
            <p>Let <var>streams</var> be a list of the
            <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> objects created for this
            <var>connection</var> with the <code>id</code>s corresponding to
            <var>msids</var>.</p>
          </li>
          <li>
            <p>Let <var>track</var> be <var>receiver</var>'s
            <a href="#dfn-receivertrack" class="internalDFN" data-link-type="dfn">[[ReceiverTrack]]</a>.
            </p>
          </li>
          <li>
            <p>For each <var>stream</var> in <var>receiver</var>'s
            <a href="#dfn-associatedremotemediastreams" class="internalDFN" data-link-type="dfn">[[AssociatedRemoteMediaStreams]]</a> that is not present in
            <var>streams</var>, add <var>stream</var> and <var>track</var> as a
            pair to <var>removeList</var>.
            </p>
          </li>
          <li>
            <p>For each <var>stream</var> in
            <var>streams</var> that is not present in <var>receiver</var>'s
            <a href="#dfn-associatedremotemediastreams" class="internalDFN" data-link-type="dfn">[[AssociatedRemoteMediaStreams]]</a>, add <var>stream</var> and
            <var>track</var> as a pair to <var>addList</var>.</p>
          </li>
          <li>
            <p>Set <var>receiver</var>'s
            <a href="#dfn-associatedremotemediastreams" class="internalDFN" data-link-type="dfn">[[AssociatedRemoteMediaStreams]]</a> slot to
            <var>streams</var>.
            </p>
          </li>
        </ol>
      </section>
    </section>
    <section id="rtcrtpsender-interface">
      <h3 id="x5-2-rtcrtpsender-interface"><span class="secno">5.2 </span><dfn data-dfn-type="dfn" id="dom-rtcrtpsender" data-idl="" data-title="RTCRtpSender" data-dfn-for=""><code>RTCRtpSender</code></dfn> Interface</h3>
      <p>The <code>RTCRtpSender</code> interface allows an
      application to control how a given <code>MediaStreamTrack</code> is
      encoded and transmitted to a remote peer. When <code>setParameters</code>
      is called on an <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> object, the encoding is
      changed appropriately.</p>

      <p>To <dfn data-dfn-type="dfn" id="dfn-create-an-rtcrtpsender">create an RTCRtpSender</dfn> with a
      <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code>, <var>track</var>, a string,
      <var>kind</var>, a list of
      <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> objects, <var>streams</var>, and
      optionally a list of <code><a href="#dom-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a></code>
      objects, <var>sendEncodings</var>, run the following steps:</p>
      <ol>
        <li>
          <p>Let <var>sender</var> be a new <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code>
          object.</p>
        </li>
        <li>
          <p>Let <var>sender</var> have a <dfn data-dfn-type="dfn" id="dfn-sendertrack">[[SenderTrack]]</dfn> internal
          slot initialized to <var>track</var>.</p>
        </li>
        <li>
          <p>Let <var>sender</var> have a <dfn data-dfn-type="dfn" id="dfn-sendertransport">[[SenderTransport]]</dfn> internal
          slot initialized to <code>null</code>.</p>
        </li>
        <li>
          <p>Let <var>sender</var> have a <dfn data-dfn-type="dfn" id="dfn-dtmf">[[Dtmf]]</dfn> internal
          slot initialized to <code>null</code>.</p>
        </li>
        <li>
          <p>If <var>kind</var> is <code>"audio"</code> then
          <a href="#dfn-create-an-rtcdtmfsender" class="internalDFN" data-link-type="dfn">create an <code>RTCDTMFSender</code></a> <var>dtmf</var> and set
          the <a href="#dfn-dtmf" class="internalDFN" data-link-type="dfn">[[Dtmf]]</a> internal slot to <var>dtmf</var>.
        </p></li>
        <li>
          <p>Let <var>sender</var> have a <dfn data-dfn-type="dfn" id="dfn-senderrtcptransport">[[SenderRtcpTransport]]</dfn> internal
          slot initialized to <code>null</code>.</p>
        </li>
        <li>
          <p>Let <var>sender</var> have an
          <dfn data-dfn-type="dfn" id="dfn-associatedmediastreamids">[[AssociatedMediaStreamIds]]</dfn> internal slot, representing a
          list of Ids of <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> objects that this
          sender is to be associated with. The
          <a href="#dfn-associatedmediastreamids" class="internalDFN" data-link-type="dfn">[[AssociatedMediaStreamIds]]</a> slot is used when
          <var>sender</var> is represented in SDP as described in
          <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.2.1">section 5.2.1.</a>)</span>.</p>
        </li>
        <li>
          <p>Set <var>sender</var>'s <a href="#dfn-associatedmediastreamids" class="internalDFN" data-link-type="dfn">[[AssociatedMediaStreamIds]]</a> to an
          empty set.</p>
        </li>
        <li>
          <p>For each <var>stream</var> in <var>streams</var>, add
          <var>stream.id</var> to <a href="#dfn-associatedmediastreamids" class="internalDFN" data-link-type="dfn">[[AssociatedMediaStreamIds]]</a> if it's
          not already there.
          </p>
        </li>
        <li>
          <p>Let <var>sender</var> have a <dfn data-dfn-type="dfn" id="dfn-sendencodings">[[SendEncodings]]</dfn>
          internal slot, representing a list of
          <code><a href="#dom-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a></code> dictionaries.</p>
        </li>
        <li>
          <p>If <var>sendEncodings</var> is given as input to this algorithm,
          and is non-empty, set the <a href="#dfn-sendencodings" class="internalDFN" data-link-type="dfn">[[SendEncodings]]</a> slot to
          <var>sendEncodings</var>. Otherwise, set it to a list containing a
          single <code><a href="#dom-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a></code> with
          <code>active</code> set to <code>true</code>.</p>

          <div class="note"><div role="heading" class="note-title marker" id="h-note-23" aria-level="4"><span>Note</span></div><div class="">Providing a single, default
          <code><a href="#dom-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a></code> allows the application
          to set encoding parameters using
          <code><a data-link-for="RTCRtpSender" href="#dom-rtcrtpsender-setparameters" class="internalDFN" data-link-type="dfn"><code>setParameters</code></a></code>, even
          when simulcast isn't used.</div></div>
        </li>
        <li>
          <p>Let <var>maxN</var> be the maximum number of total simultaneous
          encodings the user agent may support for this <var>kind</var>, at
          minimum <code>1</code>.This should be an optimistic number since the
          codec to be used is not known yet.</p>
        </li>
        <li>
          <p>If the number of <code><a href="#dom-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a></code>
          stored in <a href="#dfn-sendencodings" class="internalDFN" data-link-type="dfn">[[SendEncodings]]</a> exceeds <var>maxN</var>, then trim
          <a href="#dfn-sendencodings" class="internalDFN" data-link-type="dfn">[[SendEncodings]]</a> from the tail until its length is
          <var>maxN</var>.</p>
        </li>
        <li>
          <p>If the number of <code><a href="#dom-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a></code> now
          stored in <a href="#dfn-sendencodings" class="internalDFN" data-link-type="dfn">[[SendEncodings]]</a> is <code>1</code>, then remove any
          <code><a data-link-for="RTCRtpCodingParameters" href="#dom-rtcrtpcodingparameters-rid" class="internalDFN" data-link-type="dfn"><code>rid</code></a></code>
          member from the lone entry.</p>
        </li>
        <li>
          <p>Let <var>sender</var> have a <dfn data-dfn-type="dfn" id="dfn-lastreturnedparameters">[[LastReturnedParameters]]</dfn>
          internal slot, which will be used to match
          <code><a data-link-for="RTCRtpSender" href="#idl-def-rtcrtpsender-getparameters" class="internalDFN" data-link-type="dfn"><code>getParameters</code></a></code> and
          <code><a data-link-for="RTCRtpSender" href="#dom-rtcrtpsender-setparameters" class="internalDFN" data-link-type="dfn"><code>setParameters</code></a></code> transactions.</p>
        </li>
        <li>
          <p>Return <var>sender</var>.</p>
        </li>
      </ol>
      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcrtpsender" data-idl="" data-title="RTCRtpSender">[<span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></span> {
<span class="idlAttribute" id="idl-def-rtcrtpsender-track" data-idl="" data-title="track" data-dfn-for="rtcrtpsender">    readonly attribute <span class="idlAttrType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>?</span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcrtpsender" data-lt="" href="#dom-rtcrtpsender-track" class="internalDFN" data-link-type="dfn"><code>track</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcrtpsender-transport" data-idl="" data-title="transport" data-dfn-for="rtcrtpsender">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>?</span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcrtpsender" data-lt="" href="#dom-rtcrtpsender-transport" class="internalDFN" data-link-type="dfn"><code>transport</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcrtpsender-rtcptransport" data-idl="" data-title="rtcpTransport" data-dfn-for="rtcrtpsender">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>?</span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcrtpsender" data-lt="" href="#dom-rtcrtpsender-rtcptransport" class="internalDFN" data-link-type="dfn"><code>rtcpTransport</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcrtpsender-getcapabilities-kind" data-idl="" data-title="getCapabilities" data-dfn-for="rtcrtpsender">    static <span class="idlMethType"><a href="#dom-rtcrtpcapabilities" class="internalDFN" data-link-type="dfn"><code>RTCRtpCapabilities</code></a></span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcrtpsender" data-lt="getcapabilities()|getCapabilities" href="#dom-rtcrtpsender-getcapabilities" class="internalDFN" data-link-type="dfn">getCapabilities</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">kind</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcrtpsender-setparameters-parameters" data-idl="" data-title="setParameters" data-dfn-for="rtcrtpsender">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span>             <span class="idlMethName"><a data-no-default="" data-link-for="rtcrtpsender" data-lt="setParameters|setparameters()" href="#dom-rtcrtpsender-setparameters" class="internalDFN" data-link-type="dfn"><code>setParameters</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-rtcrtpsendparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpSendParameters</code></a></span> <span class="idlParamName">parameters</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcrtpsender-getparameters" data-idl="" data-title="getParameters" data-dfn-for="rtcrtpsender">    <span class="idlMethType"><a href="#dom-rtcrtpsendparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpSendParameters</code></a></span>      <span class="idlMethName"><a data-no-default="" data-link-for="rtcrtpsender" data-lt="getparameters()|getParameters" href="#dom-rtcrtpsender-getparameters" class="internalDFN" data-link-type="dfn">getParameters</a></span>();</span>
<span class="idlMethod" id="idl-def-rtcrtpsender-replacetrack-withtrack" data-idl="" data-title="replaceTrack" data-dfn-for="rtcrtpsender">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span>             <span class="idlMethName"><a data-no-default="" data-link-for="rtcrtpsender" data-lt="replaceTrack|replacetrack()" href="#dom-rtcrtpsender-replacetrack" class="internalDFN" data-link-type="dfn"><code>replaceTrack</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>?</span> <span class="idlParamName">withTrack</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcrtpsender-setstreams-streams" data-idl="" data-title="setStreams" data-dfn-for="rtcrtpsender">    <span class="idlMethType">void</span>                      <span class="idlMethName"><a data-no-default="" data-link-for="rtcrtpsender" data-lt="setStreams|setstreams()" href="#dom-rtcrtpsender-setstreams" class="internalDFN" data-link-type="dfn"><code>setStreams</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a>...</span> <span class="idlParamName">streams</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcrtpsender-getstats" data-idl="" data-title="getStats" data-dfn-for="rtcrtpsender">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="#dom-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a>&gt;</span>   <span class="idlMethName"><a data-no-default="" data-link-for="rtcrtpsender" data-lt="getstats()|getStats" href="#dom-rtcrtpsender-getstats" class="internalDFN" data-link-type="dfn">getStats</a></span>();</span>
};</span></pre></div>
        <section>
          <h4 id="attributes-7">Attributes</h4>
          <dl data-link-for="RTCRtpSender" data-dfn-for="RTCRtpSender" class="attributes">
            <dt><dfn data-idl="" data-dfn-for="rtcrtpsender" data-dfn-type="dfn" id="dom-rtcrtpsender-track" data-title="track"><code>track</code></dfn> of type <span class="idlAttrType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span>, readonly,
            nullable</dt>
            <dd>
              <p>The <code>track</code> attribute is the track that is
              associated with this <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> object. If
              <code>track</code> is ended, or if the track's output is disabled,
              i.e. the track is disabled and/or muted, the <code>
              <a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> <em class="rfc2119" title="MUST">MUST</em> send silence (audio), black
              frames (video) or a zero-information-content equivalent. In the
              case of video, the <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> <em class="rfc2119" title="SHOULD">SHOULD</em> send one
              black frame per second. If <code>track</code> is null then
              the <code>RTCRtpSender</code> does not send. On getting, the
              attribute <em class="rfc2119" title="MUST">MUST</em> return the value of the <a href="#dfn-sendertrack" class="internalDFN" data-link-type="dfn">[[SenderTrack]]</a>
              slot.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpsender" data-dfn-type="dfn" id="dom-rtcrtpsender-transport" data-title="transport"><code>transport</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></span>, readonly,
            nullable</dt>
            <dd>
              <p>The <code>transport</code> attribute is the transport over
              which media from <code>track</code> is sent in the form of RTP
              packets. Prior to construction of the
              <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code> object, the
              <code>transport</code> attribute will be null. When bundling is
              used, multiple <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> objects will
              share one <code>transport</code> and will all send RTP and RTCP
              over the same transport.</p>
              <p>On getting, the attribute <em class="rfc2119" title="MUST">MUST</em> return the value of the
              <a href="#dfn-sendertransport" class="internalDFN" data-link-type="dfn">[[SenderTransport]]</a> slot.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpsender" data-dfn-type="dfn" id="dom-rtcrtpsender-rtcptransport" data-title="rtcpTransport"><code>rtcpTransport</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></span>, readonly,
            nullable</dt>
            <dd>
              <p>The <code>rtcpTransport</code> attribute is the transport over
              which RTCP is sent and received. Prior to construction of the
              <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code> object, the
              <code>rtcpTransport</code> attribute will be null. When RTCP mux
              is used (or bundling, which mandates RTCP mux),
              <code>rtcpTransport</code> will be null, and both RTP and RTCP
              traffic will flow over the transport described by
              <code>transport</code>.</p>
              <p>On getting, the attribute <em class="rfc2119" title="MUST">MUST</em> return the value of the
              <a href="#dfn-senderrtcptransport" class="internalDFN" data-link-type="dfn">[[SenderRtcpTransport]]</a> slot.</p>
            </dd>
          </dl>
        </section>
        <section>
          <h4 id="methods-6">Methods</h4>
          <dl data-link-for="RTCRtpSender" data-dfn-for="RTCRtpSender" class="methods">
            <dt><code>getCapabilities</code>, static</dt>
            <dd>
              <p>The <dfn data-idl="" data-dfn-for="rtcrtpsender" data-dfn-type="dfn" id="dom-rtcrtpsender-getcapabilities" data-title="getCapabilities()" data-lt="getcapabilities()|getCapabilities"><code>getCapabilities()</code></dfn>
              method returns the most optimistic view of the capabilities of the
              system for sending media of the given kind. It does not reserve
              any resources, ports, or other state but is meant to provide a
              way to discover the types of capabilities of the browser
              including which codecs may be supported. User agents
              <em class="rfc2119" title="MUST">MUST</em> support <var>kind</var> values of <code>"audio"</code>
              and <code>"video"</code>. If the system has no capabilities
              corresponding to the value of the <var>kind</var>
              argument, <code>getCapabilities</code> returns <code>null</code>.</p>
              <p class="fingerprint">These capabilities provide generally
              persistent cross-origin information on the device and thus
              increases the fingerprinting surface of the application. In
              privacy-sensitive contexts, browsers can consider mitigations
              such as reporting only a common subset of the capabilities.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpsender" data-dfn-type="dfn" id="dom-rtcrtpsender-setparameters" data-title="setParameters" data-lt="setParameters|setparameters()"><code>setParameters</code></dfn></dt>
            <dd>
              <p>The <code>setParameters</code> method updates how
              <code>track</code> is encoded and transmitted to a remote
              peer.</p>
              <p>When the <code>setParameters</code> method is called, the user
              agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>Let <var>parameters</var> be the method's first argument.
                </li>
                <li>Let <var>sender</var> be the
                <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> object on which
                <code>setParameters</code> is invoked.</li>
                <li>Let <var>transceiver</var> be the
                <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> object associated
                with <var>sender</var> (i.e. <var>sender</var> is
                <var>transceiver</var>'s <a href="#dfn-sender" class="internalDFN" data-link-type="dfn">[[Sender]]</a>).</li>
                <li>Let <var>N</var> be the number of
                <code><a href="#dom-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a></code> stored in
                <var>sender</var>'s internal <a href="#dfn-sendencodings" class="internalDFN" data-link-type="dfn">[[SendEncodings]]</a>
                slot.</li>
                <li>If <var>transceiver</var>'s <a href="#dfn-stopped" class="internalDFN" data-link-type="dfn">[[Stopped]]</a> slot is
                <code>true</code>, return a promise <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> with a newly
                <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                <code>InvalidStateError</code>.</li>
                <li>If <var>sender</var>'s <a href="#dfn-lastreturnedparameters" class="internalDFN" data-link-type="dfn">[[LastReturnedParameters]]</a>
                internal slot is <code>null</code>, return a promise
                <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> with a newly
                <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                <code>InvalidStateError</code>.</li>
                <li>If any of the following conditions are met, return a promise
                <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> with a newly
                <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                <code>InvalidModificationError</code>:
                <ol>
                   <li><code><var>parameters</var>.encodings.length</code>
                   is different from <var>N</var>.</li>
                   <li><code><var>parameters</var>.encodings</code> has been
                   re-ordered.</li>
                   <li>Any parameter in <var>parameters</var> is marked as a
                   <dfn data-dfn-type="dfn" id="dfn-read-only-parameter">Read-only parameter</dfn> and has a value that is different
                   from the corresponding parameter value in <var>sender</var>'s
                   <a href="#dfn-lastreturnedparameters" class="internalDFN" data-link-type="dfn">[[LastReturnedParameters]]</a> internal slot. Note that
                   this also applies to <var>transactionId</var>.</li>
                </ol>
                </li>
                <li>
                  <p>For each value of <var>i</var> from 0 to the number of encodings,
                  check whether
                  <code><var>parameters</var>.encodings[<var>i</var>].codecPayloadType</code>
                  (if set) corresponds to a value of
                  <code><var>parameters</var>.codecs[<var>j</var>].payloadType</code> where
                  <var>j</var> goes from 0 to the number of codecs. If there is no
                  correspondence, or if the MIME subtype portion of
                  <code><var>parameters</var>.codecs[<var>j</var>].mimeType</code> is equal to
                  "red", "cn", "telephone-event", "rtx" or a forward error correction
                  codec ("ulpfec" [<cite><a class="bibref" href="#bib-RFC5109">RFC5109</a></cite>] or "flexfec" [<cite><a class="bibref" href="#bib-FLEXFEC">FLEXFEC</a></cite>]), reject <var>p</var> with
                  a newly <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                  <code>InvalidAccessError</code>.</p>
                </li>
                <li>If the <code>scaleResolutionDownBy</code> parameter in the
                <var>parameters</var> argument has a value less than 1.0,
                return a promise <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> with a newly
                <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                <code>RangeError</code>.</li>
                <li>Let <var>p</var> be a new promise.</li>
                <li>In parallel, configure the media stack to use
                <var>parameters</var> to transmit <var>sender</var>'s
                <a href="#dfn-sendertrack" class="internalDFN" data-link-type="dfn">[[SenderTrack]]</a>.
                  <ol>
                    <li>If the media stack is successfully configured with
                    <var>parameters</var>, queue a task to run the following
                    steps:
                      <ol>
                        <li>Set <var>sender</var>'s internal
                        <a href="#dfn-lastreturnedparameters" class="internalDFN" data-link-type="dfn">[[LastReturnedParameters]]</a> slot to
                        <code>null</code>.</li>
                        <li>Set <var>sender</var>'s internal
                        <a href="#dfn-sendencodings" class="internalDFN" data-link-type="dfn">[[SendEncodings]]</a> slot to <code>
                        <var>parameters</var>.encodings</code>.</li>
                        <li><a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">Resolve</a> <var>p</var> with <code>undefined</code>.
                      </li></ol>
                    </li>
                    <li>If any error occurred while configuring the media stack,
                    queue a task to run the following steps:
                      <ol>
                        <li>If an error occurred due to hardware resources not
                        being available, <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a> <var>p</var> with a newly
                        created <code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> whose
                        <code>errorDetail</code> is set to
                        "hardware-encoder-not-available" and abort these steps.</li>
                        <li>If an error occurred due to a hardware encoder not
                        supporting <var>parameters</var>, <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a>
                        <var>p</var> with a newly created <code>
                        <a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> whose <code>errorDetail</code>
                        is set to "hardware-encoder-error" and abort these
                        steps.</li>
                        <li>For all other errors, <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a> <var>p</var>
                        with a newly <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a> <code>OperationError</code>.</li>
                      </ol>
                    </li>
                  </ol>
                </li>
                <li>Return <var>p</var>.</li>
              </ol>
              <p>If the application selects a codec via <code><a data-link-for="RTCRtpEncodingParameters" href="#dom-rtcrtpencodingparameters-codecpayloadtype" class="internalDFN" data-link-type="dfn"><code>codecPayloadType</code></a></code>,
              and this codec is removed from a subsequent offer/answer
              negotiation, <code><a data-link-for="RTCRtpEncodingParameters" href="#dom-rtcrtpencodingparameters-codecpayloadtype" class="internalDFN" data-link-type="dfn"><code>codecPayloadType</code></a></code>
              will be unset in the next call to <code><a data-link-for="RTCRtpSender" href="#idl-def-rtcrtpsender-getparameters" class="internalDFN" data-link-type="dfn"><code>getParameters</code></a></code>,
              and the implementation will fall back to its default codec
              selection policy until a new codec is selected.</p>
              <p><code>setParameters</code> does not cause SDP renegotiation
              and can only be used to change what the media stack is sending or
              receiving within the envelope negotiated by Offer/Answer. The
              attributes in the <code><a href="#dom-rtcrtpsendparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpSendParameters</code></a></code> dictionary
              are designed to not enable this, so attributes like
              <code>cname</code> that cannot be changed are read-only. Other
              things, like bitrate, are controlled using limits such as
              <code>maxBitrate</code>, where the user agent needs to ensure it
              does not exceed the maximum bitrate specified by
              <code>maxBitrate</code>, while at the same time making sure it
              satisfies constraints on bitrate specified in other places such
              as the SDP.</p>
            </dd>
            <dt><code>getParameters</code></dt>
            <dd>
              <p>The <dfn data-idl="" data-dfn-for="rtcrtpsender" data-dfn-type="dfn" id="dom-rtcrtpsender-getparameters" data-title="getParameters()" data-lt="getparameters()|getParameters"><code>getParameters()</code></dfn> method
              returns the <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> object's current
              parameters for how <code>track</code> is encoded and transmitted
              to a remote <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code>.</p>

              <p>When <code>getParameters</code> is called, the
              <code><a href="#dom-rtcrtpsendparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpSendParameters</code></a></code> dictionary is
              constructed as follows:</p>
              <ul>
                <li>
                  <code><a data-link-for="RTCRtpSendParameters" href="#dom-rtcrtpsendparameters-transactionid" class="internalDFN" data-link-type="dfn"><code>transactionId</code></a></code>
                  is set to a new unique identifier, used to match this
                  <code>getParameters</code> call to a
                  <code>setParameters</code> call that may occur later.
                </li>
                <li>
                  <code>encodings</code>
                  is set to the value of the <a href="#dfn-sendencodings" class="internalDFN" data-link-type="dfn">[[SendEncodings]]</a> internal
                  slot.
                </li>
                <li>
                  The <code><a data-link-for="RTCRtpParameters" href="#dom-rtcrtpparameters-headerextensions" class="internalDFN" data-link-type="dfn"><code>headerExtensions</code></a></code>
                  sequence is populated based on the header extensions that
                  have been negotiated for sending.
                </li>
                <li>
                  The <code><a data-link-for="RTCRtpParameters" href="#dom-rtcrtpparameters-codecs" class="internalDFN" data-link-type="dfn"><code>codecs</code></a></code>
                  sequence is populated based on the codecs that have been
                  negotiated for sending, and which the user agent is currently
                  capable of sending.
                </li>
                <li>
                  <code><a data-link-for="RTCRtpParameters" href="#dom-rtcrtpparameters-rtcp" class="internalDFN" data-link-type="dfn"><code>rtcp</code></a>.cname</code>
                  is set to the CNAME of the associated
                  <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>.
                  <code><a data-link-for="RTCRtpParameters" href="#dom-rtcrtpparameters-rtcp" class="internalDFN" data-link-type="dfn"><code>rtcp</code></a>.reducedSize</code>
                  is set to <code>true</code> if reduced-size RTCP has been negotiated
                  for sending, and <code>false</code> otherwise.
                </li>
                <li>
                  <code>degradationPreference</code>
                  is set to the last value passed into <code>setParameters</code>, or
                  the default value of "balanced" if <code>setParameters</code> hasn't
                  been called.
                </li>
              </ul>

              <p>The returned <code><a href="#dom-rtcrtpsendparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpSendParameters</code></a></code> dictionary
              <em class="rfc2119" title="MUST">MUST</em> be stored in the <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> object's
              <a href="#dfn-lastreturnedparameters" class="internalDFN" data-link-type="dfn">[[LastReturnedParameters]]</a> internal slot.</p>

              <p><code>getParameters</code> may be used with
              <code>setParameters</code> to change the parameters in the
              following way:</p>
              <div class="example"><div class="example-title marker"><span>Example 3</span></div><pre class="highlight hljs javascript" aria-busy="false"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateParameters</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> params = sender.getParameters();
    <span class="hljs-comment">// ... make changes to parameters</span>
    params.encodings[<span class="hljs-number">0</span>].active = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">await</span> sender.setParameters(params);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-built_in">console</span>.error(err);
  }
}</pre></div>
              <p>After a completed call to <code>setParameters</code>,
              subsequent calls to <code>getParameters</code> will return the
              modified set of parameters.</p>
            </dd>
            <dt><code>replaceTrack</code></dt>
            <dd>
              <p>Attempts to replace the <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code>'s
              current <code>track</code> with another track provided (or
              with a null track), without renegotiation.</p>
              <p>To avoid track identifiers changing on the remote receiving
              end when a track is replaced, the sender <em class="rfc2119" title="MUST">MUST</em> retain the original
              track identifier and stream associations and use these in
              subsequent negotiations.</p>
              <p>When the <dfn data-idl="" data-dfn-for="rtcrtpsender" data-dfn-type="dfn" id="dom-rtcrtpsender-replacetrack" data-title="replaceTrack" data-lt="replaceTrack|replacetrack()"><code>replaceTrack</code></dfn> method is
              invoked, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>
                  <p>Let <var>sender</var> be the
                  <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> object on which
                  <code>replaceTrack</code> is invoked.</p>
                </li>
                <li>
                  <p>Let <var>transceiver</var> be the
                  <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> object associated with
                  <var>sender</var>.</p>
                </li>
                <li>
                  <p>Let <var>connection</var> be the
                  <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object associated with
                  <var>sender</var>.</p>
                </li>
                <li>
                  <p>Let <var>withTrack</var> be the argument to this
                  method.</p>
                </li>
                <li>
                  <p>If <code><var>withTrack</var></code> is non-null and
                  <code><var>withTrack</var>.kind</code> differs from the
                  <a href="#dfn-transceiver-kind" class="internalDFN" data-link-type="dfn">transceiver kind</a> of <var>transceiver</var>, return a
                  promise <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> with a newly
                  <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                  <code>TypeError</code>.</p>
                </li>
                <li>
                  <p>Return the result of <a href="#enqueue-an-operation">enqueuing</a> the following
                  steps to <var>connection</var>'s operation queue:</p>
                  <ol>
                  <li>
                    <p>If <var>transceiver</var>'s <a href="#dfn-stopped" class="internalDFN" data-link-type="dfn">[[Stopped]]</a> slot is
                    <code>true</code>, return a promise <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a>
                    with a newly <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">
                    created</a> <code>InvalidStateError</code>.</p>
                  </li>
                    <li>
                      <p>Let <var>p</var> be a new promise.</p>
                    </li>
                    <li>
                      <p>Let <var>sending</var> be <code>true</code> if the
                      <var>transceiver</var>'s <a href="#dfn-currentdirection" class="internalDFN" data-link-type="dfn">[[CurrentDirection]]</a>
                      is <code>"sendrecv"</code> or <code>"sendonly"</code>,
                      and <code>false</code> otherwise.</p>
                    </li>
                    <li>
                      <p>Run the following steps in parallel:</p>
                      <ol>
                        <li>
                          <p>If <var>sending</var> is <code>true</code>, and
                          <var>withTrack</var> is <code>null</code>, have the
                          sender stop sending.</p>
                        </li>
                        <li>
                          <p>If <var>sending</var> is <code>true</code>, and
                          <var>withTrack</var> is not <code>null</code>,
                          determine if <var>withTrack</var> can be sent
                          immediately by the sender without violating the
                          sender's already-negotiated envelope, and if it
                          cannot, then <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">reject</a> <var>p</var> with a newly
                          <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                          <code>InvalidModificationError</code>, and abort these
                          steps.</p>
                        </li>
                        <li>
                          <p>If <var>sending</var> is <code>true</code>, and
                          <var>withTrack</var> is not <code>null</code>, have
                          the sender switch seamlessly to transmitting
                          <var>withTrack</var> instead of the sender's existing
                          track.</p>
                        </li>
                        <li>
                          <p>Queue a task that runs the following steps:</p>
                          <ol>
                            <li>
                              <p>If <var>transceiver</var>'s <a href="#dfn-stopped" class="internalDFN" data-link-type="dfn">[[Stopped]]</a> slot is
                              <code>true</code>, abort these steps.</p>
                            </li>
                            <li>
                              <p>Set <var>sender</var>'s <code><a data-link-for="RTCRtpSender" href="#dom-rtcrtpsender-track" class="internalDFN" data-link-type="dfn"><code>track</code></a></code> attribute to
                              <var>withTrack</var>.</p>
                            </li>
                            <li>
                              <p><a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">Resolve</a> <var>p</var> with
                              <code>undefined</code>.</p>
                            </li>
                          </ol>
                        </li>
                      </ol>
                    </li>
                    <li>
                      <p>Return <var>p</var>.</p>
                    </li>
                  </ol>
                </li>
              </ol>
              <div class="note"><div role="heading" class="note-title marker" id="h-note-24" aria-level="5"><span>Note</span></div><div class="">
                <p>Changing dimensions and/or frame rates might not require
                negotiation. Cases that may require negotiation include:</p>
                <ol>
                  <li>Changing a resolution to a value outside of the
                  negotiated imageattr bounds, as described in
                  [<cite><a class="bibref" href="#bib-RFC6236">RFC6236</a></cite>].</li>
                  <li>Changing a frame rate to a value that causes the block
                  rate for the codec to be exceeded.</li>
                  <li>A video track differing in raw vs. pre-encoded
                  format.</li>
                  <li>An audio track having a different number of
                  channels.</li>
                  <li>Sources that also encode (typically hardware encoders)
                  might be unable to produce the negotiated codec; similarly,
                  software sources might not implement the codec that was
                  negotiated for an encoding source.</li>
                </ol>
              </div></div>
            </dd>
            <dt><code>setStreams</code></dt>
            <dd>
              <p>Sets the <code>MediaStream</code>s to be associated with this
              sender's track.</p>
              <p>When the <dfn data-idl="" data-dfn-for="rtcrtpsender" data-dfn-type="dfn" id="dom-rtcrtpsender-setstreams" data-title="setStreams" data-lt="setStreams|setstreams()"><code>setStreams</code></dfn> method is invoked,
              the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>
                  <p>Let <var>sender</var> be the
                  <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> object on which this method
                  was invoked.</p>
                </li>
                <li>
                  <p>Let <var>connection</var> be the
                  <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object on which this
                  method was invoked.</p>
                </li>
                <li>
                  <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
                  <code>true</code>, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an
                  <code>InvalidStateError</code>.</p>
                </li>
                <li>
                  <p>Let <var>streams</var> be a list of
                  <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> objects constructed from the
                  method's arguments, or an empty list if the method was called
                  without arguments.</p>
                </li>
                <li>
                  <p>Set <var>sender</var>'s
                  <a href="#dfn-associatedmediastreamids" class="internalDFN" data-link-type="dfn">[[AssociatedMediaStreamIds]]</a> to an empty set.
                  </p>
                </li>
                <li>
                  <p>For each <var>stream</var> in <var>streams</var>, add
                  <var>stream.id</var> to
                  <a href="#dfn-associatedmediastreamids" class="internalDFN" data-link-type="dfn">[[AssociatedMediaStreamIds]]</a> if it's not already
                  there.
                  </p>
                </li>
                <li>
                  <p><a data-lt="update the negotiation-needed flag" href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">Update the
                    negotiation-needed flag</a> for <var>connection</var>.</p>
                </li>
              </ol>
            </dd>
            <dt><code>getStats</code></dt>
            <dd>
              <p>Gathers stats for this sender only and reports the result
              asynchronously.</p>
              <p>When the <dfn data-idl="" id="dom-rtcrtpsender-getstats" data-dfn-for="rtcrtpsender" data-dfn-type="dfn" data-title="
              getStats()" data-lt="getstats()|getStats">
              <code>getStats()</code></dfn> method is invoked, the user
              agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>
                  <p>Let <var>selector</var> be the
                  <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> object on which the method
                  was invoked.</p>
                </li>
                <li>
                  <p>Let <var>p</var> be a new promise, and run the following
                  steps in parallel:</p>
                  <ol>
                    <li>
                      <p>Gather the stats indicated by <var>selector</var>
                      according to the <a href="#dfn-stats-selection-algorithm" class="internalDFN" data-link-type="dfn">stats selection algorithm</a>.</p>
                    </li>
                    <li>
                      <p><a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">Resolve</a> <var>p</var> with the resulting
                      <code><a href="#dom-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a></code> object, containing
                      the gathered stats.</p>
                    </li>
                  </ol>
                </li>
                <li>
                  <p>Return <var>p</var>.</p>
                </li>
              </ol>
            </dd>
          </dl>
        </section>
      </div>
     <section id="rtcrtpparameters">
     <h4 id="x5-2-1-rtcrtpparameters-dictionary"><span class="secno">5.2.1 </span><dfn data-dfn-type="dfn" id="dom-rtcrtpparameters" data-idl="" data-title="RTCRtpParameters" data-dfn-for=""><code>RTCRtpParameters</code></dfn> Dictionary</h4>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpparameters" data-idl="" data-title="RTCRtpParameters">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtpparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpParameters</code></a></span> {
<span class="idlMember" id="idl-def-rtcrtpparameters-headerextensions" data-idl="" data-title="headerExtensions" data-dfn-for="rtcrtpparameters">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-rtcrtpheaderextensionparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpHeaderExtensionParameters</code></a>&gt;</span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpparameters" data-lt="" href="#dom-rtcrtpparameters-headerextensions" class="internalDFN" data-link-type="dfn"><code>headerExtensions</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpparameters-rtcp" data-idl="" data-title="rtcp" data-dfn-for="rtcrtpparameters">    required <span class="idlMemberType"><a href="#dom-rtcrtcpparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtcpParameters</code></a></span>                         <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpparameters" data-lt="" href="#dom-rtcrtpparameters-rtcp" class="internalDFN" data-link-type="dfn"><code>rtcp</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpparameters-codecs" data-idl="" data-title="codecs" data-dfn-for="rtcrtpparameters">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-rtcrtpcodecparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpCodecParameters</code></a>&gt;</span>           <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpparameters" data-lt="" href="#dom-rtcrtpparameters-codecs" class="internalDFN" data-link-type="dfn"><code>codecs</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h5 id="dictionary-rtcrtpparameters-members">Dictionary <code><a href="#dom-rtcrtpparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpParameters</code></a></code> Members</h5>
          <dl data-link-for="RTCRtpParameters" data-dfn-for="RTCRtpParameters" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtcrtpparameters" data-dfn-type="dfn" id="dom-rtcrtpparameters-headerextensions" data-title="headerExtensions"><code>headerExtensions</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#dom-rtcrtpheaderextensionparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpHeaderExtensionParameters</code></a>&gt;</span>,
            required</dt>
            <dd>
              <p>A sequence containing parameters for RTP header
              extensions. <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only parameter</a>.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpparameters" data-dfn-type="dfn" id="dom-rtcrtpparameters-rtcp" data-title="rtcp"><code>rtcp</code></dfn> of type <span class="idlMemberType"><a href="#dom-rtcrtcpparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtcpParameters</code></a></span>, required</dt>
            <dd>
              <p>Parameters used for RTCP. <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only parameter</a>.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpparameters" data-dfn-type="dfn" id="dom-rtcrtpparameters-codecs" data-title="codecs"><code>codecs</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#dom-rtcrtpcodecparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpCodecParameters</code></a>&gt;</span>,
            required</dt>
            <dd>
              <p>A sequence containing the media codecs that an
              <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> will choose from, as well as
              entries for RTX, RED and FEC mechanisms. Corresponding to each
              media codec where retransmission via RTX is enabled, there will
              be an entry in <code>codecs[]</code> with a <code>mimeType</code>
              attribute indicating retransmission via "audio/rtx" or
              "video/rtx", and an <code>sdpFmtpLine</code> attribute (providing
              the "apt" and "rtx-time" parameters). <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only parameter</a>.</p>
            </dd>
          </dl>
        </section>
      </div>
      </section>
     <section id="rtcsendrtpparameters">
     <h4 id="x5-2-2-rtcrtpsendparameters-dictionary"><span class="secno">5.2.2 </span><dfn data-dfn-type="dfn" id="dom-rtcrtpsendparameters" data-idl="" data-title="RTCRtpSendParameters" data-dfn-for=""><code>RTCRtpSendParameters</code></dfn> Dictionary</h4>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpsendparameters" data-idl="" data-title="RTCRtpSendParameters">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtpsendparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpSendParameters</code></a></span> : <span class="idlSuperclass"><a href="#dom-rtcrtpparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpParameters</code></a></span> {
<span class="idlMember" id="idl-def-rtcrtpsendparameters-transactionid" data-idl="" data-title="transactionId" data-dfn-for="rtcrtpsendparameters">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>                          <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpsendparameters" data-lt="" href="#dom-rtcrtpsendparameters-transactionid" class="internalDFN" data-link-type="dfn"><code>transactionId</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpsendparameters-encodings" data-idl="" data-title="encodings" data-dfn-for="rtcrtpsendparameters">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a>&gt;</span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpsendparameters" data-lt="" href="#dom-rtcrtpsendparameters-encodings" class="internalDFN" data-link-type="dfn"><code>encodings</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpsendparameters-degradationpreference" data-idl="" data-title="degradationPreference" data-dfn-for="rtcrtpsendparameters">             <span class="idlMemberType"><a href="#dom-rtcdegradationpreference" class="internalDFN" data-link-type="dfn"><code>RTCDegradationPreference</code></a></span>           <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpsendparameters" data-lt="" href="#dom-rtcrtpsendparameters-degradationpreference" class="internalDFN" data-link-type="dfn"><code>degradationPreference</code></a></span> = <span class="idlMemberValue">"balanced"</span>;</span>
};</span></pre></div>
        <section>
          <h5 id="dictionary-rtcrtpsendparameters-members">Dictionary <code><a href="#dom-rtcrtpsendparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpSendParameters</code></a></code> Members</h5>
          <dl data-link-for="RTCRtpSendParameters" data-dfn-for="RTCRtpSendParameters" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtcrtpsendparameters" data-dfn-type="dfn" id="dom-rtcrtpsendparameters-transactionid" data-title="transactionId"><code>transactionId</code></dfn> of type <span class="idlMemberType">DOMString</span>, required</dt>
            <dd>
              <p>An unique identifier for the last set of parameters applied.
              Ensures that setParameters can only be called based on a previous
              getParameters, and that there are no intervening changes.
              <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only parameter</a>.</p></dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpsendparameters" data-dfn-type="dfn" id="dom-rtcrtpsendparameters-encodings" data-title="encodings"><code>encodings</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#dom-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a>&gt;</span>,
            required</dt>
            <dd>
              <p>A sequence containing parameters for RTP encodings of
              media.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpsendparameters" data-dfn-type="dfn" id="dom-rtcrtpsendparameters-degradationpreference" data-title="degradationPreference"><code>degradationPreference</code></dfn> of type
            <span class="idlMemberType"><a href="#dom-rtcdegradationpreference" class="internalDFN" data-link-type="dfn"><code>RTCDegradationPreference</code></a></span>,
            defaulting to <code>"balanced"</code></dt>
            <dd>
              <p>When bandwidth is constrained and the
              <code>RtpSender</code> needs to choose between degrading
              resolution or degrading framerate,
              <code>degradationPreference</code> indicates which is
              preferred.</p>
            </dd>
          </dl>
        </section>
      </div>
      </section>
     <section id="rtcreceivertpparameters">
     <h4 id="x5-2-3-rtcrtpreceiveparameters-dictionary"><span class="secno">5.2.3 </span><dfn data-dfn-type="dfn" id="dom-rtcrtpreceiveparameters" data-idl="" data-title="RTCRtpReceiveParameters" data-dfn-for=""><code>RTCRtpReceiveParameters</code></dfn> Dictionary</h4>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpreceiveparameters" data-idl="" data-title="RTCRtpReceiveParameters">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtpreceiveparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiveParameters</code></a></span> : <span class="idlSuperclass"><a href="#dom-rtcrtpparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpParameters</code></a></span> {
<span class="idlMember" id="idl-def-rtcrtpreceiveparameters-encodings" data-idl="" data-title="encodings" data-dfn-for="rtcrtpreceiveparameters">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-rtcrtpdecodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpDecodingParameters</code></a>&gt;</span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpreceiveparameters" data-lt="" href="#dom-rtcrtpreceiveparameters-encodings" class="internalDFN" data-link-type="dfn"><code>encodings</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h5 id="dictionary-rtcrtpreceiveparameters-members">Dictionary <code><a href="#dom-rtcrtpreceiveparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiveParameters</code></a></code> Members</h5>
          <dl data-link-for="RTCRtpReceiveParameters" data-dfn-for="RTCRtpReceiveParameters" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtcrtpreceiveparameters" data-dfn-type="dfn" id="dom-rtcrtpreceiveparameters-encodings" data-title="encodings"><code>encodings</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#dom-rtcrtpdecodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpDecodingParameters</code></a>&gt;</span>,
            required</dt>
            <dd>
              <p>A sequence containing information about incoming RTP encodings
              of media.</p>
            </dd>
          </dl>
        </section>
      </div>
      </section>
      <section id="rtcrtpcodingparameters">
      <h4 id="x5-2-4-rtcrtpcodingparameters-dictionary"><span class="secno">5.2.4 </span><dfn data-dfn-type="dfn" id="dom-rtcrtpcodingparameters" data-idl="" data-title="RTCRtpCodingParameters" data-dfn-for=""><code>RTCRtpCodingParameters</code></dfn> Dictionary</h4>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpcodingparameters" data-idl="" data-title="RTCRtpCodingParameters">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtpcodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpCodingParameters</code></a></span> {
<span class="idlMember" id="idl-def-rtcrtpcodingparameters-rid" data-idl="" data-title="rid" data-dfn-for="rtcrtpcodingparameters">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpcodingparameters" data-lt="" href="#dom-rtcrtpcodingparameters-rid" class="internalDFN" data-link-type="dfn"><code>rid</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h5 id="dictionary-rtcrtpcodingparameters-members">Dictionary <code><a href="#dom-rtcrtpcodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpCodingParameters</code></a></code>
          Members</h5>
          <dl data-link-for="RTCRtpCodingParameters" data-dfn-for="RTCRtpCodingParameters" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtcrtpcodingparameters" data-dfn-type="dfn" id="dom-rtcrtpcodingparameters-rid" data-title="rid"><code>rid</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>If set, this RTP encoding will be sent with the RID header
              extension as defined by <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.2.1">section 5.2.1.</a>)</span>. The RID is not modifiable via
              <code>setParameters</code>. It can only be set or modified in
              <code>addTransceiver</code> on the sending side.
              <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only parameter</a>.</p>
            </dd>
          </dl>
        </section>
      </div>
      </section>
      <section id="rtcrtpdecodingparameters">
      <h4 id="x5-2-5-rtcrtpdecodingparameters-dictionary"><span class="secno">5.2.5 </span><dfn data-dfn-type="dfn" id="dom-rtcrtpdecodingparameters" data-idl="" data-title="RTCRtpDecodingParameters" data-dfn-for=""><code>RTCRtpDecodingParameters</code></dfn> Dictionary</h4>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpdecodingparameters" data-idl="" data-title="RTCRtpDecodingParameters">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtpdecodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpDecodingParameters</code></a></span> : <span class="idlSuperclass"><a href="#dom-rtcrtpcodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpCodingParameters</code></a></span> {
};</span></pre></div>
      </div>
      </section>
      <section id="rtcrtpencodingparameters">
      <h4 id="x5-2-6-rtcrtpencodingparameters-dictionary"><span class="secno">5.2.6 </span><dfn data-dfn-type="dfn" id="dom-rtcrtpencodingparameters" data-idl="" data-title="RTCRtpEncodingParameters" data-dfn-for=""><code>RTCRtpEncodingParameters</code></dfn> Dictionary</h4>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpencodingparameters" data-idl="" data-title="RTCRtpEncodingParameters">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a></span> : <span class="idlSuperclass"><a href="#dom-rtcrtpcodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpCodingParameters</code></a></span> {
<span class="idlMember" id="idl-def-rtcrtpencodingparameters-codecpayloadtype" data-idl="" data-title="codecPayloadType" data-dfn-for="rtcrtpencodingparameters">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-octet">octet</a></span>           <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpencodingparameters" data-lt="" href="#dom-rtcrtpencodingparameters-codecpayloadtype" class="internalDFN" data-link-type="dfn"><code>codecPayloadType</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpencodingparameters-dtx" data-idl="" data-title="dtx" data-dfn-for="rtcrtpencodingparameters">    <span class="idlMemberType"><a href="#dom-rtcdtxstatus" class="internalDFN" data-link-type="dfn"><code>RTCDtxStatus</code></a></span>    <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpencodingparameters" data-lt="" href="#dom-rtcrtpencodingparameters-dtx" class="internalDFN" data-link-type="dfn"><code>dtx</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpencodingparameters-active" data-idl="" data-title="active" data-dfn-for="rtcrtpencodingparameters">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span>         <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpencodingparameters" data-lt="" href="#dom-rtcrtpencodingparameters-active" class="internalDFN" data-link-type="dfn"><code>active</code></a></span> = <span class="idlMemberValue">true</span>;</span>
<span class="idlMember" id="idl-def-rtcrtpencodingparameters-priority" data-idl="" data-title="priority" data-dfn-for="rtcrtpencodingparameters">    <span class="idlMemberType"><a href="#dom-rtcprioritytype" class="internalDFN" data-link-type="dfn"><code>RTCPriorityType</code></a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpencodingparameters" data-lt="" href="#dom-rtcrtpencodingparameters-priority" class="internalDFN" data-link-type="dfn"><code>priority</code></a></span> = <span class="idlMemberValue">"low"</span>;</span>
<span class="idlMember" id="idl-def-rtcrtpencodingparameters-ptime" data-idl="" data-title="ptime" data-dfn-for="rtcrtpencodingparameters">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-unsigned-long">unsigned long</a></span>   <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpencodingparameters" data-lt="" href="#dom-rtcrtpencodingparameters-ptime" class="internalDFN" data-link-type="dfn"><code>ptime</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpencodingparameters-maxbitrate" data-idl="" data-title="maxBitrate" data-dfn-for="rtcrtpencodingparameters">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-unsigned-long">unsigned long</a></span>   <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpencodingparameters" data-lt="" href="#dom-rtcrtpencodingparameters-maxbitrate" class="internalDFN" data-link-type="dfn"><code>maxBitrate</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpencodingparameters-maxframerate" data-idl="" data-title="maxFramerate" data-dfn-for="rtcrtpencodingparameters">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-double">double</a></span>          <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpencodingparameters" data-lt="" href="#dom-rtcrtpencodingparameters-maxframerate" class="internalDFN" data-link-type="dfn"><code>maxFramerate</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpencodingparameters-scaleresolutiondownby" data-idl="" data-title="scaleResolutionDownBy" data-dfn-for="rtcrtpencodingparameters">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-double">double</a></span>          <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpencodingparameters" data-lt="" href="#dom-rtcrtpencodingparameters-scaleresolutiondownby" class="internalDFN" data-link-type="dfn"><code>scaleResolutionDownBy</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h5 id="dictionary-rtcrtpencodingparameters-members">Dictionary <code><a href="#dom-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a></code>
          Members</h5>
          <dl data-link-for="RTCRtpEncodingParameters" data-dfn-for="RTCRtpEncodingParameters" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtcrtpencodingparameters" data-dfn-type="dfn" id="dom-rtcrtpencodingparameters-codecpayloadtype" data-title="codecPayloadType"><code>codecPayloadType</code></dfn> of type <span class="idlMemberType">octet</span></dt>
            <dd>
              <p>Used to select a
              codec to be sent. Must reference a payload type from the <code><a data-link-for="RTCRtpParameters" href="#dom-rtcrtpparameters-codecs" class="internalDFN" data-link-type="dfn"><code>codecs</code></a></code> member of
              <code><a href="#dom-rtcrtpparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpParameters</code></a></code>. If left unset, the
              implementation will select a codec according to its default policy.
              </p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpencodingparameters" data-dfn-type="dfn" id="dom-rtcrtpencodingparameters-dtx" data-title="dtx"><code>dtx</code></dfn> of type <span class="idlMemberType"><a href="#dom-rtcdtxstatus" class="internalDFN" data-link-type="dfn"><code>RTCDtxStatus</code></a></span></dt>
            <dd>
              <p>This member is only used if the sender's <code>kind</code>
              is <code>"audio"</code>. It indicates whether
              discontinuous transmission will be used. Setting it to
              <code>disabled</code> causes discontinuous transmission to be
              turned off. Setting it to <code>enabled</code> causes
              discontinuous transmission to be turned on if it was negotiated
              (either via a codec-specific parameter or via negotiation of the
              CN codec); if it was not negotiated (such as when setting
              <code>voiceActivityDetection</code> to <code>false</code>),
              then discontinuous operation will be turned off regardless of the
              value of <code>dtx</code>, and media will be sent even when silence
              is detected.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpencodingparameters" data-dfn-type="dfn" id="dom-rtcrtpencodingparameters-active" data-title="active"><code>active</code></dfn> of type <span class="idlMemberType">boolean</span>, defaulting to
            <code>true</code></dt>
            <dd>
              <p>Indicates that this
              encoding is actively being sent. Setting it to <code>false</code>
              causes this encoding to no longer be sent. Setting it to <code>true</code>
              causes this encoding to be sent.
            </p></dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpencodingparameters" data-dfn-type="dfn" id="dom-rtcrtpencodingparameters-priority" data-title="priority"><code>priority</code></dfn> of type <span class="idlMemberType"><a href="#dom-rtcprioritytype" class="internalDFN" data-link-type="dfn"><code>RTCPriorityType</code></a></span>, defaulting to
            <code>"low"</code></dt>
            <dd>
              <p>Indicates the priority of this encoding. It is specified in
              [<cite><a class="bibref" href="#bib-RTCWEB-TRANSPORT">RTCWEB-TRANSPORT</a></cite>], Section 4.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpencodingparameters" data-dfn-type="dfn" id="dom-rtcrtpencodingparameters-ptime" data-title="ptime"><code>ptime</code></dfn> of type <span class="idlMemberType">unsigned long</span></dt>
            <dd>
              <p>When present, indicates the
              preferred duration of media represented by a packet in
              milliseconds for this encoding. Typically, this is only relevant
              for audio encoding. The user agent <em class="rfc2119" title="MUST">MUST</em> use this duration if
              possible, and otherwise use the closest available duration. This
              value <em class="rfc2119" title="MUST">MUST</em> take precedence over any "ptime" attribute in the
              remote description, whose processing is described in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.10">section 5.10.</a>)</span>. Note that
              the user agent <em class="rfc2119" title="MUST">MUST</em> still respect the limit imposed by any
              "maxptime" attribute, as defined in [<cite><a class="bibref" href="#bib-RFC4566">RFC4566</a></cite>], Section 6.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpencodingparameters" data-dfn-type="dfn" id="dom-rtcrtpencodingparameters-maxbitrate" data-title="maxBitrate"><code>maxBitrate</code></dfn> of type <span class="idlMemberType">unsigned long</span></dt>
            <dd>
              <p>When present, indicates the maximum bitrate that can be used to send this
              encoding. The encoding may also be further constrained by other
              limits (such as maxFramerate or per-transport or per-session
              bandwidth limits) below the maximum specified here. maxBitrate is
              computed the same way as the Transport Independent Application Specific Maximum (TIAS)
              bandwidth defined in [<cite><a class="bibref" href="#bib-RFC3890">RFC3890</a></cite>] Section 6.2.2, which is the
              maximum bandwidth needed without counting IP or other transport
              layers like TCP or UDP.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpencodingparameters" data-dfn-type="dfn" id="dom-rtcrtpencodingparameters-maxframerate" data-title="maxFramerate"><code>maxFramerate</code></dfn> of type <span class="idlMemberType">double</span></dt>
            <dd>
              <p>When present, indicates the maximum framerate that can be used to send this
              encoding, in frames per second.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpencodingparameters" data-dfn-type="dfn" id="dom-rtcrtpencodingparameters-scaleresolutiondownby" data-title="scaleResolutionDownBy"><code>scaleResolutionDownBy</code></dfn> of type
            <span class="idlMemberType">double</span></dt>
            <dd>
              <p>This member is only present if the sender's <code>kind</code>
              is <code>"video"</code>. The video's
              resolution will be scaled down in each dimension by the given
              value before sending. For example, if the value is 2.0, the video
              will be scaled down by a factor of 2 in each dimension, resulting
              in sending a video of one quarter the size. If the value is 1.0,
              the video will not be affected. The value must be greater than or
              equal to 1.0. By default, the sender will not apply any scaling,
              (i.e., <code>scaleResolutionDownBy</code> will be 1.0).</p>
            </dd>
          </dl>
        </section>
      </div>
      </section>
      <section id="rtcdtxstatus">
      <h4 id="x5-2-7-rtcdtxstatus-enum"><span class="secno">5.2.7 </span><dfn data-dfn-type="dfn" id="dom-rtcdtxstatus" data-idl="" data-title="RTCDtxStatus" data-dfn-for=""><code>RTCDtxStatus</code></dfn> Enum</h4>
      <div>
        <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtcdtxstatus" data-idl="" data-title="RTCDtxStatus">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcdtxstatus" class="internalDFN" data-link-type="dfn"><code>RTCDtxStatus</code></a></span> {
    <a href="#dom-rtcdtxstatus-disabled" class="idlEnumItem">"disabled"</a>,
    <a href="#dom-rtcdtxstatus-enabled" class="idlEnumItem">"enabled"</a>
};</span></pre></div>
        <table data-link-for="RTCDtxStatus" data-dfn-for="RTCDtxStatus" class="simple">
          <tbody>
            <tr>
              <th colspan="2"><code><a href="#dom-rtcdtxstatus" class="internalDFN" data-link-type="dfn"><code>RTCDtxStatus</code></a></code> Enumeration description</th>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcdtxstatus" data-dfn-type="dfn" id="dom-rtcdtxstatus-disabled" data-title="disabled"><code>disabled</code></dfn></td>
              <td>
                <p>Discontinuous transmission is disabled.</p>
              </td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcdtxstatus" data-dfn-type="dfn" id="dom-rtcdtxstatus-enabled" data-title="enabled"><code>enabled</code></dfn></td>
              <td>
                <p>Discontinuous transmission is enabled if negotiated.</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      </section>
      <section id="rtcdegradationpreference">
      <h4 id="x5-2-8-rtcdegradationpreference-enum"><span class="secno">5.2.8 </span><dfn data-dfn-type="dfn" id="dom-rtcdegradationpreference" data-idl="" data-title="RTCDegradationPreference" data-dfn-for=""><code>RTCDegradationPreference</code></dfn> Enum</h4>
      <div>
        <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtcdegradationpreference" data-idl="" data-title="RTCDegradationPreference">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcdegradationpreference" class="internalDFN" data-link-type="dfn"><code>RTCDegradationPreference</code></a></span> {
    <a href="#dom-rtcdegradationpreference-maintain-framerate" class="idlEnumItem">"maintain-framerate"</a>,
    <a href="#dom-rtcdegradationpreference-maintain-resolution" class="idlEnumItem">"maintain-resolution"</a>,
    <a href="#dom-rtcdegradationpreference-balanced" class="idlEnumItem">"balanced"</a>
};</span></pre></div>
        <table data-link-for="RTCDegradationPreference" data-dfn-for="RTCDegradationPreference" class="simple">
          <tbody>
            <tr>
              <th colspan="2"><code><a href="#dom-rtcdegradationpreference" class="internalDFN" data-link-type="dfn"><code>RTCDegradationPreference</code></a></code> Enumeration description</th>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcdegradationpreference" data-dfn-type="dfn" id="dom-rtcdegradationpreference-maintain-framerate" data-title="maintain-framerate"><code>maintain-framerate</code></dfn></td>
              <td>
                <p>Degrade resolution in order to maintain framerate.</p>
              </td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcdegradationpreference" data-dfn-type="dfn" id="dom-rtcdegradationpreference-maintain-resolution" data-title="maintain-resolution"><code>maintain-resolution</code></dfn></td>
              <td>
                <p>Degrade framerate in order to maintain resolution.</p>
              </td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcdegradationpreference" data-dfn-type="dfn" id="dom-rtcdegradationpreference-balanced" data-title="balanced"><code>balanced</code></dfn></td>
              <td>
                <p>Degrade a balance of framerate and resolution.</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      </section>
      <section id="rtcrtcpparameters">
      <h4 id="x5-2-9-rtcrtcpparameters-dictionary"><span class="secno">5.2.9 </span><dfn data-dfn-type="dfn" id="dom-rtcrtcpparameters" data-idl="" data-title="RTCRtcpParameters" data-dfn-for=""><code>RTCRtcpParameters</code></dfn> Dictionary</h4>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtcpparameters" data-idl="" data-title="RTCRtcpParameters">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtcpparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtcpParameters</code></a></span> {
<span class="idlMember" id="idl-def-rtcrtcpparameters-cname" data-idl="" data-title="cname" data-dfn-for="rtcrtcpparameters">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtcpparameters" data-lt="" href="#dom-rtcrtcpparameters-cname" class="internalDFN" data-link-type="dfn"><code>cname</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtcpparameters-reducedsize" data-idl="" data-title="reducedSize" data-dfn-for="rtcrtcpparameters">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span>   <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtcpparameters" data-lt="" href="#dom-rtcrtcpparameters-reducedsize" class="internalDFN" data-link-type="dfn"><code>reducedSize</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h5 id="dictionary-rtcrtcpparameters-members">Dictionary <code><a href="#dom-rtcrtcpparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtcpParameters</code></a></code> Members</h5>
          <dl data-link-for="RTCRtcpParameters" data-dfn-for="RTCRtcpParameters" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtcrtcpparameters" data-dfn-type="dfn" id="dom-rtcrtcpparameters-cname" data-title="cname"><code>cname</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>The Canonical Name (CNAME) used by RTCP (e.g. in SDES
              messages). <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only parameter</a>.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtcpparameters" data-dfn-type="dfn" id="dom-rtcrtcpparameters-reducedsize" data-title="reducedSize"><code>reducedSize</code></dfn> of type <span class="idlMemberType">boolean</span></dt>
            <dd>
              <p>Whether reduced size RTCP [<cite><a class="bibref" href="#bib-RFC5506">RFC5506</a></cite>] is configured (if true)
              or compound RTCP as specified in [<cite><a class="bibref" href="#bib-RFC3550">RFC3550</a></cite>] (if false).
              <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only parameter</a>.</p>
            </dd>
          </dl>
        </section>
      </div>
      </section>
      <section id="rtcrtpheaderextensionparameters">
      <h4 id="x5-2-10-rtcrtpheaderextensionparameters-dictionary"><span class="secno">5.2.10 </span><dfn data-dfn-type="dfn" id="dom-rtcrtpheaderextensionparameters" data-idl="" data-title="RTCRtpHeaderExtensionParameters" data-dfn-for=""><code>RTCRtpHeaderExtensionParameters</code></dfn> Dictionary</h4>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpheaderextensionparameters" data-idl="" data-title="RTCRtpHeaderExtensionParameters">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtpheaderextensionparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpHeaderExtensionParameters</code></a></span> {
<span class="idlMember" id="idl-def-rtcrtpheaderextensionparameters-uri" data-idl="" data-title="uri" data-dfn-for="rtcrtpheaderextensionparameters">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>      <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpheaderextensionparameters" data-lt="" href="#dom-rtcrtpheaderextensionparameters-uri" class="internalDFN" data-link-type="dfn"><code>uri</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpheaderextensionparameters-id" data-idl="" data-title="id" data-dfn-for="rtcrtpheaderextensionparameters">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-unsigned-short">unsigned short</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpheaderextensionparameters" data-lt="" href="#dom-rtcrtpheaderextensionparameters-id" class="internalDFN" data-link-type="dfn"><code>id</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpheaderextensionparameters-encrypted" data-idl="" data-title="encrypted" data-dfn-for="rtcrtpheaderextensionparameters">             <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span>        <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpheaderextensionparameters" data-lt="" href="#dom-rtcrtpheaderextensionparameters-encrypted" class="internalDFN" data-link-type="dfn"><code>encrypted</code></a></span> = <span class="idlMemberValue">false</span>;</span>
};</span></pre></div>
        <section>
          <h5 id="dictionary-rtcrtpheaderextensionparameters-members">Dictionary <code><a href="#dom-rtcrtpheaderextensionparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpHeaderExtensionParameters</code></a></code>
          Members</h5>
          <dl data-link-for="RTCRtpHeaderExtensionParameters" data-dfn-for="RTCRtpHeaderExtensionParameters" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtcrtpheaderextensionparameters" data-dfn-type="dfn" id="dom-rtcrtpheaderextensionparameters-uri" data-title="uri"><code>uri</code></dfn> of type <span class="idlMemberType">DOMString</span>, required</dt>
            <dd>
              <p>The URI of the RTP header extension, as defined in
              [<cite><a class="bibref" href="#bib-RFC5285">RFC5285</a></cite>]. <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only parameter</a>.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpheaderextensionparameters" data-dfn-type="dfn" id="dom-rtcrtpheaderextensionparameters-id" data-title="id"><code>id</code></dfn> of type <span class="idlMemberType">unsigned short</span>, required</dt>
            <dd>
              <p>The value put in the RTP packet to identify the header
              extension. <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only parameter</a>.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpheaderextensionparameters" data-dfn-type="dfn" id="dom-rtcrtpheaderextensionparameters-encrypted" data-title="encrypted"><code>encrypted</code></dfn> of type <span class="idlMemberType">boolean</span></dt>
            <dd>
              <p>Whether the header extension is encrypted or not. <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only
              parameter</a>.</p>
            </dd>
          </dl>
        </section>
      </div>
      </section>
      <section id="rtcrtpcodecparameters">
      <h4 id="x5-2-11-rtcrtpcodecparameters-dictionary"><span class="secno">5.2.11 </span><dfn data-dfn-type="dfn" id="dom-rtcrtpcodecparameters" data-idl="" data-title="RTCRtpCodecParameters" data-dfn-for=""><code>RTCRtpCodecParameters</code></dfn> Dictionary</h4>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpcodecparameters" data-idl="" data-title="RTCRtpCodecParameters">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtpcodecparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpCodecParameters</code></a></span> {
<span class="idlMember" id="idl-def-rtcrtpcodecparameters-payloadtype" data-idl="" data-title="payloadType" data-dfn-for="rtcrtpcodecparameters">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-octet">octet</a></span>          <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpcodecparameters" data-lt="" href="#dom-rtcrtpcodecparameters-payloadtype" class="internalDFN" data-link-type="dfn"><code>payloadType</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpcodecparameters-mimetype" data-idl="" data-title="mimeType" data-dfn-for="rtcrtpcodecparameters">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>      <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpcodecparameters" data-lt="" href="#dom-rtcrtpcodecparameters-mimetype" class="internalDFN" data-link-type="dfn"><code>mimeType</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpcodecparameters-clockrate" data-idl="" data-title="clockRate" data-dfn-for="rtcrtpcodecparameters">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-unsigned-long">unsigned long</a></span>  <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpcodecparameters" data-lt="" href="#dom-rtcrtpcodecparameters-clockrate" class="internalDFN" data-link-type="dfn"><code>clockRate</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpcodecparameters-channels" data-idl="" data-title="channels" data-dfn-for="rtcrtpcodecparameters">             <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-unsigned-short">unsigned short</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpcodecparameters" data-lt="" href="#dom-rtcrtpcodecparameters-channels" class="internalDFN" data-link-type="dfn"><code>channels</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpcodecparameters-sdpfmtpline" data-idl="" data-title="sdpFmtpLine" data-dfn-for="rtcrtpcodecparameters">             <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>      <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpcodecparameters" data-lt="" href="#dom-rtcrtpcodecparameters-sdpfmtpline" class="internalDFN" data-link-type="dfn"><code>sdpFmtpLine</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h5 id="dictionary-rtcrtpcodecparameters-members">Dictionary <code><a href="#dom-rtcrtpcodecparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpCodecParameters</code></a></code> Members</h5>
          <dl data-link-for="RTCRtpCodecParameters" data-dfn-for="RTCRtpCodecParameters" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtcrtpcodecparameters" data-dfn-type="dfn" id="dom-rtcrtpcodecparameters-payloadtype" data-title="payloadType"><code>payloadType</code></dfn> of type <span class="idlMemberType">octet</span></dt>
            <dd>
              <p>The RTP payload type used to identify this codec. <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only
              parameter</a>.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpcodecparameters" data-dfn-type="dfn" id="dom-rtcrtpcodecparameters-mimetype" data-title="mimeType"><code>mimeType</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>The codec MIME media type/subtype. Valid media types and
              subtypes are listed in [<cite><a class="bibref" href="#bib-IANA-RTP-2">IANA-RTP-2</a></cite>]. <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only
              parameter</a>.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpcodecparameters" data-dfn-type="dfn" id="dom-rtcrtpcodecparameters-clockrate" data-title="clockRate"><code>clockRate</code></dfn> of type <span class="idlMemberType">unsigned long</span></dt>
            <dd>
              <p>The codec clock rate expressed in Hertz. <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only
              parameter</a>.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpcodecparameters" data-dfn-type="dfn" id="dom-rtcrtpcodecparameters-channels" data-title="channels"><code>channels</code></dfn> of type <span class="idlMemberType">unsigned short</span></dt>
            <dd>
              <p>When present, indicates the number of channels (mono=1, stereo=2). <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only
              parameter</a>.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpcodecparameters" data-dfn-type="dfn" id="dom-rtcrtpcodecparameters-sdpfmtpline" data-title="sdpFmtpLine"><code>sdpFmtpLine</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>The "format specific parameters" field from the "a=fmtp" line
              in the SDP corresponding to the codec, if one exists, as defined
              by <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.8">section 5.8.</a>)</span>. For an
              <a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code><code>RTCRtpSender</code></code></a>, these parameters come from the
              remote description, and for an
              <a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code><code>RTCRtpReceiver</code></code></a>, they come from the local
              description. <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only parameter</a>.</p>
            </dd>
          </dl>
        </section>
      </div>
      </section>
      <section id="rtcrtpcapabilities">
      <h4 id="x5-2-12-rtcrtpcapabilities-dictionary"><span class="secno">5.2.12 </span><dfn data-dfn-type="dfn" id="dom-rtcrtpcapabilities" data-idl="" data-title="RTCRtpCapabilities" data-dfn-for=""><code>RTCRtpCapabilities</code></dfn> Dictionary</h4>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpcapabilities" data-idl="" data-title="RTCRtpCapabilities">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtpcapabilities" class="internalDFN" data-link-type="dfn"><code>RTCRtpCapabilities</code></a></span> {
<span class="idlMember" id="idl-def-rtcrtpcapabilities-codecs" data-idl="" data-title="codecs" data-dfn-for="rtcrtpcapabilities">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-rtcrtpcodeccapability" class="internalDFN" data-link-type="dfn"><code>RTCRtpCodecCapability</code></a>&gt;</span>           <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpcapabilities" data-lt="" href="#dom-rtcrtpcapabilities-codecs" class="internalDFN" data-link-type="dfn"><code>codecs</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpcapabilities-headerextensions" data-idl="" data-title="headerExtensions" data-dfn-for="rtcrtpcapabilities">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-rtcrtpheaderextensioncapability" class="internalDFN" data-link-type="dfn"><code>RTCRtpHeaderExtensionCapability</code></a>&gt;</span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpcapabilities" data-lt="" href="#dom-rtcrtpcapabilities-headerextensions" class="internalDFN" data-link-type="dfn"><code>headerExtensions</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h5 id="dictionary-rtcrtpcapabilities-members">Dictionary <code><a href="#dom-rtcrtpcapabilities" class="internalDFN" data-link-type="dfn"><code>RTCRtpCapabilities</code></a></code> Members</h5>
          <dl data-link-for="RTCRtpCapabilities" data-dfn-for="RTCRtpCapabilities" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtcrtpcapabilities" data-dfn-type="dfn" id="dom-rtcrtpcapabilities-codecs" data-title="codecs"><code>codecs</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#dom-rtcrtpcodeccapability" class="internalDFN" data-link-type="dfn"><code>RTCRtpCodecCapability</code></a>&gt;</span>, required</dt>
            <dd>
              <p>Supported media codecs as well as entries for RTX, RED and FEC
              mechanisms. There will only be a single entry in
              <code>codecs[]</code> for retransmission via RTX, with
              <code>sdpFmtpLine</code> not present.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpcapabilities" data-dfn-type="dfn" id="dom-rtcrtpcapabilities-headerextensions" data-title="headerExtensions"><code>headerExtensions</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#dom-rtcrtpheaderextensioncapability" class="internalDFN" data-link-type="dfn"><code>RTCRtpHeaderExtensionCapability</code></a>&gt;</span>, required</dt>
            <dd>
              <p>Supported RTP header extensions.</p>
            </dd>
          </dl>
        </section>
      </div>
      </section>
      <section id="rtcrtpcodeccapability">
      <h4 id="x5-2-13-rtcrtpcodeccapability-dictionary"><span class="secno">5.2.13 </span><dfn data-dfn-type="dfn" id="dom-rtcrtpcodeccapability" data-idl="" data-title="RTCRtpCodecCapability" data-dfn-for=""><code>RTCRtpCodecCapability</code></dfn> Dictionary</h4>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpcodeccapability" data-idl="" data-title="RTCRtpCodecCapability">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtpcodeccapability" class="internalDFN" data-link-type="dfn"><code>RTCRtpCodecCapability</code></a></span> {
<span class="idlMember" id="idl-def-rtcrtpcodeccapability-mimetype" data-idl="" data-title="mimeType" data-dfn-for="rtcrtpcodeccapability">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>      <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpcodeccapability" data-lt="" href="#dom-rtcrtpcodeccapability-mimetype" class="internalDFN" data-link-type="dfn"><code>mimeType</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpcodeccapability-clockrate" data-idl="" data-title="clockRate" data-dfn-for="rtcrtpcodeccapability">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-unsigned-long">unsigned long</a></span>  <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpcodeccapability" data-lt="" href="#dom-rtcrtpcodeccapability-clockrate" class="internalDFN" data-link-type="dfn"><code>clockRate</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpcodeccapability-channels" data-idl="" data-title="channels" data-dfn-for="rtcrtpcodeccapability">             <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-unsigned-short">unsigned short</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpcodeccapability" data-lt="" href="#dom-rtcrtpcodeccapability-channels" class="internalDFN" data-link-type="dfn"><code>channels</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpcodeccapability-sdpfmtpline" data-idl="" data-title="sdpFmtpLine" data-dfn-for="rtcrtpcodeccapability">             <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>      <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpcodeccapability" data-lt="" href="#dom-rtcrtpcodeccapability-sdpfmtpline" class="internalDFN" data-link-type="dfn"><code>sdpFmtpLine</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h5 id="dictionary-rtcrtpcodeccapability-members">Dictionary <code><a href="#dom-rtcrtpcodeccapability" class="internalDFN" data-link-type="dfn"><code>RTCRtpCodecCapability</code></a></code> Members </h5>
          <p>The <code>RTCRtpCodecCapability</code> dictionary provides
          information about codec capabilities. Only capability
          combinations that would utilize distinct payload types in a
          generated SDP offer are provided.  For example:</p>
          <ol>
            <li>Two H.264/AVC codecs, one for each of two supported
              packetization-mode values.</li>
            <li>Two CN codecs with different clock rates.</li>
          </ol>
          <dl data-link-for="RTCRtpCodecCapability" data-dfn-for="RTCRtpCodecCapability" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtcrtpcodeccapability" data-dfn-type="dfn" id="dom-rtcrtpcodeccapability-mimetype" data-title="mimeType"><code>mimeType</code></dfn> of type <span class="idlMemberType">DOMString</span>, required</dt>
            <dd>
              <p>The codec MIME media type/subtype. Valid media types and
              subtypes are listed in [<cite><a class="bibref" href="#bib-IANA-RTP-2">IANA-RTP-2</a></cite>].</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpcodeccapability" data-dfn-type="dfn" id="dom-rtcrtpcodeccapability-clockrate" data-title="clockRate"><code>clockRate</code></dfn> of type <span class="idlMemberType">unsigned long</span>, required</dt>
            <dd>
              <p>The codec clock rate expressed in Hertz.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpcodeccapability" data-dfn-type="dfn" id="dom-rtcrtpcodeccapability-channels" data-title="channels"><code>channels</code></dfn> of type <span class="idlMemberType">unsigned short</span></dt>
            <dd>
              <p>If present, indicates the maximum number of channels (mono=1, stereo=2).</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpcodeccapability" data-dfn-type="dfn" id="dom-rtcrtpcodeccapability-sdpfmtpline" data-title="sdpFmtpLine"><code>sdpFmtpLine</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>The "format specific parameters" field from the "a=fmtp" line
              in the SDP corresponding to the codec, if one exists.</p>
            </dd>
          </dl>
        </section>
      </div>
      </section>
      <section id="rtcrtpheaderextensioncapability">
      <h4 id="x5-2-14-rtcrtpheaderextensioncapability-dictionary"><span class="secno">5.2.14 </span><dfn data-dfn-type="dfn" id="dom-rtcrtpheaderextensioncapability" data-idl="" data-title="RTCRtpHeaderExtensionCapability" data-dfn-for=""><code>RTCRtpHeaderExtensionCapability</code></dfn> Dictionary</h4>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpheaderextensioncapability" data-idl="" data-title="RTCRtpHeaderExtensionCapability">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtpheaderextensioncapability" class="internalDFN" data-link-type="dfn"><code>RTCRtpHeaderExtensionCapability</code></a></span> {
<span class="idlMember" id="idl-def-rtcrtpheaderextensioncapability-uri" data-idl="" data-title="uri" data-dfn-for="rtcrtpheaderextensioncapability">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpheaderextensioncapability" data-lt="" href="#dom-rtcrtpheaderextensioncapability-uri" class="internalDFN" data-link-type="dfn"><code>uri</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h5 id="dictionary-rtcrtpheaderextensioncapability-members">Dictionary <code><a href="#dom-rtcrtpheaderextensioncapability" class="internalDFN" data-link-type="dfn"><code>RTCRtpHeaderExtensionCapability</code></a></code> Members</h5>
          <dl data-link-for="RTCRtpHeaderExtensionCapability" data-dfn-for="RTCRtpHeaderExtensionCapability" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtcrtpheaderextensioncapability" data-dfn-type="dfn" id="dom-rtcrtpheaderextensioncapability-uri" data-title="uri"><code>uri</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>The URI of the RTP header extension, as defined in
              [<cite><a class="bibref" href="#bib-RFC5285">RFC5285</a></cite>].</p>
            </dd>
          </dl>
        </section>
      </div>
     </section>
    </section>
    <section id="rtcrtpreceiver-interface">
      <h3 id="x5-3-rtcrtpreceiver-interface"><span class="secno">5.3 </span><dfn data-dfn-type="dfn" id="dom-rtcrtpreceiver" data-idl="" data-title="RTCRtpReceiver" data-dfn-for=""><code>RTCRtpReceiver</code></dfn> Interface</h3>
      <p>The <code>RTCRtpReceiver</code> interface allows an application to
      inspect the receipt of a <code>MediaStreamTrack</code>.</p>
      <p>To <dfn data-dfn-type="dfn" id="dfn-create-an-rtcrtpreceiver">create an RTCRtpReceiver</dfn> with a string, <var>kind</var>, and
      optionally an id string, <var>id</var>, run the following steps:</p>
      <ol>
        <li>
          <p>Let <var>receiver</var> be a new <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code>
          object.</p>
        </li>
        <li>
          <p>Let <var>track</var> be a new <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code>
          object [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>]. The source of <var>track</var> is a
          <dfn data-dfn-type="dfn" id="dfn-remote-source">remote source</dfn> provided by <var>receiver</var>.</p>
        </li>
        <li>
          <p>Initialize <var>track.kind</var> to <var>kind</var>.</p>
        </li>
        <li>
          <p>If an id string, <var>id</var>, was given as input to this algorithm,
          initialize <var>track.id</var> to <var>id</var>. (Otherwise the value
          generated when <var>track</var> was created will be used.)</p>
        </li>
        <li>
          <p>Initialize <var>track.label</var> to the result of concatenating
          the string <code>"remote "</code> with <var>kind</var>.</p>
        </li>
        <li>
          <p>Initialize <var>track.readyState</var> to <code>live</code>.</p>
        </li>
        <li>
          <p>Initialize <var>track.muted</var> to <code>true</code>. See the
          <a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code><code>MediaStreamTrack</code></code></a> section about how the
          <code>muted</code> attribute reflects if a
          <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code> is receiving media data or
          not.</p>
        </li>
        <li>
          <p>Let <var>receiver</var> have a <dfn data-dfn-type="dfn" id="dfn-receivertrack">[[ReceiverTrack]]</dfn>
          internal slot initialized to <var>track</var>.</p>
        </li>
        <li>
          <p>Let <var>receiver</var> have a <dfn data-dfn-type="dfn" id="dfn-receivertransport">[[ReceiverTransport]]</dfn> internal
          slot initialized to <code>null</code>.</p>
        </li>
        <li>
          <p>Let <var>receiver</var> have a <dfn data-dfn-type="dfn" id="dfn-receiverrtcptransport">[[ReceiverRtcpTransport]]</dfn> internal
          slot initialized to <code>null</code>.</p>
        </li>
        <li>
          <p>Let <var>receiver</var> have an
          <a href="#dfn-associatedremotemediastreams" class="internalDFN" data-link-type="dfn">[[AssociatedRemoteMediaStreams]]</a> internal slot, representing a
          list of <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> objects that the
          <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code> object of this receiver is
          associated with, and initialized to an empty list.</p>
        </li>
        <li>
          <p>Return <var>receiver</var>.</p>
        </li>
      </ol>
      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcrtpreceiver" data-idl="" data-title="RTCRtpReceiver">[<span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></span> {
<span class="idlAttribute" id="idl-def-rtcrtpreceiver-track" data-idl="" data-title="track" data-dfn-for="rtcrtpreceiver">    readonly attribute <span class="idlAttrType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span>  <span class="idlAttrName"><a data-no-default="" data-link-for="rtcrtpreceiver" data-lt="" href="#dom-rtcrtpreceiver-track" class="internalDFN" data-link-type="dfn"><code>track</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcrtpreceiver-transport" data-idl="" data-title="transport" data-dfn-for="rtcrtpreceiver">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>?</span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcrtpreceiver" data-lt="" href="#dom-rtcrtpreceiver-transport" class="internalDFN" data-link-type="dfn"><code>transport</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcrtpreceiver-rtcptransport" data-idl="" data-title="rtcpTransport" data-dfn-for="rtcrtpreceiver">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>?</span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcrtpreceiver" data-lt="" href="#dom-rtcrtpreceiver-rtcptransport" class="internalDFN" data-link-type="dfn"><code>rtcpTransport</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcrtpreceiver-getcapabilities-kind" data-idl="" data-title="getCapabilities" data-dfn-for="rtcrtpreceiver">    static <span class="idlMethType"><a href="#dom-rtcrtpcapabilities" class="internalDFN" data-link-type="dfn"><code>RTCRtpCapabilities</code></a></span>             <span class="idlMethName"><a data-no-default="" data-link-for="rtcrtpreceiver" data-lt="getcapabilities()|getCapabilities" href="#dom-rtcrtpreceiver-getcapabilities" class="internalDFN" data-link-type="dfn">getCapabilities</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">kind</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcrtpreceiver-getparameters" data-idl="" data-title="getParameters" data-dfn-for="rtcrtpreceiver">    <span class="idlMethType"><a href="#dom-rtcrtpreceiveparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiveParameters</code></a></span>               <span class="idlMethName"><a data-no-default="" data-link-for="rtcrtpreceiver" data-lt="getparameters()|getParameters" href="#dom-rtcrtpreceiver-getparameters" class="internalDFN" data-link-type="dfn">getParameters</a></span>();</span>
<span class="idlMethod" id="idl-def-rtcrtpreceiver-getcontributingsources" data-idl="" data-title="getContributingSources" data-dfn-for="rtcrtpreceiver">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-rtcrtpcontributingsource" class="internalDFN" data-link-type="dfn"><code>RTCRtpContributingSource</code></a>&gt;</span>    <span class="idlMethName"><a data-no-default="" data-link-for="rtcrtpreceiver" data-lt="getContributingSources|getcontributingsources()" href="#dom-rtcrtpreceiver-getcontributingsources" class="internalDFN" data-link-type="dfn"><code>getContributingSources</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcrtpreceiver-getsynchronizationsources" data-idl="" data-title="getSynchronizationSources" data-dfn-for="rtcrtpreceiver">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-rtcrtpsynchronizationsource" class="internalDFN" data-link-type="dfn"><code>RTCRtpSynchronizationSource</code></a>&gt;</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcrtpreceiver" data-lt="getSynchronizationSources|getsynchronizationsources()" href="#dom-rtcrtpreceiver-getsynchronizationsources" class="internalDFN" data-link-type="dfn"><code>getSynchronizationSources</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcrtpreceiver-getstats" data-idl="" data-title="getStats" data-dfn-for="rtcrtpreceiver">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="#dom-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a>&gt;</span>               <span class="idlMethName"><a data-no-default="" data-link-for="rtcrtpreceiver" data-lt="getstats()|getStats" href="#dom-rtcrtpreceiver-getstats" class="internalDFN" data-link-type="dfn">getStats</a></span>();</span>
};</span></pre></div>
        <section>
          <h4 id="attributes-8">Attributes</h4>
          <dl data-link-for="RTCRtpReceiver" data-dfn-for="RTCRtpReceiver" class="attributes">
            <dt><dfn data-idl="" data-dfn-for="rtcrtpreceiver" data-dfn-type="dfn" id="dom-rtcrtpreceiver-track" data-title="track"><code>track</code></dfn> of type <span class="idlAttrType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span>, readonly</dt>
            <dd>
              <p>The <code id="dom-rtpreceiver-track">track</code>
              attribute is the track that is associated with this
              <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> object <var>receiver</var>.
              </p>
              <p>Note that <code>track.stop()</code> is final, although
              clones are not affected. Since
              <code><var>receiver</var>.track.stop()</code>
              does not implicitly stop <var>receiver</var>, Receiver
              Reports continue to be sent. On getting, the attribute <em class="rfc2119" title="MUST">MUST</em>
              return the value of the <a href="#dfn-receivertrack" class="internalDFN" data-link-type="dfn">[[ReceiverTrack]]</a> slot.</p>
            </dd>
            <dt><code>transport</code> of type <span class="idlAttrType"><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></span>, readonly,
            nullable</dt>
            <dd>
              <p>The <dfn data-idl="" data-dfn-for="rtcrtpreceiver" data-dfn-type="dfn" id="dom-rtcrtpreceiver-transport" data-title="transport"><code>transport</code></dfn> attribute is the
              transport over which media for the receiver's <code>track</code>
              is received in the form of RTP packets. Prior to construction of
              the <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code> object, the
              <code>transport</code> attribute will be null. When bundling is
              used, multiple <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> objects will
              share one <code>transport</code> and will all receive RTP and
              RTCP over the same transport.</p>
              <p>On getting, the attribute <em class="rfc2119" title="MUST">MUST</em> return the value of the
              <a href="#dfn-receivertransport" class="internalDFN" data-link-type="dfn">[[ReceiverTransport]]</a> slot.</p>
            </dd>
            <dt><code>rtcpTransport</code> of type <span class="idlAttrType"><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></span>, readonly,
            nullable</dt>
            <dd>
              <p>The <dfn data-idl="" data-dfn-for="rtcrtpreceiver" data-dfn-type="dfn" id="dom-rtcrtpreceiver-rtcptransport" data-title="rtcpTransport"><code>rtcpTransport</code></dfn> attribute is the
              transport over which RTCP is sent and received. Prior to
              construction of the <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code> object,
              the <code>rtcpTransport</code> attribute will be null. When RTCP
              mux is used (or bundling, which mandates RTCP mux),
              <code>rtcpTransport</code> will be null, and both RTP and RTCP
              traffic will flow over <code>transport</code>.</p>
              <p>On getting, the attribute <em class="rfc2119" title="MUST">MUST</em> return the value of the
              <a href="#dfn-receiverrtcptransport" class="internalDFN" data-link-type="dfn">[[ReceiverRtcpTransport]]</a> slot.</p>
            </dd>
          </dl>
        </section>
        <section>
          <h4 id="methods-7">Methods</h4>
          <dl data-link-for="RTCRtpReceiver" data-dfn-for="RTCRtpReceiver" class="methods">
            <dt><code>getCapabilities</code>, static</dt>
            <dd>
              <p>The <dfn data-idl="" data-dfn-for="rtcrtpreceiver" data-dfn-type="dfn" id="dom-rtcrtpreceiver-getcapabilities" data-title="getCapabilities()" data-lt="getcapabilities()|getCapabilities"><code>getCapabilities()</code></dfn>
              method returns the most optimistic view of the capabilities of
              the system for receiving media of the given kind. It does not
              reserve any resources, ports, or other state but is meant to
              provide a way to discover the types of capabilities of the
              browser including which codecs may be supported. User agents
              <em class="rfc2119" title="MUST">MUST</em> support <var>kind</var> values of <code>"audio"</code>
              and <code>"video"</code>. If the system has no capabilities
              corresponding to the value of the <var>kind</var> argument,
              <code>getCapabilities</code> returns <code>null</code>.</p>
              <p class="fingerprint">These capabilities provide generally
              persistent cross-origin information on the device and thus
              increases the fingerprinting surface of the application. In
              privacy-sensitive contexts, browsers can consider mitigations
              such as reporting only a common subset of the capabilities.</p>
            </dd>
            <dt><code>getParameters</code></dt>
            <dd>
              <p>The <dfn data-idl="" data-dfn-for="rtcrtpreceiver" data-dfn-type="dfn" id="dom-rtcrtpreceiver-getparameters" data-title="getParameters()" data-lt="getparameters()|getParameters"><code>getParameters()</code></dfn> method returns the
              <code>RTCRtpReceiver</code> object's current parameters for how
              <code>track</code> is decoded.</p>

              <p>When <code>getParameters</code> is called, the
              <code><a href="#dom-rtcrtpreceiveparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiveParameters</code></a></code> dictionary is
              constructed as follows:</p>
              <ul>
                <li>
                  <p><code><a data-link-for="RTCRtpReceiveParameters" href="#dom-rtcrtpreceiveparameters-encodings" class="internalDFN" data-link-type="dfn"><code>encodings</code></a></code>
                  is populated based on the RIDs present in the current remote
                  description.</p>
                </li>
                <li>
                  The <code><a data-link-for="RTCRtpParameters" href="#dom-rtcrtpparameters-headerextensions" class="internalDFN" data-link-type="dfn"><code>headerExtensions</code></a></code>
                  sequence is populated based on the header extensions that the
                  receiver is currently prepared to receive.
                </li>
                <li>
                  <p>The <code><a data-link-for="RTCRtpParameters" href="#dom-rtcrtpparameters-codecs" class="internalDFN" data-link-type="dfn"><code>codecs</code></a></code>
                  sequence is populated based on the codecs that the receiver
                  is currently prepared to receive.</p>
                  <div class="note"><div role="heading" class="note-title marker" id="h-note-25" aria-level="5"><span>Note</span></div><div class="">Both the local and remote description may
                  affect this list of codecs. For example, if three codecs are
                  offered, the receiver will be prepared to receive each of
                  them and will return them all from
                  <code>getParameters</code>. But if the remote endpoint only
                  answers with two, the absent codec will no longer be returned
                  by <code>getParameters</code> as the receiver no longer needs
                  to be prepared to receive it.</div></div>
                </li>
                <li>
                  <code><a data-link-for="RTCRtpParameters" href="#dom-rtcrtpparameters-rtcp" class="internalDFN" data-link-type="dfn"><code>rtcp</code></a>.reducedSize</code>
                  is set to <code>true</code> if the receiver is currently prepared to
                  receive reduced-size RTCP packets, and <code>false</code> otherwise.
                  <code><a data-link-for="RTCRtpParameters" href="#dom-rtcrtpparameters-rtcp" class="internalDFN" data-link-type="dfn"><code>rtcp</code></a>.cname</code> is
                  left out.
                </li>
              </ul>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpreceiver" data-dfn-type="dfn" id="dom-rtcrtpreceiver-getcontributingsources" data-title="getContributingSources" data-lt="getContributingSources|getcontributingsources()"><code>getContributingSources</code></dfn></dt>
            <dd>
              <p>Returns an <code><a href="#dom-rtcrtpcontributingsource" class="internalDFN" data-link-type="dfn"><code>RTCRtpContributingSource</code></a></code> for
              each unique CSRC identifier received by this RTCRtpReceiver in
              the last 10 seconds.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpreceiver" data-dfn-type="dfn" id="dom-rtcrtpreceiver-getsynchronizationsources" data-title="getSynchronizationSources" data-lt="getSynchronizationSources|getsynchronizationsources()"><code>getSynchronizationSources</code></dfn></dt>
            <dd>
              <p>Returns an <code><a href="#dom-rtcrtpsynchronizationsource" class="internalDFN" data-link-type="dfn"><code>RTCRtpSynchronizationSource</code></a></code> for
              each unique SSRC identifier received by this RTCRtpReceiver in
              the last 10 seconds.</p>
            </dd>
            <dt><code>getStats</code></dt>
            <dd>
              <p>Gathers stats for this receiver only and reports the result
              asynchronously.</p>
              <p>When the <dfn data-idl="" id="dom-rtcrtpreceiver-getstats" data-dfn-for="rtcrtpreceiver" data-dfn-type="dfn" data-title="
              getStats()" data-lt="getstats()|getStats">
              <code>getStats()</code></dfn> method is invoked, the user
              agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>
                  <p>Let <var>selector</var> be the
                  <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> object on which the method
                  was invoked.</p>
                </li>
                <li>
                  <p>Let <var>p</var> be a new promise, and run the following
                  steps in parallel:</p>
                  <ol>
                    <li>
                      <p>Gather the stats indicated by <var>selector</var>
                      according to the <a href="#dfn-stats-selection-algorithm" class="internalDFN" data-link-type="dfn">stats selection algorithm</a>.</p>
                    </li>
                    <li>
                      <p><a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">Resolve</a> <var>p</var> with the resulting
                      <code><a href="#dom-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a></code> object, containing
                      the gathered stats.</p>
                    </li>
                  </ol>
                </li>
                <li>
                  <p>Return <var>p</var>.</p>
                </li>
              </ol>
            </dd>
          </dl>
        </section>
      </div>
      <p>The <dfn data-dfn-type="dfn" id="dom-rtcrtpcontributingsource" data-idl="" data-title="RTCRtpContributingSource" data-dfn-for=""><code>RTCRtpContributingSource</code></dfn> and
      <dfn data-dfn-type="dfn" id="dom-rtcrtpsynchronizationsource" data-idl="" data-title="RTCRtpSynchronizationSource" data-dfn-for=""><code>RTCRtpSynchronizationSource</code></dfn> dictionaries contain information
      about a given contributing source (CSRC) or synchronization source (SSRC)
      respectively, including the most recent time a
      packet that the source contributed to was played out. The browser <em class="rfc2119" title="MUST">MUST</em>
      keep information from RTP packets received in the previous 10 seconds.
      When the first audio frame contained in an RTP packet is delivered to the
      <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code>'s <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code>
      for playout, the user agent <em class="rfc2119" title="MUST">MUST</em> queue a task to update the relevant
      information for the <code><a href="#dom-rtcrtpcontributingsource" class="internalDFN" data-link-type="dfn"><code>RTCRtpContributingSource</code></a></code> and
      <code><a href="#dom-rtcrtpsynchronizationsource" class="internalDFN" data-link-type="dfn"><code>RTCRtpSynchronizationSource</code></a></code> dictionaries based on the
      contents of the packet. The information relevant to the
      <code><a href="#dom-rtcrtpsynchronizationsource" class="internalDFN" data-link-type="dfn"><code>RTCRtpSynchronizationSource</code></a></code> dictionary corresponding
      to the SSRC identifier, is updated each time, and if the RTP packet
      contains CSRC identifiers, then the information relevant to the
      <code><a href="#dom-rtcrtpcontributingsource" class="internalDFN" data-link-type="dfn"><code>RTCRtpContributingSource</code></a></code> dictionaries corresponding to
      those CSRC identifiers is also updated.</p>
      <div class="note"><div role="heading" class="note-title marker" id="h-note-26" aria-level="4"><span>Note</span></div><div class="">As stated in the <a href="#conformance">conformance
      section</a>, requirements phrased as algorithms may be implemented in
      any manner so long as the end result is equivalent. So, an
      implementaion does not need to literally queue a task for every
      packet, as long as the end result is that within a single event loop task
      execution, all returned <code><a href="#dom-rtcrtpsynchronizationsource" class="internalDFN" data-link-type="dfn"><code>RTCRtpSynchronizationSource</code></a></code>
      and <code><a href="#dom-rtcrtpcontributingsource" class="internalDFN" data-link-type="dfn"><code>RTCRtpContributingSource</code></a></code> dictionaries for a
      particular <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> contain information from a
      single point in the RTP stream.</div></div>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpcontributingsource" data-idl="" data-title="RTCRtpContributingSource">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtpcontributingsource" class="internalDFN" data-link-type="dfn"><code>RTCRtpContributingSource</code></a></span> {
<span class="idlMember" id="idl-def-rtcrtpcontributingsource-timestamp" data-idl="" data-title="timestamp" data-dfn-for="rtcrtpcontributingsource">    required <span class="idlMemberType">DOMHighResTimeStamp</span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpcontributingsource" data-lt="" href="#dom-rtcrtpcontributingsource-timestamp" class="internalDFN" data-link-type="dfn"><code>timestamp</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpcontributingsource-source" data-idl="" data-title="source" data-dfn-for="rtcrtpcontributingsource">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-unsigned-long">unsigned long</a></span>       <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpcontributingsource" data-lt="" href="#dom-rtcrtpcontributingsource-source" class="internalDFN" data-link-type="dfn"><code>source</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpcontributingsource-audiolevel" data-idl="" data-title="audioLevel" data-dfn-for="rtcrtpcontributingsource">             <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-double">double</a></span>              <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpcontributingsource" data-lt="" href="#dom-rtcrtpcontributingsource-audiolevel" class="internalDFN" data-link-type="dfn"><code>audioLevel</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="dictionary-rtcrtpcontributingsource-members">Dictionary RTCRtpContributingSource Members</h4>
          <dl data-link-for="RTCRtpContributingSource" data-dfn-for="RTCRtpContributingSource" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtcrtpcontributingsource" data-dfn-type="dfn" id="dom-rtcrtpcontributingsource-timestamp" data-title="timestamp"><code>timestamp</code></dfn> of type <span class="idlMemberType">DOMHighResTimeStamp</span>, required</dt>
            <dd>
              <p>The timestamp of type DOMHighResTimeStamp [<cite><a class="bibref" href="#bib-HIGHRES-TIME">HIGHRES-TIME</a></cite>],
              indicating the most recent time of playout of media that arrived
              in an RTP packet originating from this source. The timestamp is
              defined as <a data-link-type="dfn" href="https://www.w3.org/TR/hr-time-2/#dom-performance-timeorigin"><code>performance.timeOrigin</code></a> +
              <a data-link-type="dfn" href="https://www.w3.org/TR/hr-time-2/#dom-performance-now"><code>performance.now()</code></a> at the time of playout.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpcontributingsource" data-dfn-type="dfn" id="dom-rtcrtpcontributingsource-source" data-title="source"><code>source</code></dfn> of type <span class="idlMemberType">unsigned long</span>, required</dt>
            <dd>
              <p>The CSRC or SSRC identifier of the contributing or
              synchronization source.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtpcontributingsource" data-dfn-type="dfn" id="dom-rtcrtpcontributingsource-audiolevel" data-title="audioLevel"><code>audioLevel</code></dfn> of type <span class="idlMemberType">double</span></dt>
            <dd>
              <p>This is a value between 0..1 (linear), where 1.0 represents 0
              dBov, 0 represents silence, and 0.5 represents approximately 6
              dBSPL change in the sound pressure level from 0 dBov.</p>
              <p>For CSRCs, this <em class="rfc2119" title="MUST">MUST</em> be converted from the level value defined
              in [<cite><a class="bibref" href="#bib-RFC6465">RFC6465</a></cite>] if the RFC 6465 header extension is present,
              otherwise this member <em class="rfc2119" title="MUST">MUST</em> be absent.</p>
              <p>For SSRCs, this <em class="rfc2119" title="MUST">MUST</em> be converted from the level value defined
              in [<cite><a class="bibref" href="#bib-RFC6464">RFC6464</a></cite>] if the RFC 6464 header extension is present,
              otherwise the user agent must compute the value from the audio
              data (the member must never be absent).</p>

              <p>Both RFCs define the level as an integral value from 0 to 127
              representing the audio level in negative decibels relative to the
              loudest signal that the system could possibly encode. Thus,
              0 represents the loudest signal the system could possibly encode,
              and 127 represents silence.</p>
              <p>To convert these values to the linear 0..1 range, a value of
              127 is converted to 0, and all other values are converted using
              the equation: <code>10^(-rfc_level/20)</code>.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpsynchronizationsource" data-idl="" data-title="RTCRtpSynchronizationSource">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtpsynchronizationsource" class="internalDFN" data-link-type="dfn"><code>RTCRtpSynchronizationSource</code></a></span> : <span class="idlSuperclass"><a href="#dom-rtcrtpcontributingsource" class="internalDFN" data-link-type="dfn"><code>RTCRtpContributingSource</code></a></span> {
<span class="idlMember" id="idl-def-rtcrtpsynchronizationsource-voiceactivityflag" data-idl="" data-title="voiceActivityFlag" data-dfn-for="rtcrtpsynchronizationsource">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcrtpsynchronizationsource" data-lt="" href="#dom-rtcrtpsynchronizationsource-voiceactivityflag" class="internalDFN" data-link-type="dfn"><code>voiceActivityFlag</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="dictionary-rtcrtpsynchronizationsource-members">Dictionary RTCRtpSynchronizationSource Members</h4>
          <dl data-link-for="RTCRtpSynchronizationSource" data-dfn-for="RTCRtpSynchronizationSource" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtcrtpsynchronizationsource" data-dfn-type="dfn" id="dom-rtcrtpsynchronizationsource-voiceactivityflag" data-title="voiceActivityFlag"><code>voiceActivityFlag</code></dfn> of type <span class="idlMemberType">boolean</span></dt>
            <dd>
              <p>Whether the last RTP packet played from this source contains
              voice activity (true) or not (false). If the RFC 6464 extension
              header was not present, or if the peer has signaled that it is
              not using the V bit by setting the "vad" extension attribute to
              "off", as described in [<cite><a class="bibref" href="#bib-RFC6464">RFC6464</a></cite>], Section 4,
              <code>voiceActivityFlag</code> will be absent.</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>
    <section id="rtcrtptransceiver-interface">
      <h3 id="x5-4-rtcrtptransceiver-interface"><span class="secno">5.4 </span><dfn data-dfn-type="dfn" id="dom-rtcrtptransceiver" data-idl="" data-title="RTCRtpTransceiver" data-dfn-for=""><code>RTCRtpTransceiver</code></dfn> Interface</h3>
      <p>The <a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code><code>RTCRtpTransceiver</code></code></a> interface represents a
      combination of an <a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code><code>RTCRtpSender</code></code></a> and an
      <a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code><code>RTCRtpReceiver</code></code></a> that share a common
      <code>mid</code>. As defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-3.4.1">section 3.4.1.</a>)</span>,
      an <a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code><code>RTCRtpTransceiver</code></code></a> is said to be <dfn data-dfn-type="dfn" id="dfn-associated">associated</dfn> with
      a <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a> if its <code><a data-link-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-mid" class="internalDFN" data-link-type="dfn"><code>mid</code></a></code>
      property is non-null; otherwise it is said to be disassociated. Conceptually, an
      <a href="#dfn-associated" class="internalDFN" data-link-type="dfn">associated</a> transceiver is one that's represented in the last applied session
      description.</p>
      <p>The <dfn data-dfn-type="dfn" id="dfn-transceiver-kind">transceiver kind</dfn> of an
      <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> is defined by the kind of the
      associated <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code>'s
      <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code> object.</p>
      <p>To <dfn data-dfn-type="dfn" id="dfn-create-an-rtcrtptransceiver">create an RTCRtpTransceiver</dfn> with an
      <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> object, <var>receiver</var>,
      <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> object, <var>sender</var>, and an
      <code><a href="#dom-rtcrtptransceiverdirection" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiverDirection</code></a></code> value,
      <var>direction</var>, run the following steps:</p>
      <ol>
        <li>
          <p>Let <var>transceiver</var> be a new
          <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> object.</p>
        </li>
        <li>
          <p>Let <var>transceiver</var> have a <dfn data-dfn-type="dfn" id="dfn-sender">[[Sender]]</dfn> internal
          slot, initialized to <var>sender</var>.</p>
        </li>
        <li>
          <p>Let <var>transceiver</var> have a <dfn data-dfn-type="dfn" id="dfn-receiver">[[Receiver]]</dfn> internal
          slot, initialized to <var>receiver</var>.</p>
        </li>
        <li>
          <p>Let <var>transceiver</var> have a <dfn data-dfn-type="dfn" id="dfn-stopped">[[Stopped]]</dfn> internal
          slot, initialized to <code>false</code>.</p>
        </li>
        <li>
          <p>Let <var>transceiver</var> have a <dfn data-dfn-type="dfn" id="dfn-direction">[[Direction]]</dfn> internal slot, initialized to
          <var>direction</var>.</p>
        </li>
        <li>
          <p>Let <var>transceiver</var> have a <dfn data-dfn-type="dfn" id="dfn-receptive">[[Receptive]]</dfn> internal slot,
          initialized to <code>false</code>.</p>
        </li>
        <li>
          <p>Let <var>transceiver</var> have a <dfn data-dfn-type="dfn" id="dfn-currentdirection">[[CurrentDirection]]</dfn> internal slot,
          initialized to <code>null</code>.</p>
        </li>
        <li>
          <p>Let <var>transceiver</var> have a <dfn data-dfn-type="dfn" id="dfn-fireddirection">[[FiredDirection]]</dfn> internal slot,
          initialized to <code>null</code>.</p>
        </li>
        <li>
          <p>Return <var>transceiver</var>.</p>
        </li>
      </ol>
      <div class="note"><div role="heading" class="note-title marker" id="h-note-27" aria-level="4"><span>Note</span></div><div class="">Creating a transceiver does not create the underlying
      <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code> and
      <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> objects. This will only occur as part
      of the process of <a data-lt="set the RTCSessionDescription" href="#set-description" class="internalDFN" data-link-type="dfn">setting an
      <code>RTCSessionDescription</code></a>.</div></div>
      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcrtptransceiver" data-idl="" data-title="RTCRtpTransceiver">[<span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></span> {
<span class="idlAttribute" id="idl-def-rtcrtptransceiver-mid" data-idl="" data-title="mid" data-dfn-for="rtcrtptransceiver">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span>                  <span class="idlAttrName"><a data-no-default="" data-link-for="rtcrtptransceiver" data-lt="" href="#dom-rtcrtptransceiver-mid" class="internalDFN" data-link-type="dfn"><code>mid</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcrtptransceiver-sender" data-idl="" data-title="sender" data-dfn-for="rtcrtptransceiver">    [<span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#SameObject">SameObject</a></span></span>]
    readonly attribute <span class="idlAttrType"><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></span>                <span class="idlAttrName"><a data-no-default="" data-link-for="rtcrtptransceiver" data-lt="" href="#dom-rtcrtptransceiver-sender" class="internalDFN" data-link-type="dfn"><code>sender</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcrtptransceiver-receiver" data-idl="" data-title="receiver" data-dfn-for="rtcrtptransceiver">    [<span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#SameObject">SameObject</a></span></span>]
    readonly attribute <span class="idlAttrType"><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></span>              <span class="idlAttrName"><a data-no-default="" data-link-for="rtcrtptransceiver" data-lt="" href="#dom-rtcrtptransceiver-receiver" class="internalDFN" data-link-type="dfn"><code>receiver</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcrtptransceiver-stopped" data-idl="" data-title="stopped" data-dfn-for="rtcrtptransceiver">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span>                     <span class="idlAttrName"><a data-no-default="" data-link-for="rtcrtptransceiver" data-lt="" href="#dom-rtcrtptransceiver-stopped" class="internalDFN" data-link-type="dfn"><code>stopped</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcrtptransceiver-direction" data-idl="" data-title="direction" data-dfn-for="rtcrtptransceiver">             attribute <span class="idlAttrType"><a href="#dom-rtcrtptransceiverdirection" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiverDirection</code></a></span>  <span class="idlAttrName"><a data-no-default="" data-link-for="rtcrtptransceiver" data-lt="" href="#dom-rtcrtptransceiver-direction" class="internalDFN" data-link-type="dfn"><code>direction</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcrtptransceiver-currentdirection" data-idl="" data-title="currentDirection" data-dfn-for="rtcrtptransceiver">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcrtptransceiverdirection" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiverDirection</code></a>?</span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcrtptransceiver" data-lt="" href="#dom-rtcrtptransceiver-currentdirection" class="internalDFN" data-link-type="dfn"><code>currentDirection</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcrtptransceiver-stop" data-idl="" data-title="stop" data-dfn-for="rtcrtptransceiver">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcrtptransceiver" data-lt="stop|stop()" href="#dom-rtcrtptransceiver-stop" class="internalDFN" data-link-type="dfn"><code>stop</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcrtptransceiver-setcodecpreferences-codecs" data-idl="" data-title="setCodecPreferences" data-dfn-for="rtcrtptransceiver">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcrtptransceiver" data-lt="setCodecPreferences|setcodecpreferences()" href="#dom-rtcrtptransceiver-setcodecpreferences" class="internalDFN" data-link-type="dfn"><code>setCodecPreferences</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-rtcrtpcodeccapability" class="internalDFN" data-link-type="dfn"><code>RTCRtpCodecCapability</code></a>&gt;</span> <span class="idlParamName">codecs</span></span>);</span>
};</span></pre></div>
        <section>
          <h4 id="attributes-9">Attributes</h4>
          <dl data-link-for="RTCRtpTransceiver" data-dfn-for="RTCRtpTransceiver" class="attributes">
            <dt><code>mid</code> of type <span class="idlAttrType">DOMString</span>, readonly, nullable</dt>
            <dd>
              <p>The <dfn id="dom-rtcrtptransceiver-mid" data-dfn-for="rtcrtptransceiver" data-dfn-type="dfn" data-idl="" data-title="mid"><code>mid</code></dfn>
              attribute is the <code>mid</code> negotatiated and present in the
              local and remote descriptions as defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.2.1">section 5.2.1.</a> and <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.3.1">section 5.3.1.</a>)</span>. Before
              negotiation is complete, the <code>mid</code> value may be null.
              After rollbacks, the value may change from a non-null value
              to null.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtptransceiver" data-dfn-type="dfn" id="dom-rtcrtptransceiver-sender" data-title="sender"><code>sender</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></span>, readonly</dt>
            <dd>
              <p>The <code>sender</code> attribute exposes the
              <a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code><code>RTCRtpSender</code></code></a> corresponding to the RTP media
              that may be sent with mid = <a href="#dom-rtcrtptransceiver-mid" class="internalDFN" data-link-type="dfn"><code><code>mid</code></code></a>. On getting,
              the attribute <em class="rfc2119" title="MUST">MUST</em> return the value of the <a href="#dfn-sender" class="internalDFN" data-link-type="dfn">[[Sender]]</a>
              slot.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtptransceiver" data-dfn-type="dfn" id="dom-rtcrtptransceiver-receiver" data-title="receiver"><code>receiver</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></span>, readonly</dt>
            <dd>
              <p>The <code>receiver</code> attribute is the
              <a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code><code>RTCRtpReceiver</code></code></a> corresponding to the RTP media
              that may be received with mid = <a href="#dom-rtcrtptransceiver-mid" class="internalDFN" data-link-type="dfn"><code><code>mid</code></code></a>. On
              getting the attribute <em class="rfc2119" title="MUST">MUST</em> return the value of the
              <a href="#dfn-receiver" class="internalDFN" data-link-type="dfn">[[Receiver]]</a> slot.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtptransceiver" data-dfn-type="dfn" id="dom-rtcrtptransceiver-stopped" data-title="stopped"><code>stopped</code></dfn> of type <span class="idlAttrType">boolean</span>, readonly</dt>
            <dd>
              <p>The <code>stopped</code> attribute indicates that the sender
              of this transceiver will no longer send, and that the receiver
              will no longer receive. It is true if either <code>stop</code>
              has been called or if setting the local or remote description has
              caused the <a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code><code>RTCRtpTransceiver</code></code></a> to be stopped. On
              getting, this attribute <em class="rfc2119" title="MUST">MUST</em> return the value of the
              <a href="#dfn-stopped" class="internalDFN" data-link-type="dfn">[[Stopped]]</a> slot.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtptransceiver" data-dfn-type="dfn" id="dom-rtcrtptransceiver-direction" data-title="direction"><code>direction</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcrtptransceiverdirection" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiverDirection</code></a></span></dt>
            <dd>
              <p>As defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-4.2.4">section 4.2.4.</a>)</span>, the
              <var>direction</var> attribute indicates the preferred direction
              of this transceiver, which will be used in calls to <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-createoffer" class="internalDFN" data-link-type="dfn"><code>createOffer</code></a></code> and <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-createanswer" class="internalDFN" data-link-type="dfn"><code>createAnswer</code></a></code>. An update
              of directionality does not take effect immediately. Instead,
              future calls to <code>createOffer</code>
              and <code>createAnswer</code> mark the corresponding media
              description as <code>sendrecv</code>, <code>sendonly</code>,
              <code>recvonly</code> or <code>inactive</code> as defined in
              <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.2.2">section 5.2.2.</a> and <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.3.2">section 5.3.2.</a>)</span></p>
              <p>On getting, this attribute <em class="rfc2119" title="MUST">MUST</em> return the value of the
              <a href="#dfn-direction" class="internalDFN" data-link-type="dfn">[[Direction]]</a> slot.</p>
              <p>On setting, the user agent <em class="rfc2119" title="MUST">MUST</em> run the
              following steps:</p>
              <ol>
                <li>
                  <p>Let <var>transceiver</var> be the
                  <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>
                  object on which the setter is
                  invoked.</p>
                </li>
                <li>
                  <p>Let <var>connection</var> be the
                  <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object
                  associated with <var>transceiver</var>.</p>
                </li>
                <li>
                  <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
                  <code>true</code>, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an
                  <code>InvalidStateError</code>.</p>
                </li>
                <li>
                  <p>If <var>transceiver</var>'s <a href="#dfn-stopped" class="internalDFN" data-link-type="dfn">[[Stopped]]</a> slot is
                  <code>true</code>, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an
                  <code>InvalidStateError</code>.</p>
                </li>
                <li>
                  <p>Let <var>newDirection</var> be the argument to the
                  setter.</p>
                </li>
                <li>
                  <p>If <var>newDirection</var> is equal to
                  <var>transceiver</var>'s <a href="#dfn-direction" class="internalDFN" data-link-type="dfn">[[Direction]]</a> slot, abort these steps.</p>
                </li>
                <li>
                  <p>Set <var>transceiver</var>'s <a href="#dfn-direction" class="internalDFN" data-link-type="dfn">[[Direction]]</a> slot
                  to <var>newDirection</var>.</p>
                </li>
                <li>
                  <p><a href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">Update the negotiation-needed flag</a> for
                    <var>connection</var>.</p>
                </li>
              </ol>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtptransceiver" data-dfn-type="dfn" id="dom-rtcrtptransceiver-currentdirection" data-title="currentDirection"><code>currentDirection</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcrtptransceiverdirection" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiverDirection</code></a></span>,
            readonly, nullable</dt>
            <dd>
              <p>As defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-4.2.5">section 4.2.5.</a>)</span>, the
              <var>currentDirection</var> attribute indicates the current
              direction negotiated for this transceiver. The value of
              <var>currentDirection</var> is independent of the value of
              <code>RTCRtpEncodingParameters.<a data-link-for="RTCRtpEncodingParameters" href="#dom-rtcrtpencodingparameters-active" class="internalDFN" data-link-type="dfn"><code>active</code></a></code> since one cannot be
              deduced from the other. If this transceiver has never been
              represented in an offer/answer exchange, or if the transceiver is
              <code><a href="#dom-rtcrtptransceiver-stopped" class="internalDFN" data-link-type="dfn"><code>stopped</code></a></code>, the value is null. On getting, this
              attribute <em class="rfc2119" title="MUST">MUST</em> return the value of the <a href="#dfn-currentdirection" class="internalDFN" data-link-type="dfn">[[CurrentDirection]]</a> slot.</p>
            </dd>
          </dl>
        </section>
        <section>
          <h4 id="methods-8">Methods</h4>
          <dl data-link-for="RTCRtpTransceiver" data-dfn-for="RTCRtpTransceiver" class="methods">
            <dt><code>stop</code></dt>
            <dd>
              <p>The <dfn data-idl="" data-dfn-for="rtcrtptransceiver" data-dfn-type="dfn" id="dom-rtcrtptransceiver-stop" data-title="stop" data-lt="stop|stop()"><code>stop</code></dfn> method irreversibly
              stops the <a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code><code>RTCRtpTransceiver</code></code></a>. The
              sender of this transceiver will no longer send, the
              receiver will no longer receive. Calling
              <code>stop()</code> <a data-lt="update the negotiation-needed flag" href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">updates the
              negotiation-needed flag</a> for the
              <code>RTCRtpTransceiver</code>'s associated
              <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>.</p>
              <p>Stopping a transceiver will cause future calls
              to <code>createOffer</code> to generate a zero port
              in the <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a> for the corresponding
              transceiver, as defined in <span>
              [<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-4.2.1">section 4.2.1.</a>)</span>.</p>
              <p>When this method is invoked, to <dfn data-dfn-type="dfn" id="dfn-stop-the-rtcrtptransceiver">stop the
              RTCRtpTransceiver</dfn> <var>transceiver</var>, the user agent
              <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>
                  <p>If <var>transceiver</var>'s <a href="#dfn-stopped" class="internalDFN" data-link-type="dfn">[[Stopped]]</a> slot is
                  <code>true</code>, abort these steps.</p>
                </li>
                <li>
                  <p>Let <var>connection</var> be the
                  <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object on which
                  the <var>transceiver</var> is to be stopped.</p>
                </li>
                <li>
                  <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
                  <code>true</code>, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an
                  <code>InvalidStateError</code>.</p>
                </li>
                <li>
                  <p>Let <var>sender</var> be <var>transceiver</var>'s
                  <a href="#dfn-sender" class="internalDFN" data-link-type="dfn">[[Sender]]</a>.</p>
                </li>
                <li>
                  <p>Let <var>receiver</var> be <var>transceiver</var>'s
                  <a href="#dfn-receiver" class="internalDFN" data-link-type="dfn">[[Receiver]]</a>.</p>
                </li>
                <li>
                  <p>Stop sending media with <var>sender</var>.</p>
                </li>
                <li>
                  <p>Send an RTCP BYE for each RTP stream that was being sent
                  by <var>sender</var>, as specified in [<cite><a class="bibref" href="#bib-RFC3550">RFC3550</a></cite>].</p>
                </li>
                <li>
                  <p>Stop receiving media with <var>receiver</var>.</p>
                </li>
                <li>
                  <p><var>receiver</var>'s <a href="#dfn-receivertrack" class="internalDFN" data-link-type="dfn">[[ReceiverTrack]]</a> is now
                  said to be <a href="https://www.w3.org/TR/mediacapture-streams/#track-ended">
                  ended</a>.</p>
                </li>
                <li>
                  <p>Set <var>transceiver</var>'s <a href="#dfn-stopped" class="internalDFN" data-link-type="dfn">[[Stopped]]</a>
                  slot to <code>true</code>.</p>
                </li>
                <li>
                  <p>Set <var>transceiver</var>'s <a href="#dfn-receptive" class="internalDFN" data-link-type="dfn">[[Receptive]]</a>
                  slot to <code>false</code>.</p>
                </li>
                <li>
                  <p>Set <var>transceiver</var>'s <a href="#dfn-currentdirection" class="internalDFN" data-link-type="dfn">[[CurrentDirection]]</a>
                  slot to <code>null</code>.</p>
                </li>
                <li>
                  <p><a href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">Update the negotiation-needed flag</a> for
                  <var>connection</var>.</p>
                </li>
              </ol>
              <p>When a remote description is applied with a zero
              port in the <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a> for the corresponding
              transceiver, as defined in <span>
              [<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-4.2.2">section 4.2.2.</a>)</span>, the user agent <em class="rfc2119" title="MUST">MUST</em> run the
              above steps as if <code>stop</code> had been called.
              In addition, since the
              <var>receiver</var>'s <a href="#dfn-receivertrack" class="internalDFN" data-link-type="dfn">[[ReceiverTrack]]</a>
              has ended, the steps described in <code><a href="https://www.w3.org/TR/mediacapture-streams/#track-ended">track ended</a></code>
              <em class="rfc2119" title="MUST">MUST</em> be followed.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcrtptransceiver" data-dfn-type="dfn" id="dom-rtcrtptransceiver-setcodecpreferences" data-title="setCodecPreferences" data-lt="setCodecPreferences|setcodecpreferences()"><code>setCodecPreferences</code></dfn></dt>
            <dd>
              <p>The <code>setCodecPreferences</code> method overrides the
              default codec preferences used by the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a>. When
              generating a session description using either
              <code>createOffer</code> or <code>createAnswer</code>, the
              <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> <em class="rfc2119" title="MUST">MUST</em> use the indicated codecs, in the order
              specified in the <var>codecs</var> argument, for the media
              section corresponding to this <code>RTCRtpTransceiver</code>.
              </p>
              <p>This method allows applications to disable the negotiation of
              specific codecs. It also allows an application to cause a remote
              peer to prefer the codec that appears first in the list for
              sending.</p>
              <p>Codec preferences remain in effect for all calls to
              <code>createOffer</code> and <code>createAnswer</code> that
              include this <code>RTCRtpTransceiver</code> until this method is
              called again. Setting <var>codecs</var> to an empty sequence
              resets codec preferences to any default value.</p>
              <p>The <code>codecs</code> sequence passed into
              <code>setCodecPreferences</code> can only contain codecs that are
              returned by <code>RTCRtpSender.getCapabilities(kind)</code> or
              <code>RTCRtpReceiver.getCapabilities(kind)</code>, where
              <code>kind</code> is the kind of the
              <code>RTCRtpTransceiver</code> on which the method is called.
              Additionally, the <code>RTCRtpCodecCapability</code> dictionary
              members cannot be modified. If <code>codecs</code> does not
              fulfill these requirements, the user agent <em class="rfc2119" title="MUST">MUST</em> <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an
              InvalidAccessError.</p>
              <div class="note"><div role="heading" class="note-title marker" id="h-note-28" aria-level="5"><span>Note</span></div><p class="">
              Due to a recommendation in [<cite><a class="bibref" href="#bib-SDP">SDP</a></cite>], calls to
              <code>createAnswer</code> <em class="rfc2119" title="SHOULD">SHOULD</em> use only the common subset of
              the codec preferences and the codecs that appear in the offer.
              For example, if codec preferences are "C, B, A", but only codecs
              "A, B" were offered, the answer should only contain codecs "B,
              A". However, <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-24#section-5.3.1">section 5.3.1.</a>)</span>
              allows adding codecs that were not in the offer, so
              implementations can behave differently.</p></div>
            </dd>
          </dl>
        </section>
      </div>
      <section id="hold-functionality">
        <h4 id="x5-4-1-hold-functionality"><span class="secno">5.4.1 </span>"Hold" functionality</h4>
        <p>Together, the <code><a data-link-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-direction" class="internalDFN" data-link-type="dfn"><code>direction</code></a></code> attribute and
        the <code><a data-link-for="RTCRtpSender" href="#dom-rtcrtpsender-replacetrack" class="internalDFN" data-link-type="dfn"><code>replaceTrack</code></a></code> method enable
        developers to implement "hold" scenarios.</p>
        <p>To send music to a peer and cease rendering received audio (music-on-hold):</p>
        <div class="example"><div class="example-title marker"><span>Example 4</span></div><pre class="highlight hljs javascript" aria-busy="false"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">playMusicOnHold</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// Assume we have an audio transceiver and a music track named musicTrack</span>
    <span class="hljs-keyword">await</span> audio.sender.replaceTrack(musicTrack);
    <span class="hljs-comment">// Mute received audio</span>
    audio.receiver.track.enabled = <span class="hljs-literal">false</span>;
    <span class="hljs-comment">// Set the direction to send-only (requires negotiation)</span>
    audio.direction = <span class="hljs-string">'sendonly'</span>;
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-built_in">console</span>.error(err);
  }
}</pre></div>
        <p>To respond to a remote peer's "sendonly" offer:</p>
        <div class="example"><div class="example-title marker"><span>Example 5</span></div><pre class="highlight hljs javascript" aria-busy="false"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleSendonlyOffer</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// Apply the sendonly offer first,</span>
    <span class="hljs-comment">// to ensure the receiver is ready for ICE candidates.</span>
    <span class="hljs-keyword">await</span> pc.setRemoteDescription(sendonlyOffer);
    <span class="hljs-comment">// Stop sending audio</span>
    <span class="hljs-keyword">await</span> audio.sender.replaceTrack(<span class="hljs-literal">null</span>);
    <span class="hljs-comment">// Align our direction to avoid further negotiation</span>
    audio.direction = <span class="hljs-string">'recvonly'</span>;
    <span class="hljs-comment">// Call createAnswer and send a recvonly answer</span>
    <span class="hljs-keyword">await</span> doAnswer();
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-comment">// handle signaling error</span>
  }
}</pre></div>
        <p>To stop sending music and send audio captured from a microphone,
        as well to render received audio:</p>
        <div class="example"><div class="example-title marker"><span>Example 6</span></div><pre class="highlight hljs javascript" aria-busy="false"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stopOnHoldMusic</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">// Assume we have an audio transceiver and a microphone track named micTrack</span>
  <span class="hljs-keyword">await</span> audio.sender.replaceTrack(micTrack);
  <span class="hljs-comment">// Unmute received audio</span>
  audio.receiver.track.enabled = <span class="hljs-literal">true</span>;
  <span class="hljs-comment">// Set the direction to sendrecv (requires negotiation)</span>
  audio.direction = <span class="hljs-string">'sendrecv'</span>;
}</pre></div>
        <p>To respond to being taken off hold by a remote peer:</p>
        <div class="example"><div class="example-title marker"><span>Example 7</span></div><pre class="highlight hljs javascript" aria-busy="false"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onOffHold</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// Apply the sendrecv offer first, to ensure receiver is ready for ICE candidates.</span>
    <span class="hljs-keyword">await</span> pc.setRemoteDescription(sendrecvOffer);
    <span class="hljs-comment">// Start sending audio</span>
    <span class="hljs-keyword">await</span> audio.sender.replaceTrack(micTrack);
    <span class="hljs-comment">// Set the direction sendrecv (just in time for the answer)</span>
    audio.direction = <span class="hljs-string">'sendrecv'</span>;
    <span class="hljs-comment">// Call createAnswer and send a sendrecv answer</span>
    <span class="hljs-keyword">await</span> doAnswer();
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-comment">// handle signaling error</span>
  }
}</pre></div>
      </section>
    </section>
    <section id="rtcdtlstransport-interface">
      <h3 id="x5-5-rtcdtlstransport-interface"><span class="secno">5.5 </span><dfn data-dfn-type="dfn" id="dom-rtcdtlstransport" data-idl="" data-title="RTCDtlsTransport" data-dfn-for=""><code>RTCDtlsTransport</code></dfn> Interface</h3>
      <p>The <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code> interface allows an
      application access to information about the Datagram Transport Layer
      Security (DTLS) transport over which RTP and RTCP packets are sent and
      received by <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> and
      <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> objects, as well other data such as
      SCTP packets sent and received by data channels. In particular, DTLS adds
      security to an underlying transport, and the
      <code>RTCDtlsTransport</code> interface allows access to information
      about the underlying transport and the security added.
      <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code> objects are constructed as a result
      of calls to <code>setLocalDescription()</code> and
      <code>setRemoteDescription()</code>. Each
      <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code> object represents the DTLS transport
      layer for the RTP or RTCP <code><a data-link-for="RTCIceTransport" href="#dom-rtcicetransport-component" class="internalDFN" data-link-type="dfn"><code>component</code></a></code>
      of a specific <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>, or a group of
      <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>s if such a group has been
      negotiated via [<cite><a class="bibref" href="#bib-BUNDLE">BUNDLE</a></cite>].</p>

      <div class="note"><div role="heading" class="note-title marker" id="h-note-29" aria-level="4"><span>Note</span></div><div class="">A new DTLS association for an existing
      <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> will be represented by an existing
      <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code> object, whose <code><a data-link-for="RTCDtlsTransport" href="#dom-rtcdtlstransport-state" class="internalDFN" data-link-type="dfn"><code>state</code></a></code> will be updated accordingly,
      as opposed to being represented by a new object.</div></div>

      <p>An <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code> has a
      <dfn data-dfn-type="dfn" id="dfn-dtlstransportstate">[[DtlsTransportState]]</dfn> internal slot initialized to <code>
      <a data-link-for="RTCDtlsTransportState" href="#dom-rtcdtlstransportstate-new" class="internalDFN" data-link-type="dfn"><code>new</code></a></code>.</p>
      <p>When the underlying DTLS transport needs to update the state of the
      corresponding <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code> object, the user agent
      <em class="rfc2119" title="MUST">MUST</em> queue a task that runs the following steps:</p>
      <ol>
        <li>
          <p>Let <var>transport</var> be the <code>
          <a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code> object to receive the state update.</p>
        </li>
        <li>
          <p>Let <var>newState</var> be the new state.</p>
        </li>
        <li>
          <p>Set <var>transport</var>'s <a href="#dfn-dtlstransportstate" class="internalDFN" data-link-type="dfn">[[DtlsTransportState]]</a> slot to
            <var>newState</var>.</p>
        </li>
        <li>
          <p>Fire a simple event named <code><a data-lt="RTCDtlsTransport state change" href="#event-dtlstransport-statechange" class="internalDFN" data-link-type="dfn"><code>statechange</code></a></code>
          at <var>transport</var>.</p>
        </li>
      </ol>

      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcdtlstransport" data-idl="" data-title="RTCDtlsTransport">[<span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></span> : <span class="idlSuperclass">EventTarget</span> {
<span class="idlAttribute" id="idl-def-rtcdtlstransport-transport" data-idl="" data-title="transport" data-dfn-for="rtcdtlstransport">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></span>       <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdtlstransport" data-lt="" href="#dom-rtcdtlstransport-transport" class="internalDFN" data-link-type="dfn"><code>transport</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdtlstransport-state" data-idl="" data-title="state" data-dfn-for="rtcdtlstransport">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcdtlstransportstate" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransportState</code></a></span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdtlstransport" data-lt="" href="#dom-rtcdtlstransport-state" class="internalDFN" data-link-type="dfn"><code>state</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcdtlstransport-getremotecertificates" data-idl="" data-title="getRemoteCertificates" data-dfn-for="rtcdtlstransport">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="https://heycam.github.io/webidl/#idl-ArrayBuffer">ArrayBuffer</a>&gt;</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcdtlstransport" data-lt="getRemoteCertificates|getremotecertificates()" href="#dom-rtcdtlstransport-getremotecertificates" class="internalDFN" data-link-type="dfn"><code>getRemoteCertificates</code></a></span>();</span>
<span class="idlAttribute" id="idl-def-rtcdtlstransport-onstatechange" data-idl="" data-title="onstatechange" data-dfn-for="rtcdtlstransport">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span>          <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdtlstransport" data-lt="" href="#dom-rtcdtlstransport-onstatechange" class="internalDFN" data-link-type="dfn"><code>onstatechange</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdtlstransport-onerror" data-idl="" data-title="onerror" data-dfn-for="rtcdtlstransport">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span>          <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdtlstransport" data-lt="" href="#dom-rtcdtlstransport-onerror" class="internalDFN" data-link-type="dfn"><code>onerror</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="attributes-10">Attributes</h4>
          <dl data-link-for="RTCDtlsTransport" data-dfn-for="RTCDtlsTransport" class="attributes">
            <dt><dfn data-idl="" data-dfn-for="rtcdtlstransport" data-dfn-type="dfn" id="dom-rtcdtlstransport-transport" data-title="transport"><code>transport</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></span>, readonly</dt>
            <dd>
              <p>The <code>transport</code> attribute is the underlying
              transport that is used to send and receive packets. The
              underlying transport may not be shared between multiple active
              <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code> objects.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcdtlstransport" data-dfn-type="dfn" id="dom-rtcdtlstransport-state" data-title="state"><code>state</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcdtlstransportstate" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransportState</code></a></span>, readonly</dt>
            <dd>
              <p>The <code>state</code> attribute <em class="rfc2119" title="MUST">MUST</em>, on getting, return the
              value of the <a href="#dfn-dtlstransportstate" class="internalDFN" data-link-type="dfn">[[DtlsTransportState]]</a> slot.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcdtlstransport" data-dfn-type="dfn" id="dom-rtcdtlstransport-onstatechange" data-title="onstatechange"><code>onstatechange</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd>
              The event type of this event handler is <code>
              <a data-lt="RTCDtlsTransport state change" href="#event-dtlstransport-statechange" class="internalDFN" data-link-type="dfn"><code>statechange</code></a></code>.
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcdtlstransport" data-dfn-type="dfn" id="dom-rtcdtlstransport-onerror" data-title="onerror"><code>onerror</code></dfn> of type
              <span class="idlAttrType">EventHandler</span></dt>
              <dd>The event type of this event handler is
              <code><a href="#dfn-error" class="internalDFN" data-link-type="dfn"><code>error</code></a></code>.</dd>
          </dl>
        </section>
        <section>
          <h4 id="methods-9">Methods</h4>
          <dl data-link-for="RTCDtlsTransport" data-dfn-for="RTCDtlsTransport" class="methods">
            <dt><dfn data-idl="" data-dfn-for="rtcdtlstransport" data-dfn-type="dfn" id="dom-rtcdtlstransport-getremotecertificates" data-title="getRemoteCertificates" data-lt="getRemoteCertificates|getremotecertificates()"><code>getRemoteCertificates</code></dfn></dt>
            <dd>
              <p>Returns the certificate chain in use by the remote side, with
              each certificate encoded in binary Distinguished Encoding Rules
              (DER) [<cite><a class="bibref" href="#bib-X690">X690</a></cite>]. <code>getRemoteCertificates()</code> will return
              an empty list prior to selection of the remote certificate, which
              will be completed by the time
              <code><a href="#dom-rtcdtlstransportstate" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransportState</code></a></code> transitions to
              "connected".</p>
            </dd>
          </dl>
        </section>
      </div>
      <h3 id="rtcdtlstransportstate-enum"><dfn data-dfn-type="dfn" id="dom-rtcdtlstransportstate" data-idl="" data-title="RTCDtlsTransportState" data-dfn-for=""><code>RTCDtlsTransportState</code></dfn> Enum</h3>
      <div>
        <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtcdtlstransportstate" data-idl="" data-title="RTCDtlsTransportState">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcdtlstransportstate" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransportState</code></a></span> {
    <a href="#dom-rtcdtlstransportstate-new" class="idlEnumItem">"new"</a>,
    <a href="#dom-rtcdtlstransportstate-connecting" class="idlEnumItem">"connecting"</a>,
    <a href="#dom-rtcdtlstransportstate-connected" class="idlEnumItem">"connected"</a>,
    <a href="#dom-rtcdtlstransportstate-closed" class="idlEnumItem">"closed"</a>,
    <a href="#dom-rtcdtlstransportstate-failed" class="idlEnumItem">"failed"</a>
};</span></pre></div>
        <table data-link-for="RTCDtlsTransportState" data-dfn-for="RTCDtlsTransportState" class="simple">
          <tbody>
            <tr>
              <th colspan="2">Enumeration description</th>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcdtlstransportstate" data-dfn-type="dfn" id="dom-rtcdtlstransportstate-new" data-title="new"><code>new</code></dfn></td>
              <td>DTLS has not started negotiating yet.</td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcdtlstransportstate" data-dfn-type="dfn" id="dom-rtcdtlstransportstate-connecting" data-title="connecting"><code>connecting</code></dfn></td>
              <td>DTLS is in the process of negotiating a secure connection
              and verifying the remote fingerprint.</td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcdtlstransportstate" data-dfn-type="dfn" id="dom-rtcdtlstransportstate-connected" data-title="connected"><code>connected</code></dfn></td>
              <td>DTLS has completed negotiation of a secure connection and
              verified the remote fingerprint.</td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcdtlstransportstate" data-dfn-type="dfn" id="dom-rtcdtlstransportstate-closed" data-title="closed"><code>closed</code></dfn></td>
              <td>The transport has been closed intentionally as the result of
              receipt of a close_notify alert, or calling <code>close()</code>.</td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcdtlstransportstate" data-dfn-type="dfn" id="dom-rtcdtlstransportstate-failed" data-title="failed"><code>failed</code></dfn></td>
              <td>The transport has failed as the result of an error (such as
              receipt of an error alert or failure to validate the remote fingerprint).</td>
            </tr>
          </tbody>
        </table>
      </div>
      <section id="rtcdtlsfingerprint">
        <h4 id="x5-5-1-rtcdtlsfingerprint-dictionary"><span class="secno">5.5.1 </span><dfn data-dfn-type="dfn" id="dom-rtcdtlsfingerprint" data-idl="" data-title="RTCDtlsFingerprint" data-dfn-for=""><code>RTCDtlsFingerprint</code></dfn> Dictionary</h4>
        <p>The <code>RTCDtlsFingerprint</code> dictionary includes
        the hash function algorithm and certificate fingerprint as described in
        [<cite><a class="bibref" href="#bib-RFC4572">RFC4572</a></cite>].</p>
        <div>
          <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcdtlsfingerprint" data-idl="" data-title="RTCDtlsFingerprint">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcdtlsfingerprint" class="internalDFN" data-link-type="dfn"><code>RTCDtlsFingerprint</code></a></span> {
<span class="idlMember" id="idl-def-rtcdtlsfingerprint-algorithm" data-idl="" data-title="algorithm" data-dfn-for="rtcdtlsfingerprint">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcdtlsfingerprint" data-lt="" href="#dom-rtcdtlsfingerprint-algorithm" class="internalDFN" data-link-type="dfn"><code>algorithm</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcdtlsfingerprint-value" data-idl="" data-title="value" data-dfn-for="rtcdtlsfingerprint">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcdtlsfingerprint" data-lt="" href="#dom-rtcdtlsfingerprint-value" class="internalDFN" data-link-type="dfn"><code>value</code></a></span>;</span>
};</span></pre></div>
          <section>
            <h5 id="dictionary-rtcdtlsfingerprint-members">Dictionary RTCDtlsFingerprint
            Members</h5>
            <dl data-link-for="RTCDtlsFingerprint" data-dfn-for="RTCDtlsFingerprint" class="dictionary-members">
              <dt><dfn data-idl="" data-dfn-for="rtcdtlsfingerprint" data-dfn-type="dfn" id="dom-rtcdtlsfingerprint-algorithm" data-title="algorithm"><code>algorithm</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>
                <p>One of the the hash function algorithms defined in the 'Hash
                function Textual Names' registry [<cite><a class="bibref" href="#bib-IANA-HASH-FUNCTION">IANA-HASH-FUNCTION</a></cite>].</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcdtlsfingerprint" data-dfn-type="dfn" id="dom-rtcdtlsfingerprint-value" data-title="value"><code>value</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>
                <p>The value of the certificate fingerprint in lowercase hex
                string as expressed utilizing the syntax of 'fingerprint' in
                [<cite><a class="bibref" href="#bib-RFC4572">RFC4572</a></cite>] Section 5.</p>
              </dd>
            </dl>
          </section>
        </div>
      </section>
    </section>
    <section id="rtcicetransport">
      <h3 id="x5-6-rtcicetransport-interface"><span class="secno">5.6 </span><dfn data-dfn-type="dfn" id="dom-rtcicetransport" data-idl="" data-title="RTCIceTransport" data-dfn-for=""><code>RTCIceTransport</code></dfn> Interface</h3>
      <p>The <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> interface allows an
      application access to information about the ICE transport over which
      packets are sent and received. In particular, ICE manages peer-to-peer
      connections which involve state which the application may want to access.
      <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> objects are constructed as a result
      of calls to <code>setLocalDescription()</code> and
      <code>setRemoteDescription()</code>. The underlying ICE state is managed
      by the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE agent</a>; as such, the state of an
      <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> changes when the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>
      provides indications to the user agent as described below. Each
      <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> object represents the ICE transport
      layer for the RTP or RTCP <code><a data-link-for="RTCIceTransport" href="#dom-rtcicetransport-component" class="internalDFN" data-link-type="dfn"><code>component</code></a></code>
      of a specific <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>, or a group of
      <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>s if such a group has been
      negotiated via [<cite><a class="bibref" href="#bib-BUNDLE">BUNDLE</a></cite>].</p>

      <div class="note"><div role="heading" class="note-title marker" id="h-note-30" aria-level="4"><span>Note</span></div><div class="">An ICE restart for an existing
      <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> will be represented by an existing
      <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> object, whose <code><a data-link-for="RTCIceTransport" href="#dom-rtcicetransport-state" class="internalDFN" data-link-type="dfn"><code>state</code></a></code> will be updated
      accordingly, as opposed to being represented by a new object.</div></div>

      <p>When the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> indicates that it began gathering a
      <a href="#dfn-generation" class="internalDFN" data-link-type="dfn">generation</a> of candidates for an <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>, the
      user agent <em class="rfc2119" title="MUST">MUST</em> queue a task that runs the following steps:</p>
      <ol>
        <li>
          <p>Let <var>connection</var> be the
          <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object associated with this
          <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>.</p>
        </li>
        <li>
          <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
          <code>true</code>, abort these steps.</p>
        </li>
        <li>
          <p>Let <var>transport</var> be the <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>
          for which candidate gathering began.</p>
        </li>
        <li>
          <p>Set <var>transport</var>'s <a href="#dfn-icegathererstate" class="internalDFN" data-link-type="dfn">[[IceGathererState]]</a>
          slot to <code><a data-link-for="RTCIceGathererState" href="#dom-rtcicegathererstate-gathering" class="internalDFN" data-link-type="dfn"><code>gathering</code></a></code>.</p>
        </li>
        <li>
          <p>Fire a simple event named <code><a href="#event-icetransport-gatheringstatechange" class="internalDFN" data-link-type="dfn"><code>gatheringstatechange</code></a></code>
          at <var>transport</var>.</p>
        </li>
        <li>
          <p><a href="#update-ice-gathering-state" class="internalDFN" data-link-type="dfn">Update the ICE gathering state</a> of <var>connection</var>.</p>
        </li>
      </ol>

      <p>When the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> indicates that it finished gathering a
      <a href="#dfn-generation" class="internalDFN" data-link-type="dfn">generation</a> of candidates for an <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>, the
      user agent <em class="rfc2119" title="MUST">MUST</em> queue a task that runs the following steps:</p>
      <ol>
        <li>
          <p>Let <var>connection</var> be the
          <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object associated with this
          <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>.</p>
        </li>
        <li>
          <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
          <code>true</code>, abort these steps.</p>
        </li>
        <li>
          <p>Let <var>transport</var> be the <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>
          for which candidate gathering finished.</p>
        </li>
        <li>
          <p>Create an <code><a href="#dom-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a></code> instance
          <var>newCandidate</var>, with <code><a data-link-for="RTCIceCandidate" href="#dom-rtcicecandidate-sdpmid" class="internalDFN" data-link-type="dfn"><code>sdpMid</code></a></code> and
          <code><a data-link-for="RTCIceCandidate" href="#dom-rtcicecandidate-sdpmlineindex" class="internalDFN" data-link-type="dfn"><code>sdpMLineIndex</code></a></code>
          set to the values associated with this
          <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>, with
          <code><a data-link-for="RTCIceCandidate" href="#dom-rtcicecandidate-usernamefragment" class="internalDFN" data-link-type="dfn"><code>usernameFragment</code></a></code> set to the username fragment
          of the <a href="#dfn-generation" class="internalDFN" data-link-type="dfn">generation</a> of candidates for which gathering finished, with
          <code><a data-link-for="RTCIceCandidate" href="#dom-rtcicecandidate-candidate" class="internalDFN" data-link-type="dfn"><code>candidate</code></a></code> set to an
          empty string, and with all other nullable members set to null.</p>
        </li>
        <li>
          <p><a href="#dfn-fire-an-ice-candidate-event" class="internalDFN" data-link-type="dfn">Fire an ice candidate event</a> named <code><a href="#event-icecandidate" class="internalDFN" data-link-type="dfn"><code>icecandidate</code></a></code> with
          <var>newCandidate</var> at <var>connection</var>.</p>
        </li>
        <li>
          <p>If another <a href="#dfn-generation" class="internalDFN" data-link-type="dfn">generation</a> of candidates is still being gathered, abort
          these steps.</p>
          <div class="note"><div role="heading" class="note-title marker" id="h-note-31" aria-level="4"><span>Note</span></div><div class="">
            This may occur if an ICE restart is initiated while the ICE agent
            is still gathering the previous <a href="#dfn-generation" class="internalDFN" data-link-type="dfn">generation</a> of candidates.
          </div></div>
        </li>
        <li>
          <p>Set <var>transport</var>'s <a href="#dfn-icegathererstate" class="internalDFN" data-link-type="dfn">[[IceGathererState]]</a>
          slot to <code><a data-link-for="RTCIceGathererState" href="#dom-rtcicegathererstate-complete" class="internalDFN" data-link-type="dfn"><code>complete</code></a></code>.</p>
        </li>
        <li>
          <p>Fire a simple event named <code><a href="#event-icetransport-gatheringstatechange" class="internalDFN" data-link-type="dfn"><code>gatheringstatechange</code></a></code>
          at <var>transport</var>.</p>
        </li>
        <li>
          <p><a href="#update-ice-gathering-state" class="internalDFN" data-link-type="dfn">Update the ICE gathering state</a> of <var>connection</var>.</p>
        </li>
      </ol>

      <p>When the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> indicates that a new ICE candidate is
      available for an <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>, either by taking one
      from the <a data-lt="ICE candidate pool size" href="#dfn-ice-candidate-pool-size" class="internalDFN" data-link-type="dfn">ICE candidate pool</a> or
      gathering it from scratch, the user agent <em class="rfc2119" title="MUST">MUST</em> queue a task that runs the
      following steps:</p>
      <ol>
        <li>
          <p>Let <var>connection</var> be the
          <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object associated with this
          <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>.</p>
        </li>
        <li>
          <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
          <code>true</code>, abort these steps.</p>
        </li>
        <li>
          <p>Let <var>transport</var> be the <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>
          for which this candidate is being made available.</p>
        </li>
        <li>
          <p>If <var>connection</var>.<a href="#dfn-pendinglocaldescription" class="internalDFN" data-link-type="dfn">[[PendingLocalDescription]]</a> is
          not <code>null</code>, and represents the ICE <a href="#dfn-generation" class="internalDFN" data-link-type="dfn">generation</a> for
          which <var>candidate</var> was gathered, add <var>candidate</var> to
          the <var>connection</var>.<a href="#dfn-pendinglocaldescription" class="internalDFN" data-link-type="dfn">[[PendingLocalDescription]]</a>.sdp.</p>
        </li>
        <li>
          <p>If <var>connection</var>.<a href="#dfn-currentlocaldescription" class="internalDFN" data-link-type="dfn">[[CurrentLocalDescription]]</a>
          is not <code>null</code>, and represents the ICE <a href="#dfn-generation" class="internalDFN" data-link-type="dfn">generation</a> for
          which <var>candidate</var> was gathered, add <var>candidate</var> to
          the <var>connection</var>.<a href="#dfn-currentlocaldescription" class="internalDFN" data-link-type="dfn">[[CurrentLocalDescription]]</a>.sdp.</p>
        </li>
        <li>
          <p>Create an <code><a href="#dom-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a></code> instance to represent
          the candidate. Let <var>newCandidate</var> be that object.</p>
        </li>
        <li>
          <p>Add <var>newCandidate</var> to <var>transport</var>'s set of local
          candidates.</p>
        </li>
        <li>
          <p><a href="#dfn-fire-an-ice-candidate-event" class="internalDFN" data-link-type="dfn">Fire an ice candidate event</a> named <code><a href="#event-icecandidate" class="internalDFN" data-link-type="dfn"><code>icecandidate</code></a></code> with
          <var>newCandidate</var> at <var>connection</var>.</p>
        </li>
      </ol>

      <p>When the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> indicates that the
      <code><a href="#dom-rtcicetransportstate" class="internalDFN" data-link-type="dfn"><code>RTCIceTransportState</code></a></code> for an
      <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> has changed, the user agent <em class="rfc2119" title="MUST">MUST</em> queue
      a task that runs the following steps:</p>
      <ol>
        <li>
          <p>Let <var>connection</var> be the
          <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object associated with this
          <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>.</p>
        </li>
        <li>
          <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
          <code>true</code>, abort these steps.</p>
        </li>
        <li>
          <p>Let <var>transport</var> be the <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>
          whose state is changing.</p>
        </li>
        <li>
          <p>Let <var>newState</var> be the new indicated
          <code><a href="#dom-rtcicetransportstate" class="internalDFN" data-link-type="dfn"><code>RTCIceTransportState</code></a></code>.
        </p></li>
        <li>
          <p>Set <var>transport</var>'s <a href="#dfn-icetransportstate" class="internalDFN" data-link-type="dfn">[[IceTransportState]]</a> slot to
          <var>newState</var>.</p>
        </li>
        <li>
          <p>Fire a simple event named <code><a href="#event-icetransport-statechange" class="internalDFN" data-link-type="dfn"><code>statechange</code></a></code> at
          <var>transport</var>.</p>
        </li>
        <li>
          <p><a href="#update-ice-connection-state" class="internalDFN" data-link-type="dfn">Update the ICE connection state</a> of <var>connection</var>.
          </p>
        </li>
        <li>
          <p><a href="#dfn-update-the-connection-state" class="internalDFN" data-link-type="dfn">Update the connection state</a> of <var>connection</var>.</p>
        </li>
      </ol>

      <p>When the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> indicates that the selected candidate pair
      for an <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> has changed, the user agent
      <em class="rfc2119" title="MUST">MUST</em> queue a task that runs the following steps:</p>
      <ol>
        <li>
          <p>Let <var>connection</var> be the
          <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object associated with this
          <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>.</p>
        </li>
        <li>
          <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
          <code>true</code>, abort these steps.</p>
        </li>
        <li>
          <p>Let <var>transport</var> be the <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>
          whose selected candidate pair is changing.</p>
        </li>
        <li>
          <p>Let <var>newCandidatePair</var> be a newly created
          <code><a href="#dom-rtcicecandidatepair" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidatePair</code></a></code> representing the indicated
          pair if one is selected, and <code>null</code> otherwise.</p>
        </li>
        <li>
          <p>Set <var>transport</var>'s <a href="#dfn-selectedcandidatepair" class="internalDFN" data-link-type="dfn">[[SelectedCandidatePair]]</a> slot
          to <var>newCandidatePair</var>.</p>
        </li>
        <li>
          <p>Fire a simple event named
          <code><a href="#event-icetransport-selectedcandidatepairchange" class="internalDFN" data-link-type="dfn"><code>selectedcandidatepairchange</code></a></code> at
          <var>transport</var>.</p>
        </li>
      </ol>
      <p>An <a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a> object has the following internal slots:</p>
      <ul>
        <li><dfn data-dfn-type="dfn" id="dfn-icetransportstate">[[IceTransportState]]</dfn> initialized to <code>
        <a data-link-for="RTCIceTransportState" href="#dom-rtcicetransportstate-new" class="internalDFN" data-link-type="dfn"><code>new</code></a></code></li>
        <li><dfn data-dfn-type="dfn" id="dfn-icegathererstate">[[IceGathererState]]</dfn> initialized to <code>
        <a data-link-for="RTCIceGatheringState" href="#dom-rtcicegatheringstate-new" class="internalDFN" data-link-type="dfn"><code>new</code></a></code></li>
        <li><dfn data-dfn-type="dfn" id="dfn-selectedcandidatepair">[[SelectedCandidatePair]]</dfn> initialized to
        <code>null</code></li>
      </ul>
      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcicetransport" data-idl="" data-title="RTCIceTransport">[<span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></span> : <span class="idlSuperclass">EventTarget</span> {
<span class="idlAttribute" id="idl-def-rtcicetransport-role" data-idl="" data-title="role" data-dfn-for="rtcicetransport">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcicerole" class="internalDFN" data-link-type="dfn"><code>RTCIceRole</code></a></span>           <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicetransport" data-lt="" href="#dom-rtcicetransport-role" class="internalDFN" data-link-type="dfn"><code>role</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicetransport-component" data-idl="" data-title="component" data-dfn-for="rtcicetransport">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcicecomponent" class="internalDFN" data-link-type="dfn"><code>RTCIceComponent</code></a></span>      <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicetransport" data-lt="" href="#dom-rtcicetransport-component" class="internalDFN" data-link-type="dfn"><code>component</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicetransport-state" data-idl="" data-title="state" data-dfn-for="rtcicetransport">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcicetransportstate" class="internalDFN" data-link-type="dfn"><code>RTCIceTransportState</code></a></span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicetransport" data-lt="" href="#dom-rtcicetransport-state" class="internalDFN" data-link-type="dfn"><code>state</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicetransport-gatheringstate" data-idl="" data-title="gatheringState" data-dfn-for="rtcicetransport">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcicegathererstate" class="internalDFN" data-link-type="dfn"><code>RTCIceGathererState</code></a></span>  <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicetransport" data-lt="" href="#dom-rtcicetransport-gatheringstate" class="internalDFN" data-link-type="dfn"><code>gatheringState</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcicetransport-getlocalcandidates" data-idl="" data-title="getLocalCandidates" data-dfn-for="rtcicetransport">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a>&gt;</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcicetransport" data-lt="getLocalCandidates|getlocalcandidates()" href="#dom-rtcicetransport-getlocalcandidates" class="internalDFN" data-link-type="dfn"><code>getLocalCandidates</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcicetransport-getremotecandidates" data-idl="" data-title="getRemoteCandidates" data-dfn-for="rtcicetransport">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a>&gt;</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcicetransport" data-lt="getRemoteCandidates|getremotecandidates()" href="#dom-rtcicetransport-getremotecandidates" class="internalDFN" data-link-type="dfn"><code>getRemoteCandidates</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcicetransport-getselectedcandidatepair" data-idl="" data-title="getSelectedCandidatePair" data-dfn-for="rtcicetransport">    <span class="idlMethType"><a href="#dom-rtcicecandidatepair" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidatePair</code></a>?</span>      <span class="idlMethName"><a data-no-default="" data-link-for="rtcicetransport" data-lt="getSelectedCandidatePair|getselectedcandidatepair()" href="#dom-rtcicetransport-getselectedcandidatepair" class="internalDFN" data-link-type="dfn"><code>getSelectedCandidatePair</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcicetransport-getlocalparameters" data-idl="" data-title="getLocalParameters" data-dfn-for="rtcicetransport">    <span class="idlMethType"><a href="#dom-rtciceparameters" class="internalDFN" data-link-type="dfn"><code>RTCIceParameters</code></a>?</span>         <span class="idlMethName"><a data-no-default="" data-link-for="rtcicetransport" data-lt="getLocalParameters|getlocalparameters()" href="#dom-rtcicetransport-getlocalparameters" class="internalDFN" data-link-type="dfn"><code>getLocalParameters</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcicetransport-getremoteparameters" data-idl="" data-title="getRemoteParameters" data-dfn-for="rtcicetransport">    <span class="idlMethType"><a href="#dom-rtciceparameters" class="internalDFN" data-link-type="dfn"><code>RTCIceParameters</code></a>?</span>         <span class="idlMethName"><a data-no-default="" data-link-for="rtcicetransport" data-lt="getRemoteParameters|getremoteparameters()" href="#dom-rtcicetransport-getremoteparameters" class="internalDFN" data-link-type="dfn"><code>getRemoteParameters</code></a></span>();</span>
<span class="idlAttribute" id="idl-def-rtcicetransport-onstatechange" data-idl="" data-title="onstatechange" data-dfn-for="rtcicetransport">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span>         <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicetransport" data-lt="" href="#dom-rtcicetransport-onstatechange" class="internalDFN" data-link-type="dfn"><code>onstatechange</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicetransport-ongatheringstatechange" data-idl="" data-title="ongatheringstatechange" data-dfn-for="rtcicetransport">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span>         <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicetransport" data-lt="" href="#dom-rtcicetransport-ongatheringstatechange" class="internalDFN" data-link-type="dfn"><code>ongatheringstatechange</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicetransport-onselectedcandidatepairchange" data-idl="" data-title="onselectedcandidatepairchange" data-dfn-for="rtcicetransport">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span>         <span class="idlAttrName"><a data-no-default="" data-link-for="rtcicetransport" data-lt="" href="#dom-rtcicetransport-onselectedcandidatepairchange" class="internalDFN" data-link-type="dfn"><code>onselectedcandidatepairchange</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="attributes-11">Attributes</h4>
          <dl data-link-for="RTCIceTransport" data-dfn-for="RTCIceTransport" class="attributes">
            <dt><code>role</code> of type <span class="idlAttrType"><a href="#dom-rtcicerole" class="internalDFN" data-link-type="dfn"><code>RTCIceRole</code></a></span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcicetransport-role" data-dfn-for="rtcicetransport" data-dfn-type="dfn" data-idl="" data-title="role"><code>role</code></dfn>
              attribute <em class="rfc2119" title="MUST">MUST</em> return the ICE role of the transport.</p>
            </dd>
            <dt><code>component</code> of type <span class="idlAttrType"><a href="#dom-rtcicecomponent" class="internalDFN" data-link-type="dfn"><code>RTCIceComponent</code></a></span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcicetransport-component" data-dfn-for="rtcicetransport" data-dfn-type="dfn" data-idl="" data-title="component"><code>component</code></dfn>
              attribute <em class="rfc2119" title="MUST">MUST</em> return the ICE component of the transport. When
              RTCP mux is used, a single
              <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> transports both RTP and RTCP
              and <code>component</code> is set to "RTP".</p>
            </dd>
            <dt><code>state</code> of type <span class="idlAttrType"><a href="#dom-rtcicetransportstate" class="internalDFN" data-link-type="dfn"><code>RTCIceTransportState</code></a></span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcicetransport-state" data-dfn-for="rtcicetransport" data-dfn-type="dfn" data-idl="" data-title="state"><code>state</code></dfn>
              attribute <em class="rfc2119" title="MUST">MUST</em>, on getting, return the value of the
              <a href="#dfn-icetransportstate" class="internalDFN" data-link-type="dfn">[[IceTransportState]]</a> slot.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcicetransport" data-dfn-type="dfn" id="dom-rtcicetransport-gatheringstate" data-title="gatheringState"><code>gatheringState</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcicegathererstate" class="internalDFN" data-link-type="dfn"><code>RTCIceGathererState</code></a></span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-icetransport-gatheringstate" data-dfn-type="dfn"><code>gathering
              state</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em>, on getting, return the value
              of the <a href="#dfn-icegathererstate" class="internalDFN" data-link-type="dfn">[[IceGathererState]]</a> slot.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcicetransport" data-dfn-type="dfn" id="dom-rtcicetransport-onstatechange" data-title="onstatechange"><code>onstatechange</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd>
              This event handler, of event handler event type
              <code><a href="#event-icetransport-statechange" class="internalDFN" data-link-type="dfn"><code>statechange</code></a></code>, <em class="rfc2119" title="MUST">MUST</em> be fired any time the
              <code>RTCIceTransport</code>
              state changes.
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcicetransport" data-dfn-type="dfn" id="dom-rtcicetransport-ongatheringstatechange" data-title="ongatheringstatechange"><code>ongatheringstatechange</code></dfn> of type
            <span class="idlAttrType">EventHandler</span></dt>
            <dd>
              This event handler, of event handler event type
              <code><a href="#event-icetransport-gatheringstatechange" class="internalDFN" data-link-type="dfn"><code>gatheringstatechange</code></a></code>, <em class="rfc2119" title="MUST">MUST</em> be fired any time
              the <code>RTCIceTransport</code>gathering state
              changes.
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcicetransport" data-dfn-type="dfn" id="dom-rtcicetransport-onselectedcandidatepairchange" data-title="onselectedcandidatepairchange"><code>onselectedcandidatepairchange</code></dfn> of type
            <span class="idlAttrType">EventHandler</span></dt>
            <dd>This event handler, of event handler event type
            <code><a href="#event-icetransport-selectedcandidatepairchange" class="internalDFN" data-link-type="dfn"><code>selectedcandidatepairchange</code></a></code>, <em class="rfc2119" title="MUST">MUST</em> be fired any
            time the <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>'s selected candidate
            pair changes.</dd>
          </dl>
        </section>
        <section>
          <h4 id="methods-10">Methods</h4>
          <dl data-link-for="RTCIceTransport" data-dfn-for="RTCIceTransport" class="methods">
            <dt><dfn data-idl="" data-dfn-for="rtcicetransport" data-dfn-type="dfn" id="dom-rtcicetransport-getlocalcandidates" data-title="getLocalCandidates" data-lt="getLocalCandidates|getlocalcandidates()"><code>getLocalCandidates</code></dfn></dt>
            <dd>
              <p>Returns a sequence describing the local ICE candidates
              gathered for this <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> and sent in
              <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-onicecandidate" class="internalDFN" data-link-type="dfn"><code>onicecandidate</code></a></code></p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcicetransport" data-dfn-type="dfn" id="dom-rtcicetransport-getremotecandidates" data-title="getRemoteCandidates" data-lt="getRemoteCandidates|getremotecandidates()"><code>getRemoteCandidates</code></dfn></dt>
            <dd>
              <p>Returns a sequence describing the remote ICE candidates
              received by this <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> via
              <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-addicecandidate" class="internalDFN" data-link-type="dfn">addIceCandidate()</a></code></p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcicetransport" data-dfn-type="dfn" id="dom-rtcicetransport-getselectedcandidatepair" data-title="getSelectedCandidatePair" data-lt="getSelectedCandidatePair|getselectedcandidatepair()"><code>getSelectedCandidatePair</code></dfn></dt>
            <dd>
              <p>Returns the selected candidate pair on which packets are sent.
              This method <em class="rfc2119" title="MUST">MUST</em> return the value of the
              <a href="#dfn-selectedcandidatepair" class="internalDFN" data-link-type="dfn">[[SelectedCandidatePair]]</a> slot.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcicetransport" data-dfn-type="dfn" id="dom-rtcicetransport-getlocalparameters" data-title="getLocalParameters" data-lt="getLocalParameters|getlocalparameters()"><code>getLocalParameters</code></dfn></dt>
            <dd>
              <p>Returns the local ICE parameters received by this
              <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> via <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setlocaldescription" class="internalDFN" data-link-type="dfn"><code>setLocalDescription</code></a></code>, or
              <code>null</code> if the parameters have not yet been
              received.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcicetransport" data-dfn-type="dfn" id="dom-rtcicetransport-getremoteparameters" data-title="getRemoteParameters" data-lt="getRemoteParameters|getremoteparameters()"><code>getRemoteParameters</code></dfn></dt>
            <dd>
              <p>Returns the remote ICE parameters received by this
              <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> via <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setremotedescription" class="internalDFN" data-link-type="dfn"><code>setRemoteDescription</code></a></code> or
              <code>null</code> if the parameters have not yet been
              received.</p>
            </dd>
          </dl>
        </section>
      </div>
      <section id="rtciceparameters">
      <h4 id="x5-6-1-rtciceparameters-dictionary"><span class="secno">5.6.1 </span><dfn data-dfn-type="dfn" id="dom-rtciceparameters" data-idl="" data-title="RTCIceParameters" data-dfn-for=""><code>RTCIceParameters</code></dfn> Dictionary</h4>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtciceparameters" data-idl="" data-title="RTCIceParameters">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtciceparameters" class="internalDFN" data-link-type="dfn"><code>RTCIceParameters</code></a></span> {
<span class="idlMember" id="idl-def-rtciceparameters-usernamefragment" data-idl="" data-title="usernameFragment" data-dfn-for="rtciceparameters">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtciceparameters" data-lt="" href="#dom-rtciceparameters-usernamefragment" class="internalDFN" data-link-type="dfn"><code>usernameFragment</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtciceparameters-password" data-idl="" data-title="password" data-dfn-for="rtciceparameters">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtciceparameters" data-lt="" href="#dom-rtciceparameters-password" class="internalDFN" data-link-type="dfn"><code>password</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h5 id="dictionary-rtciceparameters-members">Dictionary <code><a href="#dom-rtciceparameters" class="internalDFN" data-link-type="dfn"><code>RTCIceParameters</code></a></code> Members</h5>
          <dl data-link-for="RTCIceParameters" data-dfn-for="RTCIceParameters" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtciceparameters" data-dfn-type="dfn" id="dom-rtciceparameters-usernamefragment" data-title="usernameFragment"><code>usernameFragment</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>The ICE username fragment as defined in [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>], Section
              7.1.2.3.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtciceparameters" data-dfn-type="dfn" id="dom-rtciceparameters-password" data-title="password"><code>password</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>The ICE password as defined in [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>], Section 7.1.2.3.</p>
            </dd>
          </dl>
        </section>
      </div>
      </section>
      <section id="rtcicecandidatepair">
      <h4 id="x5-6-2-rtcicecandidatepair-dictionary"><span class="secno">5.6.2 </span><dfn data-dfn-type="dfn" id="dom-rtcicecandidatepair" data-idl="" data-title="RTCIceCandidatePair" data-dfn-for=""><code>RTCIceCandidatePair</code></dfn> Dictionary</h4>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcicecandidatepair" data-idl="" data-title="RTCIceCandidatePair">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcicecandidatepair" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidatePair</code></a></span> {
<span class="idlMember" id="idl-def-rtcicecandidatepair-local" data-idl="" data-title="local" data-dfn-for="rtcicecandidatepair">    <span class="idlMemberType"><a href="#dom-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcicecandidatepair" data-lt="" href="#dom-rtcicecandidatepair-local" class="internalDFN" data-link-type="dfn"><code>local</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcicecandidatepair-remote" data-idl="" data-title="remote" data-dfn-for="rtcicecandidatepair">    <span class="idlMemberType"><a href="#dom-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcicecandidatepair" data-lt="" href="#dom-rtcicecandidatepair-remote" class="internalDFN" data-link-type="dfn"><code>remote</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h5 id="dictionary-rtcicecandidatepair-members">Dictionary <code><a href="#dom-rtcicecandidatepair" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidatePair</code></a></code>
          Members</h5>
          <dl data-link-for="RTCIceCandidatePair" data-dfn-for="RTCIceCandidatePair" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtcicecandidatepair" data-dfn-type="dfn" id="dom-rtcicecandidatepair-local" data-title="local"><code>local</code></dfn> of type <span class="idlMemberType"><a href="#dom-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a></span></dt>
            <dd>
              <p>The local ICE candidate.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcicecandidatepair" data-dfn-type="dfn" id="dom-rtcicecandidatepair-remote" data-title="remote"><code>remote</code></dfn> of type <span class="idlMemberType"><a href="#dom-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a></span></dt>
            <dd>
              <p>The remote ICE candidate.</p>
            </dd>
          </dl>
        </section>
      </div>
      </section>
      <section id="rtcicegathererstate">
      <h4 id="x5-6-3-rtcicegathererstate-enum"><span class="secno">5.6.3 </span><dfn data-dfn-type="dfn" id="dom-rtcicegathererstate" data-idl="" data-title="RTCIceGathererState" data-dfn-for=""><code>RTCIceGathererState</code></dfn> Enum</h4>
      <div>
        <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtcicegathererstate" data-idl="" data-title="RTCIceGathererState">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcicegathererstate" class="internalDFN" data-link-type="dfn"><code>RTCIceGathererState</code></a></span> {
    <a href="#dom-rtcicegathererstate-new" class="idlEnumItem">"new"</a>,
    <a href="#dom-rtcicegathererstate-gathering" class="idlEnumItem">"gathering"</a>,
    <a href="#dom-rtcicegathererstate-complete" class="idlEnumItem">"complete"</a>
};</span></pre></div>
        <table data-link-for="RTCIceGathererState" data-dfn-for="RTCIceGathererState" class="simple">
          <tbody>
            <tr>
              <th colspan="2"><code><a href="#dom-rtcicegathererstate" class="internalDFN" data-link-type="dfn"><code>RTCIceGathererState</code></a></code> Enumeration description</th>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcicegathererstate" data-dfn-type="dfn" id="dom-rtcicegathererstate-new" data-title="new"><code>new</code></dfn></td>
              <td>The <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> was just created, and
              has not started gathering candidates yet.</td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcicegathererstate" data-dfn-type="dfn" id="dom-rtcicegathererstate-gathering" data-title="gathering"><code>gathering</code></dfn></td>
              <td>The <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> is in the process of
              gathering candidates.</td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcicegathererstate" data-dfn-type="dfn" id="dom-rtcicegathererstate-complete" data-title="complete"><code>complete</code></dfn></td>
              <td>The <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> has completed
              gathering and the end-of-candidates indication for this transport
              has been sent. It will not gather candidates again until an ICE
              restart causes it to restart.</td>
            </tr>
          </tbody>
        </table>
      </div>
      </section>
      <section id="rtcicetransportstate">
      <h4 id="x5-6-4-rtcicetransportstate-enum"><span class="secno">5.6.4 </span><dfn data-dfn-type="dfn" id="dom-rtcicetransportstate" data-idl="" data-title="RTCIceTransportState" data-dfn-for=""><code>RTCIceTransportState</code></dfn> Enum</h4>
      <div>
        <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtcicetransportstate" data-idl="" data-title="RTCIceTransportState">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcicetransportstate" class="internalDFN" data-link-type="dfn"><code>RTCIceTransportState</code></a></span> {
    <a href="#dom-rtcicetransportstate-new" class="idlEnumItem">"new"</a>,
    <a href="#dom-rtcicetransportstate-checking" class="idlEnumItem">"checking"</a>,
    <a href="#dom-rtcicetransportstate-connected" class="idlEnumItem">"connected"</a>,
    <a href="#dom-rtcicetransportstate-completed" class="idlEnumItem">"completed"</a>,
    <a href="#dom-rtcicetransportstate-disconnected" class="idlEnumItem">"disconnected"</a>,
    <a href="#dom-rtcicetransportstate-failed" class="idlEnumItem">"failed"</a>,
    <a href="#dom-rtcicetransportstate-closed" class="idlEnumItem">"closed"</a>
};</span></pre></div>
        <table data-link-for="RTCIceTransportState" data-dfn-for="RTCIceTransportState" class="simple">
          <tbody>
            <tr>
              <th colspan="2"><code><a href="#dom-rtcicetransportstate" class="internalDFN" data-link-type="dfn"><code>RTCIceTransportState</code></a></code> Enumeration description</th>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcicetransportstate" data-dfn-type="dfn" id="dom-rtcicetransportstate-new" data-title="new"><code>new</code></dfn></td>
              <td>The <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> is gathering
              candidates and/or waiting for remote candidates to be supplied,
              and has not yet started checking.</td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcicetransportstate" data-dfn-type="dfn" id="dom-rtcicetransportstate-checking" data-title="checking"><code>checking</code></dfn></td>
              <td>The <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> has received at least
              one remote candidate and is checking candidate pairs and has
              either not yet found a connection or consent checks [<cite><a class="bibref" href="#bib-RFC7675">RFC7675</a></cite>]
              have failed on all previously successful candidate pairs. In
              addition to checking, it may also still be gathering.</td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcicetransportstate" data-dfn-type="dfn" id="dom-rtcicetransportstate-connected" data-title="connected"><code>connected</code></dfn></td>
              <td>The <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> has found a usable
              connection, but is still checking other candidate pairs to see if
              there is a better connection. It may also still be gathering
              and/or waiting for additional remote candidates. If consent
              checks [<cite><a class="bibref" href="#bib-RFC7675">RFC7675</a></cite>] fail on the connection in use, and there are
              no other successful candidate pairs available, then the state
              transitions to "checking" (if there are candidate pairs remaining
              to be checked) or "disconnected" (if there are no candidate pairs
              to check, but the peer is still gathering and/or waiting for
              additional remote candidates).</td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcicetransportstate" data-dfn-type="dfn" id="dom-rtcicetransportstate-completed" data-title="completed"><code>completed</code></dfn></td>
              <td>The <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> has finished
              gathering, received an indication that there are no more remote
              candidates, finished checking all candidate pairs and found a
              connection. If consent checks [<cite><a class="bibref" href="#bib-RFC7675">RFC7675</a></cite>] subsequently fail on
              all successful candidate pairs, the state transitions to
              "failed".</td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcicetransportstate" data-dfn-type="dfn" id="dom-rtcicetransportstate-disconnected" data-title="disconnected"><code>disconnected</code></dfn></td>
              <td>
                The <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> has determined that connectivity is
                currently lost for this <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>.
                This is a transient state that may
                trigger intermittently (and resolve itself without action) on a
                flaky network. The way this state is determined is
                implementation dependent. Examples include:
                <ul>
                  <li>Losing the network interface for the connection in
                  use.</li>
                  <li>Repeatedly failing to receive a response to STUN
                  requests.</li>
                </ul>Alternatively, the <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> has
                finished checking all existing candidates pairs and not found a
                connection (or consent checks [<cite><a class="bibref" href="#bib-RFC7675">RFC7675</a></cite>] once
                successful, have now failed), but it is still gathering and/or
                waiting for additional remote candidates.
              </td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcicetransportstate" data-dfn-type="dfn" id="dom-rtcicetransportstate-failed" data-title="failed"><code>failed</code></dfn></td>
              <td>The <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> has finished
              gathering, received an indication that there are no more remote
              candidates, finished checking all candidate pairs, and all pairs
              have either failed connectivity checks or have lost consent.
              This is a terminal state.</td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcicetransportstate" data-dfn-type="dfn" id="dom-rtcicetransportstate-closed" data-title="closed"><code>closed</code></dfn></td>
              <td>The <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> has shut down and is
              no longer responding to STUN requests.</td>
            </tr>
          </tbody>
        </table>
      </div>
      <p>An ICE restart causes candidate gathering and connectity checks to
      begin anew, causing a transition to <code>connected</code> if begun in the
      <code>completed</code> state. If begun in the transient
      <code>disconnected</code> state, it causes a transition to
      <code>checking</code>, effectively forgetting that connectivity was
      previously lost.</p>
      <p>The <code>failed</code> and <code>completed</code> states require an
      indication that there are no additional remote candidates. This can be
      indicated by calling <code><a href="#dom-rtcpeerconnection-addicecandidate">addIceCandidate</a></code> with
      a candidate value whose <code>candidate</code> property is set
      to an empty string or by <a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-cantrickleicecandidates" class="internalDFN" data-link-type="dfn"><code>canTrickleIceCandidates</code></a> being set to
      <code>false</code>.</p>
      <p>Some example state transitions are:</p>
      <ul>
        <li>(<code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> first created, as a result of
        <code>setLocalDescription</code> or <code>setRemoteDescription</code>):
        <code>new</code></li>
        <li>(<code>new</code>, remote candidates received):
        <code>checking</code></li>
        <li>(<code>checking</code>, found usable connection):
        <code>connected</code></li>
        <li>(<code>checking</code>, checks fail but gathering still in
        progress): <code>disconnected</code></li>
        <li>(<code>checking</code>, gave up): <code>failed</code></li>
        <li>(<code>disconnected</code>, new local candidates):
        <code>checking</code></li>
        <li>(<code>connected</code>, finished all checks):
        <code>completed</code></li>
        <li>(<code>completed</code>, lost connectivity):
        <code>disconnected</code></li>
        <li>(<code>disconnected</code> or <code>failed</code>, ICE restart occurs):
        <code>checking</code></li>
        <li>(<code>completed</code>, ICE restart occurs):
        <code>connected</code></li>
        <li><code>RTCPeerConnection.close()</code>: <code>closed</code></li>
      </ul>
      <figure id="fig-non-normative-ice-transport-state-transition-diagram">
        <figcaption>Figure <span class="figno">2</span> <span class="fig-title">
          Non-normative ICE transport state transition diagram
        </span></figcaption>
      </figure>
      </section>
      <section id="rtcicerole">
      <h4 id="x5-6-5-rtcicerole-enum"><span class="secno">5.6.5 </span><dfn data-dfn-type="dfn" id="dom-rtcicerole" data-idl="" data-title="RTCIceRole" data-dfn-for=""><code>RTCIceRole</code></dfn> Enum</h4>
      <div>
        <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtcicerole" data-idl="" data-title="RTCIceRole">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcicerole" class="internalDFN" data-link-type="dfn"><code>RTCIceRole</code></a></span> {
    <a href="#dom-rtcicerole-controlling" class="idlEnumItem">"controlling"</a>,
    <a href="#dom-rtcicerole-controlled" class="idlEnumItem">"controlled"</a>
};</span></pre></div>
        <table data-link-for="RTCIceRole" data-dfn-for="RTCIceRole" class="simple">
          <tbody>
            <tr>
              <th colspan="2"><code><a href="#dom-rtcicerole" class="internalDFN" data-link-type="dfn"><code>RTCIceRole</code></a></code> Enumeration description</th>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcicerole" data-dfn-type="dfn" id="dom-rtcicerole-controlling" data-title="controlling"><code>controlling</code></dfn></td>
              <td>A controlling agent as defined by [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>], Section 3.</td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcicerole" data-dfn-type="dfn" id="dom-rtcicerole-controlled" data-title="controlled"><code>controlled</code></dfn></td>
              <td>A controlled agent as defined by [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>], Section 3.</td>
            </tr>
          </tbody>
        </table>
      </div>
      </section>
      <section id="rtcicecomponent">
      <h4 id="x5-6-6-rtcicecomponent-enum"><span class="secno">5.6.6 </span><dfn data-dfn-type="dfn" id="dom-rtcicecomponent" data-idl="" data-title="RTCIceComponent" data-dfn-for=""><code>RTCIceComponent</code></dfn> Enum</h4>
      <div>
        <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtcicecomponent" data-idl="" data-title="RTCIceComponent">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcicecomponent" class="internalDFN" data-link-type="dfn"><code>RTCIceComponent</code></a></span> {
    <a href="#dom-rtcicecomponent-rtp" class="idlEnumItem">"rtp"</a>,
    <a href="#dom-rtcicecomponent-rtcp" class="idlEnumItem">"rtcp"</a>
};</span></pre></div>
        <table data-link-for="RTCIceComponent" data-dfn-for="RTCIceComponent" class="simple">
          <tbody>
            <tr>
              <th colspan="2"><code><a href="#dom-rtcicecomponent" class="internalDFN" data-link-type="dfn"><code>RTCIceComponent</code></a></code> Enumeration description</th>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcicecomponent" data-dfn-type="dfn" id="dom-rtcicecomponent-rtp" data-title="rtp"><code>rtp</code></dfn></td>
              <td>The ICE Transport is used for RTP (or RTCP multiplexing),
              as defined in [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>], Section 4.1.1.1. Protocols multiplexed
              with RTP (e.g. data channel) share its component ID. This represents
              the <code>component-id</code> value <code>1</code> when encoded
              in <a href="#dfn-candidate-attribute" class="internalDFN" data-link-type="dfn"><code>candidate-attribute</code></a>.</td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcicecomponent" data-dfn-type="dfn" id="dom-rtcicecomponent-rtcp" data-title="rtcp"><code>rtcp</code></dfn></td>
              <td>The ICE Transport is used for RTCP as defined by [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>],
              Section 4.1.1.1. This represents the <code>component-id</code>
              value <code>2</code> when encoded in
              <a href="#dfn-candidate-attribute" class="internalDFN" data-link-type="dfn"><code>candidate-attribute</code></a>.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
    </section>
    <section id="rtctrackevent">
      <h3 id="x5-7-rtctrackevent"><span class="secno">5.7 </span><dfn data-dfn-type="dfn" id="dom-rtctrackevent" data-idl="" data-title="RTCTrackEvent" data-dfn-for=""><code>RTCTrackEvent</code></dfn></h3>
      <p>The <code><a href="#event-track" class="internalDFN" data-link-type="dfn"><code>track</code></a></code> event uses the
      <code><a href="#dom-rtctrackevent" class="internalDFN" data-link-type="dfn"><code>RTCTrackEvent</code></a></code> interface.</p>
      <p><dfn id="fire-track-event" data-lt="fire a track event|firing a track event named e" data-dfn-type="dfn">Firing a
      track event named <var>e</var></dfn> with an
      <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> <var>receiver</var>, a
      <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code> <var>track</var> and a
      <code>MediaStream</code>[] <var>streams</var>, means that an event with
      the name <var>e</var>, which does not bubble (except where otherwise
      stated) and is not cancelable (except where otherwise stated), and which
      uses the <code><a href="#dom-rtctrackevent" class="internalDFN" data-link-type="dfn"><code>RTCTrackEvent</code></a></code> interface with the
      <code><a data-link-for="RTCTrackEvent" href="#dom-rtctrackevent-receiver" class="internalDFN" data-link-type="dfn"><code>receiver</code></a></code> attribute set to
      <var>receiver</var>, <code><a data-link-for="RTCTrackEvent" href="#dom-rtctrackevent-track" class="internalDFN" data-link-type="dfn"><code>track</code></a></code>
      attribute set to <var>track</var>, <code><a data-link-for="RTCTrackEvent" href="#dom-rtctrackevent-streams" class="internalDFN" data-link-type="dfn"><code>streams</code></a></code> attribute set to <var>streams</var>,
      <em class="rfc2119" title="MUST">MUST</em> be created and dispatched at the given target.</p>
      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtctrackevent" data-idl="" data-title="RTCTrackEvent">[<span class="idlCtor"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span></span>, <span class="idlParam"><span class="idlParamType"><a href="#dom-rtctrackeventinit" class="internalDFN" data-link-type="dfn"><code>RTCTrackEventInit</code></a></span> <span class="idlParamName">eventInitDict</span></span>)</span>,
 <span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtctrackevent" class="internalDFN" data-link-type="dfn"><code>RTCTrackEvent</code></a></span> : <span class="idlSuperclass"><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></span> {
<span class="idlAttribute" id="idl-def-rtctrackevent-receiver" data-idl="" data-title="receiver" data-dfn-for="rtctrackevent">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></span>           <span class="idlAttrName"><a data-no-default="" data-link-for="rtctrackevent" data-lt="" href="#dom-rtctrackevent-receiver" class="internalDFN" data-link-type="dfn"><code>receiver</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtctrackevent-track" data-idl="" data-title="track" data-dfn-for="rtctrackevent">    readonly attribute <span class="idlAttrType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span>         <span class="idlAttrName"><a data-no-default="" data-link-for="rtctrackevent" data-lt="" href="#dom-rtctrackevent-track" class="internalDFN" data-link-type="dfn"><code>track</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtctrackevent-streams" data-idl="" data-title="streams" data-dfn-for="rtctrackevent">    [<span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#SameObject">SameObject</a></span></span>]
    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-frozen-array">FrozenArray</a>&lt;<a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a>&gt;</span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtctrackevent" data-lt="" href="#dom-rtctrackevent-streams" class="internalDFN" data-link-type="dfn"><code>streams</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtctrackevent-transceiver" data-idl="" data-title="transceiver" data-dfn-for="rtctrackevent">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></span>        <span class="idlAttrName"><a data-no-default="" data-link-for="rtctrackevent" data-lt="" href="#dom-rtctrackevent-transceiver" class="internalDFN" data-link-type="dfn"><code>transceiver</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="constructors-3">Constructors</h4>
          <dl data-link-for="RTCTrackEvent" data-dfn-for="RTCTrackEvent" class="constructors">
            <dt><code>RTCTrackEvent</code></dt>
            <dd>
            </dd>
          </dl>
        </section>
        <section>
          <h4 id="attributes-12">Attributes</h4>
          <dl data-link-for="RTCTrackEvent" data-dfn-for="RTCTrackEvent" class="attributes">
            <dt><code>receiver</code> of type <span class="idlAttrType"><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtctrackevent-receiver" data-dfn-for="rtctrackevent" data-dfn-type="dfn" data-idl="" data-title="receiver"><code>receiver</code></dfn> attribute
              represents the <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> object
              associated with the event.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtctrackevent" data-dfn-type="dfn" id="dom-rtctrackevent-track" data-title="track"><code>track</code></dfn> of type <span class="idlAttrType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span>, readonly</dt>
            <dd>
              <p>The <code>track</code> attribute represents the
              <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code> object that is associated
              with the <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> identified by
              <code>receiver</code>.</p>
            </dd>
            <dt><code>streams</code> of type <span class="idlAttrType">FrozenArray&lt;<a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a>&gt;</span>,
            readonly</dt>
            <dd>
              <p>The <dfn data-idl="" data-dfn-for="rtctrackevent" data-dfn-type="dfn" id="dom-rtctrackevent-streams" data-title="streams"><code>streams</code></dfn> attribute returns an array
              of <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> objects representing the
              <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code>s that this event's
              <code>track</code> is a part of.</p>
            </dd>
            <dt><code>transceiver</code> of type <span class="idlAttrType"><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtctrackevent-transceiver" data-dfn-for="rtctrackevent" data-dfn-type="dfn" data-idl="" data-title="transceiver"><code>transceiver</code></dfn>
              attribute represents the <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>
              object associated with the event.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtctrackeventinit" data-idl="" data-title="RTCTrackEventInit">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtctrackeventinit" class="internalDFN" data-link-type="dfn"><code>RTCTrackEventInit</code></a></span> : <span class="idlSuperclass">EventInit</span> {
<span class="idlMember" id="idl-def-rtctrackeventinit-receiver" data-idl="" data-title="receiver" data-dfn-for="rtctrackeventinit">    required <span class="idlMemberType"><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></span>        <span class="idlMemberName"><a data-no-default="" data-link-for="rtctrackeventinit" data-lt="" href="#dom-rtctrackeventinit-receiver" class="internalDFN" data-link-type="dfn"><code>receiver</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtctrackeventinit-track" data-idl="" data-title="track" data-dfn-for="rtctrackeventinit">    required <span class="idlMemberType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span>      <span class="idlMemberName"><a data-no-default="" data-link-for="rtctrackeventinit" data-lt="" href="#dom-rtctrackeventinit-track" class="internalDFN" data-link-type="dfn"><code>track</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtctrackeventinit-streams" data-idl="" data-title="streams" data-dfn-for="rtctrackeventinit">             <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a>&gt;</span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtctrackeventinit" data-lt="" href="#dom-rtctrackeventinit-streams" class="internalDFN" data-link-type="dfn"><code>streams</code></a></span> = <span class="idlMemberValue">[]</span>;</span>
<span class="idlMember" id="idl-def-rtctrackeventinit-transceiver" data-idl="" data-title="transceiver" data-dfn-for="rtctrackeventinit">    required <span class="idlMemberType"><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></span>     <span class="idlMemberName"><a data-no-default="" data-link-for="rtctrackeventinit" data-lt="" href="#dom-rtctrackeventinit-transceiver" class="internalDFN" data-link-type="dfn"><code>transceiver</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="dictionary-rtctrackeventinit-members">Dictionary <dfn data-dfn-type="dfn" id="dom-rtctrackeventinit" data-idl="" data-title="RTCTrackEventInit" data-dfn-for=""><code>RTCTrackEventInit</code></dfn> Members</h4>
          <dl data-link-for="RTCTrackEventInit" data-dfn-for="RTCTrackEventInit" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtctrackeventinit" data-dfn-type="dfn" id="dom-rtctrackeventinit-receiver" data-title="receiver"><code>receiver</code></dfn> of type <span class="idlMemberType"><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></span>, required</dt>
            <dd>
              <p>The <code>receiver</code> attribute represents the
              <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> object associated with the
              event.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtctrackeventinit" data-dfn-type="dfn" id="dom-rtctrackeventinit-track" data-title="track"><code>track</code></dfn> of type <span class="idlMemberType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span>, required</dt>
            <dd>
              <p>The <code>track</code> attribute represents the
              <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code> object that is associated
              with the <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> identified by
              <code>receiver</code>.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtctrackeventinit" data-dfn-type="dfn" id="dom-rtctrackeventinit-streams" data-title="streams"><code>streams</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a>&gt;</span>,
            defaulting to <code>[]</code></dt>
            <dd>
              <p>The <code>streams</code> attribute returns an array of
              <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> objects representing the
              <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code>s that this event's
              <code>track</code> is a part of.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtctrackeventinit" data-dfn-type="dfn" id="dom-rtctrackeventinit-transceiver" data-title="transceiver"><code>transceiver</code></dfn> of type <span class="idlMemberType"><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></span>, required</dt>
            <dd>
              <p>The <code>transceiver</code> attribute represents the
              <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> object associated with the
              event.</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>
  </section>
  <section id="peer-to-peer-data-api">
    <!--OddPage--><h2 id="x6-peer-to-peer-data-api"><span class="secno">6. </span>Peer-to-peer Data API</h2>
    <p>The Peer-to-peer Data API lets a web application send and receive
    generic application data peer-to-peer. The API for sending and receiving
    data models the behavior of WebSockets [<cite><a class="bibref" href="#bib-WEBSOCKETS-API">WEBSOCKETS-API</a></cite>].</p>
    <section id="rtcpeerconnection-interface-extensions-0">
      <h3 id="x6-1-rtcpeerconnection-interface-extensions"><span class="secno">6.1 </span>RTCPeerConnection Interface Extensions</h3>
      <p>The Peer-to-peer data API extends the
      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> interface as described below.</p>
      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcpeerconnection-partial-4" data-idl="" data-title="RTCPeerConnection">partial interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></span> {
<span class="idlAttribute" id="idl-def-rtcpeerconnection-sctp" data-idl="" data-title="sctp" data-dfn-for="rtcpeerconnection">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransport</code></a>?</span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-sctp" class="internalDFN" data-link-type="dfn"><code>sctp</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-createdatachannel-label-datachanneldict" data-idl="" data-title="createDataChannel" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="createDataChannel|createdatachannel()" href="#dom-rtcpeerconnection-createdatachannel" class="internalDFN" data-link-type="dfn"><code>createDataChannel</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span> <span class="idlParamName">label</span></span>,
                                     <span class="idlParam">optional <span class="idlParamType"><a href="#dom-rtcdatachannelinit" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelInit</code></a></span> <span class="idlParamName">dataChannelDict</span></span>);</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-ondatachannel" data-idl="" data-title="ondatachannel" data-dfn-for="rtcpeerconnection">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span>      <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-ondatachannel" class="internalDFN" data-link-type="dfn"><code>ondatachannel</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="attributes-13">Attributes</h4>
          <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="attributes">
            <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-sctp" data-title="sctp"><code>sctp</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransport</code></a></span>, readonly,
            nullable</dt>
            <dd>
              <p>The SCTP transport over which SCTP data is sent and received.
              If SCTP has not been negotiated, the value is null. This
              attribute <em class="rfc2119" title="MUST">MUST</em> return the <code><a href="#dom-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransport</code></a></code>
              object stored in the <a href="#dfn-sctptransport" class="internalDFN" data-link-type="dfn">[[SctpTransport]]</a>
              internal slot.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-ondatachannel" data-title="ondatachannel"><code>ondatachannel</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd>The event type of this event handler is
            <code><a href="#event-datachannel" class="internalDFN" data-link-type="dfn"><code>datachannel</code></a></code>.</dd>
          </dl>
        </section>
        <section>
          <h4 id="methods-11">Methods</h4>
          <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="methods">
            <dt><code>createDataChannel</code></dt>
            <dd>
              <p>Creates a new <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object with
              the given label. The <code><a href="#dom-rtcdatachannelinit" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelInit</code></a></code>
              dictionary can be used to configure properties of the underlying
              channel such as <!--priority and--> data reliability.</p>
              <p>When the <dfn id="dom-rtcpeerconnection-createdatachannel" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl="" data-title="createDataChannel" data-lt="createDataChannel|createdatachannel()"><code>createDataChannel</code></dfn>
              method is invoked, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following
              steps.</p>
              <ol>
                <li>
                  <p>Let <var>connection</var> be the
                  <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object on which the
                  method is invoked.</p>
                </li>
                <li>
                  <p>If <var>connection</var>'s <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is
                  <code>true</code>, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an
                  <code>InvalidStateError</code>.</p>
                </li>
                <li>
                  <p><a href="#dfn-create-an-rtcdatachannel" class="internalDFN" data-link-type="dfn">Create an <code>RTCDataChannel</code></a>,
                  <var>channel</var>.</p>
                </li>
                <li>
                  <p>Initialize <var>channel</var>'s
                  <a href="#dfn-datachannellabel" class="internalDFN" data-link-type="dfn">[[DataChannelLabel]]</a> slot to the value of the first
                  argument.</p>
                </li>
                <li>If <a href="#dfn-datachannellabel" class="internalDFN" data-link-type="dfn">[[DataChannelLabel]]</a>
                is longer than 65535 bytes, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> a
                <code>TypeError</code>.
                </li>
                <li>
                  <p>Let <var>options</var> be the second argument.</p>
                </li>
                <li>
                  <p>Initialize <var>channel</var>'s <a href="#dfn-maxpacketlifetime" class="internalDFN" data-link-type="dfn">[[MaxPacketLifeTime]]</a>
                  slot to <var>option</var>'s
                  <code>maxPacketLifeTime</code> member, if present, otherwise
                  <code>null</code>.</p>
                </li>
                <li>
                  <p>Initialize <var>channel</var>'s <a href="#dfn-maxretransmits" class="internalDFN" data-link-type="dfn">[[MaxRetransmits]]</a>
                  slot to <var>option</var>'s <code>maxRetransmits</code>
                  member, if present, otherwise <code>null</code>.</p>
                </li>
                <li>
                  <p>Initialize <var>channel</var>'s <a href="#dfn-ordered" class="internalDFN" data-link-type="dfn">[[Ordered]]</a> slot
                  to <var>option</var>'s <code>ordered</code> member.</p>
                </li>
                <li>
                  <p>Initialize <var>channel</var>'s
                  <a href="#dfn-datachannelprotocol" class="internalDFN" data-link-type="dfn">[[DataChannelProtocol]]</a> slot to <var>option</var>'s
                  <code>protocol</code> member.</p>
                </li>
                <li>If <a href="#dfn-datachannelprotocol" class="internalDFN" data-link-type="dfn">[[DataChannelProtocol]]</a> is longer than
                65535 bytes long, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> a <code>TypeError</code>.
                </li>
                <li>
                  <p>Initialize <var>channel</var>'s <a href="#dfn-negotiated" class="internalDFN" data-link-type="dfn">[[Negotiated]]</a>
                  slot to <var>option</var>'s <code>negotiated</code> member.</p>
                </li>
                <li>
                  <p>Initialize <var>channel</var>'s <a href="#dfn-datachannelid" class="internalDFN" data-link-type="dfn">[[DataChannelId]]</a>
                  slot to the value of <var>option</var>'s
                  <code>id</code> member, if it is present and
                  <a href="#dfn-negotiated" class="internalDFN" data-link-type="dfn">[[Negotiated]]</a> is true, otherwise
                  <code>null</code>.</p>
                  <div class="note"><div role="heading" class="note-title marker" id="h-note-32" aria-level="5"><span>Note</span></div><div class="">
                    This means the <code>id</code> member will be ignored if
                    the data channel is negotiated in-band; this is
                    intentional. Data channels negotiated in-band should have
                    IDs selected based on the DTLS role, as specified in
                    [<cite><a class="bibref" href="#bib-RTCWEB-DATA-PROTOCOL">RTCWEB-DATA-PROTOCOL</a></cite>].
                  </div></div>
                </li>
                <li>
                  <p>If <a href="#dfn-negotiated" class="internalDFN" data-link-type="dfn">[[Negotiated]]</a> is <code>true</code> and
                  <a href="#dfn-datachannelid" class="internalDFN" data-link-type="dfn">[[DataChannelId]]</a> is <code>null</code>, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a>
                  a <code>TypeError</code>.</p>
                </li>
                <li>
                  <p>Initialize <var>channel</var>'s
                  <a href="#dfn-datachannelpriority" class="internalDFN" data-link-type="dfn">[[DataChannelPriority]]</a> slot to <var>option</var>'s
                  <code>priority</code> member.</p>
                </li>
                <li>
                  <p>If both <a href="#dfn-maxpacketlifetime" class="internalDFN" data-link-type="dfn">[[MaxPacketLifeTime]]</a> and
                  <a href="#dfn-maxretransmits" class="internalDFN" data-link-type="dfn">[[MaxRetransmits]]</a>
                  attributes are set (not null), <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> a
                  <code>TypeError</code>.</p>
                </li>
                <li>
                  <p>If a setting, either <a href="#dfn-maxpacketlifetime" class="internalDFN" data-link-type="dfn">[[MaxPacketLifeTime]]</a> or
                  <a href="#dfn-maxretransmits" class="internalDFN" data-link-type="dfn">[[MaxRetransmits]]</a>,
                  has been set to indicate unreliable mode, and that value
                  exceeds the maximum value supported by the user agent, the
                  value <em class="rfc2119" title="MUST">MUST</em> be set to the user agents maximum value.</p>
                </li>
                <li>
                  <p>If <a href="#dfn-datachannelid" class="internalDFN" data-link-type="dfn">[[DataChannelId]]</a> is
                  equal to 65535, which is greater than the maximum allowed ID
                  of 65534 but still qualifies as an <span class="idlMemberType">unsigned short</span>, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> a
                  <code>TypeError</code>.</p>
                </li><li>
                  <p>If the <a href="#dfn-datachannelid" class="internalDFN" data-link-type="dfn">[[DataChannelId]]</a>
                  slot is <code>null</code> (due to no ID being passed into
                  <code>createDataChannel</code>, or <a href="#dfn-negotiated" class="internalDFN" data-link-type="dfn">[[Negotiated]]</a> being false),
                  and the DTLS role of the SCTP transport has already been
                  negotiated, then initialize <a href="#dfn-datachannelid" class="internalDFN" data-link-type="dfn">[[DataChannelId]]</a>
                  to a value generated by the
                  user agent, according to [<cite><a class="bibref" href="#bib-RTCWEB-DATA-PROTOCOL">RTCWEB-DATA-PROTOCOL</a></cite>], and skip to
                  the next step. If no available ID could be generated, or if
                  the value of the <a href="#dfn-datachannelid" class="internalDFN" data-link-type="dfn">[[DataChannelId]]</a> slot
                  is being used by an existing <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>,
                  <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an <code>OperationError</code> exception.</p>
                  <div class="note"><div role="heading" class="note-title marker" id="h-note-33" aria-level="5"><span>Note</span></div><div class="">
                    If the <a href="#dfn-datachannelid" class="internalDFN" data-link-type="dfn">[[DataChannelId]]</a>
                    slot is <code>null</code> after this step, it will be
                    populated once the DTLS role is determined during the
                    process of <a data-lt="set the RTCSessionDescription" href="#set-description" class="internalDFN" data-link-type="dfn">
                    setting an <code>RTCSessionDescription</code></a>.
                  </div></div>
                </li>
                <li>
                  <p>Let <var>transport</var> be the <var>connection</var>'s
                  <a href="#dfn-sctptransport" class="internalDFN" data-link-type="dfn">[[SctpTransport]]</a> slot.</p>
                  <p>If the <a href="#dfn-datachannelid" class="internalDFN" data-link-type="dfn">[[DataChannelId]]</a> slot is not
                  <code>null</code>, <var>transport</var> is in the
                  <code>connected</code> state and <a href="#dfn-datachannelid" class="internalDFN" data-link-type="dfn">[[DataChannelId]]</a> is
                  greater or equal to the <var>transport</var>'s
                  <a href="#dfn-maxchannels" class="internalDFN" data-link-type="dfn">[[MaxChannels]]</a> slot, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an
                  <code>OperationError</code>.</p>
                </li>
                <li>
                  <p>If <var>channel</var> is the first
                  <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> created on
                  <var>connection</var>, <a href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">update the
                  negotiation-needed flag</a> for <var>connection</var>.</p>
                </li>
                <li>
                  <p>Return <var>channel</var> and continue the following steps
                  in parallel.</p>
                </li>
                <li>
                  <p>Create <var>channel</var>'s associated <a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">underlying data
                  transport</a> and configure it according to the relevant
                  properties of <var>channel</var>.</p>
                </li>
              </ol>
            </dd>
          </dl>
        </section>
      </div>
      <section id="rtcsctptransport-interface">
        <h4 id="x6-1-1-rtcsctptransport-interface"><span class="secno">6.1.1 </span><dfn data-dfn-type="dfn" id="dom-rtcsctptransport" data-idl="" data-title="RTCSctpTransport" data-dfn-for=""><code>RTCSctpTransport</code></dfn> Interface</h4>
        <p>The <code><a href="#dom-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransport</code></a></code> interface allows an
        application access to information about the SCTP data channels tied to
        a particular SCTP association.</p>
        <section>
          <h5 id="sctp-transport-create"><span class="secno">6.1.1.1 </span>Create an instance</h5>
          <p>To <dfn data-dfn-type="dfn" id="dfn-create-an-rtcsctptransport">create an <code><a href="#dom-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransport</code></a></code></dfn> with an
          optional initial state, <var>initialState</var>, run the following
          steps:</p>
          <ol>
            <li>
              <p>Let <var>transport</var> be a new <code>
              <a href="#dom-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransport</code></a></code> object.</p>
            </li>
            <li>
              <p>Let <var>transport</var> have a
              <dfn data-dfn-type="dfn" id="dfn-sctptransportstate">[[SctpTransportState]]</dfn> internal slot initialized to
              <var>initialState</var>, if provided, otherwise
              <code>"new"</code>.</p>
            </li>
            <li>
              <p>Let <var>transport</var> have a <dfn data-dfn-type="dfn" id="dfn-maxmessagesize">[[MaxMessageSize]]</dfn>
              internal slot and run the steps labeled <a href="#dfn-update-the-data-max-message-size" class="internalDFN" data-link-type="dfn">update the data max
              message size</a> to initialize it.</p>
            </li>
            <li>
              <p>Let <var>transport</var> have a <dfn data-dfn-type="dfn" id="dfn-maxchannels">[[MaxChannels]]</dfn>
              internal slot initialized to <code>null</code>.</p>
            </li>
            <li>
              <p>Return <var>transport</var>.</p>
            </li>
          </ol>
        </section>
        <section>
          <h5 id="sctp-transport-update-mms"><span class="secno">6.1.1.2 </span>Update max message
          size</h5>
          <p>To <dfn data-dfn-type="dfn" id="dfn-update-the-data-max-message-size">update the data max message size</dfn> of an <code>
          <a href="#dom-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransport</code></a></code> run the following
          steps:</p>
          <ol>
            <li>
              <p>Let <var>transport</var> be the <code><a href="#dom-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransport</code></a>
              </code> object to be updated.</p>
            </li>
            <li>
              <p>Let <var>remoteMaxMessageSize</var> be the value of the
              "max-message-size" SDP attribute read from the remote description,
              as described in [<cite><a class="bibref" href="#bib-SCTP-SDP">SCTP-SDP</a></cite>] (section 6), or 65536 if the
              attribute is missing.</p>
            </li>
            <li>
              <p>Let <var>canSendSize</var> be the number of bytes that this
              client can send (i.e. the size of the local send buffer) or 0 if
              the implementation can handle messages of any size.</p>
            </li>
            <li>
              <p>If both <var>remoteMaxMessageSize</var> and
              <var>canSendSize</var> are 0, set <a href="#dfn-maxmessagesize" class="internalDFN" data-link-type="dfn">[[MaxMessageSize]]</a> to the
              positive Infinity value.</p>
            </li>
            <li>
              <p>Else, if either <var>remoteMaxMessageSize</var> or
              <var>canSendSize</var> is 0, set <a href="#dfn-maxmessagesize" class="internalDFN" data-link-type="dfn">[[MaxMessageSize]]</a> to the
              larger of the two.</p>
            </li>
            <li>
              <p>Else, set <a href="#dfn-maxmessagesize" class="internalDFN" data-link-type="dfn">[[MaxMessageSize]]</a> to the smaller of
              <var>remoteMaxMessageSize</var> or <var>canSendSize</var>.</p>
            </li>
          </ol>
        </section>
        <section>
          <h5 id="sctp-transport-connected"><span class="secno">6.1.1.3 </span>Connected procedure</h5>
          <p><dfn data-lt="rtcsctptransport connected|once an sctp transport is connected" data-dfn-type="dfn" id="dfn-rtcsctptransport-connected">Once an SCTP transport
          is connected</dfn>, meaning the SCTP association of an <code><a href="#dom-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>
          RTCSctpTransport</code></a></code> has been established, run the following
          steps:</p>
          <ol>
            <li>
              <p>Let <var>transport</var> be the <code><a href="#dom-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransport</code></a>
              </code> object.</p>
            </li>
            <li>
              <p>Let <var>connection</var> be the
              <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object associated with
              <var>transport</var>.</p>
            </li>
            <li>
              <p>Set <a href="#dfn-maxchannels" class="internalDFN" data-link-type="dfn">[[MaxChannels]]</a> to the minimum of the negotiated
              amount of incoming and outgoing SCTP streams.</p>
            </li>
            <li>
              <p>Fire a simple event named <code><a data-lt="
              RTCSctpTransport state change" href="#event-sctptransport-statechange" class="internalDFN" data-link-type="dfn"><code>statechange</code></a></code> at <var>
              transport</var>.</p>
            </li>
            <li>
              <p>For each of <var>connection</var>'s <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>:</p>
              <ol>
                <li>
                  <p>Let <var>channel</var> be the <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object.</p>
                </li>
                <li>
                  <p>If the <var>channel</var>'s <a href="#dfn-datachannelid" class="internalDFN" data-link-type="dfn">[[DataChannelId]]</a> slot is greater or
                  equal to <var>transport</var>'s <a href="#dfn-maxchannels" class="internalDFN" data-link-type="dfn">[[MaxChannels]]</a> slot,
                  <a data-lt="data-channel-failure" href="#dfn-data-channel-failure" class="internalDFN" data-link-type="dfn"> close the <var>channel</var> due to a failure
                  </a>. Otherwise, <a data-lt="announce the rtcdatachannel as open" href="#announce-datachannel-open" class="internalDFN" data-link-type="dfn">announce the
                  <var>channel</var> as open</a>.</p>
                </li>
              </ol>
            </li>
          </ol>
        </section>
        <div>
          <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcsctptransport" data-idl="" data-title="RTCSctpTransport">[<span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransport</code></a></span> {
<span class="idlAttribute" id="idl-def-rtcsctptransport-transport" data-idl="" data-title="transport" data-dfn-for="rtcsctptransport">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></span>      <span class="idlAttrName"><a data-no-default="" data-link-for="rtcsctptransport" data-lt="" href="#dom-rtcsctptransport-transport" class="internalDFN" data-link-type="dfn"><code>transport</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcsctptransport-state" data-idl="" data-title="state" data-dfn-for="rtcsctptransport">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcsctptransportstate" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransportState</code></a></span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcsctptransport" data-lt="" href="#dom-rtcsctptransport-state" class="internalDFN" data-link-type="dfn"><code>state</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcsctptransport-maxmessagesize" data-idl="" data-title="maxMessageSize" data-dfn-for="rtcsctptransport">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-unrestricted-double">unrestricted double</a></span>   <span class="idlAttrName"><a data-no-default="" data-link-for="rtcsctptransport" data-lt="" href="#dom-rtcsctptransport-maxmessagesize" class="internalDFN" data-link-type="dfn"><code>maxMessageSize</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcsctptransport-maxchannels" data-idl="" data-title="maxChannels" data-dfn-for="rtcsctptransport">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-unsigned-short">unsigned short</a>?</span>       <span class="idlAttrName"><a data-no-default="" data-link-for="rtcsctptransport" data-lt="" href="#dom-rtcsctptransport-maxchannels" class="internalDFN" data-link-type="dfn"><code>maxChannels</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcsctptransport-onstatechange" data-idl="" data-title="onstatechange" data-dfn-for="rtcsctptransport">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span>          <span class="idlAttrName"><a data-no-default="" data-link-for="rtcsctptransport" data-lt="" href="#dom-rtcsctptransport-onstatechange" class="internalDFN" data-link-type="dfn"><code>onstatechange</code></a></span>;</span>
};</span></pre></div>
          <section>
            <h5 id="attributes-14">Attributes</h5>
            <dl data-link-for="RTCSctpTransport" data-dfn-for="RTCSctpTransport" class="attributes">
              <dt><dfn data-idl="" data-dfn-for="rtcsctptransport" data-dfn-type="dfn" id="dom-rtcsctptransport-transport" data-title="transport"><code>transport</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></span>, readonly</dt>
              <dd>
                <p>The transport over which all SCTP packets for data channels
                will be sent and received.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcsctptransport" data-dfn-type="dfn" id="dom-rtcsctptransport-state" data-title="state"><code>state</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcsctptransportstate" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransportState</code></a></span>, readonly</dt>
              <dd>
                <p>The current state of the SCTP transport. On getting, this
                attribute <em class="rfc2119" title="MUST">MUST</em> return the value of the
                <a href="#dfn-sctptransportstate" class="internalDFN" data-link-type="dfn">[[SctpTransportState]]</a> slot.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcsctptransport" data-dfn-type="dfn" id="dom-rtcsctptransport-maxmessagesize" data-title="maxMessageSize"><code>maxMessageSize</code></dfn> of type <span class="idlAttrType">unrestricted double</span>, readonly</dt>
              <dd>
                <p>The maximum size of data that can be passed to
                <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>'s <code><a data-link-for="RTCDataChannel" href="#dfn-send" class="internalDFN" data-link-type="dfn">send()</a></code> method. The attribute <em class="rfc2119" title="MUST">MUST</em>,
                on getting, return the value of the <a href="#dfn-maxmessagesize" class="internalDFN" data-link-type="dfn">[[MaxMessageSize]]</a>
                slot.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcsctptransport" data-dfn-type="dfn" id="dom-rtcsctptransport-maxchannels" data-title="maxChannels"><code>maxChannels</code></dfn> of type
              <span class="idlAttrType">unsigned short</span>
              , readonly, nullable</dt>
              <dd>
                <p>The maximum amount of <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>'s
                that can be used simultaneously. The attribute <em class="rfc2119" title="MUST">MUST</em>, on
                getting, return the value of the <a href="#dfn-maxchannels" class="internalDFN" data-link-type="dfn">[[MaxChannels]]</a> slot.
                </p>
                <div class="note"><div role="heading" class="note-title marker" id="h-note-34" aria-level="6"><span>Note</span></div><div class="">This attribute's value will be
                <code>null</code> until the SCTP transport went into the
                <code>connected</code> state.
                </div></div>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcsctptransport" data-dfn-type="dfn" id="dom-rtcsctptransport-onstatechange" data-title="onstatechange"><code>onstatechange</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
              <dd>
                <p>The event type of this event handler is
                <code><a data-lt="RTCSctpTransport state change" href="#event-sctptransport-statechange" class="internalDFN" data-link-type="dfn"><code>statechange</code></a></code>.</p>
              </dd>
            </dl>
          </section>
        </div>
      </section>
      <section id="rtcsctptransportstate">
        <h4 id="x6-1-2-rtcsctptransportstate-enum"><span class="secno">6.1.2 </span><dfn data-dfn-type="dfn" id="dom-rtcsctptransportstate" data-idl="" data-title="RTCSctpTransportState" data-dfn-for=""><code>RTCSctpTransportState</code></dfn> Enum</h4>
        <p><code>RTCSctpTransportState</code> indicates the state of the SCTP
        transport.</p>
        <div>
          <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtcsctptransportstate" data-idl="" data-title="RTCSctpTransportState">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcsctptransportstate" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransportState</code></a></span> {
    <a href="#dom-rtcsctptransportstate-new" class="idlEnumItem">"new"</a>,
    <a href="#dom-rtcsctptransportstate-connecting" class="idlEnumItem">"connecting"</a>,
    <a href="#dom-rtcsctptransportstate-connected" class="idlEnumItem">"connected"</a>,
    <a href="#dom-rtcsctptransportstate-closed" class="idlEnumItem">"closed"</a>
};</span></pre></div>
          <table data-link-for="RTCSctpTransportState" data-dfn-for="RTCSctpTransportState" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description</th>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcsctptransportstate" data-dfn-type="dfn" id="dom-rtcsctptransportstate-new" data-title="new"><code id="idl-def-RTCSctpTransportState.new">new</code></dfn></td>
                <td>
                  <p>The <code><a href="#dom-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransport</code></a></code>
                  has not started negotiating yet.</p>
                </td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcsctptransportstate" data-dfn-type="dfn" id="dom-rtcsctptransportstate-connecting" data-title="connecting"><code id="idl-def-RTCSctpTransportState.connecting">connecting</code></dfn></td>
                <td>
                  <p>The <code><a href="#dom-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransport</code></a></code> is in the process of
                  negotiating an association. This is the initial state when an
                  <code><a href="#dom-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransport</code></a></code> is created by applying
                  an Answer.</p>
                </td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcsctptransportstate" data-dfn-type="dfn" id="dom-rtcsctptransportstate-connected" data-title="connected"><code id="idl-def-RTCSctpTransportState.connected">connected</code></dfn></td>
                <td>
                  <p>The <code><a href="#dom-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransport</code></a></code> has completed
                  negotiation of an association.</p>
                </td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcsctptransportstate" data-dfn-type="dfn" id="dom-rtcsctptransportstate-closed" data-title="closed"><code id="idl-def-RTCSctpTransportState.closed">closed</code></dfn></td>
                <td>
                  <p>The SCTP association has been closed intentionally
                  (such as by closing the peer connection or applying a
                  remote description that rejects data or changes the
                  SCTP port) or via receipt of a SHUTDOWN or ABORT chunk.</p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </section>
    <section id="rtcdatachannel">
      <h3 id="x6-2-rtcdatachannel"><span class="secno">6.2 </span><dfn data-dfn-type="dfn" id="dom-rtcdatachannel" data-idl="" data-title="RTCDataChannel" data-dfn-for=""><code>RTCDataChannel</code></dfn></h3>
      <p>The <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> interface represents a
      bi-directional data channel between two peers. An
      <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> is created via a factory method on an
      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object. The messages sent between
      the browsers are described in [<cite><a class="bibref" href="#bib-RTCWEB-DATA">RTCWEB-DATA</a></cite>] and
      [<cite><a class="bibref" href="#bib-RTCWEB-DATA-PROTOCOL">RTCWEB-DATA-PROTOCOL</a></cite>].</p>
      <p>There are two ways to establish a connection with
      <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>. The first way is to simply create an
      <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> at one of the peers with the
      <code><a data-link-for="RTCDataChannelInit" href="#dom-rtcdatachannelinit-negotiated" class="internalDFN" data-link-type="dfn"><code>negotiated</code></a></code>
      <code><a href="#dom-rtcdatachannelinit" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelInit</code></a></code> dictionary member unset or set to
      its default value false. This will announce the new channel in-band and
      trigger an <code><a href="#dom-rtcdatachannelevent" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelEvent</code></a></code> with the corresponding
      <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object at the other peer. The second
      way is to let the application negotiate the
      <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>. To do this, create an
      <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object with the <code><a data-link-for="RTCDataChannelInit" href="#dom-rtcdatachannelinit-negotiated" class="internalDFN" data-link-type="dfn"><code>negotiated</code></a></code>
      <code><a href="#dom-rtcdatachannelinit" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelInit</code></a></code> dictionary member set to true, and
      signal out-of-band (e.g. via a web server) to the other side that it
      <em class="rfc2119" title="SHOULD">SHOULD</em> create a corresponding <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> with the
      <code><a data-link-for="RTCDataChannelInit" href="#dom-rtcdatachannelinit-negotiated" class="internalDFN" data-link-type="dfn"><code>negotiated</code></a></code>
      <code><a href="#dom-rtcdatachannelinit" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelInit</code></a></code> dictionary member set to true and
      the same <code><a data-link-for="RTCDataChannel" href="#dom-rtcdatachannel-id" class="internalDFN" data-link-type="dfn"><code>id</code></a></code>. This will
      connect the two separately created <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>
      objects. The second way makes it possible to create channels with
      asymmetric properties and to create channels in a declarative way by
      specifying matching <code><a data-link-for="RTCDataChannelInit" href="#dom-rtcdatachannelinit-id" class="internalDFN" data-link-type="dfn"><code>id</code></a></code>s.</p>
      <p>Each <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> has an associated
      <dfn data-lt="data transport|underlying data transport" data-dfn-type="dfn" id="dfn-data-transport">underlying data transport</dfn> that is
      used to transport actual data to the other peer. In the case of SCTP
      data channels utilizing an <code><a href="#dom-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransport</code></a></code> (which
      represents the state of the SCTP association), the underlying data
      transport is the SCTP stream pair. The transport properties of
      the <a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a>, such as in order delivery
      settings and reliability mode, are configured by the peer as the channel
      is created. The properties of a channel cannot change after the channel
      has been created. The actual wire protocol between the peers is specified
      by the WebRTC DataChannel Protocol specification [<cite><a class="bibref" href="#bib-RTCWEB-DATA">RTCWEB-DATA</a></cite>].</p>
      <p>An <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> can be configured to operate in
      different reliability modes. A reliable channel ensures that the data is
      delivered at the other peer through retransmissions. An unreliable
      channel is configured to either limit the number of retransmissions (
      <code><a data-link-for="RTCDataChannelInit" href="#dom-rtcdatachannelinit-maxretransmits" class="internalDFN" data-link-type="dfn"><code>maxRetransmits</code></a></code> ) or set
      a time during which transmissions (including retransmissions) are allowed
      ( <code><a data-link-for="RTCDataChannelInit" href="#dom-rtcdatachannelinit-maxpacketlifetime" class="internalDFN" data-link-type="dfn"><code>maxPacketLifeTime</code></a></code> ).
      These properties can not be used simultaneously and an attempt to do so
      will result in an error. Not setting any of these properties results in a
      reliable channel.</p>
      <p>An <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>, created with <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-createdatachannel" class="internalDFN" data-link-type="dfn"><code>createDataChannel</code></a></code> or dispatched via an
      <code><a href="#dom-rtcdatachannelevent" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelEvent</code></a></code>, <em class="rfc2119" title="MUST">MUST</em> initially be in the
      <code>connecting</code> state. When the
      <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object's <a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">underlying data
      transport</a> is ready, the user agent <em class="rfc2119" title="MUST">MUST</em> <a href="#announce-datachannel-open" class="internalDFN" data-link-type="dfn">announce the
      <code>RTCDataChannel</code> as open</a>.</p>
      <p>To <dfn data-dfn-type="dfn" id="dfn-create-an-rtcdatachannel">create an <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code></dfn>, run the
      following steps:</p>
      <ol>
        <li>
          <p>Let <var>channel</var> be a newly created <code>
          <a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object.</p>
        </li>
        <li>
          <p>Let <var>channel</var> have a <dfn data-dfn-type="dfn" id="dfn-readystate">[[ReadyState]]</dfn> internal
          slot initialized to <code>"connecting"</code>.</p>
        </li>
        <li>
          <p>Let <var>channel</var> have a <dfn data-dfn-type="dfn" id="dfn-bufferedamount">[[BufferedAmount]]</dfn>
          internal slot initialized to <code>0</code>.</p>
        </li>
        <li>
          <p>Let <var>channel</var> have internal slots named
          <dfn data-dfn-type="dfn" id="dfn-datachannellabel">[[DataChannelLabel]]</dfn>, <dfn data-dfn-type="dfn" id="dfn-ordered">[[Ordered]]</dfn>,
          <dfn data-dfn-type="dfn" id="dfn-maxpacketlifetime">[[MaxPacketLifeTime]]</dfn>, <dfn data-dfn-type="dfn" id="dfn-maxretransmits">[[MaxRetransmits]]</dfn>,
          <dfn data-dfn-type="dfn" id="dfn-datachannelprotocol">[[DataChannelProtocol]]</dfn>, <dfn data-dfn-type="dfn" id="dfn-negotiated">[[Negotiated]]</dfn>,
          <dfn data-dfn-type="dfn" id="dfn-datachannelid">[[DataChannelId]]</dfn>, and
          <dfn data-dfn-type="dfn" id="dfn-datachannelpriority">[[DataChannelPriority]]</dfn>.</p>
        </li>
        <li>
          <p>Return <var>channel</var>.</p>
        </li>
      </ol>
      <p>When the user agent is to <dfn data-lt="announce the rtcdatachannel as open|announce an rtcdatachannel as open" id="announce-datachannel-open" data-dfn-type="dfn">announce an <code>RTCDataChannel</code> as
      open</dfn>, the user agent <em class="rfc2119" title="MUST">MUST</em> queue a task to run the following
      steps:</p>
      <ol>
        <li>
          <p>If the associated <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object's
          <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is <code>true</code>, abort these steps.</p>
        </li>
        <li>
          <p>Let <var>channel</var> be the <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>
          object to be announced.</p>
        </li>
        <li>
          <p>If <var>channel</var>'s <a href="#dfn-readystate" class="internalDFN" data-link-type="dfn">[[ReadyState]]</a> is <code>closing</code> or
          <code>closed</code>, abort these steps.</p>
        </li>
        <li>
          <p>Set <var>channel</var>'s <a href="#dfn-readystate" class="internalDFN" data-link-type="dfn">[[ReadyState]]</a> slot to
          <code>open</code>.</p>
        </li>
        <li>
          <p>Fire a simple event named <code><a href="#event-datachannel-open" class="internalDFN" data-link-type="dfn"><code>open</code></a></code> at
          <var>channel</var>.</p>
        </li>
      </ol>
      <p>When an <a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a> is to be announced (the other
      peer created a channel with <code><a data-link-for="RTCDataChannelInit" href="#dom-rtcdatachannelinit-negotiated" class="internalDFN" data-link-type="dfn"><code>negotiated</code></a></code> unset or set to false), the
      user agent of the peer that did not initiate the creation process <em class="rfc2119" title="MUST">MUST</em>
      queue a task to run the following steps:</p>
      <ol>
        <li>
          <p>If the associated <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object's
          <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is <code>true</code>, abort these steps.</p>
        </li>
        <li>
          <p><a href="#dfn-create-an-rtcdatachannel" class="internalDFN" data-link-type="dfn">Create an <code>RTCDataChannel</code></a>,
          <var>channel</var>.</p>
        </li>
        <li>
          <p>Let <var>configuration</var> be an information bundle received
          from the other peer as a part of the process to establish the
          <a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a> described by the WebRTC DataChannel
          Protocol specification [<cite><a class="bibref" href="#bib-RTCWEB-DATA-PROTOCOL">RTCWEB-DATA-PROTOCOL</a></cite>].</p>
        </li>
        <li>
          <p>Initialize <var>channel</var>'s <a href="#dfn-datachannellabel" class="internalDFN" data-link-type="dfn">[[DataChannelLabel]]</a>,
          <a href="#dfn-ordered" class="internalDFN" data-link-type="dfn">[[Ordered]]</a>, <a href="#dfn-maxpacketlifetime" class="internalDFN" data-link-type="dfn">[[MaxPacketLifeTime]]</a>,
          <a href="#dfn-maxretransmits" class="internalDFN" data-link-type="dfn">[[MaxRetransmits]]</a>, <a href="#dfn-datachannelprotocol" class="internalDFN" data-link-type="dfn">[[DataChannelProtocol]]</a>,
          and <a href="#dfn-datachannelid" class="internalDFN" data-link-type="dfn">[[DataChannelId]]</a> internal slots to the corresponding
          values in <var>configuration</var>.</p>
        </li>
        <li>
          <p>Initialize <var>channel</var>'s <a href="#dfn-negotiated" class="internalDFN" data-link-type="dfn">[[Negotiated]]</a> internal
          slot to <code>false</code>.</p>
        </li>
        <li>
          <p>Initialize <var>channel</var>'s <a href="#dfn-datachannelpriority" class="internalDFN" data-link-type="dfn">[[DataChannelPriority]]</a>
          internal slot based on the integer priority value in
          <var>configuration</var>, according to the following mapping:
          </p>
          <table class="simple">
            <tbody><tr>
              <th><var>configuration</var> priority value</th>
              <th><code><a href="#dom-rtcprioritytype" class="internalDFN" data-link-type="dfn"><code>RTCPriorityType</code></a></code> value</th>
            </tr>
            <tr>
              <td>0 to 128</td>
              <td><code><a data-link-for="RTCPriorityType" href="#dom-rtcprioritytype-very-low" class="internalDFN" data-link-type="dfn"><code>very-low</code></a></code></td>
            </tr>
            <tr>
              <td>129 to 256</td>
              <td><code><a data-link-for="RTCPriorityType" href="#dom-rtcprioritytype-low" class="internalDFN" data-link-type="dfn"><code>low</code></a></code></td>
            </tr>
            <tr>
              <td>257 to 512</td>
              <td><code><a data-link-for="RTCPriorityType" href="#dom-rtcprioritytype-medium" class="internalDFN" data-link-type="dfn"><code>medium</code></a></code></td>
            </tr>
            <tr>
              <td>513 and greater</td>
              <td><code><a data-link-for="RTCPriorityType" href="#dom-rtcprioritytype-high" class="internalDFN" data-link-type="dfn"><code>high</code></a></code></td>
            </tr>
          </tbody></table>
        </li>
        <li>
          <p>Set <var>channel</var>'s <a href="#dfn-readystate" class="internalDFN" data-link-type="dfn">[[ReadyState]]</a> to
          <code>open</code> (but do not fire the <code><a href="#event-datachannel-open" class="internalDFN" data-link-type="dfn"><code>open</code></a></code>
          event, yet).</p>
          <div class="note"><div role="heading" class="note-title marker" id="h-note-35" aria-level="4"><span>Note</span></div><div class="">This allows to start sending messages inside of the
          <code><a href="#event-datachannel" class="internalDFN" data-link-type="dfn"><code>datachannel</code></a></code> event handler prior to the
          <code><a href="#event-datachannel-open" class="internalDFN" data-link-type="dfn"><code>open</code></a></code> event being fired.</div></div>
        </li>
        <li>
          <p><a href="#fire-a-datachannel-event" class="internalDFN" data-link-type="dfn">Fire a datachannel event</a> named
          <code><a href="#event-datachannel" class="internalDFN" data-link-type="dfn"><code>datachannel</code></a></code> with <var>channel</var> at the
          <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object.</p>
        </li>
        <li>
          <p><a data-lt="announce the rtcdatachannel as open" href="#announce-datachannel-open" class="internalDFN" data-link-type="dfn">Announce the data channel as
          open</a>.</p>
        </li>
      </ol>
      <p>An <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object's <a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">underlying data
      transport</a> may be torn down in a non-abrupt manner by running the
      <dfn id="data-transport-closing-procedure" data-dfn-type="dfn">closing procedure</dfn>. When
      that happens the user agent <em class="rfc2119" title="MUST">MUST</em> queue a task to run the following
      steps:</p>
      <ol>
        <li>
          <p>Let <var>channel</var> be the <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>
          object whose <a data-lt="data transport" href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">transport</a> was
          closed.</p>
        </li>
        <li>
          <p>Unless the procedure was initiated by the <var>channel</var>'s
          <code><a data-link-for="RTCDataChannel" href="#dom-rtcdatachannel-close" class="internalDFN" data-link-type="dfn"><code>close</code></a></code> method, set
          <var>channel</var>'s <a href="#dfn-readystate" class="internalDFN" data-link-type="dfn">[[ReadyState]]</a> slot to
          <code>closing</code>.</p>
        </li>
        <li>
          <p>Run the following steps in parallel:</p>
          <ol>
            <li>
              <p>Finish sending all currently pending messages of the <var>channel</var>.</p>
            </li>
            <li>
              <p>Follow the closing procedure defined for the <var>channel</var>'s
              underlying <a data-lt="data transport" href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">transport</a>:</p>
              <ol>
                <li>
                  <p>In the case of an SCTP-based <a data-lt="data transport" href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">
                  transport</a>, follow [<cite><a class="bibref" href="#bib-RTCWEB-DATA">RTCWEB-DATA</a></cite>], section 6.7.</p>
                </li>
              </ol>
            </li>
            <li>
              <p>Render the <var>channel</var>'s <a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">data transport</a> <a href="#data-transport-closed" class="internalDFN" data-link-type="dfn">closed</a> by following
              the associated procedure.
            </p></li>
          </ol>
        </li>
      </ol>
      <p>When an <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object's <a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">underlying data
      transport</a> has been <dfn id="data-transport-closed" data-dfn-type="dfn">closed</dfn>, the
      user agent <em class="rfc2119" title="MUST">MUST</em> queue a task to run the following steps:</p>
      <ol>
        <li>
          <p>Let <var>channel</var> be the <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>
          object whose <a data-lt="data transport" href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">transport</a> was
          closed.</p>
        </li>
        <li>
          <p>Set <var>channel</var>'s <a href="#dfn-readystate" class="internalDFN" data-link-type="dfn">[[ReadyState]]</a> slot to
          <code>closed</code>.</p>
        </li>
        <li>
          <p>If the <a data-lt="data transport" href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">transport</a> was closed
          <dfn id="data-transport-closed-error" data-dfn-type="dfn">with an error</dfn>, fire
          an <code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> event at <var>channel</var> with
          <code>errorDetail</code> set to "sctp-failure".</p>
        </li>
        <li>
          <p>Fire a simple event named <code title="event-RTCDataChannel-close"><a href="#dfn-close" class="internalDFN" data-link-type="dfn"><code>close</code></a></code> at
          <var>channel</var>.</p>
        </li>
      </ol>
      <p>In some cases, the user agent may be <dfn data-lt="data-channel-failure|unable to create an rtcdatachannel 's underlying data transport" data-dfn-type="dfn" id="dfn-data-channel-failure">unable to create an <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
      </code>'s <a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a></dfn>.
      For example, the data channel's <code><a data-link-for="RTCDataChannel" href="#dom-rtcdatachannel-id" class="internalDFN" data-link-type="dfn"><code>id</code></a></code> may be outside the range negotiated by the
      [<cite><a class="bibref" href="#bib-RTCWEB-DATA">RTCWEB-DATA</a></cite>] implementations in the SCTP handshake. When the user
      agent determines that an <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>'s
      <a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a> cannot be created, the user agent <em class="rfc2119" title="MUST">MUST</em>
      queue a task to run the following steps:</p>
      <ol>
        <li>
          <p>Let <var>channel</var> be the <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>
          object for which the user agent could not create an <a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">underlying
          data transport</a>.</p>
        </li>
        <li>
          <p>Set <var>channel</var>'s <a href="#dfn-readystate" class="internalDFN" data-link-type="dfn">[[ReadyState]]</a> slot to
          <code>closed</code>.</p>
        </li>
        <li>
          <p>Fire an <code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> event at <var>channel</var> with
          <code>errorDetail</code> set to "data-channel-failure".</p>
        </li>
        <li>
          <p>Fire a simple event named <code title="event-RTCDataChannel-close"><a href="#dfn-close" class="internalDFN" data-link-type="dfn"><code>close</code></a></code> at
          <var>channel</var>.</p>
        </li>
      </ol>
      <p>When an <dfn data-lt="receive an rtcdatachannel message|rtcdatachannel message has been received" data-dfn-type="dfn" id="dfn-receive-an-rtcdatachannel-message">
      <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> message has been received</dfn> via
      the <a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a> with type <var>type</var> and data
      <var>rawData</var>, the user agent <em class="rfc2119" title="MUST">MUST</em> queue a task to run the following
      steps:</p>
      <ol>
        <li>
          <p>Let <var>channel</var> be the <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>
          object for which the user agent has received a message.</p>
        </li>
        <li>
          <p>If <var>channel</var>'s <a href="#dfn-readystate" class="internalDFN" data-link-type="dfn">[[ReadyState]]</a> slot is not
          <code>open</code>, abort these steps and discard <var>rawData</var>.
          </p>
        </li>
        <li>
          <p>Execute the sub step by switching on <var>type</var> and the
          <var>channel</var>'s <code>binaryType</code>:</p>
          <ul>
            <li>
              <p>If <var>type</var> indicates that <var>rawData</var> is a
              <code>string</code>:</p>
              <p>Let <var>data</var> be a <span class="idlMemberType">DOMString</span> that represents the
              result of decoding <var>rawData</var> as UTF-8.</p>
            </li>
            <li>
              <p>If <var>type</var> indicates that <var>rawData</var> is binary
              and <code>binaryType</code> is <code>"blob"</code>:</p>
              <p>Let <var>data</var> be a new <code>Blob</code> object
              containing <var>rawData</var> as its raw data source.</p>
            </li>
            <li>
              <p>If <var>type</var> indicates that <var>rawData</var> is binary
              and <code>binaryType</code> is <code>"arraybuffer"</code>:</p>
              <p>Let <var>data</var> be a new <code>ArrayBuffer</code> object
              containing <var>rawData</var> as its raw data source.</p>
            </li>
          </ul>
        </li>
        <li>
          <p>Fire an event named <code><a href="#event-datachannel-message" class="internalDFN" data-link-type="dfn"><code>message</code></a></code> at
          <var>channel</var> with the <code>origin</code> attribute initialized
          to the origin of the document that created the <var>channel</var>'s
          associated <a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>, and the <code>data</code>
          attribute initialized to <var>data</var>.</p>
        </li>
      </ol>
      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcdatachannel" data-idl="" data-title="RTCDataChannel">[<span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></span> : <span class="idlSuperclass">EventTarget</span> {
<span class="idlAttribute" id="idl-def-rtcdatachannel-label" data-idl="" data-title="label" data-dfn-for="rtcdatachannel">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span>           <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="" href="#dom-rtcdatachannel-label" class="internalDFN" data-link-type="dfn"><code>label</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-ordered" data-idl="" data-title="ordered" data-dfn-for="rtcdatachannel">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span>             <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="" href="#dom-rtcdatachannel-ordered" class="internalDFN" data-link-type="dfn"><code>ordered</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-maxpacketlifetime" data-idl="" data-title="maxPacketLifeTime" data-dfn-for="rtcdatachannel">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-unsigned-short">unsigned short</a>?</span>     <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="" href="#dom-rtcdatachannel-maxpacketlifetime" class="internalDFN" data-link-type="dfn"><code>maxPacketLifeTime</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-maxretransmits" data-idl="" data-title="maxRetransmits" data-dfn-for="rtcdatachannel">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-unsigned-short">unsigned short</a>?</span>     <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="" href="#dom-rtcdatachannel-maxretransmits" class="internalDFN" data-link-type="dfn"><code>maxRetransmits</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-protocol" data-idl="" data-title="protocol" data-dfn-for="rtcdatachannel">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span>           <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="" href="#dom-rtcdatachannel-protocol" class="internalDFN" data-link-type="dfn"><code>protocol</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-negotiated" data-idl="" data-title="negotiated" data-dfn-for="rtcdatachannel">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span>             <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="" href="#dom-rtcdatachannel-negotiated" class="internalDFN" data-link-type="dfn"><code>negotiated</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-id" data-idl="" data-title="id" data-dfn-for="rtcdatachannel">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-unsigned-short">unsigned short</a>?</span>     <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="" href="#dom-rtcdatachannel-id" class="internalDFN" data-link-type="dfn"><code>id</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-priority" data-idl="" data-title="priority" data-dfn-for="rtcdatachannel">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcprioritytype" class="internalDFN" data-link-type="dfn"><code>RTCPriorityType</code></a></span>     <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="" href="#dom-rtcdatachannel-priority" class="internalDFN" data-link-type="dfn"><code>priority</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-readystate" data-idl="" data-title="readyState" data-dfn-for="rtcdatachannel">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcdatachannelstate" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelState</code></a></span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="" href="#dom-rtcdatachannel-readystate" class="internalDFN" data-link-type="dfn"><code>readyState</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-bufferedamount" data-idl="" data-title="bufferedAmount" data-dfn-for="rtcdatachannel">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-unsigned-long">unsigned long</a></span>       <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="" href="#dom-rtcdatachannel-bufferedamount" class="internalDFN" data-link-type="dfn"><code>bufferedAmount</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-bufferedamountlowthreshold" data-idl="" data-title="bufferedAmountLowThreshold" data-dfn-for="rtcdatachannel">             attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-unsigned-long">unsigned long</a></span>       <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="" href="#dom-rtcdatachannel-bufferedamountlowthreshold" class="internalDFN" data-link-type="dfn"><code>bufferedAmountLowThreshold</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-onopen" data-idl="" data-title="onopen" data-dfn-for="rtcdatachannel">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span>        <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="" href="#dom-rtcdatachannel-onopen" class="internalDFN" data-link-type="dfn"><code>onopen</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-onbufferedamountlow" data-idl="" data-title="onbufferedamountlow" data-dfn-for="rtcdatachannel">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span>        <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="" href="#dom-rtcdatachannel-onbufferedamountlow" class="internalDFN" data-link-type="dfn"><code>onbufferedamountlow</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-onerror" data-idl="" data-title="onerror" data-dfn-for="rtcdatachannel">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span>        <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="" href="#dom-rtcdatachannel-onerror" class="internalDFN" data-link-type="dfn"><code>onerror</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-onclose" data-idl="" data-title="onclose" data-dfn-for="rtcdatachannel">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span>        <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="" href="#dom-rtcdatachannel-onclose" class="internalDFN" data-link-type="dfn"><code>onclose</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcdatachannel-close" data-idl="" data-title="close" data-dfn-for="rtcdatachannel">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="" href="#dom-rtcdatachannel-close" class="internalDFN" data-link-type="dfn"><code>close</code></a></span>();</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-onmessage" data-idl="" data-title="onmessage" data-dfn-for="rtcdatachannel">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span>        <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="" href="#dom-rtcdatachannel-onmessage" class="internalDFN" data-link-type="dfn"><code>onmessage</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-binarytype" data-idl="" data-title="binaryType" data-dfn-for="rtcdatachannel">             attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>           <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="" href="#dom-rtcdatachannel-binarytype" class="internalDFN" data-link-type="dfn"><code>binaryType</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcdatachannel-send-data" data-idl="" data-title="send" data-dfn-for="rtcdatachannel">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="" href="#dom-rtcdatachannel-send" class="internalDFN" data-link-type="dfn"><code>send</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span> <span class="idlParamName">data</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcdatachannel-send!overload-1" data-idl="" data-title="send" data-dfn-for="rtcdatachannel">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="send!overload-1" href="#dom-rtcdatachannel-send!overload-1" class="internalDFN" data-link-type="dfn"><code>send</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dfn-blob" class="internalDFN" data-link-type="dfn">Blob</a></span> <span class="idlParamName">data</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcdatachannel-send!overload-2" data-idl="" data-title="send" data-dfn-for="rtcdatachannel">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="send!overload-2" href="#dom-rtcdatachannel-send!overload-2" class="internalDFN" data-link-type="dfn"><code>send</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-ArrayBuffer">ArrayBuffer</a></span> <span class="idlParamName">data</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcdatachannel-send!overload-3" data-idl="" data-title="send" data-dfn-for="rtcdatachannel">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcdatachannel" data-lt="send!overload-3" href="#dom-rtcdatachannel-send!overload-3" class="internalDFN" data-link-type="dfn"><code>send</code></a></span>(<span class="idlParam"><span class="idlParamType">ArrayBufferView</span> <span class="idlParamName">data</span></span>);</span>
};</span></pre></div>
        <section>
          <h4 id="attributes-15">Attributes</h4>
          <dl data-link-for="RTCDataChannel" data-dfn-for="RTCDataChannel" class="attributes">
            <dt><code>label</code> of type <span class="idlAttrType">USVString</span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcdatachannel-label" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" data-idl="" data-title="label"><code>label</code></dfn>
              attribute represents a label that can be used to distinguish this
              <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object from other
              <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> objects. Scripts are allowed
              to create multiple <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> objects
              with the same label. On getting, the attribute <em class="rfc2119" title="MUST">MUST</em> return the
              value of the <a href="#dfn-datachannellabel" class="internalDFN" data-link-type="dfn">[[DataChannelLabel]]</a> slot.</p>
            </dd>
            <dt><code>ordered</code> of type <span class="idlAttrType">boolean</span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcdatachannel-ordered" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" data-idl="" data-title="ordered"><code>ordered</code></dfn> attribute
              returns true if the <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> is
              ordered, and false if other of order delivery is allowed. On
              getting, the attribute <em class="rfc2119" title="MUST">MUST</em> return the value of the <a href="#dfn-ordered" class="internalDFN" data-link-type="dfn">[[Ordered]]</a> slot.</p>
            </dd>
            <dt><code>maxPacketLifeTime</code> of type <span class="idlAttrType">unsigned short</span>, readonly,
            nullable</dt>
            <dd>
              <p>The <dfn id="dom-rtcdatachannel-maxpacketlifetime" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" data-idl="" data-title="maxPacketLifeTime"><code>maxPacketLifeTime</code></dfn>
              attribute returns the length of the time window (in milliseconds)
              during which transmissions and retransmissions may occur in
              unreliable mode. On getting, the attribute <em class="rfc2119" title="MUST">MUST</em> return the value
              of the <a href="#dfn-maxpacketlifetime" class="internalDFN" data-link-type="dfn">[[MaxPacketLifeTime]]</a>
              slot.</p>
            </dd>
            <dt><code>maxRetransmits</code> of type <span class="idlAttrType">unsigned short</span>, readonly,
            nullable</dt>
            <dd>
              <p>The <dfn id="dom-rtcdatachannel-maxretransmits" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" data-idl="" data-title="maxRetransmits"><code>maxRetransmits</code></dfn>
              attribute returns the maximum number of retransmissions that are
              attempted in unreliable mode. On getting, the attribute <em class="rfc2119" title="MUST">MUST</em>
              return the value of the <a href="#dfn-maxretransmits" class="internalDFN" data-link-type="dfn">[[MaxRetransmits]]</a> slot.</p>
            </dd>
            <dt><code>protocol</code> of type <span class="idlAttrType">USVString</span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcdatachannel-protocol" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" data-idl="" data-title="protocol"><code>protocol</code></dfn> attribute
              returns the name of the sub-protocol used with this
              <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>. On getting, the attribute <em class="rfc2119" title="MUST">MUST</em>
              return the value of the <a href="#dfn-datachannelprotocol" class="internalDFN" data-link-type="dfn">[[DataChannelProtocol]]</a>
              slot.</p>
            </dd>
            <dt><code>negotiated</code> of type <span class="idlAttrType">boolean</span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcdatachannel-negotiated" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" data-idl="" data-title="negotiated"><code>negotiated</code></dfn>
              attribute returns true if this <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>
              was negotiated by the application, or false otherwise. On getting,
              the attribute <em class="rfc2119" title="MUST">MUST</em> return the value of the <a href="#dfn-negotiated" class="internalDFN" data-link-type="dfn">[[Negotiated]]</a> slot.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-id" data-title="id"><code>id</code></dfn> of type <span class="idlAttrType">unsigned short</span>, readonly, nullable</dt>
            <dd>
              <p>The <code>id</code> attribute returns the ID for this
              <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>. The value is initally null,
              which is what will be returned
              if the ID was not provided at channel creation time, and the DTLS
              role of the SCTP transport has not yet been negotiated.
              Otherwise, it will return the ID that was either selected by the
              script or generated by the user agent according to
              [<cite><a class="bibref" href="#bib-RTCWEB-DATA-PROTOCOL">RTCWEB-DATA-PROTOCOL</a></cite>]. After the ID is set to a non-null
              value, it will not change. On getting, the attribute <em class="rfc2119" title="MUST">MUST</em> return
              the value of the <a href="#dfn-datachannelid" class="internalDFN" data-link-type="dfn">[[DataChannelId]]</a> slot.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-priority" data-title="priority"><code>priority</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcprioritytype" class="internalDFN" data-link-type="dfn"><code>RTCPriorityType</code></a></span>, readonly</dt>
            <dd>
              <p>The <code>priority</code> attribute returns the priority for
              this <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>. The priority is assigned
              by the user agent at channel creation time. On getting, the
              attribute <em class="rfc2119" title="MUST">MUST</em> return the value of the
              <a href="#dfn-datachannelpriority" class="internalDFN" data-link-type="dfn">[[DataChannelPriority]]</a> slot.</p>
            </dd>
            <dt><code>readyState</code> of type <span class="idlAttrType"><a href="#dom-rtcdatachannelstate" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelState</code></a></span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcdatachannel-readystate" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" data-idl="" data-title="readyState"><code>readyState</code></dfn>
              attribute represents the state of the <code>RTCDataChannel</code>
              object. On getting, the attribute <em class="rfc2119" title="MUST">MUST</em> return the value
              of the <a href="#dfn-readystate" class="internalDFN" data-link-type="dfn">[[ReadyState]]</a> slot.</p>
            </dd>
            <dt><code>bufferedAmount</code> of type <span class="idlAttrType">unsigned long</span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcdatachannel-bufferedamount" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" data-idl="" data-title="bufferedAmount"><code>bufferedAmount</code></dfn>
              attribute <em class="rfc2119" title="MUST">MUST</em>, on getting, return the value of the
              <a href="#dfn-bufferedamount" class="internalDFN" data-link-type="dfn">[[BufferedAmount]]</a> slot. The attribute exposes the number
              of bytes of application data
              (UTF-8 text and binary data) that have been queued using
              <code><a data-link-for="RTCDataChannel" href="#dfn-send" class="internalDFN" data-link-type="dfn">send()</a></code>. Even
              though the data transmission can occur in parallel, the returned
              value <em class="rfc2119" title="MUST NOT">MUST NOT</em> be decreased before the current task yielded back
              to the event loop to prevent race conditions.
              The value does not include framing overhead incurred by the
              protocol, or buffering done by the operating system or network
              hardware. The value of the <a href="#dfn-bufferedamount" class="internalDFN" data-link-type="dfn">[[BufferedAmount]]</a> slot will
              only increase with each call to the <code><a data-link-for="RTCDataChannel" href="#dfn-send" class="internalDFN" data-link-type="dfn">send()</a></code> method as long as the <a href="#dfn-readystate" class="internalDFN" data-link-type="dfn">
              [[ReadyState]]</a> slot is <code>open</code>; however, the
              slot does not reset to zero once the channel closes. When the
              <a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a> sends data from its queue, the
              user agent <em class="rfc2119" title="MUST">MUST</em> queue a task that reduces
              <a href="#dfn-bufferedamount" class="internalDFN" data-link-type="dfn">[[BufferedAmount]]</a> with the number of bytes that was
              sent.</p>
            </dd>
            <dt><code>bufferedAmountLowThreshold</code> of type <span class="idlAttrType">unsigned long</span></dt>
            <dd>
              <p>The <dfn data-idl="" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-bufferedamountlowthreshold" data-title="bufferedAmountLowThreshold"><code>bufferedAmountLowThreshold</code></dfn>
              attribute sets the threshold at which the <code><a data-link-for="RTCDataChannel" href="#dom-rtcdatachannel-bufferedamount" class="internalDFN" data-link-type="dfn"><code>bufferedAmount</code></a></code> is considered to be
              low. When the <code><a data-link-for="RTCDataChannel" href="#dom-rtcdatachannel-bufferedamount" class="internalDFN" data-link-type="dfn"><code>bufferedAmount</code></a></code> decreases from above
              this threshold to equal or below it, the <code title="event-RTCDataChannel-bufferedamountlow"><a href="#event-datachannel-bufferedamountlow" class="internalDFN" data-link-type="dfn"><code>bufferedamountlow</code></a></code>
              event fires. The <code><a data-link-for="RTCDataChannel" href="#dom-rtcdatachannel-bufferedamountlowthreshold" class="internalDFN" data-link-type="dfn"><code>bufferedAmountLowThreshold</code></a></code> is
              initially zero on each new <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>,
              but the application may change its value at any time.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-onopen" data-title="onopen"><code>onopen</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd>The event type of this event handler is
            <code><a href="#event-datachannel-open" class="internalDFN" data-link-type="dfn"><code>open</code></a></code>.</dd>
            <dt><dfn data-idl="" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-onbufferedamountlow" data-title="onbufferedamountlow"><code>onbufferedamountlow</code></dfn> of type
            <span class="idlAttrType">EventHandler</span></dt>
            <dd>The event type of this event handler is
            <code><a href="#event-datachannel-bufferedamountlow" class="internalDFN" data-link-type="dfn"><code>bufferedamountlow</code></a></code>.</dd>
            <dt><dfn data-idl="" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-onerror" data-title="onerror"><code>onerror</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd>
              <p>The event type of this event handler is <code><a href="#dom-rtcerrorevent" class="internalDFN" data-link-type="dfn"><code>RTCErrorEvent</code></a></code>.
              <code>errorDetail</code> contains "sctp-failure",
              <code>sctpCauseCode</code> contains the SCTP
              Cause Code value, and <code>message</code>
              contains the SCTP Cause-Specific-Information,
              possibly with additional text.</p></dd>
            <dt><dfn data-idl="" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-onclose" data-title="onclose"><code>onclose</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd><p>The event type of this event handler is
            <code><a href="#dom-rtcdatachannel-close" class="internalDFN" data-link-type="dfn"><code>close</code></a></code>.</p></dd>
            <dt><dfn data-idl="" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-onmessage" data-title="onmessage"><code>onmessage</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd><p>The event type of this event handler is
            <code><a href="#event-datachannel-message" class="internalDFN" data-link-type="dfn"><code>message</code></a></code>.</p></dd>
            <dt><code>binaryType</code> of type <span class="idlAttrType">DOMString</span></dt>
            <dd>
              <p>The <dfn id="dom-rtcdatachannel-binarytype" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" data-idl="" data-title="binaryType"><code>binaryType</code></dfn>
              attribute <em class="rfc2119" title="MUST">MUST</em>, on getting, return the value to which it was
              last set. On setting, if the new value is either the string
              <code>"blob"</code> or the string <code>"arraybuffer"</code>,
              then set the IDL attribute to this new value. Otherwise,
              <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> a <code>SyntaxError</code>. When an
              <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object is
              created, the <code><a data-link-for="RTCDataChannel" href="#dom-rtcdatachannel-binarytype" class="internalDFN" data-link-type="dfn"><code>binaryType</code></a></code> attribute <em class="rfc2119" title="MUST">MUST</em> be
              initialized to the string "<code>blob</code>".</p>
              <p>This attribute controls how binary data is exposed to scripts.
              See the [<cite><a class="bibref" href="#bib-WEBSOCKETS-API">WEBSOCKETS-API</a></cite>] for more information.</p>
            </dd>
          </dl>
        </section>
        <section>
          <h4 id="methods-12">Methods</h4>
          <dl data-link-for="RTCDataChannel" data-dfn-for="RTCDataChannel" class="methods">
            <dt><code>close</code></dt>
            <dd>
              <p>Closes the <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>. It may be
              called regardless of whether the
              <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object was created by this
              peer or the remote peer.</p>
              <p>When the <dfn data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-close" data-idl="" data-title="close"><code>close</code></dfn> method is called, the user agent
              <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>
                  <p>Let <var>channel</var> be the
                  <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object which is about to
                  be closed.</p>
                </li>
                <li>
                  <p>If <var>channel</var>'s <a href="#dfn-readystate" class="internalDFN" data-link-type="dfn">[[ReadyState]]</a> slot is
                  <code>closing</code> or <code>closed</code>, then abort these
                  steps.</p>
                </li>
                <li>
                  <p>Set <var>channel</var>'s <a href="#dfn-readystate" class="internalDFN" data-link-type="dfn">[[ReadyState]]</a> slot to
                  <code>closing</code>.</p>
                </li>
                <li>
                  <p>If the <code><a href="#data-transport-closing-procedure" class="internalDFN" data-link-type="dfn">closing procedure</a></code> has not
                  started yet, start it.</p>
                </li>
              </ol>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-send" data-title="send"><code>send</code></dfn></dt>
            <dd>
              <p>Run the steps described by the <code><a data-link-for="RTCDataChannel" href="#dfn-send" class="internalDFN" data-link-type="dfn">send()</a></code> algorithm with argument type
              <code>string</code> object.</p>
            </dd>
            <dt><dfn data-lt="send!overload-1" data-lt-nodefault="true" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-send!overload-1" data-idl="" data-title="send"><code>send</code></dfn></dt>
            <dd>
              <p>Run the steps described by the <code><a data-link-for="RTCDataChannel" href="#dfn-send" class="internalDFN" data-link-type="dfn">send()</a></code> algorithm with argument type
              <code>Blob</code> object.</p>
            </dd>
            <dt><dfn data-lt="send!overload-2" data-lt-nodefault="true" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-send!overload-2" data-idl="" data-title="send"><code>send</code></dfn></dt>
            <dd>
              <p>Run the steps described by the <code><a data-link-for="RTCDataChannel" href="#dfn-send" class="internalDFN" data-link-type="dfn">send()</a></code> algorithm with argument type
              <code>ArrayBuffer</code> object.</p>
            </dd>
            <dt><dfn data-lt="send!overload-3" data-lt-nodefault="true" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-send!overload-3" data-idl="" data-title="send"><code>send</code></dfn></dt>
            <dd>
              <p>Run the steps described by the <code><a data-link-for="RTCDataChannel" href="#dfn-send" class="internalDFN" data-link-type="dfn">send()</a></code> algorithm with argument type
              <code>ArrayBufferView</code> object.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcdatachannelinit" data-idl="" data-title="RTCDataChannelInit">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcdatachannelinit" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelInit</code></a></span> {
<span class="idlMember" id="idl-def-rtcdatachannelinit-ordered" data-idl="" data-title="ordered" data-dfn-for="rtcdatachannelinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span>         <span class="idlMemberName"><a data-no-default="" data-link-for="rtcdatachannelinit" data-lt="" href="#dom-rtcdatachannelinit-ordered" class="internalDFN" data-link-type="dfn"><code>ordered</code></a></span> = <span class="idlMemberValue">true</span>;</span>
<span class="idlMember" id="idl-def-rtcdatachannelinit-maxpacketlifetime" data-idl="" data-title="maxPacketLifeTime" data-dfn-for="rtcdatachannelinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-unsigned-short">unsigned short</a></span>  <span class="idlMemberName"><a data-no-default="" data-link-for="rtcdatachannelinit" data-lt="" href="#dom-rtcdatachannelinit-maxpacketlifetime" class="internalDFN" data-link-type="dfn"><code>maxPacketLifeTime</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcdatachannelinit-maxretransmits" data-idl="" data-title="maxRetransmits" data-dfn-for="rtcdatachannelinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-unsigned-short">unsigned short</a></span>  <span class="idlMemberName"><a data-no-default="" data-link-for="rtcdatachannelinit" data-lt="" href="#dom-rtcdatachannelinit-maxretransmits" class="internalDFN" data-link-type="dfn"><code>maxRetransmits</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcdatachannelinit-protocol" data-idl="" data-title="protocol" data-dfn-for="rtcdatachannelinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span>       <span class="idlMemberName"><a data-no-default="" data-link-for="rtcdatachannelinit" data-lt="" href="#dom-rtcdatachannelinit-protocol" class="internalDFN" data-link-type="dfn"><code>protocol</code></a></span> = <span class="idlMemberValue">""</span>;</span>
<span class="idlMember" id="idl-def-rtcdatachannelinit-negotiated" data-idl="" data-title="negotiated" data-dfn-for="rtcdatachannelinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span>         <span class="idlMemberName"><a data-no-default="" data-link-for="rtcdatachannelinit" data-lt="" href="#dom-rtcdatachannelinit-negotiated" class="internalDFN" data-link-type="dfn"><code>negotiated</code></a></span> = <span class="idlMemberValue">false</span>;</span>
<span class="idlMember" id="idl-def-rtcdatachannelinit-id" data-idl="" data-title="id" data-dfn-for="rtcdatachannelinit">    [<span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#EnforceRange">EnforceRange</a></span></span>]
    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-unsigned-short">unsigned short</a></span>  <span class="idlMemberName"><a data-no-default="" data-link-for="rtcdatachannelinit" data-lt="" href="#dom-rtcdatachannelinit-id" class="internalDFN" data-link-type="dfn"><code>id</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcdatachannelinit-priority" data-idl="" data-title="priority" data-dfn-for="rtcdatachannelinit">    <span class="idlMemberType"><a href="#dom-rtcprioritytype" class="internalDFN" data-link-type="dfn"><code>RTCPriorityType</code></a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcdatachannelinit" data-lt="" href="#dom-rtcdatachannelinit-priority" class="internalDFN" data-link-type="dfn"><code>priority</code></a></span> = <span class="idlMemberValue">"low"</span>;</span>
};</span></pre></div>
        <section>
          <h4 id="dictionary-rtcdatachannelinit-members">Dictionary <dfn data-dfn-type="dfn" id="dom-rtcdatachannelinit" data-idl="" data-title="RTCDataChannelInit" data-dfn-for=""><code>RTCDataChannelInit</code></dfn> Members</h4>
          <dl data-link-for="RTCDataChannelInit" data-dfn-for="RTCDataChannelInit" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtcdatachannelinit" data-dfn-type="dfn" id="dom-rtcdatachannelinit-ordered" data-title="ordered"><code>ordered</code></dfn> of type <span class="idlMemberType">boolean</span>, defaulting to
            <code>true</code></dt>
            <dd>
              <p>If set to false, data is allowed to be delivered out of order.
              The default value of true, guarantees that data will be delivered
              in order.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcdatachannelinit" data-dfn-type="dfn" id="dom-rtcdatachannelinit-maxpacketlifetime" data-title="maxPacketLifeTime"><code>maxPacketLifeTime</code></dfn> of type <span class="idlMemberType">unsigned short</span></dt>
            <dd>
              <p>Limits the time (in milliseconds) during which the channel will
              transmit or retransmit data if not acknowledged. This value may be
              clamped if it exceeds the maximum value supported by the user agent.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcdatachannelinit" data-dfn-type="dfn" id="dom-rtcdatachannelinit-maxretransmits" data-title="maxRetransmits"><code>maxRetransmits</code></dfn> of type <span class="idlMemberType">unsigned short</span></dt>
            <dd>
              <p>Limits the number of times a channel will retransmit data if
              not successfully delivered. This value may be clamped if it
              exceeds the maximum value supported by the user agent.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcdatachannelinit" data-dfn-type="dfn" id="dom-rtcdatachannelinit-protocol" data-title="protocol"><code>protocol</code></dfn> of type <span class="idlMemberType">USVString</span>, defaulting to
            <code>""</code></dt>
            <dd>
              <p>Subprotocol name used for this channel.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcdatachannelinit" data-dfn-type="dfn" id="dom-rtcdatachannelinit-negotiated" data-title="negotiated"><code>negotiated</code></dfn> of type <span class="idlMemberType">boolean</span>, defaulting to
            <code>false</code></dt>
            <dd>
              <p>The default value of false tells the user agent to announce
              the channel in-band and instruct the other peer to dispatch a
              corresponding <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object. If set
              to true, it is up to the application to negotiate the channel and
              create an <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object with the same
              <code><a data-link-for="RTCDataChannel" href="#dom-rtcdatachannel-id" class="internalDFN" data-link-type="dfn"><code>id</code></a></code> at the other
              peer.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcdatachannelinit" data-dfn-type="dfn" id="dom-rtcdatachannelinit-id" data-title="id"><code>id</code></dfn> of type <span class="idlMemberType">unsigned short</span></dt>
            <dd>
              <p>Overrides the default selection of ID for this channel.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcdatachannelinit" data-dfn-type="dfn" id="dom-rtcdatachannelinit-priority" data-title="priority"><code>priority</code></dfn> of type <span class="idlMemberType"><a href="#dom-rtcprioritytype" class="internalDFN" data-link-type="dfn"><code>RTCPriorityType</code></a></span>, defaulting to
            <code>low</code></dt>
            <dd>
              <p>Priority of this channel.</p>
            </dd>
          </dl>
        </section>
      </div>
      <p>The <dfn data-idl="" data-dfn-type="dfn" id="dfn-send"><code>send()</code></dfn> method is overloaded to handle
      different data argument types. When any version of the method is called,
      the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
      <ol>
        <li>
          <p>Let <var>channel</var> be the <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>
          object on which data is to be sent.</p>
        </li>
        <li>
          <p>If <var>channel</var>'s <a href="#dfn-readystate" class="internalDFN" data-link-type="dfn">[[ReadyState]]</a> slot is not
          <code>open</code>, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an
          <code>InvalidStateError</code>.</p>
        </li>
        <li>
          <p>Execute the sub step that corresponds to the type of the methods
          argument:</p>
          <ul>
            <li>
              <p><code>string</code> object:</p>
              <p>Let <var>data</var> be a byte buffer that represents the
              result of encoding the method's argument as UTF-8.</p>
            </li>
            <li>
              <p><code>Blob</code> object:</p>
              <p>Let <var>data</var> be the raw data represented by the
              <code>Blob</code> object.</p>
            </li>
            <li>
              <p><code>ArrayBuffer</code> object:</p>
              <p>Let <var>data</var> be the data stored in the buffer described
              by the <code>ArrayBuffer</code> object.</p>
            </li>
            <li>
              <p><code>ArrayBufferView</code> object:</p>
              <p>Let <var>data</var> be the data stored in the section of the
              buffer described by the <code>ArrayBuffer</code> object that the
              <code>ArrayBufferView</code> object references.</p>
            </li>
          </ul>
          <div class="note"><div role="heading" class="note-title marker" id="h-note-36" aria-level="4"><span>Note</span></div><div class="">Any data argument type this method has not been
          overloaded with will result in a <code>TypeError</code>. This includes
          <code>null</code> and <code>undefined</code>.</div></div>
        </li>
        <li>
          <p>If the byte size of <var>data</var> exceeds the value of <code>
          <a data-link-for="RTCSctpTransport" href="#dom-rtcsctptransport-maxmessagesize" class="internalDFN" data-link-type="dfn"><code>maxMessageSize</code></a></code> on
          <var>channel</var>'s associated <code>RTCSctpTransport</code>,
          <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> a <code>TypeError</code>.</p>
        </li>
        <li>
          <p>Queue <var>data</var> for transmission on <var>channel</var>'s
          <a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a>. If queuing <var>data</var> is not
          possible because not enough buffer space is available, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a>
          an <code>OperationError</code>.</p>
          <div class="note"><div role="heading" class="note-title marker" id="h-note-37" aria-level="4"><span>Note</span></div><div class="">The actual transmission of data occurs in
          parallel. If sending data leads to an SCTP-level error, the
          application will be notified asynchronously through <code><a data-link-for="RTCDataChannel" href="#dom-rtcdatachannel-onerror" class="internalDFN" data-link-type="dfn"><code>onerror</code></a></code>.</div></div>
        </li>
        <li>
          <p>Increase the value of the <a href="#dfn-bufferedamount" class="internalDFN" data-link-type="dfn">[[BufferedAmount]]</a> slot by
          the byte size of <var>data</var>.</p>
        </li>
      </ol>
      <div>
        <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtcdatachannelstate" data-idl="" data-title="RTCDataChannelState">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcdatachannelstate" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelState</code></a></span> {
    <a href="#dom-rtcdatachannelstate-connecting" class="idlEnumItem">"connecting"</a>,
    <a href="#dom-rtcdatachannelstate-open" class="idlEnumItem">"open"</a>,
    <a href="#dom-rtcdatachannelstate-closing" class="idlEnumItem">"closing"</a>,
    <a href="#dom-rtcdatachannelstate-closed" class="idlEnumItem">"closed"</a>
};</span></pre></div>
        <table data-link-for="RTCDataChannelState" data-dfn-for="RTCDataChannelState" class="simple">
          <tbody>
            <tr>
              <th colspan="2"><dfn data-dfn-for="" data-dfn-type="dfn" id="dom-rtcdatachannelstate" data-idl="" data-title="RTCDataChannelState"><code>RTCDataChannelState</code></dfn> Enumeration description</th>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcdatachannelstate" data-dfn-type="dfn" id="dom-rtcdatachannelstate-connecting" data-title="connecting"><code>connecting</code></dfn></td>
              <td>
                <p>The user agent is attempting to establish the <a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">underlying
                data transport</a>. This is the initial state of an
                <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object, whether created with
                <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-createdatachannel" class="internalDFN" data-link-type="dfn"><code>createDataChannel</code></a></code>, or
                dispatched as a part of an
                <code><a href="#dom-rtcdatachannelevent" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelEvent</code></a></code>.</p>
              </td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcdatachannelstate" data-dfn-type="dfn" id="dom-rtcdatachannelstate-open" data-title="open"><code>open</code></dfn></td>
              <td>
                <p>The <a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a> is established and
                communication is possible.</p>
              </td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcdatachannelstate" data-dfn-type="dfn" id="dom-rtcdatachannelstate-closing" data-title="closing"><code>closing</code></dfn></td>
              <td>
                <p>The <code><a data-lt="closing procedure" href="#data-transport-closing-procedure" class="internalDFN" data-link-type="dfn">procedure</a></code> to close down the
                <a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a> has started.</p>
              </td>
            </tr>
            <tr>
              <td><dfn data-idl="" data-dfn-for="rtcdatachannelstate" data-dfn-type="dfn" id="dom-rtcdatachannelstate-closed" data-title="closed"><code>closed</code></dfn></td>
              <td>
                <p>The <a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a> has been
                <code><a href="#dom-rtcdatachannelstate-closed" class="internalDFN" data-link-type="dfn"><code>closed</code></a></code> or could not be established.</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
    <section id="rtcdatachannelevent">
      <h3 id="x6-3-rtcdatachannelevent"><span class="secno">6.3 </span><dfn data-dfn-type="dfn" id="dom-rtcdatachannelevent" data-idl="" data-title="RTCDataChannelEvent" data-dfn-for=""><code>RTCDataChannelEvent</code></dfn></h3>
      <p>The <code><a href="#event-datachannel" class="internalDFN" data-link-type="dfn"><code>datachannel</code></a></code> event uses the
      <code><a href="#dom-rtcdatachannelevent" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelEvent</code></a></code> interface.</p>
      <p><dfn id="fire-a-datachannel-event" data-lt="fire a datachannel event|firing a datachannel event named e" data-dfn-type="dfn">Firing a datachannel event named
      <var>e</var></dfn> with an <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>
      <var>channel</var> means that an event with the name <var>e</var>, which
      does not bubble (except where otherwise stated) and is not cancelable
      (except where otherwise stated), and which uses the
      <code><a href="#dom-rtcdatachannelevent" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelEvent</code></a></code> interface with the
      <code><a data-link-for="RTCDataChannelEvent" href="#dom-rtcdatachannelevent-channel" class="internalDFN" data-link-type="dfn"><code>channel</code></a></code> attribute set
      to <var>channel</var>, <em class="rfc2119" title="MUST">MUST</em> be created and dispatched at the given
      target.</p>
      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcdatachannelevent" data-idl="" data-title="RTCDataChannelEvent">[<span class="idlCtor"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span></span>, <span class="idlParam"><span class="idlParamType"><a href="#dom-rtcdatachanneleventinit" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelEventInit</code></a></span> <span class="idlParamName">eventInitDict</span></span>)</span>,
 <span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcdatachannelevent" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelEvent</code></a></span> : <span class="idlSuperclass"><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></span> {
<span class="idlAttribute" id="idl-def-rtcdatachannelevent-channel" data-idl="" data-title="channel" data-dfn-for="rtcdatachannelevent">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdatachannelevent" data-lt="" href="#dom-rtcdatachannelevent-channel" class="internalDFN" data-link-type="dfn"><code>channel</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="constructors-4">Constructors</h4>
          <dl data-link-for="RTCDataChannelEvent" data-dfn-for="RTCDataChannelEvent" class="constructors">
            <dt><code>RTCDataChannelEvent</code></dt>
            <dd>
            </dd>
          </dl>
        </section>
        <section>
          <h4 id="attributes-16">Attributes</h4>
          <dl data-link-for="RTCDataChannelEvent" data-dfn-for="RTCDataChannelEvent" class="attributes">
            <dt><code>channel</code> of type <span class="idlAttrType"><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcdatachannelevent-channel" data-dfn-for="rtcdatachannelevent" data-dfn-type="dfn" data-idl="" data-title="channel"><code>channel</code></dfn>
              attribute represents the <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>
              object associated with the event.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcdatachanneleventinit" data-idl="" data-title="RTCDataChannelEventInit">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcdatachanneleventinit" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelEventInit</code></a></span> : <span class="idlSuperclass">EventInit</span> {
<span class="idlMember" id="idl-def-rtcdatachanneleventinit-channel" data-idl="" data-title="channel" data-dfn-for="rtcdatachanneleventinit">    required <span class="idlMemberType"><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcdatachanneleventinit" data-lt="" href="#dom-rtcdatachanneleventinit-channel" class="internalDFN" data-link-type="dfn"><code>channel</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="dictionary-rtcdatachanneleventinit-members">Dictionary <dfn data-dfn-type="dfn" id="dom-rtcdatachanneleventinit" data-idl="" data-title="RTCDataChannelEventInit" data-dfn-for=""><code>RTCDataChannelEventInit</code></dfn>
          Members</h4>
          <dl data-link-for="RTCDataChannelEventInit" data-dfn-for="RTCDataChannelEventInit" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtcdatachanneleventinit" data-dfn-type="dfn" id="dom-rtcdatachanneleventinit-channel" data-title="channel"><code>channel</code></dfn> of type <span class="idlMemberType"><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></span>, required</dt>
            <dd>
              <p>The <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object to be announced
              by the event.</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>
    <section id="garbage-collection-0">
      <h3 id="x6-4-garbage-collection"><span class="secno">6.4 </span>Garbage Collection</h3>
      <p>An <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object <em class="rfc2119" title="MUST">MUST</em> not be garbage
      collected if its</p>
      <ul>
        <li>
          <p><a href="#dfn-readystate" class="internalDFN" data-link-type="dfn">[[ReadyState]]</a> slot is
          <code>connecting</code> and at least one event listener is registered
          for <code>open</code> events, <code>message</code> events,
          <code>error</code> events, or <code>close</code> events.</p>
        </li>
        <li>
          <p><a href="#dfn-readystate" class="internalDFN" data-link-type="dfn">[[ReadyState]]</a> slot is
          <code>open</code> and at least one event listener is registered for
          <code>message</code> events, <code>error</code> events, or
          <code>close</code> events.</p>
        </li>
        <li>
          <p><a href="#dfn-readystate" class="internalDFN" data-link-type="dfn">[[ReadyState]]</a> slot is
          <code>closing</code> and at least one event listener is registered
          for <code>error</code> events, or <code>close</code> events.</p>
        </li>
        <li>
          <p><a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a> is established and data is queued
          to be transmitted.</p>
        </li>
      </ul>
    </section>
  </section>
  <section id="peer-to-peer-dtmf">
    <!--OddPage--><h2 id="x7-peer-to-peer-dtmf"><span class="secno">7. </span>Peer-to-peer DTMF</h2>
    <p>This section describes an interface on <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code>
    to send DTMF (phone keypad) values across an
    <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>. Details of how DTMF is sent to the
    other peer are described in [<cite><a class="bibref" href="#bib-RTCWEB-AUDIO">RTCWEB-AUDIO</a></cite>].</p>
    <section id="rtcrtpsender-interface-extensions">
      <h3 id="x7-1-rtcrtpsender-interface-extensions"><span class="secno">7.1 </span>RTCRtpSender Interface Extensions</h3>
      <p>The Peer-to-peer DTMF API extends the <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code>
      interface as described below.</p>
      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcrtpsender-partial-1" data-idl="" data-title="RTCRtpSender">partial interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></span> {
<span class="idlAttribute" id="idl-def-rtcrtpsender-dtmf" data-idl="" data-title="dtmf" data-dfn-for="rtcrtpsender">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcdtmfsender" class="internalDFN" data-link-type="dfn"><code>RTCDTMFSender</code></a>?</span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcrtpsender" data-lt="" href="#dom-rtcrtpsender-dtmf" class="internalDFN" data-link-type="dfn"><code>dtmf</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="attributes-17">Attributes</h4>
          <dl data-link-for="RTCRtpSender" data-dfn-for="RTCRtpSender" class="attributes">
            <dt><code>dtmf</code> of type <span class="idlAttrType"><a href="#dom-rtcdtmfsender" class="internalDFN" data-link-type="dfn"><code>RTCDTMFSender</code></a></span>, readonly, nullable</dt>
            <dd>
              <p>On getting, the <dfn data-dfn-for="rtcrtpsender" data-dfn-type="dfn" id="dom-rtcrtpsender-dtmf" data-idl="" data-title="dtmf"><code>dtmf</code></dfn> attribute returns the value
              of the <a href="#dfn-dtmf" class="internalDFN" data-link-type="dfn">[[Dtmf]]</a>internal slot, which represents a <code>
              <a href="#dom-rtcdtmfsender" class="internalDFN" data-link-type="dfn"><code>RTCDTMFSender</code></a></code> which can be used to send DTMF, or
              null if unset. The <a href="#dfn-dtmf" class="internalDFN" data-link-type="dfn">[[Dtmf]]</a>internal slot is set
              when the kind of an <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code>'s
              <a href="#dfn-sendertrack" class="internalDFN" data-link-type="dfn">[[SenderTrack]]</a> is <code>"audio"</code>.</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>
    <section id="rtcdtmfsender">
      <h3 id="x7-2-rtcdtmfsender"><span class="secno">7.2 </span><dfn data-dfn-type="dfn" id="dom-rtcdtmfsender" data-idl="" data-title="RTCDTMFSender" data-dfn-for=""><code>RTCDTMFSender</code></dfn></h3>
      <p>To <dfn data-dfn-type="dfn" id="dfn-create-an-rtcdtmfsender">create an <code>RTCDTMFSender</code></dfn>, the user agent <em class="rfc2119" title="MUST">MUST</em>
        run the following steps:</p>
        <ol>
          <li>
            <p>Let <var>dtmf</var> be a newly created
            <code><a href="#dom-rtcdtmfsender" class="internalDFN" data-link-type="dfn"><code>RTCDTMFSender</code></a></code> object.</p>
          </li>
          <li>
            <p>Let <var>dtmf</var> have a <dfn data-dfn-type="dfn" id="dfn-caninsertdtmf">[[CanInsertDtmf]]</dfn>
            internal slot, initialized to <code>false</code>.</p>
          </li>
          <li>
            <p>Let <var>dtmf</var> have a <dfn data-dfn-type="dfn" id="dfn-duration">[[Duration]]</dfn>
            internal slot.</p>
          </li>
          <li>
            <p>Let <var>dtmf</var> have a <dfn data-dfn-type="dfn" id="dfn-intertonegap">[[InterToneGap]]</dfn>
            internal slot.</p>
          </li>
          <li>
            <p>Let <var>dtmf</var> have a <dfn data-dfn-type="dfn" id="dfn-tonebuffer">[[ToneBuffer]]</dfn>
            internal slot.</p>
          </li>
       </ol>
      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcdtmfsender" data-idl="" data-title="RTCDTMFSender">[<span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcdtmfsender" class="internalDFN" data-link-type="dfn"><code>RTCDTMFSender</code></a></span> : <span class="idlSuperclass">EventTarget</span> {
<span class="idlMethod" id="idl-def-rtcdtmfsender-insertdtmf-tones-duration-intertonegap" data-idl="" data-title="insertDTMF" data-dfn-for="rtcdtmfsender">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcdtmfsender" data-lt="insertDTMF|insertdtmf()" href="#dom-rtcdtmfsender-insertdtmf" class="internalDFN" data-link-type="dfn"><code>insertDTMF</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">tones</span></span>,
                    <span class="idlParam">optional <span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">duration</span> = <span class="idlDefaultValue">100</span></span>,
                    <span class="idlParam">optional <span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">interToneGap</span> = <span class="idlDefaultValue">70</span></span>);</span>
<span class="idlAttribute" id="idl-def-rtcdtmfsender-ontonechange" data-idl="" data-title="ontonechange" data-dfn-for="rtcdtmfsender">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdtmfsender" data-lt="" href="#dom-rtcdtmfsender-ontonechange" class="internalDFN" data-link-type="dfn"><code>ontonechange</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdtmfsender-caninsertdtmf" data-idl="" data-title="canInsertDTMF" data-dfn-for="rtcdtmfsender">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span>      <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdtmfsender" data-lt="" href="#dom-rtcdtmfsender-caninsertdtmf" class="internalDFN" data-link-type="dfn"><code>canInsertDTMF</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdtmfsender-tonebuffer" data-idl="" data-title="toneBuffer" data-dfn-for="rtcdtmfsender">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>    <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdtmfsender" data-lt="" href="#dom-rtcdtmfsender-tonebuffer" class="internalDFN" data-link-type="dfn"><code>toneBuffer</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="attributes-18">Attributes</h4>
          <dl data-link-for="RTCDTMFSender" data-dfn-for="RTCDTMFSender" class="attributes">
            <dt><dfn data-idl="" data-dfn-for="rtcdtmfsender" data-dfn-type="dfn" id="dom-rtcdtmfsender-ontonechange" data-title="ontonechange"><code>ontonechange</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd>
              <p>The event type of this event handler is
              <code><a href="#event-RTCDTMFSender-tonechange" class="internalDFN" data-link-type="dfn"><code>tonechange</code></a></code>.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcdtmfsender" data-dfn-type="dfn" id="dom-rtcdtmfsender-caninsertdtmf" data-title="canInsertDTMF"><code>canInsertDTMF</code></dfn> of type <span class="idlAttrType">boolean</span>, readonly</dt>
            <dd>
              <p>Whether the <a href="#dom-rtcdtmfsender" class="internalDFN" data-link-type="dfn"><code>RTCDTMFSender</code></a> is capable of sending DTMF.</p>
            </dd>
            <dt><code>toneBuffer</code> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcdtmfsender-tonebuffer" data-dfn-for="rtcdtmfsender" data-dfn-type="dfn" data-idl="" data-title="toneBuffer"><code>toneBuffer</code></dfn>
              attribute <em class="rfc2119" title="MUST">MUST</em> return a list of the tones remaining to be played
              out. For the syntax, content, and interpretation of this list,
              see <code><a href="#dom-rtcdtmfsender-insertdtmf" class="internalDFN" data-link-type="dfn"><code>insertDTMF</code></a></code>.</p>
            </dd>
          </dl>
        </section>
        <section>
          <h4 id="methods-13">Methods</h4>
          <dl data-link-for="RTCDTMFSender" data-dfn-for="RTCDTMFSender" class="methods">
            <dt><code>insertDTMF</code></dt>
            <dd>
              <p>An <code><a href="#dom-rtcdtmfsender" class="internalDFN" data-link-type="dfn"><code>RTCDTMFSender</code></a></code> object's <dfn id="dom-rtcdtmfsender-insertdtmf" data-dfn-for="rtcdtmfsender" data-dfn-type="dfn" data-idl="" data-title="insertDTMF" data-lt="insertDTMF|insertdtmf()"><code>insertDTMF</code></dfn>
              method is used to send DTMF tones.</p>
              <p>The tones parameter is treated as a series of characters. The
              characters 0 through 9, A through D, #, and * generate the
              associated DTMF tones. The characters a to d <em class="rfc2119" title="MUST">MUST</em> be normalized
              to uppercase on entry and are equivalent to A to D. As noted in
              [<cite><a class="bibref" href="#bib-RTCWEB-AUDIO">RTCWEB-AUDIO</a></cite>] Section 3, support for the characters 0 through
              9, A through D, #, and * are required. The character ',' <em class="rfc2119" title="MUST">MUST</em> be
              supported, and indicates a delay of 2 seconds before processing
              the next character in the tones parameter. All other characters
              (and only those other characters) <em class="rfc2119" title="MUST">MUST</em> be considered <dfn id="dtmf-unrecognized" data-dfn-type="dfn">unrecognized</dfn>.</p>
              <p>The duration parameter indicates the duration in ms to use for
              each character passed in the tones parameters. The duration
              cannot be more than 6000 ms or less than 40 ms. The default
              duration is 100 ms for each tone.</p>
              <p>The interToneGap parameter indicates the gap between tones in
              ms. The user agent clamps it to at least 30 ms and at most
              6000 ms. The default value is 70 ms.</p>
              <p>The browser <em class="rfc2119" title="MAY">MAY</em> increase the duration and interToneGap times
              to cause the times that DTMF start and stop to align with the
              boundaries of RTP packets but it <em class="rfc2119" title="MUST">MUST</em> not increase either of them
              by more than the duration of a single RTP audio packet.</p>
              <p>When the <code><a href="#dom-rtcdtmfsender-insertdtmf" class="internalDFN" data-link-type="dfn">insertDTMF()</a></code> method is invoked,
              the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>Let <var>sender</var> be the
                <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code> used to send DTMF.</li>
                <li>
                  <p>Let <var>transceiver</var> be the
                  <code><a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code> object associated with
                  <var>sender</var>.</p>
                </li>
                <li>If <var>transceiver</var>'s <a href="#dfn-stopped" class="internalDFN" data-link-type="dfn">[[Stopped]]</a> slot is
                <code>true</code>, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an
                <code>InvalidStateError</code>.</li>
                <li>If <var>transceiver</var>'s <a href="#dfn-currentdirection" class="internalDFN" data-link-type="dfn">[[CurrentDirection]]</a> slot
                is <code>recvonly</code> or <code>inactive</code>,
                <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an <code>InvalidStateError</code>.</li>
                <li>Let <var>dtmf</var> be the <code><a href="#dom-rtcdtmfsender" class="internalDFN" data-link-type="dfn"><code>RTCDTMFSender</code></a></code>
                associated with <var>sender</var>.</li>
                <li>If <var>dtmf</var>'s <a href="#dfn-caninsertdtmf" class="internalDFN" data-link-type="dfn">[[CanInsertDTMF]]</a> internal slot
                is <code>false</code>, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an <code>InvalidStateError</code>.</li>
                <li>Let <var>tones</var> be the method's first argument.</li>
                <li>If <var>tones</var> contains any <a href="#dtmf-unrecognized" class="internalDFN" data-link-type="dfn">unrecognized</a>
                characters, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an <code>InvalidCharacterError</code>.
                </li>
                <li>Set the object's <a href="#dfn-tonebuffer" class="internalDFN" data-link-type="dfn">[[ToneBuffer]]</a> slot to
                <var>tones</var>.</li>
                <li>Set <var>dtmf</var>'s <a href="#dfn-duration" class="internalDFN" data-link-type="dfn">[[Duration]]</a> slot to the
                value of the <code>duration</code> parameter.</li>
                <li>Set <var>dtmf</var>'s <a href="#dfn-intertonegap" class="internalDFN" data-link-type="dfn">[[InterToneGap]]</a> slot to the
                value of the <code>interToneGap</code> parameter.</li>
                <li>If the value of the <code>duration</code> parameter is less than 40 ms,
                set <var>dtmf</var>'s <a href="#dfn-duration" class="internalDFN" data-link-type="dfn">[[Duration]]</a> slot to 40 ms.</li>
                <li>If the value of the <code>duration</code> parameter is greater than 6000 ms,
                set <var>dtmf</var>'s <a href="#dfn-duration" class="internalDFN" data-link-type="dfn">[[Duration]]</a> slot to 6000 ms.</li>
                <li>If the value of the <code>interToneGap</code> parameter is less than 30 ms,
                set <var>dtmf</var>'s <a href="#dfn-intertonegap" class="internalDFN" data-link-type="dfn">[[InterToneGap]]</a> slot to 30 ms.</li>
                <li>If the value of the <code>interToneGap</code> parameter is greater than 6000 ms,
                set <var>dtmf</var>'s <a href="#dfn-intertonegap" class="internalDFN" data-link-type="dfn">[[InterToneGap]]</a> slot to 6000 ms.</li>
                <li>If <a href="#dfn-tonebuffer" class="internalDFN" data-link-type="dfn">[[ToneBuffer]]</a> slot is an empty string,
                abort these steps.</li>
                <li>If a <em>Playout task</em> is scheduled to be run, abort
                these steps; otherwise queue a task that runs the following
                steps (<em>Playout task</em>):
                  <ol>
                    <li>If <var>transceiver</var>'s <a href="#dfn-stopped" class="internalDFN" data-link-type="dfn">[[Stopped]]</a> slot
                    is <code>true</code>, abort these steps.</li>
                    <li>If <var>transceiver</var>'s <a href="#dfn-currentdirection" class="internalDFN" data-link-type="dfn">[[CurrentDirection]]</a>
                    slot is <code>recvonly</code> or <code>inactive</code>,
                    abort these steps.</li>
                    <li>If the <a href="#dfn-tonebuffer" class="internalDFN" data-link-type="dfn">[[ToneBuffer]]</a> slot contains the empty
                    string, fire an event named <code><a href="#event-RTCDTMFSender-tonechange" class="internalDFN" data-link-type="dfn"><code>tonechange</code></a></code>
                    with an empty string at the <code><a href="#dom-rtcdtmfsender" class="internalDFN" data-link-type="dfn"><code>RTCDTMFSender</code></a></code>
                    object and abort these steps.</li>
                    <li>Remove the first character from the <a href="#dfn-tonebuffer" class="internalDFN" data-link-type="dfn">[[ToneBuffer]]</a>
                    slot and let that character be <var>tone</var>.</li>
                    <li>If <var>tone</var> is "," delay sending tones for
                    <code>2000</code> ms on
                    the associated RTP media stream, and queue a task to
                    be executed in <code>2000</code> ms from now that
                    runs the steps labelled <em>Playout task</em>.</li>
                    <li>If <var>tone</var> is not "," start playout of
                    <var>tone</var> for <a href="#dfn-duration" class="internalDFN" data-link-type="dfn">[[Duration]]</a> ms on the associated
                    RTP media stream, using the appropriate codec, then
                    queue a task to be executed in <a href="#dfn-duration" class="internalDFN" data-link-type="dfn">[[Duration]]</a>
                    + <a href="#dfn-intertonegap" class="internalDFN" data-link-type="dfn">[[InterToneGap]]</a> ms from now that
                    runs the steps labelled <em>Playout task</em>.</li>
                    <li><a href="#fire-a-tonechange-event" class="internalDFN" data-link-type="dfn">Fire a tonechange event</a> named
                    <code><a href="#event-RTCDTMFSender-tonechange" class="internalDFN" data-link-type="dfn"><code>tonechange</code></a></code> with a string
                    consisting of <var>tone</var> at the
                    <code><a href="#dom-rtcdtmfsender" class="internalDFN" data-link-type="dfn"><code>RTCDTMFSender</code></a></code> object.</li>
                  </ol>
                </li>
              </ol>
              <p>Since <code>insertDTMF</code> replaces the tone
              buffer, in order to add to the DTMF tones being played,
              it is necessary to call <code>insertDTMF</code> with a
              string containing both the remaining tones (stored in the
              <a href="#dfn-tonebuffer" class="internalDFN" data-link-type="dfn">[[ToneBuffer]]</a> slot) and the new tones appended
              together. Calling <code><a data-link-for="RTCDTMFSender" href="#dom-rtcdtmfsender-insertdtmf" class="internalDFN" data-link-type="dfn"><code>insertDTMF</code></a></code> with an empty tones
              parameter can be used to cancel all tones queued to play after
              the currently playing tone.</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>
    <section id="rtcdtmftonechangeevent">
      <h3 id="x7-3-rtcdtmftonechangeevent"><span class="secno">7.3 </span><dfn data-dfn-type="dfn" id="dom-rtcdtmftonechangeevent" data-idl="" data-title="RTCDTMFToneChangeEvent" data-dfn-for=""><code>RTCDTMFToneChangeEvent</code></dfn></h3>
      <p>The <code><a href="#event-RTCDTMFSender-tonechange" class="internalDFN" data-link-type="dfn"><code>tonechange</code></a></code> event uses the
      <code><a href="#dom-rtcdtmftonechangeevent" class="internalDFN" data-link-type="dfn"><code>RTCDTMFToneChangeEvent</code></a></code> interface.</p>
      <p><dfn id="fire-a-tonechange-event" data-lt="fire a tonechange event|firing a tonechange event named e" data-dfn-type="dfn">Firing a tonechange event named
      <var>e</var></dfn> with a <code>DOMString</code> <var>tone</var> means
      that an event with the name <var>e</var>, which does not bubble (except
      where otherwise stated) and is not cancelable (except where otherwise
      stated), and which uses the <code><a href="#dom-rtcdtmftonechangeevent" class="internalDFN" data-link-type="dfn"><code>RTCDTMFToneChangeEvent</code></a></code>
      interface with the <code><a data-link-for="RTCDTMFToneChangeEvent" href="#dom-rtcdtmftonechangeevent-tone" class="internalDFN" data-link-type="dfn"><code>tone</code></a></code> attribute set to
      <var>tone</var>, <em class="rfc2119" title="MUST">MUST</em> be created and dispatched at the given target.</p>
      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcdtmftonechangeevent" data-idl="" data-title="RTCDTMFToneChangeEvent">[<span class="idlCtor"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span></span>, <span class="idlParam"><span class="idlParamType"><a href="#dom-rtcdtmftonechangeeventinit" class="internalDFN" data-link-type="dfn"><code>RTCDTMFToneChangeEventInit</code></a></span> <span class="idlParamName">eventInitDict</span></span>)</span>,
 <span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcdtmftonechangeevent" class="internalDFN" data-link-type="dfn"><code>RTCDTMFToneChangeEvent</code></a></span> : <span class="idlSuperclass"><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></span> {
<span class="idlAttribute" id="idl-def-rtcdtmftonechangeevent-tone" data-idl="" data-title="tone" data-dfn-for="rtcdtmftonechangeevent">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcdtmftonechangeevent" data-lt="" href="#dom-rtcdtmftonechangeevent-tone" class="internalDFN" data-link-type="dfn"><code>tone</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="constructors-5">Constructors</h4>
          <dl data-link-for="RTCDTMFToneChangeEvent" data-dfn-for="RTCDTMFToneChangeEvent" class="constructors">
            <dt><code>RTCDTMFToneChangeEvent</code></dt>
            <dd>
            </dd>
          </dl>
        </section>
        <section>
          <h4 id="attributes-19">Attributes</h4>
          <dl data-link-for="RTCDTMFToneChangeEvent" data-dfn-for="RTCDTMFToneChangeEvent" class="attributes">
            <dt><code>tone</code> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
            <dd>
              <p>The <dfn data-idl="" data-dfn-for="rtcdtmftonechangeevent" data-dfn-type="dfn" id="dom-rtcdtmftonechangeevent-tone" data-title="tone"><code>tone</code></dfn> attribute contains the
              character for the tone (including ",") that has just
              begun playout (see <code>insertDTMF</code> ). If
              the value is the empty string, it indicates that the
              <a href="#dfn-tonebuffer" class="internalDFN" data-link-type="dfn">[[ToneBuffer]]</a> slot is an empty string and that
              the previous tones have completed playback.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcdtmftonechangeeventinit" data-idl="" data-title="RTCDTMFToneChangeEventInit">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcdtmftonechangeeventinit" class="internalDFN" data-link-type="dfn"><code>RTCDTMFToneChangeEventInit</code></a></span> : <span class="idlSuperclass">EventInit</span> {
<span class="idlMember" id="idl-def-rtcdtmftonechangeeventinit-tone" data-idl="" data-title="tone" data-dfn-for="rtcdtmftonechangeeventinit">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcdtmftonechangeeventinit" data-lt="" href="#dom-rtcdtmftonechangeeventinit-tone" class="internalDFN" data-link-type="dfn"><code>tone</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="dictionary-rtcdtmftonechangeeventinit-members">Dictionary <dfn data-dfn-type="dfn" id="dom-rtcdtmftonechangeeventinit" data-idl="" data-title="RTCDTMFToneChangeEventInit" data-dfn-for=""><code>RTCDTMFToneChangeEventInit</code></dfn>
          Members</h4>
          <dl data-link-for="RTCDTMFToneChangeEventInit" data-dfn-for="RTCDTMFToneChangeEventInit" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtcdtmftonechangeeventinit" data-dfn-type="dfn" id="dom-rtcdtmftonechangeeventinit-tone" data-title="tone"><code>tone</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>The <code>tone</code> attribute contains the
              character for the tone (including ",") that has just
              begun playout (see <code>insertDTMF</code> ). If
              the value is the empty string, it indicates that the
              <a href="#dfn-tonebuffer" class="internalDFN" data-link-type="dfn">[[ToneBuffer]]</a> slot is an empty string and that
              the previous tones have completed playback.</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>
  </section>
  <section>
    <!--OddPage--><h2 id="sec.stats-model"><span class="secno">8. </span>Statistics Model</h2>
    <section id="introduction-0">
      <h3 id="x8-1-introduction"><span class="secno">8.1 </span>Introduction</h3>
      <p>The basic statistics model is that the browser maintains a set of
        statistics for <a data-link-type="dfn" href="https://www.w3.org/TR/webrtc-stats/#dfn-monitored-object">monitored object</a>s, in the form of <a data-link-type="dfn" href="https://www.w3.org/TR/webrtc-stats/#dfn-stats-object">stats object</a>s.
      </p>
      <p>A group of related objects may be
        referenced by a <dfn id="stats-selector" data-dfn-type="dfn">selector</dfn>. The
      selector may, for example, be a <code>MediaStreamTrack</code>. For a
      track to be a valid selector, it <em class="rfc2119" title="MUST">MUST</em> be a <code>MediaStreamTrack</code>
      that is sent or received by the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>
      object on which the stats request was issued. The calling Web application
      provides the selector to the <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-getstats" class="internalDFN" data-link-type="dfn">getStats()</a></code> method and the browser emits
      (in the JavaScript) a set of statistics that are relevant to the selector,
      according to the <a href="#dfn-stats-selection-algorithm" class="internalDFN" data-link-type="dfn">stats selection algorithm</a>. Note that that
      algorithm takes the sender or receiver of a selector.</p>
      <p>The statistics returned are designed in such a way that repeated
      queries can be linked by the <code><a href="#dom-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a></code> <a data-link-for="RTCStats" href="#dom-rtcstats-id" class="internalDFN" data-link-type="dfn"><code>id</code></a> dictionary member. Thus, a Web application can make
      measurements over a given time period by requesting measurements at the
        beginning and end of that period.</p>
      <p>
        <a data-link-type="dfn" href="https://www.w3.org/TR/webrtc-stats/#dfn-stats-object">Stats object</a>s may have a limited lifetime. Until the end of
        their lifetime, they are always present in the result from
        getStats(). When their lifetime ends, a record of the
        statistics for that object is emitted through a
        "statsended" event, containing an RTCStats
        dictionary. The object descriptions in [<cite><a class="bibref" href="#bib-WEBRTC-STATS">WEBRTC-STATS</a></cite>]
        describe the lifetime of each stats object type.
      </p>
    </section>
    <section id="rtcpeerconnection-interface-extensions-1">
      <h3 id="x8-2-rtcpeerconnection-interface-extensions"><span class="secno">8.2 </span>RTCPeerConnection Interface Extensions</h3>
      <p>The Statistics API extends the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>
      interface as described below.</p>
      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcpeerconnection-partial-5" data-idl="" data-title="RTCPeerConnection">partial interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></span> {
<span class="idlMethod" id="idl-def-rtcpeerconnection-getstats-selector" data-idl="" data-title="getStats" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="#dom-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a>&gt;</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="getstats()|getStats" href="#dom-rtcpeerconnection-getstats" class="internalDFN" data-link-type="dfn">getStats</a></span>(<span class="idlParam">optional <span class="idlParamType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>?</span> <span class="idlParamName">selector</span> = <span class="idlDefaultValue">null</span></span>);</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-onstatsended" data-idl="" data-title="onstatsended" data-dfn-for="rtcpeerconnection">    attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-onstatsended" class="internalDFN" data-link-type="dfn"><code>onstatsended</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="attributes-20">Attributes</h4>
          <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="attributes">
            <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-onstatsended" data-title="onstatsended"><code>onstatsended</code></dfn> of type
              <span class="idlAttrType">EventHandler</span></dt>
            <dd>
              <p>The event type of this event handler
                is <code><a href="#event-statsended" class="internalDFN" data-link-type="dfn"><code>statsended</code></a></code>.
              </p>
              <p>To <dfn data-dfn-type="dfn" id="dfn-delete-stats">delete stats</dfn> for a set of <a data-link-type="dfn" href="https://www.w3.org/TR/webrtc-stats/#dfn-monitored-object">monitored object</a>s,
                the UA <em class="rfc2119" title="MUST">MUST</em> queue a task to run the following steps:
                </p><ul>
                  <li>Create a new RTCStatsReport object called <var>report</var></li>
                  <li>For each monitored object, create a new RTCStats
                    object with the <a data-link-type="dfn" href="https://www.w3.org/TR/webrtc-stats/#dfn-stats-object">stats object</a> for that monitored object, and
                    add it to <var>report</var>
                  </li>
                  <li>
                    Create a new <a href="#dom-rtcstatsevent" class="internalDFN" data-link-type="dfn"><code>RTCStatsEvent</code></a>
                    called <var>e</var>, with its name set to
                    "statsended" and its "report" being set to <var>report</var>
                  </li>
                  <li>
                    Fire <var>e</var>
                  </li>
                </ul>

            </dd>
          </dl>
        </section>
        <section>
          <h4 id="methods-14">Methods</h4>
          <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="methods">
            <dt><code>getStats</code></dt>
            <dd>
              <p>Gathers stats for the given <a href="#stats-selector" class="internalDFN" data-link-type="dfn">selector</a> and reports the
              result asynchronously.</p>
              <p>When the <dfn id="dom-rtcpeerconnection-getstats" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl="" data-title="
              getStats()" data-lt="getstats()|getStats">
              <code>getStats()</code></dfn> method is invoked, the user agent
              <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>
                  <p>Let <var>selectorArg</var> be the method's first
                  argument.</p>
                </li>
                <li>
                  <p>Let <var>connection</var> be the
                  <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object on which
                  the method was invoked.</p>
                </li>
                <li>
                  <p>If <var>selectorArg</var> is <code>null</code>, let
                  <var>selector</var> be <code>null</code>.</p>
                </li>
                <li>
                  <p>If <var>selectorArg</var> is a <a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                  let <var>selector</var> be an <a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a> or
                  <a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a> on <var>connection</var> which
                  <code>track</code> member matches <var>selectorArg</var>.
                  If no such sender or receiver exists, or if more than one
                  sender or receiver fit this criteria, return a promise
                  <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> with a newly
                  <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
                  <code>InvalidAccessError</code>.</p>
                </li>
                <li>
                  <p>Let <var>p</var> be a new promise.</p>
                </li>
                <li>
                  <p>Run the following steps in parallel:</p>
                  <ol>
                    <li>
                      <p>Gather the stats indicated by <var>selector</var>
                      according to the <a href="#dfn-stats-selection-algorithm" class="internalDFN" data-link-type="dfn">stats selection algorithm</a>.</p>
                    </li>
                    <li>
                      <p><a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">Resolve</a> <var>p</var> with the resulting
                      <code><a href="#dom-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a></code> object, containing
                      the gathered stats.</p>
                    </li>
                  </ol>
                </li>
                <li>
                  <p>Return <var>p</var>.</p>
                </li>
              </ol>
            </dd>
          </dl>
        </section>
      </div>
    </section>
    <section id="rtcstatsreport-object">
      <h3 id="x8-3-rtcstatsreport-object"><span class="secno">8.3 </span><dfn data-dfn-type="dfn" id="dom-rtcstatsreport" data-idl="" data-title="RTCStatsReport" data-dfn-for=""><code>RTCStatsReport</code></dfn> Object</h3>
      <p>The <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-getstats" class="internalDFN" data-link-type="dfn">getStats()</a></code> method
      delivers a successful result in the form of an
      <code><a href="#dom-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a></code> object. An
      <code><a href="#dom-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a></code> object is a map between strings that
      identify the inspected objects (<a data-link-for="RTCStats" href="#dom-rtcstats-id" class="internalDFN" data-link-type="dfn"><code><code>id</code></code></a> attribute in <code>RTCStats</code>
      instances), and their corresponding <code><a href="#dom-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a></code>-derived
      dictionaries.</p>
      <p>An <code><a href="#dom-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a></code> may be composed of several
      <code><a href="#dom-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a></code>-derived dictionaries, each reporting stats
      for one underlying object that the implementation thinks is relevant for
      the <a href="#stats-selector" class="internalDFN" data-link-type="dfn">selector</a>. One achieves the total for the <a href="#stats-selector" class="internalDFN" data-link-type="dfn">selector</a> by
      summing over all the stats of a certain type; for instance, if an
      <code>RTCRtpSender</code> uses multiple SSRCs to carry its track over the
      network, the <code><a href="#dom-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a></code> may contain one
      <code>RTCStats</code>-derived dictionary per SSRC (which can be
      distinguished by the value of the "ssrc" stats attribute).</p>
      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcstatsreport" data-idl="" data-title="RTCStatsReport">[<span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a></span> {
<span class="idlMaplike" id="idl-def-rtcstatsreport-maplike" data-idl="" data-title="maplike" data-dfn-for="rtcstatsreport">    readonly maplike&lt;<a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>, <a href="https://heycam.github.io/webidl/#idl-object">object</a>&gt;;</span>
};</span></pre></div>
        <p>This interface has "entries", "forEach", "get", "has", "keys",
        "values", @@iterator methods and a "size" getter brought by
        <code>readonly maplike</code>.</p>
        <p>Use these to retrieve the various dictionaries descended from
        <code><a href="#dom-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a></code> that this stats report is composed of. The
        set of supported property names [<cite><a class="bibref" href="#bib-WEBIDL-1">WEBIDL-1</a></cite>] is defined as the ids of
        all the <code><a href="#dom-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a></code>-derived dictionaries that have
        been generated for this stats report.</p>
      </div>
    </section>
    <section id="rtcstats-dictionary">
      <h3 id="x8-4-rtcstats-dictionary"><span class="secno">8.4 </span><dfn data-dfn-type="dfn" id="dom-rtcstats" data-idl="" data-title="RTCStats" data-dfn-for=""><code>RTCStats</code></dfn> Dictionary</h3>
      <p>An <code>RTCStats</code> dictionary represents the <a data-link-type="dfn" href="https://www.w3.org/TR/webrtc-stats/#dfn-stats-object">stats object</a>
      constructed by inspecting a specific <a data-link-type="dfn" href="https://www.w3.org/TR/webrtc-stats/#dfn-monitored-object">monitored object</a>.
      The <code>RTCStats</code> dictionary is a base type that specifies
      as set of default attributes, such as <a data-link-for="RTCStats" href="#dom-rtcstats-timestamp" class="internalDFN" data-link-type="dfn"><code>timestamp</code></a> and <a data-link-for="RTCStats" href="#dom-rtcstats-type" class="internalDFN" data-link-type="dfn"><code>type</code></a>. Specific
      stats are added by extending the <code>RTCStats</code>
      dictionary.</p>
      <p>Note that while stats names are standardized, any given implementation
      may be using experimental values or values not yet known to the Web
      application. Thus, applications <em class="rfc2119" title="MUST">MUST</em> be prepared to deal with unknown
      stats.</p>
      <p>Statistics need to be synchronized with each other in order to yield
      reasonable values in computation; for instance, if "bytesSent" and
      "packetsSent" are both reported, they both need to be reported over the
      same interval, so that "average packet size" can be computed as "bytes /
      packets" - if the intervals are different, this will yield errors. Thus
      implementations <em class="rfc2119" title="MUST">MUST</em> return synchronized values for all stats in an
      <code><a href="#dom-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a></code>-derived dictionary.</p>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcstats" data-idl="" data-title="RTCStats">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a></span> {
<span class="idlMember" id="idl-def-rtcstats-timestamp" data-idl="" data-title="timestamp" data-dfn-for="rtcstats">    required <span class="idlMemberType">DOMHighResTimeStamp</span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcstats" data-lt="" href="#dom-rtcstats-timestamp" class="internalDFN" data-link-type="dfn"><code>timestamp</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcstats-type" data-idl="" data-title="type" data-dfn-for="rtcstats">    required <span class="idlMemberType"><a data-link-type="dfn" href="https://www.w3.org/TR/webrtc-stats/#dom-rtcstatstype">RTCStatsType</a></span>        <span class="idlMemberName"><a data-no-default="" data-link-for="rtcstats" data-lt="" href="#dom-rtcstats-type" class="internalDFN" data-link-type="dfn"><code>type</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcstats-id" data-idl="" data-title="id" data-dfn-for="rtcstats">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>           <span class="idlMemberName"><a data-no-default="" data-link-for="rtcstats" data-lt="" href="#dom-rtcstats-id" class="internalDFN" data-link-type="dfn"><code>id</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="dictionary-rtcstats-members">Dictionary <a class="idlType internalDFN" href="#dom-rtcstats" data-link-type="dfn"><code>RTCStats</code></a> Members</h4>
          <dl data-link-for="RTCStats" data-dfn-for="RTCStats" class="dictionary-members">
            <dt><code>timestamp</code> of type <span class="idlMemberType">DOMHighResTimeStamp</span></dt>
            <dd>
              <p>The <dfn data-idl="" data-dfn-for="rtcstats" data-dfn-type="dfn" id="dom-rtcstats-timestamp" data-title="timestamp"><code>timestamp</code></dfn>, of type
              <code>DOMHighResTimeStamp</code> [<cite><a class="bibref" href="#bib-HIGHRES-TIME">HIGHRES-TIME</a></cite>], associated
              with this object. The time is relative to the UNIX epoch (Jan 1,
              1970, UTC). For statistics that came from a remote source (e.g.,
              from received RTCP packets), <code>timestamp</code> represents
              the time at which the information arrived at the local endpoint.
              The remote timestamp can be found in an additional field in an
              <code><a href="#dom-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a></code>-derived dictionary, if
              applicable.</p>
            </dd>
            <dt><code>type</code> of type <span class="idlMemberType"><a data-link-type="dfn" href="https://www.w3.org/TR/webrtc-stats/#dom-rtcstatstype">RTCStatsType</a></span></dt>
            <dd>
              <p>The type of this object.</p>
              <p>The <dfn data-idl="" data-dfn-for="rtcstats" data-dfn-type="dfn" id="dom-rtcstats-type" data-title="type"><code>type</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em> be initialized
              to the name of the most specific type this
              <code><a href="#dom-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a></code> dictionary represents.</p>
            </dd>
            <dt><code>id</code> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>A unique <dfn data-idl="" data-dfn-for="rtcstats" data-dfn-type="dfn" id="dom-rtcstats-id" data-title="id"><code>id</code></dfn> that is associated with
              the object that was inspected to produce this
              <code><a href="#dom-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a></code> object. Two
              <code><a href="#dom-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a></code> objects, extracted from two
              different <code><a href="#dom-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a></code> objects, <em class="rfc2119" title="MUST">MUST</em> have
              the same id if they were produced by inspecting the same
              underlying object. User agents are free to pick any format for
              the id as long as it meets the requirements above.</p>
            </dd>
          </dl>
        </section>
      </div>
      <p>The set of valid values for <code><a data-link-type="dfn" href="https://www.w3.org/TR/webrtc-stats/#dom-rtcstatstype">RTCStatsType</a></code>, and the dictionaries derived
      from RTCStats that they indicate, are documented in
      [<cite><a class="bibref" href="#bib-WEBRTC-STATS">WEBRTC-STATS</a></cite>].</p>
    </section>
    <section id="rtcstatsevent">
      <h3 id="x8-5-rtcstatsevent"><span class="secno">8.5 </span><dfn data-dfn-type="dfn" id="dom-rtcstatsevent" data-idl="" data-title="RTCStatsEvent" data-dfn-for=""><code>RTCStatsEvent</code></dfn></h3>
      <p>The <code><a href="#event-statsended" class="internalDFN" data-link-type="dfn"><code>statsended</code></a></code> event uses
        the <code><a href="#dom-rtcstatsevent" class="internalDFN" data-link-type="dfn"><code>RTCStatsEvent</code></a></code>.</p>
      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcstatsevent" data-idl="" data-title="RTCStatsEvent">[<span class="idlCtor"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span></span>, <span class="idlParam"><span class="idlParamType"><a href="#dom-rtcstatseventinit" class="internalDFN" data-link-type="dfn"><code>RTCStatsEventInit</code></a></span> <span class="idlParamName">eventInitDict</span></span>)</span>,
 <span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcstatsevent" class="internalDFN" data-link-type="dfn"><code>RTCStatsEvent</code></a></span> : <span class="idlSuperclass"><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></span> {
<span class="idlAttribute" id="idl-def-rtcstatsevent-report" data-idl="" data-title="report" data-dfn-for="rtcstatsevent">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a></span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcstatsevent" data-lt="" href="#dom-rtcstatsevent-report" class="internalDFN" data-link-type="dfn"><code>report</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="constructors-6">Constructors</h4>
          <dl data-link-for="RTCStatsEvent" data-dfn-for="RTCStatsEvent" class="constructors">
            <dt><code>RTCStatsEvent</code></dt>
            <dd>
            </dd>
          </dl>
        </section>
        <section>
          <h4 id="attributes-21">Attributes</h4>
          <dl data-link-for="RTCStatsEvent" data-dfn-for="RTCStatsEvent" class="attributes">
            <dt><code>report</code> of
              type <span class="idlAttrType">RTCStatsReport</span>
            </dt>
            <dd>
              <p>The <dfn id="dom-rtcstatsevent-report" data-dfn-for="rtcstatsevent" data-dfn-type="dfn" data-idl="" data-title="report"><code>report</code></dfn>
              attribute contains the <a data-link-type="dfn" href="https://www.w3.org/TR/webrtc-stats/#dfn-stats-object">stats object</a>s of the appropriate
              subclass of <code><a href="#dom-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a></code>
              object giving the value of the statistics for the <a data-link-type="dfn" href="https://www.w3.org/TR/webrtc-stats/#dfn-monitored-object">monitored object</a>s
              whose lifetime have ended, at the time that it ended.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcstatseventinit" data-idl="" data-title="RTCStatsEventInit">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcstatseventinit" class="internalDFN" data-link-type="dfn"><code>RTCStatsEventInit</code></a></span> : <span class="idlSuperclass">EventInit</span> {
<span class="idlMember" id="idl-def-rtcstatseventinit-report" data-idl="" data-title="report" data-dfn-for="rtcstatseventinit">    required <span class="idlMemberType"><a href="#dom-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcstatseventinit" data-lt="" href="#dom-rtcstatseventinit-report" class="internalDFN" data-link-type="dfn"><code>report</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="dictionary-rtcstatseventinit-members">Dictionary <dfn data-dfn-type="dfn" id="dom-rtcstatseventinit" data-idl="" data-title="RTCStatsEventInit" data-dfn-for=""><code>RTCStatsEventInit</code></dfn>
            members</h4>
          <dl data-link-for="RTCStatsEventInit" data-dfn-for="RTCStatsEventInit" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtcstatseventinit" data-dfn-type="dfn" id="dom-rtcstatseventinit-report" data-title="report"><code>report</code></dfn> of
            type <span class="idlMemberType"><a href="#dom-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a></span>,
              required</dt>
            <dd>
              <p>Contains the <code><a href="#dom-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a></code> objects giving the
                stats for the objects whose lifetime have ended.</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>
    <section id="the-stats-selection-algorithm">
      <h3 id="x8-6-the-stats-selection-algorithm"><span class="secno">8.6 </span>The stats selection algorithm</h3>
      <p>The <dfn data-dfn-type="dfn" id="dfn-stats-selection-algorithm">stats selection algorithm</dfn> is as follows:</p>
      <ol>
        <li>
          Let <var>result</var> be an empty RTCStatsReport.
        </li>
        <li>If <var>selector</var> is <code>null</code>, gather stats for the
          whole <var>connection</var>, add them to <var>result</var>, return
          <var>result</var>, and abort these steps.
        </li>
        <li>If <var>selector</var> is an <a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>, gather stats for
          and add the following objects to <var>result</var>:
          <ul>
            <li>
            All <code>RTCOutboundRTPStreamStats</code> objects representing RTP
            streams being sent by <var>selector</var>.
            </li>
            <li>
            All stats objects referenced directly or indirectly by the
            <code>RTCOutboundRTPStreamStats</code> objects added.
            </li>
          </ul>
        </li>
        <li>If <var>selector</var> is an <a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>, gather stats
          for and add the following objects to <var>result</var>:
          <ul>
            <li>
            All <code>RTCInboundRTPStreamStats</code> objects representing RTP
            streams being received by <var>selector</var>.
            </li>
            <li>
            All stats objects referenced directly or indirectly by the
            <code>RTCInboundRTPStreamStats</code> added.
            </li>
          </ul>
        </li>
        <li>
          Return <var>result</var>.
        </li>
      </ol>
    </section>
    <section id="mandatory-to-implement-stats">
      <h3 id="x8-7-mandatory-to-implement-stats"><span class="secno">8.7 </span>Mandatory To Implement Stats</h3>
      <p>The stats listed in [<cite><a class="bibref" href="#bib-WEBRTC-STATS">WEBRTC-STATS</a></cite>] are intended to cover a wide
      range of use cases. Not all of them have to be implemented by every
      WebRTC implementation.</p>
      <p>An implementation <em class="rfc2119" title="MUST">MUST</em> support generating statistics of the following
      types when the corresponding objects exist on a PeerConnection, with the
      attributes that are listed when they are valid for that object:</p>
      <ul>
        <li>RTCRTPStreamStats, with attributes ssrc, kind,
        transportId, codecId, nackCount</li>
        <li>RTCReceivedRTPStreamStats, with all required attributes from its
        inherited dictionaries, and also attributes packetsReceived,
        packetsLost, jitter, packetsDiscarded</li>
        <li>RTCInboundRTPStreamStats, with all required attributes from its
        inherited dictionaries, and also attributes bytesReceived, trackId,
        receiverId, remoteId, framesDecoded</li>
        <li>RTCRemoteInboundRTPStreamStats, with all required attributes from
        its inherited dictionaries, and also attributes localId,
        roundTripTime</li>
        <li>RTCSentRTPStreamStats, with all required attributes from its
        inherited dictionaries, and also attributes packetsSent, bytesSent</li>
        <li>RTCOutboundRTPStreamStats, with all required attributes from its
        inherited dictionaries, and also attributes trackId, senderId, remoteId, framesEncoded</li>
        <li>RTCRemoteOutboundRTPStreamStats, with all required attributes from
        its inherited dictionaries, and also attributes localId, remoteTimestamp
        </li>
        <li>RTCPeerConnectionStats, with attributes dataChannelsOpened,
        dataChannelsClosed</li>
        <li>RTCDataChannelStats, with attributes label, protocol,
        datachannelId, state, messagesSent, bytesSent, messagesReceived,
        bytesReceived</li>
        <li>RTCMediaStreamStats, with attributes streamIdentifer, trackIds</li>
        <li>RTCMediaStreamTrackStats, with attribute detached</li>
        <li>RTCMediaHandlerStats with attributes trackIdentifier, remoteSource, ended</li>
        <li>RTCAudioHandlerStats with attribute audioLevel</li>
        <li>RTCVideoHandlerStats with attributes frameWidth, frameHeight, framesPerSecond</li>
        <li>RTCVideoSenderStats with attribute framesSent</li>
        <li>RTCVideoReceiverStats with attributes framesReceived, framesDecoded, framesDropped,
        framesCorrupted</li>
        <li>RTCCodecStats, with attributes payloadType, codec, clockRate,
        channels, sdpFmtpLine</li>
        <li>RTCTransportStats, with attributes bytesSent, bytesReceived,
        rtcpTransportStatsId, selectedCandidatePairId,
        localCertificateId, remoteCertificateId</li>
        <li>RTCIceCandidatePairStats, with attributes transportId,
        localCandidateId, remoteCandidateId, state, priority, nominated,
        bytesSent, bytesReceived, totalRoundTripTime, currentRoundTripTime</li>
        <li>RTCIceCandidateStats, with attributes ip, port, protocol,
        candidateType, url</li>
        <li>RTCCertificateStats, with attributes fingerprint,
        fingerprintAlgorithm, base64Certificate, issuerCertificateId</li>
      </ul>
      <p>An implementation <em class="rfc2119" title="MAY">MAY</em> support generating any other statistic defined
      in [<cite><a class="bibref" href="#bib-WEBRTC-STATS">WEBRTC-STATS</a></cite>], and <em class="rfc2119" title="MAY">MAY</em> generate statistics that are not
      documented.</p>
    </section>
    <section id="getstats-example">
      <h3 id="x8-8-getstats-example"><span class="secno">8.8 </span>GetStats Example</h3>
      <p>Consider the case where the user is experiencing bad sound and the
      application wants to determine if the cause of it is packet loss. The
      following example code might be used:</p>
      <div class="example"><div class="example-title marker"><span>Example 8</span></div><pre class="highlight hljs javascript" aria-busy="false"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gatherStats</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> sender = pc.getSenders()[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">const</span> baselineReport = <span class="hljs-keyword">await</span> sender.getStats();
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> setTimeout(resolve, aBit)); <span class="hljs-comment">// ... wait a bit</span>
    <span class="hljs-keyword">const</span> currentReport = <span class="hljs-keyword">await</span> sender.getStats();

    <span class="hljs-comment">// compare the elements from the current report with the baseline</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> now <span class="hljs-keyword">of</span> currentReport.values()) {
      <span class="hljs-keyword">if</span> (now.type != <span class="hljs-string">'outbound-rtp'</span>) <span class="hljs-keyword">continue</span>;

      <span class="hljs-comment">// get the corresponding stats from the baseline report</span>
      <span class="hljs-keyword">const</span> base = baselineReport.get(now.id);

      <span class="hljs-keyword">if</span> (base) {
        <span class="hljs-keyword">const</span> remoteNow = currentReport.get(now.remoteId);
        <span class="hljs-keyword">const</span> remoteBase = baselineReport.get(base.remoteId);

        <span class="hljs-keyword">const</span> packetsSent = now.packetsSent - base.packetsSent;
        <span class="hljs-keyword">const</span> packetsReceived = remoteNow.packetsReceived - remoteBase.packetsReceived;

        <span class="hljs-keyword">const</span> fractionLost = (packetsSent - packetsReceived) / packetsSent;
        <span class="hljs-keyword">if</span> (fractionLost &gt; <span class="hljs-number">0.3</span>) {
          <span class="hljs-comment">// if fractionLost is &gt; 0.3, we have probably found the culprit</span>
        }
      }
    }
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-built_in">console</span>.error(err);
  }
}</pre></div>
    </section>
  </section>
  <section>
    <!--OddPage--><h2 id="sec.identity-proxy"><span class="secno">9. </span>Identity</h2>
    <section id="identity-provider-interaction">
      <h3 id="x9-1-identity-provider-interaction"><span class="secno">9.1 </span>Identity Provider Interaction</h3>
      <p>WebRTC offers and answers (and hence the channels established by
      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> objects) can be authenticated by
      using a web-based Identity Provider (IdP). The idea is that the entity
      sending an offer or answer acts as the Authenticating Party (AP) and
      obtains an identity assertion from the IdP which it attaches to the
      session description. The consumer of the session description (i.e., the
      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> on which
      <code>setRemoteDescription</code> is called) acts as the Relying Party
      (RP) and verifies the assertion.</p>
      <p>The interaction with the IdP is designed to decouple the browser from
      any particular identity provider; the browser need only know how to load
      the IdP's JavaScript, the location of which is determined by the IdP's
      identity, and the generic interface to generating and validating
      assertions. The IdP provides whatever logic is necessary to bridge the
      generic protocol to the IdP's specific requirements. Thus, a single
      browser can support any number of identity protocols, including being
      forward compatible with IdPs which did not exist at the time the browser
      was written.</p>
      <section>
        <h4 id="sec.identity-proxy-communications"><span class="secno">9.1.1 </span>Identity Provider
        Selection</h4>
        <p>An IdP is used to generate an identity assertion as follows:</p>
        <ol>
          <li>If the <code>setIdentityProvider()</code> method has been called,
          the IdP provided shall be used.</li>
          <li>If the <code>setIdentityProvider()</code> method has not been
          called, then the user agent <em class="rfc2119" title="MAY">MAY</em> use an IdP configured into the
          browser.</li>
        </ol>
        <p>In order to verify assertions, the IdP domain name and protocol are
        taken from the <code>domain</code> and <code>protocol</code> fields of
        the identity assertion.</p>
      </section>
      <section>
        <h4 id="sec.create-identity-proxy"><span class="secno">9.1.2 </span>Instantiating an IdP Proxy</h4>
        <p>In order to communicate with the IdP, the user agent loads the IdP
        JavaScript from the IdP. The URI for the IdP script is a well-known URI
        formed from the <q>domain</q> and <q>protocol</q> fields, as specified
        in [<cite><a class="bibref" href="#bib-RTCWEB-SECURITY-ARCH">RTCWEB-SECURITY-ARCH</a></cite>].</p>
        <p>The IdP <em class="rfc2119" title="MAY">MAY</em> generate an HTTP redirect to another "https" origin, the
        browser <em class="rfc2119" title="MUST">MUST</em> treat a redirect to any other scheme as a fatal error.</p>
        <p>The user agent instantiates an isolated interpreted context, a
        JavaScript <dfn data-dfn-type="dfn" id="dfn-realm"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-code-realms">
        realm</a></dfn> that operates in the origin of the loaded JavaScript.
        Note that a redirect will change the origin of the loaded script.</p>
        <p>The <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-code-realms">realm</a> is populated with a global that implements both the
        <dfn data-dfn-type="dfn" id="dom-rtcidentityproviderglobalscope" data-idl="" data-title="RTCIdentityProviderGlobalScope" data-dfn-for=""><code>RTCIdentityProviderGlobalScope</code></dfn> and
        <code>WorkerGlobalScope</code> [<cite><a class="bibref" href="#bib-WEBWORKERS">WEBWORKERS</a></cite>] interfaces.</p>
        <p>The user agent provides an instance of
        <code><a href="#dom-rtcidentityproviderregistrar" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderRegistrar</code></a></code> named
        <var>rtcIdentityProvider</var> in the global scope of the <a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-code-realms">realm</a>.
        This object is used by the IdP to interact with the user agent.</p>
        <div>
          <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcidentityproviderglobalscope" data-idl="" data-title="RTCIdentityProviderGlobalScope">[<span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Global">Global</a></span></span>,
 <span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">RTCIdentityProviderGlobalScope</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcidentityproviderglobalscope" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderGlobalScope</code></a></span> : <span class="idlSuperclass">WorkerGlobalScope</span> {
<span class="idlAttribute" id="idl-def-rtcidentityproviderglobalscope-rtcidentityprovider" data-idl="" data-title="rtcIdentityProvider" data-dfn-for="rtcidentityproviderglobalscope">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcidentityproviderregistrar" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderRegistrar</code></a></span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcidentityproviderglobalscope" data-lt="" href="#dom-rtcidentityproviderglobalscope-rtcidentityprovider" class="internalDFN" data-link-type="dfn"><code>rtcIdentityProvider</code></a></span>;</span>
};</span></pre></div>
          <section>
            <h5 id="attributes-22">Attributes</h5>
            <dl data-link-for="RTCIdentityProviderGlobalScope" data-dfn-for="RTCIdentityProviderGlobalScope" class="attributes">
              <dt><dfn data-idl="" data-dfn-for="rtcidentityproviderglobalscope" data-dfn-type="dfn" id="dom-rtcidentityproviderglobalscope-rtcidentityprovider" data-title="rtcIdentityProvider"><code>rtcIdentityProvider</code></dfn> of type
              <span class="idlAttrType"><a href="#dom-rtcidentityproviderregistrar" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderRegistrar</code></a></span>,
              readonly</dt>
              <dd>This object is used by the IdP to register an
              <code><a href="#dom-rtcidentityproviderglobalscope-rtcidentityprovider" class="internalDFN" data-link-type="dfn">RTCIdentityProvider</a></code> instance with the
              browser.</dd>
            </dl>
          </section>
        </div>
        <section>
          <h5 id="sec.implement-idp"><span class="secno">9.1.2.1 </span>Implementing an IdP Securely</h5>
          <p>An environment that mimics the identity provider realm can be
          provided by any script. However, only scripts running in the origin
          of the IdP are able to generate an identical environment. Other
          origins can load and run the IdP proxy code, but they will be unable
          to replicate data that is unique to the origin of the IdP.</p>
          <p>This means that it is critical that an IdP use data that is
          restricted to its own origin when generating identity assertions.
          Otherwise, another origin could load the IdP script and use it to
          impersonate users.</p>
          <p>The data that the IdP script uses could be stored on the client
          (for example, in [<cite><a class="bibref" href="#bib-INDEXEDDB">INDEXEDDB</a></cite>]) or loaded from
          servers. Data that is acquired from a server <em class="rfc2119" title="SHOULD">SHOULD</em> require
          credentials and be protected from cross-origin access.</p>
          <p>There is no risk to the integrity of identity assertions if an IdP
          validates an identity assertion without using origin-private
          data.</p>
        </section>
      </section>
    </section>
    <section>
      <h3 id="sec.register-idp"><span class="secno">9.2 </span>Registering an IdP Proxy</h3>
      <p>An IdP proxy implements the <code><a href="#dom-rtcidentityprovider" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProvider</code></a></code>
      methods, which are the means by which the user agent is able to request
      that an identity assertion be generated or validated.</p>
      <p>Once instantiated, the IdP script is executed. The IdP <em class="rfc2119" title="MUST">MUST</em> call the
      <code>register()</code> function on the
      <dfn data-dfn-type="dfn" id="dom-rtcidentityproviderregistrar" data-idl="" data-title="RTCIdentityProviderRegistrar" data-dfn-for=""><code>RTCIdentityProviderRegistrar</code></dfn> instance during script
      execution. If an IdP is not registered during this script execution, the
      user agent cannot use the IdP proxy and <em class="rfc2119" title="MUST">MUST</em> fail any future attempt to
      interact with the IdP.</p>
      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcidentityproviderregistrar" data-idl="" data-title="RTCIdentityProviderRegistrar">[<span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">RTCIdentityProviderGlobalScope</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcidentityproviderregistrar" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderRegistrar</code></a></span> {
<span class="idlMethod" id="idl-def-rtcidentityproviderregistrar-register-idp" data-idl="" data-title="register" data-dfn-for="rtcidentityproviderregistrar">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcidentityproviderregistrar" data-lt="register|register()" href="#dom-rtcidentityproviderregistrar-register" class="internalDFN" data-link-type="dfn"><code>register</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-rtcidentityprovider" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProvider</code></a></span> <span class="idlParamName">idp</span></span>);</span>
};</span></pre></div>
        <section>
          <h4 id="methods-15">Methods</h4>
          <dl data-link-for="RTCIdentityProviderRegistrar" data-dfn-for="RTCIdentityProviderRegistrar" class="methods">
            <dt><dfn data-idl="" data-dfn-for="rtcidentityproviderregistrar" data-dfn-type="dfn" id="dom-rtcidentityproviderregistrar-register" data-title="register" data-lt="register|register()"><code>register</code></dfn></dt>
            <dd>
              <p>This method is invoked by the IdP when its script is first
              executed. This registers <code><a href="#dom-rtcidentityprovider" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProvider</code></a></code>
              methods with the user agent.</p>
            </dd>
          </dl>
        </section>
      </div>
      <section id="interface-exposed-by-identity-providers">
        <h4 id="x9-2-1-interface-exposed-by-identity-providers"><span class="secno">9.2.1 </span>Interface Exposed by Identity Providers</h4>
        <p>The callback functions in <code>RTCIdentityProvider</code> are
        exposed by identity providers and is called by
        <code>RTCPeerConnection</code> to acquire or validate identity
        assertions.</p>
        <div>
          <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcidentityprovider" data-idl="" data-title="RTCIdentityProvider">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcidentityprovider" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProvider</code></a></span> {
<span class="idlMember" id="idl-def-rtcidentityprovider-generateassertion" data-idl="" data-title="generateAssertion" data-dfn-for="rtcidentityprovider">    required <span class="idlMemberType"><a href="#dom-generateassertioncallback" class="internalDFN" data-link-type="dfn"><code>GenerateAssertionCallback</code></a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcidentityprovider" data-lt="" href="#dom-rtcidentityprovider-generateassertion" class="internalDFN" data-link-type="dfn"><code>generateAssertion</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcidentityprovider-validateassertion" data-idl="" data-title="validateAssertion" data-dfn-for="rtcidentityprovider">    required <span class="idlMemberType"><a href="#dom-validateassertioncallback" class="internalDFN" data-link-type="dfn"><code>ValidateAssertionCallback</code></a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcidentityprovider" data-lt="" href="#dom-rtcidentityprovider-validateassertion" class="internalDFN" data-link-type="dfn"><code>validateAssertion</code></a></span>;</span>
};</span></pre></div>
          <section>
            <h5 id="dictionary-rtcidentityprovider-members">Dictionary <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-rtcidentityprovider" data-idl="" data-title="RTCIdentityProvider"><code>RTCIdentityProvider</code></dfn>
            Members</h5>
            <dl data-link-for="RTCIdentityProvider" data-dfn-for="RTCIdentityProvider">
              <dt><dfn data-idl="" data-dfn-for="rtcidentityprovider" data-dfn-type="dfn" id="dom-rtcidentityprovider-generateassertion" data-title="generateAssertion"><code>generateAssertion</code></dfn> of type
              <span class="idlMemberType"><a href="#dom-generateassertioncallback" class="internalDFN" data-link-type="dfn"><code>GenerateAssertionCallback</code></a></span>,
              required</dt>
              <dd>
                <p>A user agent invokes this method on the IdP to request the
                generation of an identity assertion.</p>
                <p>The IdP provides a promise that <a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">resolves</a> to an
                <code><a href="#dom-rtcidentityassertionresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityAssertionResult</code></a></code> to successfully
                generate an identity assertion. Any other value, or a <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a>
                promise, is treated as an error.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcidentityprovider" data-dfn-type="dfn" id="dom-rtcidentityprovider-validateassertion" data-title="validateAssertion"><code>validateAssertion</code></dfn> of type
              <span class="idlMemberType"><a href="#dom-validateassertioncallback" class="internalDFN" data-link-type="dfn"><code>ValidateAssertionCallback</code></a></span>,
              required</dt>
              <dd>
                <p>A user agent invokes this method on the IdP to request the
                validation of an identity assertion.</p>
                <p>The IdP returns a Promise that <a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">resolves</a> to an
                <code><a href="#dom-rtcidentityvalidationresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityValidationResult</code></a></code> to successfully
                validate an identity assertion and to provide the actual
                identity. Any other value, or a <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> promise, is treated as
                an error.</p>
              </dd>
            </dl>
          </section>
        </div>
        <div>
          <div><pre class="def idl"><span class="idlCallback" id="idl-def-generateassertioncallback" data-idl="" data-title="GenerateAssertionCallback">callback <span class="idlCallbackID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-generateassertioncallback" class="internalDFN" data-link-type="dfn"><code>GenerateAssertionCallback</code></a></span> = <span class="idlCallbackType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="#dom-rtcidentityassertionresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityAssertionResult</code></a>&gt;</span> (<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">contents</span></span>,
                                                                          <span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">origin</span></span>,
                                                                          <span class="idlParam"><span class="idlParamType"><a href="#dom-rtcidentityprovideroptions" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderOptions</code></a></span> <span class="idlParamName">options</span></span>);</span></pre></div>
          <section>
            <h5 id="callback-generateassertioncallback-parameters">Callback <dfn data-dfn-type="dfn" id="dom-generateassertioncallback" data-idl="" data-title="GenerateAssertionCallback" data-dfn-for=""><code>GenerateAssertionCallback</code></dfn>
            Parameters</h5>
            <dl data-link-for="GenerateAssertionCallback" data-dfn-for="GenerateAssertionCallback" class="callback-members">
              <dt><code>contents</code> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>The <var>contents</var> parameter includes the information
              that the user agent wants covered by the identity assertion. The
              IdP <em class="rfc2119" title="MUST">MUST</em> treat <code>contents</code> as opaque string. A
              successful validation of the provided assertion <em class="rfc2119" title="MUST">MUST</em> produce the
              same string.</dd>
              <dt><code>origin</code> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>
                The <var>origin</var> parameter identifies the origin of the
                <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> that triggered this
                request. An IdP can use this information as input to policy
                decisions about use. This value is generated by the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user
                agent</a> based on the origin of the document that created the
                <code>RTCPeerConnection</code> and therefore can be trusted to
                be correct.
              </dd>
              <dt><code>options</code> of type <span class="idlMemberType"><a href="#dom-rtcidentityprovideroptions" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderOptions</code></a></span></dt>
              <dd>This includes the options provided by the application when
              calling <code>setIdentityProvider</code>. Though the
              dictionary is an optional argument to
              <code>setIdentityProvider</code>, default values are used
              as necessary when passing the value to the identity provider; see
              the definition of <code><a href="#dom-rtcidentityprovideroptions" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderOptions</code></a></code>
              for details.</dd>
            </dl>
          </section>
        </div>
        <div>
          <div><pre class="def idl"><span class="idlCallback" id="idl-def-validateassertioncallback" data-idl="" data-title="ValidateAssertionCallback">callback <span class="idlCallbackID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-validateassertioncallback" class="internalDFN" data-link-type="dfn"><code>ValidateAssertionCallback</code></a></span> = <span class="idlCallbackType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="#dom-rtcidentityvalidationresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityValidationResult</code></a>&gt;</span> (<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">assertion</span></span>,
                                                                           <span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">origin</span></span>);</span></pre></div>
          <section>
            <h5 id="callback-validateassertioncallback-parameters">Callback <dfn data-dfn-type="dfn" id="dom-validateassertioncallback" data-idl="" data-title="ValidateAssertionCallback" data-dfn-for=""><code>ValidateAssertionCallback</code></dfn>
            Parameters</h5>
            <dl data-link-for="ValidateAssertionCallback" data-dfn-for="ValidateAssertionCallback" class="callback-members">
              <dt><code>assertion</code> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>The <var>assertion</var> parameter includes the assertion
              that was recovered from an <code>a=identity</code> in the session
              description; that is, the value that was part of the
              <code><a href="#dom-rtcidentityassertionresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityAssertionResult</code></a></code> provided by the
              IdP that generated the assertion.</dd>
              <dt><code>origin</code> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>The <var>origin</var> parameter identifies the origin of the
              <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> that triggered this
              request. An IdP can use this information as input to policy
              decisions about use.</dd>
            </dl>
          </section>
        </div>
      </section>
      <section id="identity-assertion-and-validation-results">
        <h4 id="x9-2-2-identity-assertion-and-validation-results"><span class="secno">9.2.2 </span>Identity Assertion and Validation Results</h4>
        <div>
          <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcidentityassertionresult" data-idl="" data-title="RTCIdentityAssertionResult">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcidentityassertionresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityAssertionResult</code></a></span> {
<span class="idlMember" id="idl-def-rtcidentityassertionresult-idp" data-idl="" data-title="idp" data-dfn-for="rtcidentityassertionresult">    required <span class="idlMemberType"><a href="#dom-rtcidentityproviderdetails" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderDetails</code></a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcidentityassertionresult" data-lt="" href="#dom-rtcidentityassertionresult-idp" class="internalDFN" data-link-type="dfn"><code>idp</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcidentityassertionresult-assertion" data-idl="" data-title="assertion" data-dfn-for="rtcidentityassertionresult">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>                  <span class="idlMemberName"><a data-no-default="" data-link-for="rtcidentityassertionresult" data-lt="" href="#dom-rtcidentityassertionresult-assertion" class="internalDFN" data-link-type="dfn"><code>assertion</code></a></span>;</span>
};</span></pre></div>
          <section>
            <h5 id="dictionary-rtcidentityassertionresult-members">Dictionary <dfn data-dfn-type="dfn" id="dom-rtcidentityassertionresult" data-idl="" data-title="RTCIdentityAssertionResult" data-dfn-for=""><code>RTCIdentityAssertionResult</code></dfn>
            Members</h5>
            <dl data-link-for="RTCIdentityAssertionResult" data-dfn-for="RTCIdentityAssertionResult" class="dictionary-members">
              <dt><dfn data-idl="" data-dfn-for="rtcidentityassertionresult" data-dfn-type="dfn" id="dom-rtcidentityassertionresult-idp" data-title="idp"><code>idp</code></dfn> of type <span class="idlMemberType"><a href="#dom-rtcidentityproviderdetails" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderDetails</code></a></span>,
              required</dt>
              <dd>
                <p>An IdP provides these details to identify the IdP that
                validates the identity assertion. This struct contains the same
                information that is provided to
                <code>setIdentityProvider</code>.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcidentityassertionresult" data-dfn-type="dfn" id="dom-rtcidentityassertionresult-assertion" data-title="assertion"><code>assertion</code></dfn> of type <span class="idlMemberType">DOMString</span>, required</dt>
              <dd>
                <p>An identity assertion. This is an opaque string that <em class="rfc2119" title="MUST">MUST</em>
                contain all information necessary to assert identity. This
                value is consumed by the validating IdP.</p>
              </dd>
            </dl>
          </section>
        </div>
        <div>
          <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcidentityproviderdetails" data-idl="" data-title="RTCIdentityProviderDetails">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcidentityproviderdetails" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderDetails</code></a></span> {
<span class="idlMember" id="idl-def-rtcidentityproviderdetails-domain" data-idl="" data-title="domain" data-dfn-for="rtcidentityproviderdetails">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcidentityproviderdetails" data-lt="" href="#dom-rtcidentityproviderdetails-domain" class="internalDFN" data-link-type="dfn"><code>domain</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcidentityproviderdetails-protocol" data-idl="" data-title="protocol" data-dfn-for="rtcidentityproviderdetails">             <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcidentityproviderdetails" data-lt="" href="#dom-rtcidentityproviderdetails-protocol" class="internalDFN" data-link-type="dfn"><code>protocol</code></a></span> = <span class="idlMemberValue">"default"</span>;</span>
};</span></pre></div>
          <section>
            <h5 id="dictionary-rtcidentityproviderdetails-members">Dictionary <dfn data-dfn-type="dfn" id="dom-rtcidentityproviderdetails" data-idl="" data-title="RTCIdentityProviderDetails" data-dfn-for=""><code>RTCIdentityProviderDetails</code></dfn>
            Members</h5>
            <dl data-link-for="RTCIdentityProviderDetails" data-dfn-for="RTCIdentityProviderDetails" class="dictionary-members">
              <dt><dfn data-idl="" data-dfn-for="rtcidentityproviderdetails" data-dfn-type="dfn" id="dom-rtcidentityproviderdetails-domain" data-title="domain"><code>domain</code></dfn> of type <span class="idlMemberType">DOMString</span>, required</dt>
              <dd>
                <p>The domain name of the IdP that validated the associated
                identity assertion.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcidentityproviderdetails" data-dfn-type="dfn" id="dom-rtcidentityproviderdetails-protocol" data-title="protocol"><code>protocol</code></dfn> of type <span class="idlMemberType">DOMString</span>, defaulting to
              <code>"default"</code></dt>
              <dd>
                <p>The protocol parameter used for the IdP. The string
                <em class="rfc2119" title="MUST NOT">MUST NOT</em> include the character <code>'/'</code> or
                <code>'\'</code>.</p>
              </dd>
            </dl>
          </section>
        </div>
        <div>
          <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcidentityvalidationresult" data-idl="" data-title="RTCIdentityValidationResult">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcidentityvalidationresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityValidationResult</code></a></span> {
<span class="idlMember" id="idl-def-rtcidentityvalidationresult-identity" data-idl="" data-title="identity" data-dfn-for="rtcidentityvalidationresult">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcidentityvalidationresult" data-lt="" href="#dom-rtcidentityvalidationresult-identity" class="internalDFN" data-link-type="dfn"><code>identity</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcidentityvalidationresult-contents" data-idl="" data-title="contents" data-dfn-for="rtcidentityvalidationresult">    required <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcidentityvalidationresult" data-lt="" href="#dom-rtcidentityvalidationresult-contents" class="internalDFN" data-link-type="dfn"><code>contents</code></a></span>;</span>
};</span></pre></div>
          <section>
            <h5 id="dictionary-rtcidentityvalidationresult-members">Dictionary <dfn data-dfn-type="dfn" id="dom-rtcidentityvalidationresult" data-idl="" data-title="RTCIdentityValidationResult" data-dfn-for=""><code>RTCIdentityValidationResult</code></dfn>
            Members</h5>
            <dl data-link-for="RTCIdentityValidationResult" data-dfn-for="RTCIdentityValidationResult" class="dictionary-members">
              <dt><dfn data-idl="" data-dfn-for="rtcidentityvalidationresult" data-dfn-type="dfn" id="dom-rtcidentityvalidationresult-identity" data-title="identity"><code>identity</code></dfn> of type <span class="idlMemberType">DOMString</span>, required</dt>
              <dd>
                <p>The validated identity of the peer.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="rtcidentityvalidationresult" data-dfn-type="dfn" id="dom-rtcidentityvalidationresult-contents" data-title="contents"><code>contents</code></dfn> of type <span class="idlMemberType">DOMString</span>, required</dt>
              <dd>
                <p>The payload of the identity assertion. An IdP that validates
                an identity assertion <em class="rfc2119" title="MUST">MUST</em> return the same string that was
                provided to the original IdP that generated the assertion.</p>
                <p>The user agent uses the <var>contents</var> string to
                determine if the identity assertion matches the session
                description.</p>
              </dd>
            </dl>
          </section>
        </div>
      </section>
    </section>
    <section>
      <h3 id="sec.identity-proxy-assertion-request"><span class="secno">9.3 </span>Requesting Identity
      Assertions</h3>
      <p>The identity assertion request process is triggered by a call to
      <code>createOffer</code>, <code>createAnswer</code>, or
      <code>getIdentityAssertion</code>. When these calls are invoked and an
      identity provider has been set, the following steps are executed:</p>
      <ol>
        <li>
          <p>The <code>RTCPeerConnection</code> instantiates an IdP as
          described in <a href="#sec.identity-proxy-communications">Identity
          Provider Selection</a> and <a href="#sec.register-idp">Registering an
          IdP Proxy</a>. If the IdP cannot be loaded, instantiated, or the IdP
          proxy is not registered, this process fails.</p>
        </li>
        <li>
          <p>If the <code>RTCPeerConnection</code> was not constructed with a set
          of certificates, and one has not yet been generated, wait
          for it to be generated.</p>
        </li>
        <li>
          <p>The <code>RTCPeerConnection</code> invokes the <code><a data-link-for="RTCIdentityProvider" href="#dom-rtcidentityprovider-generateassertion" class="internalDFN" data-link-type="dfn"><code>generateAssertion</code></a></code> method on the
          <code><a href="#dom-rtcidentityprovider" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProvider</code></a></code> methods registered by the
          IdP.</p>
          <p>The <code>RTCPeerConnection</code> generates the
          <var>contents</var> parameter to this method as described in
          [<cite><a class="bibref" href="#bib-RTCWEB-SECURITY-ARCH">RTCWEB-SECURITY-ARCH</a></cite>]. The value of <var>contents</var> includes
          the fingerprint of the certificate that was selected or generated
          during the construction of the <code>RTCPeerConnection</code>. The
          <var>origin</var> parameter contains the origin of the script that
          calls the <code>RTCPeerConnection</code> method that triggers this
          behavior. The <var>usernameHint</var> value is the same value that is
          provided to <code>setIdentityProvider</code>, if any such value
          was provided.</p>
        </li>
        <li>
          <p>The IdP proxy returns a Promise to the
          <code>RTCPeerConnection</code>. The IdP proxy is expected to generate
          the identity assertion asynchronously.</p>
          <p>If the user has been authenticated by the IdP, and the IdP is able
          to generate an identity assertion, the IdP <a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">resolves</a> the promise with
          an identity assertion in the form of an
          <code><a href="#dom-rtcidentityassertionresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityAssertionResult</code></a></code>.</p>
          <p>This step depends entirely on the IdP. The methods by which an IdP
          authenticates users or generates assertions is not specified, though
          they could involve interacting with the IdP server or other
          servers.</p>
        </li>
        <li>
          <p>If the IdP proxy produces an error or returns a promise that does
          not <a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">resolve</a> to a valid
          <code><a href="#dom-rtcidentityassertionresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityAssertionResult</code></a></code> (see <a href="#sec.idp-error-handling" class="sec-ref"><span class="secno">9.5</span> <span class="sec-title">IdP Error Handling</span></a>), then assertion generation fails.</p>
        </li>
        <li>
          <p>The <code>RTCPeerConnection</code> <em class="rfc2119" title="MAY">MAY</em> store the identity
          assertion for use with future offers or answers. If a fresh identity
          assertion is needed for any reason, applications can create a new
          <code>RTCPeerConnection</code>.</p>
        </li>
        <li>
          <p>If the identity request was triggered by a
          <code>createOffer()</code> or <code>createAnswer()</code>, then the
          assertion is converted to a JSON string, base64-encoded and inserted
          into an <code>a=identity</code> attribute in the session
          description.</p>
        </li>
      </ol>
      <p>If assertion generation fails, then the promise for the corresponding
      function call is <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> with a newly <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a> <code>OperationError</code>.</p>
      <section>
        <h4 id="sec.idp-loginneeded"><span class="secno">9.3.1 </span>User Login Procedure</h4>
        <p>An IdP <em class="rfc2119" title="MAY">MAY</em> reject an attempt to generate an identity assertion if it
        is unable to verify that a user is authenticated. This might be due to
        the IdP not having the necessary authentication information available
        to it (such as cookies).</p>
        <p>Rejecting the promise returned by <code><a data-link-for="RTCIdentityProvider" href="#dom-rtcidentityprovider-generateassertion" class="internalDFN" data-link-type="dfn"><code>generateAssertion</code></a></code> will cause the error
        to propagate to the application. Login errors are indicated by <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejecting</a>
        the promise with an <code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> with <code>errorDetail</code>
        set to "idp-need-login".</p>
        <p>The URL to login at will be passed to the application in the
        <code>idpLoginUrl</code> attribute of the
        <code>RTCPeerConnection</code>.</p>
        <p>An application can load the login URL in an IFRAME or popup window;
        the resulting page then <em class="rfc2119" title="SHOULD">SHOULD</em> provide the user with an opportunity to
        enter any information necessary to complete the authorization
        process.</p>
        <p>Once the authorization process is complete, the page loaded in the
        IFRAME or popup sends a message using <var>postMessage</var>
        [<cite><a class="bibref" href="#bib-webmessaging">webmessaging</a></cite>] to the page that loaded it (through the <var><a href="https://www.w3.org/TR/html51/browsers.html#opener">
        window.opener</a></var> attribute for popups, or through <var><a href="https://www.w3.org/TR/html51/browsers.html#dom-window-parent">
        window.parent</a></var> for pages loaded in an IFRAME). The message
        <em class="rfc2119" title="MUST">MUST</em> consist of the <var>DOMString</var> "WEBRTC-LOGINDONE". This message
        informs the application that another attempt at generating an identity
        assertion is likely to be successful.</p>
      </section>
    </section>
    <section>
      <h3 id="sec.identity-verify-assertion"><span class="secno">9.4 </span>Verifying Identity Assertions</h3>
      <p>Identity assertion validation happens when <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setremotedescription" class="internalDFN" data-link-type="dfn"><code>setRemoteDescription</code></a></code> is invoked on
      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>. The process runs asynchronously,
      meaning that validation of an identity assertion might not block the
      completion of <code>setRemoteDescription</code>.</p>
      <p>The identity assertion request process involves the following
      asynchronous steps:</p>
      <ol>
        <li>
          <p>The <code>RTCPeerConnection</code> awaits any prior identity
          validation. Only one identity validation can run at a time for an
          <code>RTCPeerConnection</code>. This can happen because the
          resolution of <code>setRemoteDescription</code> is not blocked by
          identity validation unless there is a <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer
          identity</a>.</p>
        </li>
        <li>
          <p>The <code>RTCPeerConnection</code> loads the identity assertion
          from the session description and decodes the base64 value, then
          parses the resulting JSON. The <var>idp</var> parameter of the
          resulting dictionary contains a <var>domain</var> and an optional
          <var>protocol</var> value that identifies the IdP, as described in
          [<cite><a class="bibref" href="#bib-RTCWEB-SECURITY-ARCH">RTCWEB-SECURITY-ARCH</a></cite>].</p>
        </li>
        <li>
          <p>If the identity assertion is malformed, or if <var>protocol</var>
          includes the character <code>'/'</code> or <code>'\'</code>,
          this process fails.</p>
        </li>
        <li>
          <p>The <code>RTCPeerConnection</code> instantiates the identified IdP
          as described in <a href="#sec.identity-proxy-communications" class="sec-ref"><span class="secno">9.1.1</span> <span class="sec-title">Identity Provider
        Selection</span></a> and
          <a href="#sec.register-idp" class="sec-ref"><span class="secno">9.2</span> <span class="sec-title">Registering an IdP Proxy</span></a>. If the IdP cannot be loaded,
          instantiated or the IdP proxy is not registered, this process
          fails.</p>
        </li>
        <li>
          <p>The <code>RTCPeerConnection</code> invokes the <code><a data-link-for="RTCIdentityProvider" href="#dom-rtcidentityprovider-validateassertion" class="internalDFN" data-link-type="dfn"><code>validateAssertion</code></a></code> method registered
          by the IdP.</p>
          <p>The <var>assertion</var> parameter is taken from the decoded
          identity assertion. The <var>origin</var> parameter contains the
          origin of the script that calls the <code>RTCPeerConnection</code>
          method that triggers this behavior.</p>
        </li>
        <li>
          <p>The IdP proxy returns a promise and performs the validation
          process asynchronously.</p>
          <p>The IdP proxy verifies the identity assertion using whatever means
          necessary. Depending on the authentication protocol this could
          involve interacting with the IdP server.</p>
        </li>
        <li>
          <p>If the IdP proxy produces an error or returns a promise that does
          not <a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">resolve</a> to a valid
          <code><a href="#dom-rtcidentityvalidationresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityValidationResult</code></a></code> (see <a href="#sec.idp-error-handling" class="sec-ref"><span class="secno">9.5</span> <span class="sec-title">IdP Error Handling</span></a>), then identity validation fails.</p>
        </li>
        <li>
          <p>Once the assertion is successfully verified, the IdP proxy
          <a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">resolves</a> the promise with an
          <code><a href="#dom-rtcidentityvalidationresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityValidationResult</code></a></code> containing the
          validated identity and the original contents that are the payload of
          the assertion.</p>
        </li>
        <li>
          <p>The <code>RTCPeerConnection</code> decodes the <code><a data-link-for="RTCIdentityValidationResult" href="#dom-rtcidentityvalidationresult-contents" class="internalDFN" data-link-type="dfn"><code>contents</code></a></code> and validates that
          it contains a fingerprint value for every <code>a=fingerprint</code>
          attribute in the session description. This ensures that the
          certificate used by the remote peer for communications is covered by
          the identity assertion.</p>
          <div class="note"><div role="heading" class="note-title marker" id="h-note-38" aria-level="4"><span>Note</span></div><p class="">A <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> is required to fail to
          communicate with peers that offer a certificate that doesn't match an
          <code>a=fingerprint</code> line in the negotiated session
          description.</p></div>
          <div class="note"><div role="heading" class="note-title marker" id="h-note-39" aria-level="4"><span>Note</span></div><p class="">The user agent decodes <a data-link-for="RTCIdentityValidationResult" href="#dom-rtcidentityvalidationresult-contents" class="internalDFN" data-link-type="dfn"><code><code>contents</code></code></a> using
          the format described in [<cite><a class="bibref" href="#bib-RTCWEB-SECURITY-ARCH">RTCWEB-SECURITY-ARCH</a></cite>]. However the IdP
          <em class="rfc2119" title="MUST">MUST</em> treat <code>contents</code> as opaque and return the same string
          to allow for future extensions.</p></div>
        </li>
        <li>
          <p>The <code>RTCPeerConnection</code> validates that the domain
          portion of the identity matches the domain of the IdP as described in
          [<cite><a class="bibref" href="#bib-RTCWEB-SECURITY-ARCH">RTCWEB-SECURITY-ARCH</a></cite>]. If this check fails then the identity
          validation fails.</p>
        </li>
        <li>
          <p>The <code>RTCPeerConnection</code> resolves the <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-peeridentity" class="internalDFN" data-link-type="dfn"><code>peerIdentity</code></a></code> attribute with a new
          instance of <code>RTCIdentityAssertion</code> that includes the IdP
          domain and peer identity.</p>
        </li>
        <li>
          <p>The <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> <em class="rfc2119" title="MAY">MAY</em> display identity information to a user
          in its UI. Any user identity information that is displayed in this
          fashion <em class="rfc2119" title="MUST">MUST</em> use a mechanism that cannot be spoofed by content.</p>
        </li>
      </ol>
      <p>If identity validation fails, the <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-peeridentity" class="internalDFN" data-link-type="dfn"><code>peerIdentity</code></a></code> promise is <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> with a
      newly <a data-link-for="exception" data-lt="create" data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-create-exception">created</a>
      <code>OperationError</code>.</p>
      <p>If identity validation fails and there is a <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer
      identity</a> for the <code>RTCPeerConnection</code>, the promise returned
      by <code>setRemoteDescription</code> <em class="rfc2119" title="MUST">MUST</em> be <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> with the same
      <code>DOMException</code>.</p>
      <p>If identity validation fails and there is no a <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer
      identity</a>, the value of the <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-peeridentity" class="internalDFN" data-link-type="dfn"><code>peerIdentity</code></a></code> <em class="rfc2119" title="MUST">MUST</em> be set to a new,
      unresolved promise instance. This permits the use of renegotiation (or a
      subsequent answer, if the session description was a provisional answer)
      to resolve or reject the identity.</p>
    </section>
    <section>
      <h3 id="sec.idp-error-handling"><span class="secno">9.5 </span>IdP Error Handling</h3>
      <p>Errors in IdP processing will - in most cases - result in the failure
      of the procedure that invoked the IdP proxy. This will result in the
      <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejection</a> of the promise returned by <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-getidentityassertion" class="internalDFN" data-link-type="dfn"><code>getIdentityAssertion</code></a></code>, <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-createoffer" class="internalDFN" data-link-type="dfn"><code>createOffer</code></a></code>, or <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-createanswer" class="internalDFN" data-link-type="dfn"><code>createAnswer</code></a></code>. An IdP proxy error causes a
      <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setremotedescription" class="internalDFN" data-link-type="dfn"><code>setRemoteDescription</code></a></code>
      promise to be <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> if there is a <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer identity</a>; IdP
      errors in calls to <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setremotedescription" class="internalDFN" data-link-type="dfn"><code>setRemoteDescription</code></a></code> where there is no
      <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer identity</a> cause the <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-peeridentity" class="internalDFN" data-link-type="dfn"><code>peerIdentity</code></a></code> promise to be <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a>
      instead.</p>
      <p>If an error occurs these promises are <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> with an
      <code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> if an error occurs in interacting with the IdP
      proxy. The following scenarios result in errors:</p>
      <ul>
        <li><p>An <code>RTCPeerConnection</code> might be configured with an
        identity provider, but loading of the IdP URI fails. Any procedure that
        attempts to invoke such an identity provider and cannot load the
        URI fails with an <code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> with <code>errorDetail</code>
        set to "idp-load-failure" and the httpRequestStatusCode attribute of
        the error set to the HTTP status code of the response.</p></li>
        <li><p>If the IdP loads fails due to the TLS certificate used for the
        HTTPS connection not being trusted, it fails with an
        <code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> with <code>errorDetail</code> set to
       "idp-tls-failure". This typically happens when the IdP uses
        certificate pinning and an intermediary such as an enterprise
        firewall has intercepted the TLS connection.</p></li>
        <li><p>If the script loaded from the identity provider is
        not valid JavaScript or does not implement the correct interfaces,
        it causes an IdP failure with an <code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> with
        <code>errorDetail</code> set to "idp-bad-script-failure".</p></li>
        <li><p>An apparently valid identity provider might fail in several
        ways.
        <!-- 1 remove this comment later. ONE -->
        If the IdP token has expired, then the IdP <em class="rfc2119" title="MUST">MUST</em> fail with an
        <code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> with <code>errorDetail</code> set to
        "idp-token-expired".
        <!-- 2 remove this comment later. TWO -->
        If the IdP token is not valid, then the IdP <em class="rfc2119" title="MUST">MUST</em> fail with an
        <code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> with <code>errorDetail</code> set to
        "idp-token-invalid".
        <!-- 3 remove this comment later. THREE -->
        If an identity provider throws an exception or returns a promise
        that is ultimately <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a>, then the procedure that depends on the IdP
        <em class="rfc2119" title="MUST">MUST</em> also fail. These types of errors will cause an IdP failure with an
        <code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> with <code>errorDetail</code> set to
        "idp-execution-failure".</p></li>
        <li><p>The <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> <em class="rfc2119" title="SHOULD">SHOULD</em> limit the time that it allows for
        an IdP to 15 seconds. This includes both the loading of the <a href="#sec.identity-proxy-communications">IdP proxy</a> and the identity
        assertion generation or validation. Failure to do so potentially causes
        the corresponding operation to take an indefinite amount of time. This
        timer can be cancelled when the IdP proxy produces a
        response. Expiration of this timer cases an IdP failure with an
        <code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> with <code>errorDetail</code> set to
        "idp-timeout".</p></li>
        <li><p>If the identity provider requires the user to login, the
        operation will fail <code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> with <code>errorDetail</code>
        set to "idp-need-login" and the <code>idpLoginUrl</code> attribute of
        the error set to the URL that can be used to login.</p></li>
        <li><p>Even when the IdP proxy produces a positive result, the
        procedure that uses this information might still fail. Additional
        validation of an <a href="#dom-rtcidentityvalidationresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityValidationResult</code></a> value is still
        necessary. The procedure for <a href="#sec.identity-verify-assertion">validation of identity
        assertions</a> describes additional steps that are required to
        successfully validate the output of the IdP proxy.</p></li>
      </ul>
      <p>Any error generated by the IdP <em class="rfc2119" title="MAY">MAY</em> provide additional
      information in the <code>idpErrorInfo</code> attribute. The
      information in this string is defined by the IdP in use.</p>
    </section>
    <section id="rtcpeerconnection-interface-extensions-2">
      <h3 id="x9-6-rtcpeerconnection-interface-extensions"><span class="secno">9.6 </span>RTCPeerConnection Interface Extensions</h3>
      <p>The Identity API extends the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>
      interface as described below.</p>
      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcpeerconnection-partial-6" data-idl="" data-title="RTCPeerConnection">partial interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></span> {
<span class="idlMethod" id="idl-def-rtcpeerconnection-setidentityprovider-provider-options" data-idl="" data-title="setIdentityProvider" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">void</span>               <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="setIdentityProvider|setidentityprovider()" href="#dom-rtcpeerconnection-setidentityprovider" class="internalDFN" data-link-type="dfn"><code>setIdentityProvider</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">provider</span></span>,
                                           <span class="idlParam">optional <span class="idlParamType"><a href="#dom-rtcidentityprovideroptions" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderOptions</code></a></span> <span class="idlParamName">options</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-getidentityassertion" data-idl="" data-title="getIdentityAssertion" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>&gt;</span> <span class="idlMethName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="getIdentityAssertion|getidentityassertion()" href="#dom-rtcpeerconnection-getidentityassertion" class="internalDFN" data-link-type="dfn"><code>getIdentityAssertion</code></a></span>();</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-peeridentity" data-idl="" data-title="peerIdentity" data-dfn-for="rtcpeerconnection">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="#dom-rtcidentityassertion" class="internalDFN" data-link-type="dfn"><code>RTCIdentityAssertion</code></a>&gt;</span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-peeridentity" class="internalDFN" data-link-type="dfn"><code>peerIdentity</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-idploginurl" data-idl="" data-title="idpLoginUrl" data-dfn-for="rtcpeerconnection">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span>                    <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-idploginurl" class="internalDFN" data-link-type="dfn"><code>idpLoginUrl</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-idperrorinfo" data-idl="" data-title="idpErrorInfo" data-dfn-for="rtcpeerconnection">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span>                    <span class="idlAttrName"><a data-no-default="" data-link-for="rtcpeerconnection" data-lt="" href="#dom-rtcpeerconnection-idperrorinfo" class="internalDFN" data-link-type="dfn"><code>idpErrorInfo</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="attributes-23">Attributes</h4>
          <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="attributes">
            <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-peeridentity" data-title="peerIdentity"><code>peerIdentity</code></dfn> of type <span class="idlAttrType">Promise&lt;<a href="#dom-rtcidentityassertion" class="internalDFN" data-link-type="dfn"><code>RTCIdentityAssertion</code></a>&gt;</span>,
            readonly</dt>
            <dd>
              <p>A promise that <a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">resolves</a> with the identity of the peer if the
              identity is successfully validated.</p>
              <p>This promise is <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> if an identity assertion is present
              in a remote session description and validation of that assertion
              fails for any reason. If the promise is <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a>, a new
              unresolved value is created, unless a <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer identity</a>
              has been established. If this promise successfully <a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">resolves</a>, the
              value will not change.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-idploginurl" data-title="idpLoginUrl"><code>idpLoginUrl</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly, nullable</dt>
            <dd>
              <p>The URL that an application can navigate to so that the user
              can login to the IdP, as described in <a href="#sec.idp-loginneeded" class="sec-ref"><span class="secno">9.3.1</span> <span class="sec-title">User Login Procedure</span></a>.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-idperrorinfo" data-title="idpErrorInfo"><code>idpErrorInfo</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly, nullable</dt>
            <dd>
              <p>An attribute that the IdP can use to pass additional
              information back to the applications about the
              error. The format of this string is defined by the IdP
              and may be JSON.</p>
            </dd>
          </dl>
        </section>
        <section>
          <h4 id="methods-16">Methods</h4>
          <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="methods">
            <dt><code>setIdentityProvider</code></dt>
            <dd>
              <p>Sets the identity provider to be used for a given
              <code>RTCPeerConnection</code> object. Applications need not make
              this call; if the browser is already configured for an IdP, then
              that configured IdP might be used to get an assertion.</p>
              <p>When the <dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-setidentityprovider" data-title="setIdentityProvider" data-lt="setIdentityProvider|setidentityprovider()"><code>setIdentityProvider</code></dfn> method is
              invoked, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>
                  <p>If the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object's
                  <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is <code>true</code>, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an
                  <code>InvalidStateError</code>.</p>
                </li>
                <li>
                  <p>If <var>options.protocol</var> includes the the character
                  <code>'/'</code> or <code>'\'</code>, throw a
                  <code>SyntaxError</code>.</p>
                </li>
                <li>
                  <p>Set the current identity provider values to the tuple
                  (<code>provider</code>, <code>options</code>).</p>
                </li>
                <li>
                  <p>If any identity provider value has changed, discard any
                  stored identity assertion.</p>
                </li>
              </ol>
              <p>Identity provider information is not used until an identity
              assertion is required, either in response to a call to
              <code>getIdentityAssertion</code>, or a session description is
              requested with a call to either <code>createOffer</code> or
              <code>createAnswer</code>.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-getidentityassertion" data-title="getIdentityAssertion" data-lt="getIdentityAssertion|getidentityassertion()"><code>getIdentityAssertion</code></dfn></dt>
            <dd>
              <p>Initiates the process of obtaining an identity assertion.
              Applications need not make this call. It is merely intended to
              allow them to start the process of obtaining identity assertions
              before a call is initiated. If an identity is needed, either
              because the browser has been configured with a default identity
              provider or because the <code><a href="#dom-rtcpeerconnection-setidentityprovider" class="internalDFN" data-link-type="dfn"><code>setIdentityProvider</code></a></code> method
              was called, then an identity will be automatically requested when
              an offer or answer is created.</p>
              <p>When <code>getIdentityAssertion</code> is invoked, queue a
              task to run the following steps:</p>
              <ol>
                <li>
                  <p>If the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object's
                  <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">[[IsClosed]]</a> slot is <code>true</code>, <a data-link-type="dfn" href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/#dfn-throw">throw</a> an
                  <code>InvalidStateError</code>.</p>
                </li>
                <li>
                  <p><a href="#sec.identity-proxy-assertion-request">Request an
                  identity assertion</a> from the IdP.</p>
                </li>
                <li>
                  <p><a href="#dfn-resolve" class="internalDFN" data-link-type="dfn">Resolve</a> the promise with the base64 and JSON encoded
                  assertion.</p>
                </li>
              </ol>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcidentityprovideroptions" data-idl="" data-title="RTCIdentityProviderOptions">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcidentityprovideroptions" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderOptions</code></a></span> {
<span class="idlMember" id="idl-def-rtcidentityprovideroptions-protocol" data-idl="" data-title="protocol" data-dfn-for="rtcidentityprovideroptions">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcidentityprovideroptions" data-lt="" href="#dom-rtcidentityprovideroptions-protocol" class="internalDFN" data-link-type="dfn"><code>protocol</code></a></span> = <span class="idlMemberValue">"default"</span>;</span>
<span class="idlMember" id="idl-def-rtcidentityprovideroptions-usernamehint" data-idl="" data-title="usernameHint" data-dfn-for="rtcidentityprovideroptions">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcidentityprovideroptions" data-lt="" href="#dom-rtcidentityprovideroptions-usernamehint" class="internalDFN" data-link-type="dfn"><code>usernameHint</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcidentityprovideroptions-peeridentity" data-idl="" data-title="peerIdentity" data-dfn-for="rtcidentityprovideroptions">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcidentityprovideroptions" data-lt="" href="#dom-rtcidentityprovideroptions-peeridentity" class="internalDFN" data-link-type="dfn"><code>peerIdentity</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="rtcidentityprovideroptions-members"><dfn data-dfn-type="dfn" id="dom-rtcidentityprovideroptions" data-idl="" data-title="RTCIdentityProviderOptions" data-dfn-for=""><code>RTCIdentityProviderOptions</code></dfn> Members</h4>
          <dl data-link-for="RTCIdentityProviderOptions" data-dfn-for="RTCIdentityProviderOptions" class="attributes">
            <dt><dfn data-idl="" data-dfn-for="rtcidentityprovideroptions" data-dfn-type="dfn" id="dom-rtcidentityprovideroptions-protocol" data-title="protocol"><code>protocol</code></dfn> of type <span class="idlAttrType">DOMString</span></dt>
            <dd>
              <p>The name of the protocol that is used by the identity
              provider. This <em class="rfc2119" title="MUST NOT">MUST NOT</em> include '/' (U+002F) or '\' (U+005C)
              characters. This value defaults to "default" if not provided.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcidentityprovideroptions" data-dfn-type="dfn" id="dom-rtcidentityprovideroptions-usernamehint" data-title="usernameHint"><code>usernameHint</code></dfn> of type <span class="idlAttrType">DOMString</span></dt>
            <dd>
              <p>A hint to the identity provider about the identity of the
              principal for which it should generate an identity assertion. If
              absent, the value <code>undefined</code> is used.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcidentityprovideroptions" data-dfn-type="dfn" id="dom-rtcidentityprovideroptions-peeridentity" data-title="peerIdentity"><code>peerIdentity</code></dfn> of type <span class="idlAttrType">DOMString</span></dt>
            <dd>
              <p>The identity of the peer. For identity providers that bind
              their assertions to a particular pair of communication peers,
              this allows them to generate an assertion that includes both
              local and remote identities. If this value is omitted, but a
              value is provided for the <code><a href="#dom-rtcconfiguration-peeridentity">peerIdentity</a></code>
              member of <code><a href="#dom-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code>RTCConfiguration</code></a></code>, the value from
              <code><a href="#dom-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code>RTCConfiguration</code></a></code> is used.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcidentityassertion" data-idl="" data-title="RTCIdentityAssertion">[<span class="idlCtor"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">idp</span></span>, <span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span></span>)</span>,
 <span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcidentityassertion" class="internalDFN" data-link-type="dfn"><code>RTCIdentityAssertion</code></a></span> {
<span class="idlAttribute" id="idl-def-rtcidentityassertion-idp" data-idl="" data-title="idp" data-dfn-for="rtcidentityassertion">    attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcidentityassertion" data-lt="" href="#dom-rtcidentityassertion-idp" class="internalDFN" data-link-type="dfn"><code>idp</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcidentityassertion-name" data-idl="" data-title="name" data-dfn-for="rtcidentityassertion">    attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcidentityassertion" data-lt="" href="#dom-rtcidentityassertion-name" class="internalDFN" data-link-type="dfn"><code>name</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="rtcidentityassertion-attributes"><dfn data-dfn-type="dfn" id="dom-rtcidentityassertion" data-idl="" data-title="RTCIdentityAssertion" data-dfn-for=""><code>RTCIdentityAssertion</code></dfn> Attributes</h4>
          <dl data-link-for="RTCIdentityAssertion" data-dfn-for="RTCIdentityAssertion" class="attributes">
            <dt><dfn data-idl="" data-dfn-for="rtcidentityassertion" data-dfn-type="dfn" id="dom-rtcidentityassertion-idp" data-title="idp"><code>idp</code></dfn> of type <span class="idlAttrType">DOMString</span></dt>
            <dd>
              <p>The domain name of the identity provider that validated this
              identity.</p>
            </dd>
            <dt><dfn data-idl="" data-dfn-for="rtcidentityassertion" data-dfn-type="dfn" id="dom-rtcidentityassertion-name" data-title="name"><code>name</code></dfn> of type <span class="idlAttrType">DOMString</span></dt>
            <dd>
              <p>An RFC5322-conformant [<cite><a class="bibref" href="#bib-RFC5322">RFC5322</a></cite>] representation of the
              verified peer identity. This identity will have been verified via
              the procedures described in [<cite><a class="bibref" href="#bib-RTCWEB-SECURITY-ARCH">RTCWEB-SECURITY-ARCH</a></cite>].</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>
    <section id="identity-examples">
      <h3 id="x9-7-identity-examples"><span class="secno">9.7 </span>Identity Examples</h3>
      <p>The identity system is designed so that applications need not take any
      special action in order for users to generate and verify identity
      assertions; if a user has configured an IdP into their browser, then the
      browser will automatically request/generate assertions and the other side
      will automatically verify them and display the results. However,
      applications may wish to exercise tighter control over the identity
      system as shown by the following examples.</p>
      <div>
        <p>This example shows how to configure the identity provider.</p>
        <div class="example"><div class="example-title marker"><span>Example 9</span></div><pre class="highlight hljs javascript" aria-busy="false">pc.setIdentityProvider(<span class="hljs-string">'example.com'</span>);</pre></div>
      </div>
      <div>
        <p>This example shows how to configure the identity provider with all
        the options.</p>
        <div class="example"><div class="example-title marker"><span>Example 10</span></div><pre class="highlight hljs javascript" aria-busy="false">pc.setIdentityProvider(<span class="hljs-string">'example.com'</span>, {
  <span class="hljs-attr">usernameHint</span>: <span class="hljs-string">'alice@example.com'</span>,
  <span class="hljs-attr">peerIdentity</span>: <span class="hljs-string">'bob@example.net'</span>
});</pre></div>
      </div>
      <div>
        <p>This example shows how to consume identity assertions inside a Web
        application.</p>
        <div class="example"><div class="example-title marker"><span>Example 11</span></div><pre class="highlight hljs javascript" aria-busy="false"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">consumeIdentityAssertion</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> identity = <span class="hljs-keyword">await</span> pc.peerIdentity;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'IdP = '</span>, identity.idp, <span class="hljs-string">'identity ='</span>, identity.name);
}</pre></div>
      </div>
    </section>
  </section>
  <section id="media-stream-api-extensions-for-network-use">
    <!--OddPage--><h2 id="x10-media-stream-api-extensions-for-network-use"><span class="secno">10. </span>Media Stream API Extensions for Network Use</h2>
    <section id="introduction-1">
      <h3 id="x10-1-introduction"><span class="secno">10.1 </span>Introduction</h3>
      <p>The <code>MediaStreamTrack</code> interface, as defined in the
      [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>] specification, typically represents a stream of data of
      audio or video. One or more <code>MediaStreamTrack</code>s can be
      collected in a <code>MediaStream</code> (strictly speaking, a
      <code>MediaStream</code> as defined in [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>] may contain zero
      or more <code>MediaStreamTrack</code> objects).</p>
      <p>A <code>MediaStreamTrack</code> may be extended to represent a media
      flow that either comes from or is sent to a remote peer (and not just the
      local camera, for instance). The extensions required to enable this
      capability on the <code>MediaStreamTrack</code> object will be described
      in this section. How the media is transmitted to the peer is described in
      [<cite><a class="bibref" href="#bib-RTCWEB-RTP">RTCWEB-RTP</a></cite>], [<cite><a class="bibref" href="#bib-RTCWEB-AUDIO">RTCWEB-AUDIO</a></cite>], and [<cite><a class="bibref" href="#bib-RTCWEB-TRANSPORT">RTCWEB-TRANSPORT</a></cite>].</p>
      <p>A <code>MediaStreamTrack</code> sent to another peer will appear as
      one and only one <code>MediaStreamTrack</code> to the recipient. A peer
      is defined as a user agent that supports this specification. In addition,
      the sending side application can indicate what <code>MediaStream</code>
      object(s) the <code>MediaStreamTrack</code> is a member of. The
      corresponding <code>MediaStream</code> object(s) on the receiver side
      will be created (if not already present) and populated accordingly.</p>
      <p>As also described earlier in this document, the objects
      <code>RTCRtpSender</code> and <code>RTCRtpReceiver</code> can be used by
      the application to get more fine grained control over the transmission
      and reception of <code>MediaStreamTrack</code>s.</p>
      <p>Channels are the smallest unit considered in the
      <code>MediaStream</code> specification. Channels are intended to be
      encoded together for transmission as, for instance, an RTP payload type.
      All of the channels that a codec needs to encode jointly <em class="rfc2119" title="MUST">MUST</em> be in the
      same <code>MediaStreamTrack</code> and the codecs <em class="rfc2119" title="SHOULD">SHOULD</em> be able to
      encode, or discard, all the channels in the track.</p>
      <p>The concepts of an input and output to a given
      <code>MediaStreamTrack</code> apply in the case of
      <code>MediaStreamTrack</code> objects transmitted over the network as
      well. A <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code> created by an
      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object (as described previously in
      this document) will take as input the data received from a remote peer.
      Similarly, a <code>MediaStreamTrack</code> from a local source, for
      instance a camera via [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>], will have an output that
      represents what is transmitted to a remote peer if the object is used
      with an <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> object.</p>
      <p>The concept of duplicating <code>MediaStream</code> and
      <code>MediaStreamTrack</code> objects as described in [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>]
      is also applicable here. This feature can be used, for instance, in a
      video-conferencing scenario to display the local video from the user's
      camera and microphone in a local monitor, while only transmitting the
      audio to the remote peer (e.g. in response to the user using a "video
      mute" feature). Combining different <code>MediaStreamTrack</code> objects
      into new <code>MediaStream</code> objects is useful in certain
      situations.</p>
      <div class="note"><div role="heading" class="note-title marker" id="h-note-40" aria-level="4"><span>Note</span></div><p class="">In this document, we only specify aspects of the
      following objects that are relevant when used along with an
      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>. Please refer to the original
      definitions of the objects in the [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>] document for general
      information on using <code>MediaStream</code> and
      <code>MediaStreamTrack</code>.</p></div>
    </section>
    <section>
      <h3 id="mediastream-network-use"><span class="secno">10.2 </span>MediaStream</h3>
      <section id="id">
        <h4 id="x10-2-1-id"><span class="secno">10.2.1 </span>id</h4>
        <p>The <code><a href="https://www.w3.org/TR/mediacapture-streams/#dom-mediastream-id">id</a></code>
        attribute specified in <code>MediaStream</code> returns an id that is
        unique to this stream, so that streams can be recognized at the remote
        end of the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> API.</p>
        <p>When a <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> is created to represent a
        stream obtained from a remote peer, the <code><a href="https://www.w3.org/TR/mediacapture-streams/#dom-mediastream-id">id</a></code>
        attribute is initialized from information provided by the remote
        source.</p>
        <div class="note"><div role="heading" class="note-title marker" id="h-note-41" aria-level="5"><span>Note</span></div><p class="">The id of a <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> object is
        unique to the source of the stream, but that does not mean it is not
        possible to end up with duplicates. For example, the tracks of a
        locally generated stream could be sent from one user agent to a remote
        peer using <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> and then sent back to
        the original user agent in the same manner, in which case the original
        user agent will have multiple streams with the same id (the
        locally-generated one and the one received from the remote peer).</p></div>
      </section>
    </section>
    <section>
      <h3 id="mediastreamtrack-network-use"><span class="secno">10.3 </span>MediaStreamTrack</h3>
      <p>A <code>MediaStreamTrack</code> object's reference to its
      <code>MediaStream</code> in the non-local media source case (an RTP
      source, as is the case for each <code>MediaStreamTrack</code>
      associated with
      an <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code>) is always strong.</p>
      <p>Whenever an <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> receives data on an RTP
      source whose corresponding <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code> is muted,
      and the <a href="#dfn-receptive" class="internalDFN" data-link-type="dfn">[[Receptive]]</a> slot of the
      <a href="#dom-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code><code>RTCRtpTransceiver</code></code></a> object the
      <a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code><code>RTCRtpReceiver</code></code></a> is a member of is <code>true</code>,
      it <em class="rfc2119" title="MUST">MUST</em> queue a task to <a href="#set-track-muted" class="internalDFN" data-link-type="dfn">set the muted state</a> of the corresponding
      <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code> to <code>false</code>.
      </p>
      <p>When one of the SSRCs for RTP source media streams received
      by an <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> is removed either
      due to reception of a BYE or via timeout, it <em class="rfc2119" title="MUST">MUST</em> queue a task to
      <a href="#set-track-muted" class="internalDFN" data-link-type="dfn">set the muted state</a> of the corresponding
      <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code> to
      <code>true</code>. Note that <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setremotedescription" class="internalDFN" data-link-type="dfn"><code>setRemoteDescription</code></a></code>
      can also lead to <a data-lt="set the muted state" href="#set-track-muted" class="internalDFN" data-link-type="dfn"> the setting
      of the muted state</a> of the <code>track</code> to the
      value <code>true</code>.</p>
      <p>The procedures
      <dfn data-lt="add the track|add a track" id="add-track" data-dfn-type="dfn">add a track</dfn>,
      <dfn data-lt="remove the track|remove a track" id="remove-track" data-dfn-type="dfn">remove a track</dfn> and
      <dfn data-lt="set the muted state|set a track's muted state" id="set-track-muted" data-dfn-type="dfn">set a track's
      muted state</dfn> are specified in [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>].</p>
      <p>When a <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></code> track produced by
        an <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code> <var>receiver</var> has
        <code>ended</code> [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>] (such as via a call to
        <code><var>receiver</var>.track.stop</code>), the user agent <em class="rfc2119" title="MAY">MAY</em>
        choose to free resources allocated for the incoming stream, by
        for instance turning off the decoder of <var>receiver</var>.</p>
      <section id="mediatracksupportedconstraints-mediatrackcapabilities-mediatrackconstraints-and-mediatracksettings">
        <h4 id="x10-3-1-mediatracksupportedconstraints-mediatrackcapabilities-mediatrackconstraints-and-mediatracksettings"><span class="secno">10.3.1 </span>MediaTrackSupportedConstraints, MediaTrackCapabilities,
        MediaTrackConstraints and MediaTrackSettings</h4>
        <p>The basics of <code>MediaTrackSupportedConstraints</code>,
        <code>MediaTrackCapabilites</code>, <code>MediaTrackConstraints</code>
        and <code>MediaTrackSettings</code> is outlined in [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>].
        However, the <code>MediaTrackSettings</code> for a
        <code>MediaStreamTrack</code> sourced by an
        <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> will only be populated with
        members to the extent that data is supplied by means of the remote
        <code><a href="#dom-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></code> applied via
        <code>setRemoteDescription</code> and the actual RTP data. This means
        that certain members, such as <code>facingMode</code>,
        <code>echoCancellation</code>, <code>latency</code>,
        <code>deviceId</code> and <code>groupId</code>, will always be
        missing.</p>
      </section>
    </section>
    <section id="isolated-media-streams">
      <h3 id="x10-4-isolated-media-streams"><span class="secno">10.4 </span>Isolated Media Streams</h3>
      <p>A MediaStream acquired using <code>getUserMedia()</code> is, by
      default, accessible to an application. This means that the application is
      able to access the contents of tracks, modify their content, and send
      that media to any peer it chooses.</p>
      <p>WebRTC supports calling scenarios where media is sent to a
      specifically identified peer, without the contents of media streams being
      accessible to applications. This is enabled by use of the
      <code>peerIdentity</code> parameter to <code>getUserMedia()</code>.</p>
      <p>An application willingly relinquishes access to media by including a
      <code>peerIdentity</code> parameter in the
      <code>MediaStreamConstraints</code>. This attribute is set to a
      <code>DOMString</code> containing the identity of a specific peer.</p>
      <p>The <code>MediaStreamConstraints</code> dictionary is expanded to
      include the <code>peerIdentity</code> parameter.</p>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-mediastreamconstraints-partial-1" data-idl="" data-title="MediaStreamConstraints">partial dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-mediastreamconstraints" class="internalDFN" data-link-type="dfn"><code>MediaStreamConstraints</code></a></span> {
<span class="idlMember" id="idl-def-mediastreamconstraints-peeridentity" data-idl="" data-title="peerIdentity" data-dfn-for="mediastreamconstraints">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default="" data-link-for="mediastreamconstraints" data-lt="" href="#dom-mediastreamconstraints-peeridentity" class="internalDFN" data-link-type="dfn"><code>peerIdentity</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="dictionary-mediastreamconstraints-members">Dictionary MediaStreamConstraints
          Members</h4>
          <dl data-link-for="MediaStreamConstraints" data-dfn-for="MediaStreamConstraints" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="mediastreamconstraints" data-dfn-type="dfn" id="dom-mediastreamconstraints-peeridentity" data-title="peerIdentity"><code>peerIdentity</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>If set, <code>peerIdentity</code> isolates media from the
              application. Media can only be sent to the identified peer.</p>
            </dd>
          </dl>
        </section>
      </div>
      <p>A user that is prompted to provide consent for access to a camera or
      microphone can be shown the value of the <code>peerIdentity</code>
      parameter, so that they can be informed that the consent is more narrowly
      restricted.</p>
      <p>When the <code><dfn data-dfn-type="dfn" id="dfn-peeridentity">peerIdentity</dfn></code> option is supplied to
      <code>getUserMedia()</code>, all of the <code>MediaStreamTrack</code>s in
      the resulting <code>MediaStream</code> are isolated so that content is
      not accessible to any application. Isolated
      <code>MediaStreamTrack</code>s can be used for two purposes:</p>
      <ul>
        <li>
          <p>Displayed in an appropriate media tag (e.g., a video or audio
          element). The browser <em class="rfc2119" title="MUST">MUST</em> ensure that content is inaccessible to the
          application by ensuring that the resulting content is given the same
          protections as content that is <a href="https://fetch.spec.whatwg.org/#concept-cors-check">
          CORS cross-origin</a>, as described in the relevant <a href="https://www.w3.org/TR/html51/semantics-embedded-content.html#security-and-privacy-considerations">
          Security and privacy considerations section</a> of [<cite><a class="bibref" href="#bib-HTML51">HTML51</a></cite>].</p>
        </li>
        <li>
          <p>Used as the argument to <a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-addtrack" class="internalDFN" data-link-type="dfn"><code>addTrack</code></a> on an
          <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> instance, subject to the
          restrictions in <a href="#isolated-pc">isolated streams and
          RTCPeerConnection</a>.</p>
        </li>
      </ul>
      <p>A <code>MediaStreamTrack</code> that is added to another
      <code>MediaStream</code> remains isolated. When an isolated
      <code>MediaStreamTrack</code> is added to a <code>MediaStream</code> with
      a different peerIdentity, the <code>MediaStream</code> gets a combination
      of isolation restrictions. A <code>MediaStream</code> containing
      <code>MediaStreamTrack</code> instances with mixed isolation properties
      can be displayed, but cannot be sent using
      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>.</p>
      <p>Any <code>peerIdentity</code> property <em class="rfc2119" title="MUST">MUST</em> be retained on cloned
      copies of <code>MediaStreamTrack</code>s.</p>
      <!-- Any stream or track that might be derived from an isolated stream,
           such as
           through <a href="https://www.w3.org/TR/streamproc/#media-element-extensions">captureStreamUntilEnded
           or captureStream</a>, MUST also retain any isolation protections.
        -->
      <section id="isolated-track">
        <h4 id="x10-4-1-extended-mediastreamtrack-properties"><span class="secno">10.4.1 </span>Extended MediaStreamTrack Properties</h4>
        <p><code>MediaStreamTrack</code> is expanded to include an
        <var>isolated</var> attribute and a corresponding event. This allows an
        application to quickly and easily determine whether a track is
        accessible.</p>
        <div>
          <div><pre class="def idl"><span class="idlInterface" id="idl-def-mediastreamtrack-partial-1" data-idl="" data-title="MediaStreamTrack">partial interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span> {
<span class="idlAttribute" id="idl-def-mediastreamtrack-isolated" data-idl="" data-title="isolated" data-dfn-for="mediastreamtrack">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span>      <span class="idlAttrName"><a data-no-default="" data-link-for="mediastreamtrack" data-lt="" href="#dom-mediastreamtrack-isolated" class="internalDFN" data-link-type="dfn"><code>isolated</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-mediastreamtrack-onisolationchange" data-idl="" data-title="onisolationchange" data-dfn-for="mediastreamtrack">             attribute <span class="idlAttrType"><a href="https://www.w3.org/TR/html52/webappapis.html#event-handler">EventHandler</a></span> <span class="idlAttrName"><a data-no-default="" data-link-for="mediastreamtrack" data-lt="" href="#dom-mediastreamtrack-onisolationchange" class="internalDFN" data-link-type="dfn"><code>onisolationchange</code></a></span>;</span>
};</span></pre></div>
          <section>
            <h5 id="attributes-24">Attributes</h5>
            <dl data-link-for="MediaStreamTrack" data-dfn-for="MediaStreamTrack" class="attributes">
              <dt><dfn data-idl="" data-dfn-for="mediastreamtrack" data-dfn-type="dfn" id="dom-mediastreamtrack-isolated" data-title="isolated"><code>isolated</code></dfn> of type <span class="idlAttrType">boolean</span>, readonly</dt>
              <dd>
                <p>A <code>MediaStreamTrack</code> is isolated (and the
                corresponding <var>isolated</var> attribute set to
                <var>true</var>) when content is inaccessible to the owning
                document. This occurs as a result of setting the
                <var>peerIdentity</var> option. A track is also isolated if it
                comes from a cross origin source.</p>
              </dd>
              <dt><dfn data-idl="" data-dfn-for="mediastreamtrack" data-dfn-type="dfn" id="dom-mediastreamtrack-onisolationchange" data-title="onisolationchange"><code>onisolationchange</code></dfn> of type
              <span class="idlAttrType">EventHandler</span></dt>
              <dd>
                <p>This event handler, of type <a href="#event-isolationchange" class="internalDFN" data-link-type="dfn"><code>isolationchange</code></a>, is fired
                when the value of the <var>isolated</var> attribute
                changes.</p>
              </dd>
            </dl>
          </section>
        </div>
      </section>
      <section id="isolated-pc">
        <h4 id="x10-4-2-isolated-streams-and-rtcpeerconnection"><span class="secno">10.4.2 </span>Isolated Streams and RTCPeerConnection</h4>
        <p>A <code>MediaStreamTrack</code> with a <var>peerIdentity</var>
        option set can be added to any <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>.
        However, the content of an isolated track <em class="rfc2119" title="MUST NOT">MUST NOT</em> be transmitted
        unless all of the following constraints are met:</p>
        <ul>
          <li>
            <p>A <code>MediaStreamTrack</code> from a stream acquired using the
            <var>peerIdentity</var> option can be transmitted if the
            <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> has successfully <a href="#sec.identity-verify-assertion">validated the identity</a> of the
            peer AND that identity is the same identity that was used in the
            <var>peerIdentity</var> option associated with the track. That is,
            the <code>name</code> attribute of the <code>peerIdentity</code>
            attribute of the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> instance
            <em class="rfc2119" title="MUST">MUST</em> match the value of the <code>peerIdentity</code> option passed
            to <code>getUserMedia()</code>.</p>
            <p>Rules for matching identity are described in
            [<cite><a class="bibref" href="#bib-RTCWEB-SECURITY-ARCH">RTCWEB-SECURITY-ARCH</a></cite>].</p>
          </li>
          <li>
            <p>The peer has indicated that it will respect the isolation
            properties of streams. That is, a DTLS connection with a promise to
            respect stream confidentiality, as defined in [<cite><a class="bibref" href="#bib-RTCWEB-ALPN">RTCWEB-ALPN</a></cite>] has
            been established.</p>
          </li>
        </ul>
        <p>Failing to meet these conditions means that no media can be sent for
        the affected <code>MediaStreamTrack</code>. Video <em class="rfc2119" title="MUST">MUST</em> be replaced by
        black frames, audio <em class="rfc2119" title="MUST">MUST</em> be replaced by silence, and equivalently
        information-free content <em class="rfc2119" title="MUST">MUST</em> be provided for other media types.</p>
        <p>Remotely sourced <code>MediaStreamTrack</code>s <em class="rfc2119" title="MUST">MUST</em> be isolated if
        they are received over a DTLS connection that has been negotiated with
        track isolation. This protects isolated media from the application in
        the receiving browser. These tracks <em class="rfc2119" title="MUST">MUST</em> only be displayed to a user
        using the appropriate media element (e.g., &lt;video&gt; or
        &lt;audio&gt;).</p>
        <p>Any <code>MediaStreamTrack</code> that has the
        <var>peerIdentity</var> option set causes all tracks sent using the
        same <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> to be isolated at the
        receiving peer. All DTLS connections created for an
        <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> with isolated local streams <em class="rfc2119" title="MUST">MUST</em>
        be negotiated so that media remains isolated at the remote peer. This
        causes non-isolated media to become isolated at the receiving peer if
        any isolated tracks are added to the same
        <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>.</p>
        <div class="note"><div role="heading" class="note-title marker" id="h-note-42" aria-level="5"><span>Note</span></div><p class="">Tracks that are not bound to a particular
        <var>peerIdentity</var> do not cause other streams to be isolated,
        these tracks simply do not have their content transmitted.</p></div>
        <p>If a stream becomes isolated after initially being accessible, or an
        isolated stream is added to an active session, then media for that
        stream is replaced by information-free content (e.g., black frames or
        silence).</p>
      </section>
      <section id="isolation-protection">
        <h4 id="x10-4-3-protection-afforded-by-media-isolation"><span class="secno">10.4.3 </span>Protection Afforded by Media Isolation</h4>
        <p>Media isolation ensures that the content of a
        <code>MediaStreamTrack</code> is not accessible to web applications.
        However, to ensure that media with a <var>peerIdentity</var> option set
        can be sent to peers, some meta-information about the media will be
        exposed to applications.</p>
        <p>Applications will be able to observe the parameters of the media
        that affect session negotiation and conversion into RTP. This includes
        the codecs that might be supported by the track, the bitrate, the
        number of packets, and the current settings that are set on the
        <code>MediaStreamTrack</code>.</p>
        <p>In particular, the <a href="#sec.stats-model">statistics</a> that
        <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code> records are not reduced in
        capability. New statistics that might compromise isolation <em class="rfc2119" title="MUST">MUST</em> be
        avoided, or explicitly suppressed for isolated streams.</p>
        <p>Most of these data are exposed to the network when the media is
        transmitted. Only the settings for the <code>MediaStreamTrack</code>
        present a new source of information. This can includes the frame rate
        and resolution of video tracks, the bandwidth of audio tracks, and
        other information about the source, which would not otherwise be
        revealed to a network observer. Since settings don't change at a high
        frequency or in response to changes in media content, settings only
        reveal limited reveal information about the content of a track.
        However, any setting that might change dynamically in response to the
        content of an isolated <code>MediaStreamTrack</code> <em class="rfc2119" title="MUST">MUST</em> have changes
        suppressed.</p>
      </section>
    </section>
  </section>
  <section class="informative" id="examples-and-call-flows">
    <!--OddPage--><h2 id="x11-examples-and-call-flows"><span class="secno">11. </span>Examples and Call Flows</h2><p><em>This section is non-normative.</em></p>
    <section id="simple-peer-to-peer-example">
      <h3 id="x11-1-simple-peer-to-peer-example"><span class="secno">11.1 </span>Simple Peer-to-peer Example</h3>
      <div>
        <p>When two peers decide they are going to set up a connection to each
        other, they both go through these steps. The STUN/TURN server
        configuration describes a server they can use to get things like their
        public IP address or to set up NAT traversal. They also have to send
        data for the signaling channel to each other using the same out-of-band
        mechanism they used to establish that they were going to communicate in
        the first place.</p>
        <div class="example"><div class="example-title marker"><span>Example 12</span></div><pre class="highlight hljs javascript" aria-busy="false"><span class="hljs-keyword">const</span> signaling = <span class="hljs-keyword">new</span> SignalingChannel(); <span class="hljs-comment">// handles JSON.stringify/parse</span>
<span class="hljs-keyword">const</span> constraints = {<span class="hljs-attr">audio</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">video</span>: <span class="hljs-literal">true</span>};
<span class="hljs-keyword">const</span> configuration = {<span class="hljs-attr">iceServers</span>: [{<span class="hljs-attr">urls</span>: <span class="hljs-string">'stuns:stun.example.org'</span>}]};
<span class="hljs-keyword">const</span> pc = <span class="hljs-keyword">new</span> RTCPeerConnection(configuration);

<span class="hljs-comment">// send any ice candidates to the other peer</span>
pc.onicecandidate = <span class="hljs-function">(<span class="hljs-params">{candidate}</span>) =&gt;</span> signaling.send({candidate});

<span class="hljs-comment">// let the "negotiationneeded" event trigger offer generation</span>
pc.onnegotiationneeded = <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> pc.setLocalDescription(<span class="hljs-keyword">await</span> pc.createOffer());
    <span class="hljs-comment">// send the offer to the other peer</span>
    signaling.send({<span class="hljs-attr">desc</span>: pc.localDescription});
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-built_in">console</span>.error(err);
  }
};

<span class="hljs-comment">// once media for a remote track arrives, show it in the remote video element</span>
pc.ontrack = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-comment">// don't set srcObject again if it is already set.</span>
  <span class="hljs-keyword">if</span> (remoteView.srcObject) <span class="hljs-keyword">return</span>;
  remoteView.srcObject = event.streams[<span class="hljs-number">0</span>];
};

<span class="hljs-comment">// call start() to initiate</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">start</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// get a local stream, show it in a self-view and add it to be sent</span>
    <span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> navigator.mediaDevices.getUserMedia(constraints);
    stream.getTracks().forEach(<span class="hljs-function">(<span class="hljs-params">track</span>) =&gt;</span> pc.addTrack(track, stream));
    selfView.srcObject = stream;
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-built_in">console</span>.error(err);
  }
}

signaling.onmessage = <span class="hljs-keyword">async</span> ({desc, candidate}) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">if</span> (desc) {
      <span class="hljs-comment">// if we get an offer, we need to reply with an answer</span>
      <span class="hljs-keyword">if</span> (desc.type == <span class="hljs-string">'offer'</span>) {
        <span class="hljs-keyword">await</span> pc.setRemoteDescription(desc);
        <span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> navigator.mediaDevices.getUserMedia(constraints);
        stream.getTracks().forEach(<span class="hljs-function">(<span class="hljs-params">track</span>) =&gt;</span> pc.addTrack(track, stream));
        <span class="hljs-keyword">await</span> pc.setLocalDescription(<span class="hljs-keyword">await</span> pc.createAnswer());
        signaling.send({<span class="hljs-attr">desc</span>: pc.localDescription});
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (desc.type == <span class="hljs-string">'answer'</span>) {
        <span class="hljs-keyword">await</span> pc.setRemoteDescription(desc);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Unsupported SDP type. Your code may differ here.'</span>);
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (candidate) {
      <span class="hljs-keyword">await</span> pc.addIceCandidate(candidate);
    }
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-built_in">console</span>.error(err);
  }
};</pre></div>
      </div>
    </section>
    <section id="advanced-peer-to-peer-example-with-warm-up">
      <h3 id="x11-2-advanced-peer-to-peer-example-with-warm-up"><span class="secno">11.2 </span>Advanced Peer-to-peer Example with Warm-up</h3>
      <div>
        <p>When two peers decide they are going to set up a connection to each
        other and want to have the ICE, DTLS, and media connections "warmed up"
        such that they are ready to send and receive media immediately, they
        both go through these steps.</p>
        <div class="example"><div class="example-title marker"><span>Example 13</span></div><pre class="highlight hljs javascript" aria-busy="false"><span class="hljs-keyword">const</span> signaling = <span class="hljs-keyword">new</span> SignalingChannel();
<span class="hljs-keyword">const</span> configuration = {<span class="hljs-attr">iceServers</span>: [{<span class="hljs-attr">urls</span>: <span class="hljs-string">'stuns:stun.example.org'</span>}]};
<span class="hljs-keyword">const</span> audio = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">const</span> audioSendTrack = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">const</span> video = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">const</span> videoSendTrack = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">const</span> started = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">let</span> pc;

<span class="hljs-comment">// Call warmup() to warm-up ICE, DTLS, and media, but not send media yet.</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">warmup</span>(<span class="hljs-params">isAnswerer</span>) </span>{
  pc = <span class="hljs-keyword">new</span> RTCPeerConnection(configuration);
  <span class="hljs-keyword">if</span> (!isAnswerer) {
    audio = pc.addTransceiver(<span class="hljs-string">'audio'</span>);
    video = pc.addTransceiver(<span class="hljs-string">'video'</span>);
  }

  <span class="hljs-comment">// send any ice candidates to the other peer</span>
  pc.onicecandidate = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    signaling.send(<span class="hljs-built_in">JSON</span>.stringify({<span class="hljs-attr">candidate</span>: event.candidate}));
  };

  <span class="hljs-comment">// let the "negotiationneeded" event trigger offer generation</span>
  pc.onnegotiationneeded = <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> pc.setLocalDescription(<span class="hljs-keyword">await</span> pc.createOffer());
      <span class="hljs-comment">// send the offer to the other peer</span>
      signaling.send(<span class="hljs-built_in">JSON</span>.stringify({<span class="hljs-attr">desc</span>: pc.localDescription}));
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-built_in">console</span>.error(err);
    }
  };

  <span class="hljs-comment">// once media for the remote track arrives, show it in the remote video element</span>
  pc.ontrack = <span class="hljs-keyword">async</span> (event) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">if</span> (event.track.kind == <span class="hljs-string">'audio'</span>) {
        <span class="hljs-keyword">if</span> (isAnswerer) {
          audio = event.transceiver;
          audio.direction = <span class="hljs-string">'sendrecv'</span>;
          <span class="hljs-keyword">if</span> (started &amp;&amp; audioSendTrack) {
            <span class="hljs-keyword">await</span> audio.sender.replaceTrack(audioSendTrack);
          }
        }
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event.track.kind == <span class="hljs-string">'video'</span>) {
        <span class="hljs-keyword">if</span> (isAnswerer) {
          video = event.transceiver;
          video.direction = <span class="hljs-string">'sendrecv'</span>;
          <span class="hljs-keyword">if</span> (started &amp;&amp; videoSendTrack) {
            <span class="hljs-keyword">await</span> video.sender.replaceTrack(videoSendTrack);
          }
        }
      }

      <span class="hljs-comment">// don't set srcObject again if it is already set.</span>
      <span class="hljs-keyword">if</span> (remoteView.srcObject) <span class="hljs-keyword">return</span>;
      remoteView.srcObject = event.streams[<span class="hljs-number">0</span>];
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-built_in">console</span>.error(err);
    }
  };

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// get a local stream, show it in a self-view and add it to be sent</span>
    <span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> navigator.mediaDevices.getUserMedia({<span class="hljs-attr">audio</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">video</span>: <span class="hljs-literal">true</span>});
    selfView.srcObject = stream;
    audioSendTrack = stream.getAudioTracks()[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">if</span> (started) {
      <span class="hljs-keyword">await</span> audio.sender.replaceTrack(audioSendTrack);
    }
    videoSendTrack = stream.getVideoTracks()[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">if</span> (started) {
      <span class="hljs-keyword">await</span> video.sender.replaceTrack(videoSendTrack);
    }
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-built_in">console</span>.erro(err);
  }
}

<span class="hljs-comment">// Call start() to start sending media.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">start</span>(<span class="hljs-params"></span>) </span>{
  started = <span class="hljs-literal">true</span>;
  signaling.send(<span class="hljs-built_in">JSON</span>.stringify({<span class="hljs-attr">start</span>: <span class="hljs-literal">true</span>}));
}

signaling.onmessage = <span class="hljs-keyword">async</span> (event) =&gt; {
  <span class="hljs-keyword">if</span> (!pc) warmup(<span class="hljs-literal">true</span>);

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> message = <span class="hljs-built_in">JSON</span>.parse(event.data);
    <span class="hljs-keyword">if</span> (message.desc) {
      <span class="hljs-keyword">const</span> desc = message.desc;

      <span class="hljs-comment">// if we get an offer, we need to reply with an answer</span>
      <span class="hljs-keyword">if</span> (desc.type == <span class="hljs-string">'offer'</span>) {
        <span class="hljs-keyword">await</span> pc.setRemoteDescription(desc);
        <span class="hljs-keyword">await</span> pc.setLocalDescription(<span class="hljs-keyword">await</span> pc.createAnswer());
        signaling.send(<span class="hljs-built_in">JSON</span>.stringify({<span class="hljs-attr">desc</span>: pc.localDescription}));
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">await</span> pc.setRemoteDescription(desc);
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (message.start) {
      started = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">if</span> (audio &amp;&amp; audioSendTrack) {
        <span class="hljs-keyword">await</span> audio.sender.replaceTrack(audioSendTrack);
      }
      <span class="hljs-keyword">if</span> (video &amp;&amp; videoSendTrack) {
        <span class="hljs-keyword">await</span> video.sender.replaceTrack(videoSendTrack);
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">await</span> pc.addIceCandidate(message.candidate);
    }
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-built_in">console</span>.error(err);
  }
};</pre></div>
      </div>
    </section>
    <section id="peer-to-peer-example-with-media-before-signaling">
      <h3 id="x11-3-peer-to-peer-example-with-media-before-signaling"><span class="secno">11.3 </span>Peer-to-peer Example with media before signaling</h3>
      <div>
        <p>The answerer may wish to send media in parallel with sending the
        answer, and the offerer may wish to render the media before the answer
        arrives.</p>
        <div class="example"><div class="example-title marker"><span>Example 14</span></div><pre class="highlight hljs javascript" aria-busy="false"><span class="hljs-keyword">const</span> signaling = <span class="hljs-keyword">new</span> SignalingChannel();
<span class="hljs-keyword">const</span> configuration = {<span class="hljs-attr">iceServers</span>: [{<span class="hljs-attr">urls</span>: <span class="hljs-string">'stuns:stun.example.org'</span>}]};
<span class="hljs-keyword">let</span> pc;

<span class="hljs-comment">// call start() to initiate</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">start</span>(<span class="hljs-params"></span>) </span>{
  pc = <span class="hljs-keyword">new</span> RTCPeerConnection(configuration);

  <span class="hljs-comment">// send any ice candidates to the other peer</span>
  pc.onicecandidate = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    signaling.send(<span class="hljs-built_in">JSON</span>.stringify({<span class="hljs-attr">candidate</span>: event.candidate}));
  };

  <span class="hljs-comment">// let the "negotiationneeded" event trigger offer generation</span>
  pc.onnegotiationneeded = <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> pc.setLocalDescription(<span class="hljs-keyword">await</span> pc.createOffer());
      <span class="hljs-comment">// send the offer to the other peer</span>
      signaling.send(<span class="hljs-built_in">JSON</span>.stringify({<span class="hljs-attr">desc</span>: pc.localDescription}));
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-built_in">console</span>.error(err);
    }
  };

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// get a local stream, show it in a self-view and add it to be sent</span>
    <span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> navigator.mediaDevices.getUserMedia({<span class="hljs-attr">audio</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">video</span>: <span class="hljs-literal">true</span>});
    selfView.srcObject = stream;
    <span class="hljs-comment">// Render the media even before ontrack fires.</span>
    remoteView.srcObject = <span class="hljs-keyword">new</span> MediaStream(pc.getReceivers().map(<span class="hljs-function">(<span class="hljs-params">r</span>) =&gt;</span> r.track));
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-built_in">console</span>.error(err);
  }
};

signaling.onmessage = <span class="hljs-keyword">async</span> (event) =&gt; {
  <span class="hljs-keyword">if</span> (!pc) start();

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> message = <span class="hljs-built_in">JSON</span>.parse(event.data);
    <span class="hljs-keyword">if</span> (message.desc) {
      <span class="hljs-keyword">const</span> desc = message.desc;

      <span class="hljs-comment">// if we get an offer, we need to reply with an answer</span>
      <span class="hljs-keyword">if</span> (desc.type == <span class="hljs-string">'offer'</span>) {
        <span class="hljs-keyword">await</span> pc.setRemoteDescription(desc);
        <span class="hljs-keyword">await</span> pc.setLocalDescription(<span class="hljs-keyword">await</span> pc.createAnswer());
        signaling.send(<span class="hljs-built_in">JSON</span>.stringify({<span class="hljs-attr">desc</span>: pc.localDescription}));
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">await</span> pc.setRemoteDescription(desc);
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">await</span> pc.addIceCandidate(message.candidate);
    }
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-built_in">console</span>.error(err);
  }
};</pre></div>
      </div>
    </section>
    <section id="simulcast-example">
      <h3 id="x11-4-simulcast-example"><span class="secno">11.4 </span>Simulcast Example</h3>
      <div>
        <p>A client wants to send multiple RTP encodings (simulcast) to a
        server.</p>
        <div class="example"><div class="example-title marker"><span>Example 15</span></div><pre class="highlight hljs javascript" aria-busy="false"><span class="hljs-keyword">const</span> signaling = <span class="hljs-keyword">new</span> SignalingChannel();
<span class="hljs-keyword">const</span> configuration = {<span class="hljs-string">'iceServers'</span>: [{<span class="hljs-string">'urls'</span>: <span class="hljs-string">'stuns:stun.example.org'</span>}]};
<span class="hljs-keyword">let</span> pc;

<span class="hljs-comment">// call start() to initiate</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">start</span>(<span class="hljs-params"></span>) </span>{
  pc = <span class="hljs-keyword">new</span> RTCPeerConnection(configuration);

  <span class="hljs-comment">// let the "negotiationneeded" event trigger offer generation</span>
  pc.onnegotiationneeded = <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> pc.setLocalDescription(<span class="hljs-keyword">await</span> pc.createOffer());
      <span class="hljs-comment">// send the offer to the other peer</span>
      signaling.send(<span class="hljs-built_in">JSON</span>.stringify({<span class="hljs-attr">desc</span>: pc.localDescription}));
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-built_in">console</span>.error(err);
    }
  };

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// get a local stream, show it in a self-view and add it to be sent</span>
    <span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> navigator.mediaDevices.getUserMedia({<span class="hljs-attr">audio</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">video</span>: <span class="hljs-literal">true</span>});
    selfView.srcObject = stream;
    pc.addTransceiver(stream.getAudioTracks()[<span class="hljs-number">0</span>], {<span class="hljs-attr">direction</span>: <span class="hljs-string">'sendonly'</span>});
    pc.addTransceiver(stream.getVideoTracks()[<span class="hljs-number">0</span>], {
      <span class="hljs-attr">direction</span>: <span class="hljs-string">'sendonly'</span>,
      <span class="hljs-attr">sendEncodings</span>: [
        {<span class="hljs-attr">rid</span>: <span class="hljs-string">'f'</span>},
        {<span class="hljs-attr">rid</span>: <span class="hljs-string">'h'</span>, <span class="hljs-attr">scaleResolutionDownBy</span>: <span class="hljs-number">2.0</span>},
        {<span class="hljs-attr">rid</span>: <span class="hljs-string">'q'</span>, <span class="hljs-attr">scaleResolutionDownBy</span>: <span class="hljs-number">4.0</span>}
      ]
    });
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-built_in">console</span>.error(err);
  }
}

signaling.onmessage = <span class="hljs-keyword">async</span> (event) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> message = <span class="hljs-built_in">JSON</span>.parse(event.data);
    <span class="hljs-keyword">if</span> (message.desc) {
      <span class="hljs-keyword">await</span> pc.setRemoteDescription(message.desc);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">await</span> pc.addIceCandidate(message.candidate);
    }
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-built_in">console</span>.error(err);
  }
};</pre></div>
      </div>
    </section>
    <section id="peer-to-peer-data-example">
      <h3 id="x11-5-peer-to-peer-data-example"><span class="secno">11.5 </span>Peer-to-peer Data Example</h3>
      <div>
        <p>This example shows how to create an
        <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object and perform the offer/answer
        exchange required to connect the channel to the other peer. The
        <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> is used in the context of a simple
        chat application and listeners are attached to monitor when the channel
        is ready, messages are received and when the channel is closed.</p>
        <div class="example"><div class="example-title marker"><span>Example 16</span></div><pre class="highlight hljs javascript" aria-busy="false"><span class="hljs-keyword">const</span> signaling = <span class="hljs-keyword">new</span> SignalingChannel(); <span class="hljs-comment">// handles JSON.stringify/parse</span>
<span class="hljs-keyword">const</span> configuration = {<span class="hljs-attr">iceServers</span>: [{<span class="hljs-attr">urls</span>: <span class="hljs-string">'stuns:stun.example.org'</span>}]};
<span class="hljs-keyword">let</span> pc;
<span class="hljs-keyword">let</span> channel;

<span class="hljs-comment">// call start(true) to initiate</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">start</span>(<span class="hljs-params">isInitiator</span>) </span>{
  pc = <span class="hljs-keyword">new</span> RTCPeerConnection(configuration);

  <span class="hljs-comment">// send any ice candidates to the other peer</span>
  pc.onicecandidate = <span class="hljs-function">(<span class="hljs-params">candidate</span>) =&gt;</span> {
    signaling.send({candidate});
  };

  <span class="hljs-comment">// let the "negotiationneeded" event trigger offer generation</span>
  pc.onnegotiationneeded = <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> pc.setLocalDescription(<span class="hljs-keyword">await</span> pc.createOffer());
      <span class="hljs-comment">// send the offer to the other peer</span>
      signaling.send({<span class="hljs-attr">desc</span>: pc.localDescription});
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-built_in">console</span>.error(err);
    }
  };

  <span class="hljs-keyword">if</span> (isInitiator) {
    <span class="hljs-comment">// create data channel and setup chat</span>
    channel = pc.createDataChannel(<span class="hljs-string">'chat'</span>);
    setupChat();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// setup chat on incoming data channel</span>
    pc.ondatachannel = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      channel = event.channel;
      setupChat();
    };
  }
}

signaling.onmessage = <span class="hljs-keyword">async</span> ({desc, candidate}) =&gt; {
  <span class="hljs-keyword">if</span> (!pc) start(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">if</span> (desc) {
      <span class="hljs-comment">// if we get an offer, we need to reply with an answer</span>
      <span class="hljs-keyword">if</span> (desc.type == <span class="hljs-string">'offer'</span>) {
        <span class="hljs-keyword">await</span> pc.setRemoteDescription(desc);
        <span class="hljs-keyword">await</span> pc.setLocalDescription(<span class="hljs-keyword">await</span> pc.createAnswer());
        signaling.send({<span class="hljs-attr">desc</span>: pc.localDescription});
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">await</span> pc.setRemoteDescription(desc);
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">await</span> pc.addIceCandidate(candidate);
    }
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-built_in">console</span>.error(err);
  }
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setupChat</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">// e.g. enable send button</span>
  channel.onopen = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> enableChat(channel);
  channel.onmessage = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> showChatMessage(event.data);
}</pre></div>
      </div><!--div>
    <p>This simple example shows how configure two RTCDataChannel objects for different purposes.</p>
<p><pre   class='example highlight'>
// the chat channel is reliable and not as prioritized as game data
var chatChan = peerConn.createDataChannel("chat", { priority: 1 });

// the game data channel is prioritized and unreliable low latency channel for high performance
var gameDataChan = peerConn.createDataChannel("data", { reliable: false, priority: 10 });
    </pre></p>
  </div-->
    </section>
    <section id="call-flow-browser-to-browser">
      <h3 id="x11-6-call-flow-browser-to-browser"><span class="secno">11.6 </span>Call Flow Browser to Browser</h3>
      <p>This shows an example of one possible call flow between two browsers.
      This does not show the procedure to get access to local media or every
      callback that gets fired but instead tries to reduce it down to only show
      the key events and messages.</p>
      <!--
      <p>The following flow shows a more complete set of the callbacks and
      events that happen.</p>
      -->
    </section>
    <section id="dtmf-example">
      <h3 id="x11-7-dtmf-example"><span class="secno">11.7 </span>DTMF Example</h3>
      <p>Examples assume that <var>sender</var> is an <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></code>.</p>
      <p>Sending the DTMF signal "1234" with 500 ms duration per tone:</p>
      <div class="example"><div class="example-title marker"><span>Example 17</span></div><pre class="highlight hljs javascript" aria-busy="false"><span class="hljs-keyword">if</span> (sender.dtmf.canInsertDTMF) {
  <span class="hljs-keyword">const</span> duration = <span class="hljs-number">500</span>;
  sender.dtmf.insertDTMF(<span class="hljs-string">'1234'</span>, duration);
} <span class="hljs-keyword">else</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'DTMF function not available'</span>);
}</pre></div>
      <p>Send the DTMF signal "123" and abort after sending "2".</p>
      <div class="example"><div class="example-title marker"><span>Example 18</span></div><pre class="highlight hljs javascript" aria-busy="false"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sendDTMF</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">if</span> (sender.dtmf.canInsertDTMF) {
    sender.dtmf.insertDTMF(<span class="hljs-string">'123'</span>);
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">r</span>) =&gt;</span> sender.dtmf.ontonechange = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> e.tone == <span class="hljs-string">'2'</span> &amp;&amp; r());
    <span class="hljs-comment">// empty the buffer to not play any tone after "2"</span>
    sender.dtmf.insertDTMF(<span class="hljs-string">''</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'DTMF function not available'</span>);
  }
}</pre></div>
      <p>Send the DTMF signal "1234", and light up the active key using
      <code>lightKey(key)</code> while the tone is playing (assuming that
      <code>lightKey("")</code> will darken all the keys):</p>
      <div class="example"><div class="example-title marker"><span>Example 19</span></div><pre class="highlight hljs javascript" aria-busy="false"><span class="hljs-keyword">const</span> wait = <span class="hljs-function">(<span class="hljs-params">ms</span>) =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> setTimeout(resolve, ms));

<span class="hljs-keyword">if</span> (sender.dtmf.canInsertDTMF) {
  <span class="hljs-keyword">const</span> duration = <span class="hljs-number">500</span>;
  sender.dtmf.insertDTMF(sender.dtmf.toneBuffer + <span class="hljs-string">'1234'</span>, duration);
  sender.dtmf.ontonechange = <span class="hljs-keyword">async</span> (event) =&gt; {
    <span class="hljs-keyword">if</span> (!event.tone) <span class="hljs-keyword">return</span>;
    lightKey(event.tone); <span class="hljs-comment">// light up the key when playout starts</span>
    <span class="hljs-keyword">await</span> wait(duration);
    lightKey(<span class="hljs-string">''</span>); <span class="hljs-comment">// turn off the light after tone duration</span>
  };
} <span class="hljs-keyword">else</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'DTMF function not available'</span>);
}</pre></div>
      <p>It is always safe to append to the tone buffer. This example appends
      before any tone playout has started as well as during playout.</p>
      <div class="example"><div class="example-title marker"><span>Example 20</span></div><pre class="highlight hljs javascript" aria-busy="false"><span class="hljs-keyword">if</span> (sender.dtmf.canInsertDTMF) {
  sender.dtmf.insertDTMF(<span class="hljs-string">'123'</span>);
  <span class="hljs-comment">// append more tones to the tone buffer before playout has begun</span>
  sender.dtmf.insertDTMF(sender.dtmf.toneBuffer + <span class="hljs-string">'456'</span>);

  sender.dtmf.ontonechange = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (event.tone == <span class="hljs-string">'1'</span>) {
      <span class="hljs-comment">// append more tones when playout has begun</span>
      sender.dtmf.insertDTMF(sender.dtmf.toneBuffer + <span class="hljs-string">'789'</span>);
    }
  };
} <span class="hljs-keyword">else</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'DTMF function not available'</span>);
}</pre></div>
      <p>Send a 1-second "1" tone followed by a 2-second "2" tone:</p>
      <div class="example"><div class="example-title marker"><span>Example 21</span></div><pre class="highlight hljs javascript" aria-busy="false"><span class="hljs-keyword">if</span> (sender.dtmf.canInsertDTMF) {
  sender.dtmf.ontonechange = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (event.tone == <span class="hljs-string">'1'</span>) {
      sender.dtmf.insertDTMF(sender.dtmf.toneBuffer + <span class="hljs-string">'2'</span>, <span class="hljs-number">2000</span>);
    }
  };
  sender.dtmf.insertDTMF(sender.dtmf.toneBuffer + <span class="hljs-string">'1'</span>, <span class="hljs-number">1000</span>);
} <span class="hljs-keyword">else</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'DTMF function not available'</span>);
}</pre></div>
    </section><!--
    <section>
      <h3>Call Flow Browser to MCU</h3>

      <p class="note">Editors' Note: This example flow needs to be discussed on
      the list and is likely wrong in many ways.</p>

      <p>This shows an example of one possible call flow between a centralized
      conferencing server and a browser. This does not show every callback that
      gets fired but instead tries to reduce it down to only show the key
      events and messages.</p>

    </section>
-->
  </section>
  <section id="error-handling-0">
    <!--OddPage--><h2 id="x12-error-handling"><span class="secno">12. </span>Error Handling</h2>
    <p>This section and its subsections extend the list of Error subclasses
    defined in [<cite><a class="bibref" href="#bib-ECMASCRIPT-6.0">ECMASCRIPT-6.0</a></cite>] following the pattern for NativeError in section 19.5.6
    of that specification. Assume the following:</p>
    <ul>
      <li>that use of syntax such as [[Something]] and %something% is as used
      in [<cite><a class="bibref" href="#bib-ECMASCRIPT-6.0">ECMASCRIPT-6.0</a></cite>].</li>
      <li>that the rules for ECMAScript standard built-in objects ([<cite><a class="bibref" href="#bib-ECMASCRIPT-6.0">ECMASCRIPT-6.0</a></cite>],
      section 17) are in effect in this section.</li>
      <li>that the new intrinsic objects <code>%RTCError%</code> and
      <code>%RTCErrorPrototype%</code> are available as if they had been
      included in ([<cite><a class="bibref" href="#bib-ECMASCRIPT-6.0">ECMASCRIPT-6.0</a></cite>], Table 7) and all referencing sections, e.g.
      ([<cite><a class="bibref" href="#bib-ECMASCRIPT-6.0">ECMASCRIPT-6.0</a></cite>], section 8.2.2), thus behave appropriately.</li>
    </ul>
    <section id="ecmascript-6-terminology">
      <h3 id="x12-1-ecmascript-6-terminology"><span class="secno">12.1 </span>ECMAScript 6 Terminology</h3>
      <p>The following terms used in this section are defined in [<cite><a class="bibref" href="#bib-ECMASCRIPT-6.0">ECMASCRIPT-6.0</a></cite>].</p>
      <table>
        <thead>
          <tr>
            <th>Term/Notation</th>
            <th>Section in [<cite><a class="bibref" href="#bib-ECMASCRIPT-6.0">ECMASCRIPT-6.0</a></cite>]</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Type(X)</td>
            <td>6</td>
          </tr>
          <tr>
            <td>intrinsic object</td>
            <td>6.1.7.4</td>
          </tr>
          <tr>
            <td>[[ErrorData]]</td>
            <td>19.5.1</td>
          </tr>
          <tr>
            <td>internal slot</td>
            <td>6.1.7.2</td>
          </tr>
          <tr>
            <td>NewTarget</td>
            <td>various uses, but no definition</td>
          </tr>
          <tr>
            <td>active function object</td>
            <td>8.3</td>
          </tr>
          <tr>
            <td>OrdinaryCreateFromConstructor()</td>
            <td>9.1.14</td>
          </tr>
          <tr>
            <td>ReturnIfAbrupt()</td>
            <td>6.2.2.4</td>
          </tr>
          <tr>
            <td>Assert</td>
            <td>5.2</td>
          </tr>
          <tr>
            <td>String</td>
            <td>4.3.17-19, depending on context</td>
          </tr>
          <tr>
            <td>PropertyDescriptor</td>
            <td>6.2.4</td>
          </tr>
          <tr>
            <td>[[Value]]</td>
            <td>6.1.7.1</td>
          </tr>
          <tr>
            <td>[[Writable]]</td>
            <td>6.1.7.1</td>
          </tr>
          <tr>
            <td>[[Enumerable]]</td>
            <td>6.1.7.1</td>
          </tr>
          <tr>
            <td>[[Configurable]]</td>
            <td>6.1.7.1</td>
          </tr>
          <tr>
            <td>DefinePropertyOrThrow()</td>
            <td>7.3.7</td>
          </tr>
          <tr>
            <td>abrupt completion</td>
            <td>6.2.2</td>
          </tr>
          <tr>
            <td>ToString()</td>
            <td>7.1.12</td>
          </tr>
          <tr>
            <td>[[Prototype]]</td>
            <td>9.1</td>
          </tr>
          <tr>
            <td>%Error%</td>
            <td>19.5.1</td>
          </tr>
          <tr>
            <td>Error</td>
            <td>19.5</td>
          </tr>
          <tr>
            <td>%ErrorPrototype%</td>
            <td>19.5.3</td>
          </tr>
          <tr>
            <td>Object.prototype.toString</td>
            <td>19.1.3.6</td>
          </tr>
        </tbody>
      </table>
    </section>
    <section id="rtcerror-object">
      <h3 id="x12-2-rtcerror-object"><span class="secno">12.2 </span><dfn data-dfn-type="dfn" id="dfn-rtcerror">RTCError</dfn> Object</h3>
      <section id="rtcerror-constructor">
        <h4 id="x12-2-1-rtcerror-constructor"><span class="secno">12.2.1 </span>RTCError Constructor</h4>
        <p>The RTCError Constructor is the <code>%RTCError%</code>
        intrinsic object. When <code>RTCError</code> is called as a
        function rather than as a constructor, it creates and initializes a new
        <code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> object. A call of the object as a function is
        equivalent to calling it as a constructor with the same arguments. Thus
        the function call <code><b>RTCError(</b>...<b>)</b></code>
        is equivalent to the object creation expression <code><b>new
        RTCError(</b>...<b>)</b></code> with the same
        arguments.</p>
        <p>The <code>RTCError</code> constructor is designed to be
        subclassable. It may be used as the value of an <code>extends</code>
        clause of a class definition. Subclass constructors that intend to
        inherit the specified <code>RTCError</code> behaviour must
        include a <code>super</code> call to the
        <code>RTCError</code> constructor to create and initialize
        the subclass instance with an [[ErrorData]] internal slot.</p>
        <section id="rtcerrordetailtype-enum">
          <h5 id="x12-2-1-1-rtcerrordetailtype-enum"><span class="secno">12.2.1.1 </span><dfn data-dfn-type="dfn" id="dom-rtcerrordetailtype" data-idl="" data-title="RTCErrorDetailType" data-dfn-for=""><code>RTCErrorDetailType</code></dfn> Enum</h5>
          <div>
          <div><pre class="def idl"><span class="idlEnum" id="idl-def-rtcerrordetailtype" data-idl="" data-title="RTCErrorDetailType">enum <span class="idlEnumID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcerrordetailtype" class="internalDFN" data-link-type="dfn"><code>RTCErrorDetailType</code></a></span> {
    <a href="#dom-rtcerrordetailtype-data-channel-failure" class="idlEnumItem">"data-channel-failure"</a>,
    <a href="#dom-rtcerrordetailtype-dtls-failure" class="idlEnumItem">"dtls-failure"</a>,
    <a href="#dom-rtcerrordetailtype-fingerprint-failure" class="idlEnumItem">"fingerprint-failure"</a>,
    <a href="#dom-rtcerrordetailtype-idp-bad-script-failure" class="idlEnumItem">"idp-bad-script-failure"</a>,
    <a href="#dom-rtcerrordetailtype-idp-execution-failure" class="idlEnumItem">"idp-execution-failure"</a>,
    <a href="#dom-rtcerrordetailtype-idp-load-failure" class="idlEnumItem">"idp-load-failure"</a>,
    <a href="#dom-rtcerrordetailtype-idp-need-login" class="idlEnumItem">"idp-need-login"</a>,
    <a href="#dom-rtcerrordetailtype-idp-timeout" class="idlEnumItem">"idp-timeout"</a>,
    <a href="#dom-rtcerrordetailtype-idp-tls-failure" class="idlEnumItem">"idp-tls-failure"</a>,
    <a href="#dom-rtcerrordetailtype-idp-token-expired" class="idlEnumItem">"idp-token-expired"</a>,
    <a href="#dom-rtcerrordetailtype-idp-token-invalid" class="idlEnumItem">"idp-token-invalid"</a>,
    <a href="#dom-rtcerrordetailtype-sctp-failure" class="idlEnumItem">"sctp-failure"</a>,
    <a href="#dom-rtcerrordetailtype-sdp-syntax-error" class="idlEnumItem">"sdp-syntax-error"</a>,
    <a href="#dom-rtcerrordetailtype-hardware-encoder-not-available" class="idlEnumItem">"hardware-encoder-not-available"</a>,
    <a href="#dom-rtcerrordetailtype-hardware-encoder-error" class="idlEnumItem">"hardware-encoder-error"</a>
};</span></pre></div>
          <table data-link-for="RTCErrorDetailType" data-dfn-for="RTCErrorDetailType" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description</th>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcerrordetailtype" data-dfn-type="dfn" id="dom-rtcerrordetailtype-data-channel-failure" data-title="data-channel-failure"><code>data-channel-failure</code></dfn></td>
                <td>The data channel has failed.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcerrordetailtype" data-dfn-type="dfn" id="dom-rtcerrordetailtype-dtls-failure" data-title="dtls-failure"><code>dtls-failure</code></dfn></td>
                <td>The DTLS negotiation has failed or the connection
                has been terminated with a fatal error. The
                <code>message</code> contains information relating to
                the nature of error.  If a fatal DTLS alert was received,
                the <code><a href="#dfn-receivedalert" class="internalDFN" data-link-type="dfn">receivedAlert</a></code> attribute is set to the
                value of the DTLS alert received. If a fatal DTLS alert was
                sent, the <code><a href="#dfn-sentalert" class="internalDFN" data-link-type="dfn">sentAlert</a></code> attribute is set to
                the value of the DTLS alert sent.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcerrordetailtype" data-dfn-type="dfn" id="dom-rtcerrordetailtype-fingerprint-failure" data-title="fingerprint-failure"><code>fingerprint-failure</code></dfn></td>
                <td>The <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code>'s
                remote certificate did not match any of the fingerprints
                provided in the SDP. If the remote peer cannot match
                the local certificate against the provided fingerprints,
                this error is not generated. Instead a "bad_certificate"
                (42) DTLS alert might be received from the remote peer,
                resulting in a "dtls-failure".</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcerrordetailtype" data-dfn-type="dfn" id="dom-rtcerrordetailtype-idp-bad-script-failure" data-title="idp-bad-script-failure"><code>idp-bad-script-failure</code></dfn></td>
                <td>The script loaded from the identity provider is not valid
                JavaScript or did not implement the correct interfaces.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcerrordetailtype" data-dfn-type="dfn" id="dom-rtcerrordetailtype-idp-execution-failure" data-title="idp-execution-failure"><code>idp-execution-failure</code></dfn></td>
                <td>The identity provider has thrown an exception or
                returned a <a href="#dfn-reject" class="internalDFN" data-link-type="dfn">rejected</a> promise.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcerrordetailtype" data-dfn-type="dfn" id="dom-rtcerrordetailtype-idp-load-failure" data-title="idp-load-failure"><code>idp-load-failure</code></dfn></td>
                <td>Loading of the IdP URI has failed. The
                <code>httpRequestStatusCode</code> attribute is
                set to the HTTP status code of the response.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcerrordetailtype" data-dfn-type="dfn" id="dom-rtcerrordetailtype-idp-need-login" data-title="idp-need-login"><code>idp-need-login</code></dfn></td>
                <td>The identity provider requires the user to login. The
                <code>idpLoginUrl</code> attribute is set to the URL that
                can be used to login.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcerrordetailtype" data-dfn-type="dfn" id="dom-rtcerrordetailtype-idp-timeout" data-title="idp-timeout"><code>idp-timeout</code></dfn></td>
                <td>The IdP timer has expired.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcerrordetailtype" data-dfn-type="dfn" id="dom-rtcerrordetailtype-idp-tls-failure" data-title="idp-tls-failure"><code>idp-tls-failure</code></dfn></td>
                <td>The TLS certificate used for the IdP HTTPS connection
                is not trusted.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcerrordetailtype" data-dfn-type="dfn" id="dom-rtcerrordetailtype-idp-token-expired" data-title="idp-token-expired"><code>idp-token-expired</code></dfn></td>
                <td>The IdP token has expired.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcerrordetailtype" data-dfn-type="dfn" id="dom-rtcerrordetailtype-idp-token-invalid" data-title="idp-token-invalid"><code>idp-token-invalid</code></dfn></td>
                <td>The IdP token is invalid.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcerrordetailtype" data-dfn-type="dfn" id="dom-rtcerrordetailtype-sctp-failure" data-title="sctp-failure"><code>sctp-failure</code></dfn></td>
                <td>The SCTP negotiation has failed or the connection
                has been terminated with a fatal error. The
                <code>sctpCauseCode</code> attribute is set to the
                SCTP cause code.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcerrordetailtype" data-dfn-type="dfn" id="dom-rtcerrordetailtype-sdp-syntax-error" data-title="sdp-syntax-error"><code>sdp-syntax-error</code></dfn></td>
                <td>The SDP syntax is not valid. The <code>sdpLineNumber</code>
                attribute is set to the line number in the SDP where the syntax
                error was detected.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcerrordetailtype" data-dfn-type="dfn" id="dom-rtcerrordetailtype-hardware-encoder-not-available" data-title="hardware-encoder-not-available"><code>hardware-encoder-not-available</code></dfn></td>
                <td>The hardware encoder resources required for the requested
                operation are not available.</td>
              </tr>
              <tr>
                <td><dfn data-idl="" data-dfn-for="rtcerrordetailtype" data-dfn-type="dfn" id="dom-rtcerrordetailtype-hardware-encoder-error" data-title="hardware-encoder-error"><code>hardware-encoder-error</code></dfn></td>
                <td>The hardware encoder does not support the provided
                parameters.</td>
              </tr>
            </tbody>
          </table>
        </div>
        </section>
        <section id="rtcerror-errordetail-message">
          <h5 id="x12-2-1-2-rtcerror-errordetail-message"><span class="secno">12.2.1.2 </span>RTCError ( errorDetail, message )</h5>
          <p>When the <code>RTCError</code> function is
          called with arguments <i>errorDetail</i> and <i>message</i> the
          following steps are taken:</p>
          <ol>
            <li>If NewTarget is <b>undefined</b>, let <i>newTarget</i> be the
            active function object, else let <i>newTarget</i> be
            NewTarget.</li>
            <li>Let <i>O</i> be OrdinaryCreateFromConstructor(<i>newTarget</i>,
            <code>"%RTCErrorPrototype%"</code>, «[[ErrorData]]»
            ).</li>
            <li>ReturnIfAbrupt(<i>O</i>).</li>
            <li>If <i>errorDetail</i> is not <b>undefined</b>, then
              <ol>
                <li>Let <i>errorDetailDesc</i> be the
                PropertyDescriptor{[[Value]]: <i>errorDetail</i>,
                [[Writable]]: <b>false</b>, [[Enumerable]]: <b>false</b>,
                [[Configurable]]: <b>false</b>}.</li>
                <li>Let <i>cStatus</i> be DefinePropertyOrThrow(O,
                "<code>errorDetail</code>", <i>errorDetailDesc</i>).</li>
                <li>Assert: <i>eStatus</i> is not an abrupt completion.</li>
              </ol>
            </li>
            <li>If <i>message</i> is not <b>undefined</b>, then
              <ol>
                <li>Let <i>msg</i> be ToString(<i>message</i>).</li>
                <li>Let <i>msgDesc</i> be the PropertyDescriptor{[[Value]]:
                <i>msg</i>, [[Writable]]: <b>true</b>, [[Enumerable]]:
                <b>false</b>, [[Configurable]]: <b>true</b>}.</li>
                <li>Let <i>mStatus</i> be DefinePropertyOrThrow(O,
                "<code>message</code>", <i>msgDesc</i>).</li>
                <li>Assert: <i>mStatus</i> is not an abrupt completion.</li>
              </ol>
            </li>
            <li>Return <i>O</i>.</li>
          </ol>
        </section>
      </section>
      <section id="properties-of-the-rtcerror-constructor">
        <h4 id="x12-2-2-properties-of-the-rtcerror-constructor"><span class="secno">12.2.2 </span>Properties of the RTCError Constructor</h4>
        <p>The value of the [[Prototype]] internal slot of the
        <code>RTCError</code> constructor is the intrinsic object <code>%Error%</code>.</p>
        <p>Besides the <code>length</code> property (whose value is <b>1</b>),
        the <code>RTCError</code> constructor has the following properties:</p>
        <section id="rtcerror-prototype">
          <h5 id="x12-2-2-1-rtcerror-prototype"><span class="secno">12.2.2.1 </span>RTCError.prototype</h5>
          <p>The initial value of <code>RTCError.prototype</code>
          is the <a href="#properties-of-the-rtcerror-prototype-object">RTCError
          prototype object</a>. This property has the attributes {
          [[Writable]]: <b>false</b>, [[Enumerable]]: <b>false</b>,
          [[Configurable]]: <b>false</b> }.</p>
        </section>
      </section>
      <section id="properties-of-the-rtcerror-prototype-object">
        <h4 id="x12-2-3-properties-of-the-rtcerror-prototype-object"><span class="secno">12.2.3 </span>Properties of the RTCError Prototype Object</h4>
        <p>The <code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> prototype object is an ordinary object.
        It is not an Error instance and does not have an [[ErrorData]]
        internal slot.</p>
        <p>The value of the [[Prototype]] internal slot of the
        <code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> prototype object is the intrinsic object
        <code>%ErrorPrototype%</code>.</p>
        <section id="rtcerror-prototype-constructor">
          <h5 id="x12-2-3-1-rtcerror-prototype-constructor"><span class="secno">12.2.3.1 </span>RTCError.prototype.constructor</h5>
          <p>The initial value of the <code>constructor</code> property of the
          prototype for the <code>RTCError</code> constructor is
          the intrinsic object <code><a href="#error-handling">%RTCError%</a></code>.</p>
        </section>
        <section id="rtcerror-prototype-errordetail">
          <h5 id="x12-2-3-2-rtcerror-prototype-errordetail"><span class="secno">12.2.3.2 </span>RTCError.prototype.errorDetail</h5>
          <p>The initial value of the <code>errorDetail</code> property of the prototype for
          the <code>RTCError</code> constructor is the empty String.</p>
        </section>
        <section id="rtcerror-prototype-sdplinenumber">
          <h5 id="x12-2-3-3-rtcerror-prototype-sdplinenumber"><span class="secno">12.2.3.3 </span>RTCError.prototype.sdpLineNumber</h5>
          <p>The initial value of the <code>sdpLineNumber</code> property of the prototype for
          the <code>RTCError</code> constructor is 0.</p>
        </section>
        <section id="rtcerror-prototype-httprequeststatuscode">
          <h5 id="x12-2-3-4-rtcerror-prototype-httprequeststatuscode"><span class="secno">12.2.3.4 </span>RTCError.prototype.httpRequestStatusCode</h5>
          <p>The initial value of the <code>httpRequestStatusCode</code> property of the prototype for
          the <code>RTCError</code> constructor is 0.</p>
        </section>
        <section id="rtcerror-prototype-sctpcausecode">
          <h5 id="x12-2-3-5-rtcerror-prototype-sctpcausecode"><span class="secno">12.2.3.5 </span>RTCError.prototype.sctpCauseCode</h5>
          <p>The initial value of the <code>sctpCauseCode</code> property of the prototype for
          the <code>RTCError</code> constructor is 0.</p>
        </section>
        <section id="rtcerror-prototype-receivedalert">
          <h5 id="x12-2-3-6-rtcerror-prototype-receivedalert"><span class="secno">12.2.3.6 </span>RTCError.prototype.receivedAlert</h5>
          <p>An unsigned integer representing the value of the DTLS alert received.
          The initial value of the <dfn data-idl="" data-dfn-type="dfn" id="dfn-receivedalert"><code>receivedAlert</code></dfn> property of
          the prototype for the <code>RTCError</code> constructor is null.</p>
        </section>
        <section id="rtcerror-prototype-sentalert">
          <h5 id="x12-2-3-7-rtcerror-prototype-sentalert"><span class="secno">12.2.3.7 </span>RTCError.prototype.sentAlert</h5>
          <p>An unsigned integer representing the value of the DTLS alert sent.
          The initial value of the <dfn data-idl="" data-dfn-type="dfn" id="dfn-sentalert"><code>sentAlert</code></dfn> property of
          the prototype for the <code>RTCError</code> constructor is null.</p>
        </section>
        <section id="rtcerror-prototype-message">
          <h5 id="x12-2-3-8-rtcerror-prototype-message"><span class="secno">12.2.3.8 </span>RTCError.prototype.message</h5>
          <p>The initial value of the <code>message</code> property of the prototype for the
          <code>RTCError</code> constructor is the empty String.</p>
        </section>
        <section id="rtcerror-prototype-name">
          <h5 id="x12-2-3-9-rtcerror-prototype-name"><span class="secno">12.2.3.9 </span>RTCError.prototype.name</h5>
          <p>The initial value of the <code>name</code> property of the prototype for the
          <code>RTCError</code> constructor is <code>"<b>RTCError</b>"</code>.</p>
        </section>
      </section>
      <section id="properties-of-rtcerror-instances">
        <h4 id="x12-2-4-properties-of-rtcerror-instances"><span class="secno">12.2.4 </span>Properties of RTCError Instances</h4>
        <p><code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> instances are ordinary objects that
        inherit properties from the <code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> prototype object
        and have an [[ErrorData]] internal slot whose value is <b>undefined</b>.
        The only specified use of [[ErrorData]] is by Object.prototype.toString
        ([<cite><a class="bibref" href="#bib-ECMASCRIPT-6.0">ECMASCRIPT-6.0</a></cite>], section 19.1.3.6) to identify instances of Error or its
        various subclasses.</p>
      </section>
      <p>The <dfn data-dfn-for="" data-idl="" data-dfn-type="dfn" id="dom-rtcerrorevent" data-title="RTCErrorEvent"><code>RTCErrorEvent</code></dfn> interface is defined for cases when an
      RTCError is raised as an event:</p>
      <div>
        <div><pre class="def idl"><span class="idlInterface" id="idl-def-rtcerrorevent" data-idl="" data-title="RTCErrorEvent">[<span class="extAttr"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a></span>=<span class="extAttrRhs">Window</span></span>,
 <span class="idlCtor"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span></span>, <span class="idlParam"><span class="idlParamType"><a href="#dom-rtcerroreventinit" class="internalDFN" data-link-type="dfn"><code>RTCErrorEventInit</code></a></span> <span class="idlParamName">eventInitDict</span></span>)</span>]
interface <span class="idlInterfaceID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcerrorevent" class="internalDFN" data-link-type="dfn"><code>RTCErrorEvent</code></a></span> : <span class="idlSuperclass"><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></span> {
<span class="idlAttribute" id="idl-def-rtcerrorevent-error" data-idl="" data-title="error" data-dfn-for="rtcerrorevent">    readonly attribute <span class="idlAttrType"><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a>?</span> <span class="idlAttrName"><a data-no-default="" data-link-for="rtcerrorevent" data-lt="" href="#dom-rtcerrorevent-error" class="internalDFN" data-link-type="dfn"><code>error</code></a></span>;</span>
};</span></pre></div>
        <section>
          <h4 id="constructors-7">Constructors</h4>
          <dl data-link-for="RTCErrorEvent" data-dfn-for="RTCErrorEvent" class="constructors">
            <dt><dfn data-idl="" data-dfn-for="rtcerrorevent" data-dfn-type="dfn" id="dfn-rtcerrorevent"><code>RTCErrorEvent</code></dfn></dt>
            <dd>
              <p>Constructs a new
              <code><a href="#dfn-rtcerrorevent" class="internalDFN" data-link-type="dfn">RTCErrorEvent</a></code>.</p>
            </dd>
          </dl>
        </section>
        <section>
          <h4 id="attributes-25">Attributes</h4>
          <dl data-link-for="RTCErrorEvent" data-dfn-for="RTCErrorEvent" class="attributes">
            <dt><dfn data-idl="" data-dfn-for="rtcerrorevent" data-dfn-type="dfn" id="dom-rtcerrorevent-error" data-title="error"><code>error</code></dfn> of type <span class="idlAttrType"><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></span>, readonly,
            nullable</dt>
            <dd>
              <p>The <code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> describing the
              error that triggered the event (if any).</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <div><pre class="def idl"><span class="idlDictionary" id="idl-def-rtcerroreventinit" data-idl="" data-title="RTCErrorEventInit">dictionary <span class="idlDictionaryID"><a data-no-default="" data-link-for="" data-lt="" href="#dom-rtcerroreventinit" class="internalDFN" data-link-type="dfn"><code>RTCErrorEventInit</code></a></span> : <span class="idlSuperclass">EventInit</span> {
<span class="idlMember" id="idl-def-rtcerroreventinit-error" data-idl="" data-title="error" data-dfn-for="rtcerroreventinit">    <span class="idlMemberType"><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a>?</span> <span class="idlMemberName"><a data-no-default="" data-link-for="rtcerroreventinit" data-lt="" href="#dom-rtcerroreventinit-error" class="internalDFN" data-link-type="dfn"><code>error</code></a></span> = <span class="idlMemberValue">null</span>;</span>
};</span></pre></div>
        <section>
          <h4 id="dictionary-rtcerroreventinit-members">Dictionary <dfn data-dfn-type="dfn" id="dom-rtcerroreventinit" data-idl="" data-title="RTCErrorEventInit" data-dfn-for=""><code>RTCErrorEventInit</code></dfn>
          Members</h4>
          <dl data-link-for="RTCErrorEventInit" data-dfn-for="RTCErrorEventInit" class="dictionary-members">
            <dt><dfn data-idl="" data-dfn-for="rtcerroreventinit" data-dfn-type="dfn" id="dom-rtcerroreventinit-error" data-title="error"><code>error</code></dfn> of type <span class="idlMemberType"><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></span>, nullable,
            defaulting to <code>null</code></dt>
            <dd>
              <p>The <code><a href="#dfn-rtcerror" class="internalDFN" data-link-type="dfn">RTCError</a></code> describing the
              error associated with the event (if any)</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>
  </section>
  <section class="informative" id="event-summary">
    <!--OddPage--><h2 id="x13-event-summary"><span class="secno">13. </span>Event summary</h2><p><em>This section is non-normative.</em></p>
    <p>The following events fire on <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code>
    objects:</p>
    <table>
      <tbody>
        <tr>
          <th>Event name</th>
          <th>Interface</th>
          <th>Fired when...</th>
        </tr>
      </tbody>
      <tbody>
        <tr>
          <td><dfn id="event-datachannel-open" data-dfn-type="dfn"><code>open</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>
            The <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object's <a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">underlying data
            transport</a> has been established (or re-established).
          </td>
        </tr>
        <tr>
          <td><dfn id="event-datachannel-message" data-dfn-type="dfn"><code>message</code></dfn></td>
          <td><code><a href="https://www.w3.org/TR/webmessaging/#the-messageevent-interfaces">MessageEvent</a></code>
          [<cite><a class="bibref" href="#bib-webmessaging">webmessaging</a></cite>]</td>
          <td>A message was successfully received.</td>
        </tr>
        <tr>
          <td><dfn id="event-datachannel-bufferedamountlow" data-dfn-type="dfn"><code>bufferedamountlow</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>The <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object's
          <code><a data-link-for="RTCDataChannel" href="#dom-rtcdatachannel-bufferedamount" class="internalDFN" data-link-type="dfn"><code>bufferedAmount</code></a></code>
          decreases from above its <code><a data-link-for="RTCDataChannel" href="#dom-rtcdatachannel-bufferedamountlowthreshold" class="internalDFN" data-link-type="dfn"><code>bufferedAmountLowThreshold</code></a></code> to less than
          or equal to its <code><a data-link-for="RTCDataChannel" href="#dom-rtcdatachannel-bufferedamountlowthreshold" class="internalDFN" data-link-type="dfn"><code>bufferedAmountLowThreshold</code></a></code>.</td>
        </tr>
        <tr>
          <td><dfn data-dfn-type="dfn" id="dfn-error"><code id="event-datachannel-error">error</code></dfn></td>
          <td><code><a href="#dom-rtcerrorevent" class="internalDFN" data-link-type="dfn"><code>RTCErrorEvent</code></a></code></td>
          <td>An error occurred on the data channel.</td>
        </tr>
        <tr>
          <td><dfn data-dfn-type="dfn" id="dfn-close"><code id="event-datachannel-close">close</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>
            The <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> object's <a href="#dfn-data-transport" class="internalDFN" data-link-type="dfn">underlying data
            transport</a> has been closed.
          </td>
        </tr>
      </tbody>
    </table>
    <p>The following events fire on <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a></code>
    objects:</p>
    <table>
      <tbody>
        <tr>
          <th>Event name</th>
          <th>Interface</th>
          <th>Fired when...</th>
        </tr>
      </tbody>
      <tbody>
        <!--
        <tr>
          <td><dfn title="event-MediaStream-error"><code>error</code></dfn></td>
          <td><code>Event</code></td>
          <td></td>
        </tr>
        <tr>
          <td><dfn title="event-MediaStream-close"><code>close</code></dfn></td>
          <td><code>Event</code></td>
          <td>The <code title="dom-RTCPeerConnection-close">close()</code> method was
            called. </td>
        </tr>
        <tr>
          <td>
            <dfn id="event-mediastream-message">
              <code>message</code>
            </dfn>
          </td>

          <td>
            <code>MessageEvent</code>
          </td>

          <td>A <a href="#data-udp-media-stream">data UDP media
          stream</a> message was received.</td>
        </tr>
        -->
        <tr>
          <td><dfn id="event-track" data-dfn-type="dfn"><code>track</code></dfn></td>
          <td><code><a href="#dom-rtctrackevent" class="internalDFN" data-link-type="dfn"><code>RTCTrackEvent</code></a></code></td>
          <td>New incoming media has been negotiated for a specific
            <code><a href="#dom-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></code>, and that receiver's
            <code>track</code> has been added to any associated remote
            <code>MediaStream</code>s.
          </td>
        </tr>
        <tr>
          <td><dfn id="event-negotiation" data-dfn-type="dfn"><code>negotiationneeded</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>The browser wishes to inform the application that session
          negotiation needs to be done (i.e. a createOffer call followed by
          setLocalDescription).</td>
        </tr>
        <tr>
          <td><dfn id="event-signalingstatechange" data-dfn-type="dfn"><code>signalingstatechange</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>
            The <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> has changed. This state change is the
            result of either <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setlocaldescription" class="internalDFN" data-link-type="dfn"><code>setLocalDescription</code></a></code> or
            <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setremotedescription" class="internalDFN" data-link-type="dfn"><code>setRemoteDescription</code></a></code> being invoked.
          </td>
        </tr>
        <tr>
          <td><dfn id="event-iceconnectionstatechange" data-dfn-type="dfn"><code>iceconnectionstatechange</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>
            The <code>RTCPeerConnection</code>'s <a href="#dfn-ice-connection-state" class="internalDFN" data-link-type="dfn">ICE connection state</a>
            has changed.
          </td>
        </tr>
        <tr>
          <td><dfn id="event-icegatheringstatechange" data-dfn-type="dfn"><code>icegatheringstatechange</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>
            The <code>RTCPeerConnection</code>'s <a href="#dfn-ice-gathering-state" class="internalDFN" data-link-type="dfn">ICE gathering state</a> has
            changed.
          </td>
        </tr>
        <tr>
          <td><dfn id="event-icecandidate" data-dfn-type="dfn"><code>icecandidate</code></dfn></td>
          <td><code><a href="#dom-rtcpeerconnectioniceevent" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionIceEvent</code></a></code></td>
          <td>A new <code><a href="#dom-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a></code> is made available to
          the script.</td>
        </tr>
        <tr>
          <td><dfn id="event-connectionstatechange" data-dfn-type="dfn"><code>connectionstatechange</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>
            The <code>RTCPeerConnection</code> <a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-connectionstate" class="internalDFN" data-link-type="dfn"><code>connectionState</code></a> has changed.
          </td>
        </tr>
        <tr>
          <td><dfn id="event-icecandidateerror" data-dfn-type="dfn"><code>icecandidateerror</code></dfn></td>
          <td><code><a href="#dom-rtcpeerconnectioniceerrorevent" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionIceErrorEvent</code></a></code></td>
          <td>A failure occured when gathering ICE candidates.</td>
        </tr>
        <tr>
          <td><dfn id="event-datachannel" data-dfn-type="dfn"><code>datachannel</code></dfn></td>
          <td><code><a href="#dom-rtcdatachannelevent" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelEvent</code></a></code></td>
          <td>A new <code><a href="#dom-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></code> is dispatched to the
          script in response to the other peer creating a channel.</td>
        </tr>
        <tr>
          <td><dfn id="event-isolationchange" data-dfn-type="dfn"><code>isolationchange</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>A new <code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code> is dispatched to the script when
          the <var>isolated</var> attribute on a <code>MediaStreamTrack</code>
          changes.</td>
        </tr>
        <tr>
          <td><dfn id="event-statsended" data-dfn-type="dfn"><code>statsended</code></dfn></td>
          <td><code><a href="#dom-rtcstatsevent" class="internalDFN" data-link-type="dfn"><code>RTCStatsEvent</code></a></code></td>
          <td>A new <code><a href="#dom-rtcstatsevent" class="internalDFN" data-link-type="dfn"><code>RTCStatsEvent</code></a></code> is dispatched to
          the script in response to the end of a stats object's lifetime.</td>
      </tr></tbody>
    </table>
    <p>The following events fire on <code><a href="#dom-rtcdtmfsender" class="internalDFN" data-link-type="dfn"><code>RTCDTMFSender</code></a></code>
    objects:</p>
    <table>
      <tbody>
        <tr>
          <th>Event name</th>
          <th>Interface</th>
          <th>Fired when...</th>
        </tr>
      </tbody>
      <tbody>
        <tr>
          <td><dfn id="event-RTCDTMFSender-tonechange" data-dfn-type="dfn"><code>tonechange</code></dfn></td>
          <td><code><a href="#dom-rtcdtmftonechangeevent" class="internalDFN" data-link-type="dfn"><code>RTCDTMFToneChangeEvent</code></a></code></td>
          <td>The <code><a href="#dom-rtcdtmfsender" class="internalDFN" data-link-type="dfn"><code>RTCDTMFSender</code></a></code> object has either just
          begun playout of a tone (returned as the <code><a data-link-for="RTCDTMFToneChangeEvent" href="#dom-rtcdtmftonechangeevent-tone" class="internalDFN" data-link-type="dfn"><code>tone</code></a></code> attribute) or just ended
          the playout of tones in the
          <code><a data-link-for="RTCDTMFSender" href="#dom-rtcdtmfsender-tonebuffer" class="internalDFN" data-link-type="dfn"><code>toneBuffer</code></a></code>
          (returned as an empty value in the
          <code><a data-link-for="RTCDTMFToneChangeEvent" href="#dom-rtcdtmftonechangeevent-tone" class="internalDFN" data-link-type="dfn"><code>tone</code></a></code>
          attribute).</td>
        </tr>
      </tbody>
    </table>
    <p>The following events fire on <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>
    objects:</p>
    <table>
      <tbody>
        <tr>
          <th>Event name</th>
          <th>Interface</th>
          <th>Fired when...</th>
        </tr>
      </tbody>
      <tbody>
        <tr>
          <td><dfn id="event-icetransport-statechange" data-lt="rtcicetransport state change|statechange" data-dfn-type="dfn"><code>statechange</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>The <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> state changes.</td>
        </tr>
        <tr>
          <td><dfn id="event-icetransport-gatheringstatechange" data-dfn-type="dfn"><code>gatheringstatechange</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>The <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code> gathering state
          changes.</td>
        </tr>
        <tr>
          <td><dfn id="event-icetransport-selectedcandidatepairchange" data-dfn-type="dfn"><code>selectedcandidatepairchange</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>The <code><a href="#dom-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></code>'s selected candidate pair
          changes.</td>
        </tr>
      </tbody>
    </table>
    <p>The following events fire on <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code>
    objects:</p>
    <table>
      <tbody>
        <tr>
          <th>Event name</th>
          <th>Interface</th>
          <th>Fired when...</th>
        </tr>
      </tbody>
      <tbody>
        <tr>
          <td><dfn id="event-dtlstransport-statechange" data-lt="rtcdtlstransport state change" data-lt-nodefault="" data-dfn-type="dfn"><code>statechange</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>The <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code> state changes.</td>
        </tr>
        <tr>
          <td><code>error</code></td>
          <td><code><a href="#dom-rtcerrorevent" class="internalDFN" data-link-type="dfn"><code>RTCErrorEvent</code></a></code></td>
          <td>An error occurred on the <code><a href="#dom-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></code>
          (either "dtls-error" or "fingerprint-failure").</td>
        </tr>
      </tbody>
    </table>
    <p>The following events fire on <code><a href="#dom-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransport</code></a></code>
    objects:</p>
    <table>
      <tbody>
        <tr>
          <th>Event name</th>
          <th>Interface</th>
          <th>Fired when...</th>
        </tr>
      </tbody>
      <tbody>
        <tr>
          <td><dfn id="event-sctptransport-statechange" data-lt="rtcsctptransport state change" data-lt-nodefault="" data-dfn-type="dfn"><code>statechange</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>The <code><a href="#dom-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransport</code></a></code> state changes.</td>
        </tr>
      </tbody>
    </table>
  </section>
  <section class="informative" id="privacy-and-security-considerations">
    <!--OddPage--><h2 id="x14-privacy-and-security-considerations"><span class="secno">14. </span>Privacy and Security Considerations</h2><p><em>This section is non-normative.</em></p>
    <p>This section is non-normative; it specifies no new behaviour, but
    instead summarizes information already present in other parts of the
    specification. The overall security considerations of the general set of
    APIs and protocols used in WebRTC are described in
    [<cite><a class="bibref" href="#bib-RTCWEB-SECURITY-ARCH">RTCWEB-SECURITY-ARCH</a></cite>].</p>
    <section id="impact-on-same-origin-policy">
      <h3 id="x14-1-impact-on-same-origin-policy"><span class="secno">14.1 </span>Impact on same origin policy</h3>
      <p>This document extends the Web platform with the ability to set up real
      time, direct communication between browsers and other devices, including
      other browsers.</p>
      <p>This means that data and media can be shared between applications
      running in different browsers, or between an application running in the
      same browser and something that is not a browser, something that is an
      extension to the usual barriers in the Web model against sending data
      between entities with different origins.</p>
      <p>The WebRTC specification provides no user prompts or chrome indicators
      for communication; it assumes that once the Web page has been allowed to
      access media, it is free to share that media with other entities as it
      chooses. Peer-to-peer exchanges of data view WebRTC datachannels can thus
      occur without any user explicit consent or involvement, similarly as a
      server-mediated exchange (e.g. via Web Sockets) could occur without user
      involvement.</p>
      <p>The <code><a href="#dfn-peeridentity" class="internalDFN" data-link-type="dfn"><code>peerIdentity</code></a></code> mechanism loads and executes
      JavaScript code from a third-party server acting as an identity provider.
      That code is executed in a separate JavaScript realm and does not affect
      the protections afforded by the same origin policy.</p>
    </section>
    <section id="revealing-ip-addresses">
      <h3 id="x14-2-revealing-ip-addresses"><span class="secno">14.2 </span>Revealing IP addresses</h3>
      <p>Even without WebRTC, the Web server providing a Web application will
      know the public IP address to which the application is delivered. Setting
      up communications exposes additional information about the
      browser’s network context to the web application, and may include
      the set of (possibly private) IP addresses available to the browser for
      WebRTC use. Some of this information has to be passed to the
      corresponding party to enable the establishment of a communication
      session.</p>
      <p>Revealing IP addresses can leak location and means of connection; this
      can be sensitive. Depending on the network environment, it can also
      increase the fingerprinting surface and create persistent cross-origin
      state that cannot easily be cleared by the user.</p>
      <p>A connection will always reveal the IP addresses proposed for
      communication to the corresponding party. The application can limit this
      exposure by choosing not to use certain addresses using the settings
      exposed by the <a href="#dom-rtcicetransportpolicy" class="internalDFN" data-link-type="dfn"><code>RTCIceTransportPolicy</code></a> dictionary, and by using
      relays (for instance TURN servers) rather than direct connections between
      participants. One will normally assume that the IP address of TURN
      servers is not sensitive information. These choices can for instance be
      made by the application based on whether the user has indicated consent
      to start a media connection with the other party.</p>
      <p>Mitigating the exposure of IP addresses to the application itself
      requires limiting the IP addresses that can be used, which will impact
      the ability to communicate on the most direct path between endpoints.
      Browsers are encouraged to provide appropriate controls for deciding
      which IP addresses are made available to applications, based on the
      security posture desired by the user. The choice of which addresses to
      expose is controlled by local policy (see [<cite><a class="bibref" href="#bib-RTCWEB-IP-HANDLING">RTCWEB-IP-HANDLING</a></cite>] for
      details).</p>
    </section>
    <section id="impact-on-local-network">
      <h3 id="x14-3-impact-on-local-network"><span class="secno">14.3 </span>Impact on local network</h3>
      <p>Since the browser is an active platform executing in a trusted network
      environment (inside the firewall), it is important to limit the damage
      that the browser can do to other elements on the local network, and it is
      important to protect data from interception, manipulation and
      modification by untrusted participants.</p>
      <p>Mitigations include:</p>
      <ul>
        <li>A user agent will always request permission from the correspondent
        user agent to communicate using ICE. This ensures that the user agent
        can only send to partners who you have shared credentials with.</li>
        <li>A user agent will always request ongoing permission to continue
        sending using ICE continued consent. This enables a receiver to
        withdraw consent to receive.</li>
        <li>A user agent will always encrypt data, with strong per-session
        keying (DTLS-SRTP).</li>
        <li>A user agent will always use congestion control. This ensures that
        WebRTC cannot be used to flood the network.</li>
      </ul>
      <p>These measures are specified in the relevant IETF documents.</p>
    </section>
    <section id="confidentiality-of-communications">
      <h3 id="x14-4-confidentiality-of-communications"><span class="secno">14.4 </span>Confidentiality of Communications</h3>
      <p>The fact that communication is taking place cannot be hidden from
      adversaries that can observe the network, so this has to be regarded as
      public information.</p>
      <p>A mechanism, <code><a href="#dfn-peeridentity" class="internalDFN" data-link-type="dfn"><code>peerIdentity</code></a></code>, is provided that gives
      Javascript the option of requesting media that the same javascript cannot
      access, but can only be sent to certain other entities.</p>
    </section>
    <section id="persistent-information-exposed-by-webrtc">
      <h3 id="x14-5-persistent-information-exposed-by-webrtc"><span class="secno">14.5 </span>Persistent information exposed by WebRTC</h3>
      <p>As described above, the list of IP addresses exposed by the WebRTC API
      can be used as a persistent cross-origin state.</p>
      <p>Beyond IP addresses, the WebRTC API exposes information about the
      underlying media system via the <code>RTCRtpSender.getCapabilities</code>
      and <code>RTCRtpReceiver.getCapabilities</code> methods, including
      detailed and ordered information about the codecs that the system is able
      to produce and consume. A subset of that information is likely to be
      represented in the SDP session descriptions generated, exposed and
      transmitted during <a href="#session-negotiation-model">session
      negotiation</a>. That information is in most cases persistent across time
      and origins, and increases the fingerprint surface of a given device.</p>
      <p>If set, the configured default ICE servers exposed by <a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-getdefaulticeservers" class="internalDFN" data-link-type="dfn"><code>getDefaultIceServers</code></a> on
      <code>RTCPeerConnection</code> instances also provides persistent across
      time and origins information which increases the fingerprinting surface
      of a given browser.</p>
      <p>When establishing DTLS connections, the WebRTC API can generate
      certificates that can be persisted by the application (e.g. in
      IndexedDB). These certificates are not shared across origins, and get
      cleared when persistent storage is cleared for the origin.</p>
    </section>
  </section><!--section>
    <h2 id="sec-iana">IANA Registrations</h2>



    <p>IANA is requested to register the constraints defined in <a href=
    "#sec-constraints">Constraints Section</a> as specified in
    [[!RTCWEB-CONSTRAINTS]].</p>


    <section>
      <h3 id="sec-constraints">Constraints</h3>


      <p>TOOD: Need to change the naming and declaration of these constraints
      to match the constraints draft once that is a bit further along. The
      names here now are likely not quite right but they serve as a place
      holder.</p>


      <p class="issue">ISSUE: there are multiple ways to add constraints. How
      are multiple values reconciled?</p>


      <p>The following new constraints are defined that can be used with an
      <code>RTCPeerConnection</code> object:</p>


      <p>TODO items - need to register with IANA.</p>
    </section>
  </section-->
  <section id="change-log">
    <!--OddPage--><h2 id="x15-change-log"><span class="secno">15. </span>Change Log</h2>
    <p>This section will be removed before publication.</p>
    <!-- Why do the first two headings automatically convert to <h2>? -->
    <!-- Because you haven't added a <section> element around them
         and respec rewrites h? elements based on the section depth -->
    <h2 id="changes-since-october-02-2017">Changes since October 02, 2017</h2>
    <ol>
      <li>[#1616] Add Duration, InterToneGap, ToneBuffer and CanInsertDTMF
      internal slots of RTCDTMFSender</li>
      <li>[#1614] createDataChannel: Update negotiation needed state on the
      main thread</li>
      <li>[#1553] Add API to expose what algorithms the browser supports</li>
      <li>[#1430] Have createOffer call addTransceiver() on offerToReceive</li>
      <li>[#1615] setParameters: Use more specific hardware encoder errors</li>
      <li>[#1621] RTCPeerConnection.close should close Data Channels and
      SctpTransports</li>
      <li>[#1538] IdP protocol can only contain characters legal in a URI</li>
      <li>[#1620] Add RTCSctpTransportState</li>
      <li>[#1634] Add onstatechange event to SctpTransport Event table</li>
      <li>[#1631] Explain the scope of DTLS/ICE transport objects in more
      detail</li>
      <li>[#1623] Describe how transport objects are assigned to
      senders/receivers</li>
      <li>[#1636] Simple text for scaling issue - no letterbox allowed</li>
      <li>[#1641] Note about video dimension adaptation discussion added</li>
    </ol>
    <h2 id="changes-since-august-22-2017">Changes since August 22, 2017</h2>
    <ol>
      <li>[#1559] Reference rtcweb-data-channel for RTCPriorityType enum</li>
      <li>[#1557] Make fields in RTCStats dictionary required</li>
      <li>[#1556] Update mandatory to implement stats fields to sync with
      webrtc-stats</li>
      <li>[#1555] Fix reference to validating assertion result in requesting
      assertions</li>
      <li>[#1551] Clarify the meaning of session description sdp need not
      match</li>
      <li>[#1550] Validate binaryType value when setting it in
      RTCDataChannel</li>
      <li>[#1549] Allow createAnswer to be called only in valid signaling
      state</li>
      <li>[#1547] Wait for certificate to be generated before identity
      assertion process</li>
      <li>[#1544] Align stats example with WebRTC stast spec
      (s/outboundrtp/outbound-rtp)</li>
      <li>[#1539] Remove unnecessary type checking for selectorArg in getStats
      </li>
      <li>[#1536] Define vhen dtmf attribute is set</li>
      <li>[#1525] Update paragraph that introduces
      senders/receivers/transceivers</li>
      <li>[#1541] Specify getCapabilities behavior with an unsupported value of
      kind</li>
      <li>[#1487] Check for invalid rollback</li>
      <li>[#1522] Formalize how createOffer interacts with identity
      providers</li>
      <li>[#1558] Throw if a DataChannel, to be negotiated by the script, lacks
      id</li>
      <li>[#1552] Harmonize and update our references to other
      specifications</li>
      <li>[#1443] SLD/SRD: Check if transceiver is stopped before setting
      currentDirection</li>
      <li>[#1548] Add note that IdP must treat contents as opaque</li>
      <li>[#1561] Clarify which session description to check for if negotiation
      is needed</li>
      <li>[#1566] Add a section summarizing different ICE candidate events</li>
      <li>[#1580] Add ICE candidates only to the applicable descriptions.</li>
      <li>[#1572] Annotate all interfaces with Exposed extended attribute</li>
      <li>[#1571] Remove unreferenced [HTML] ref using respec post
      processing</li>
      <li>[#1596] Add Promise terms to Terminology section</li>
      <li>[#1595] Add note that null candidate is for legacy compatibility</li>
      <li>[#1592] Select sent codec via "codecPayloadType" field rather than
      reordering</li>
      <li>[#1591] Add some text about how the AssociatedMediaStreams internal
      slot is used</li>
      <li>[#1590] Use internal slots for transceiver's sender/receiver and
      receiver's track</li>
      <li>[#1585] Use internal slot for RTCRtpSender's track</li>
      <li>[#1604] Add 'resolved' (and variants) to Promise terminology</li>
      <li>[#1582] RTCIceTransport: Use internal slots</li>
      <li>[#1577] scaleResolutionDownBy: Specify how the User Agent should
      behave when scaling video</li>
      <li>[#1607] Update DTMF examples to match specified behavior</li>
      <li>[#1581] RTCDtlsTransport: Use internal slots</li>
      <li>[#1560] setParameters: Do argument checks in sync section and specify
      parellel steps</li>
    </ol>
    <h3 id="changes-since-june-05-2017">Changes since June 05, 2017</h3>
    <ol>
      <li>[#1160] Remove getAlgorithm()</li>
      <li>[#1298] Specify DTMF intertone gap maximum</li>
      <li>[#1327] Remove fingerprint matching.</li>
      <li>[#1329] Update maxBitrate definition</li>
      <li>[#1337] Fix DTMF Examples (Section 11.7)</li>
      <li>[#1348] Add a note on the absence of privacy impact of configured
      default ICE</li>
      <li>[#1349] Show RFC2119 keywords in small-caps (was broken by respec
      update)</li>
      <li>[#1350] Remove meaningless case-sensitive qualification of RID
      characters</li>
      <li>[#1359] createOffer/Answer: Remove sentence with vague 'reasonably
      soon'</li>
      <li>[#1356] createDataChannel: Use TypeError for bad reliability
      arguments</li>
      <li>[#1340] Section 4.2.5/4.2.6: Enum Table Inconsistency</li>
      <li>[#1115] Specify DTLS failures in more detail</li>
      <li>[#1168] Remove paragraph about removeTrack causing track to be ended
      remotely</li>
      <li>[#1209] Throw error if data channel's buffer is filled, rather than
      closing</li>
      <li>[#1229] Add detailed steps for constructing RTCIceCandidate</li>
      <li>[#1321] Start integrating direction into 'create RTCRtpTransceiver'
      algorithm</li>
      <li>[#1333] Algorithm for rejecting modification</li>
      <li>[#1334] createOffer/Answer: Specify built-in certificate behavior</li>
      <li>[#1338] Clarification: insertDTMF replaces the current tone
      buffer</li>
      <li>[#1339] Fill in empty attribute descriptions in ice description</li>
      <li>[#1358] RTCDataChannel: Use internal slots and specify default values
      at one location</li>
      <li>[#1385] Update RTCTrackEvent text</li>
      <li>[#1388] Make replaceTrack accept null argument</li>
      <li>[#1373] Specify DTMF playout algorithm for comma</li>
      <li>[#1392] Add reference to RFC 5245</li>
      <li>[#1436] RTCRtpTransceiver: Set currentDirection to null when
      stopping</li>
      <li>[#1433] Add NotSupportedError for unknown ICE server schema</li>
      <li>[#1432] addTranscevier: Assume default dictionary argument</li>
      <li>[#1429] ice-tcp: add note about ice-tcp types a UA will gather</li>
      <li>[#1428] rtcsessiondescription: attributes are not mutable</li>
      <li>[#1426] getstats: improve selector definiton</li>
      <li>[#1421] Clarify enqueue is acted on specific connection's operation
      queue</li>
      <li>[#1409] Use true and false instead of "true" and "false"</li>
      <li>[#1405] Remove "cannot be applied at the media layer"</li>
      <li>[#1404] In data channel send(), remove unneeded conditions</li>
      <li>[#1455] Specify data channel label/protocol length restriction</li>
      <li>[#1453] Removing text talking about key shortening that was
      incorrect</li>
      <li>[#1440] Set CurrentDirection slot for provisional answers</li>
      <li>[#1399] Add reference to JSEP that setLocalDescription triggers ICE
      gathering</li>
      <li>[#1449] Replace serializers by toJSON definitions</li>
      <li>[#1451] Add legacy note about addStream</li>
      <li>[#1457] Run ice server configuration validation steps for each
      url</li>
      <li>[#1480] Update mandatory stats to reflect rtp refactor in
      webrtc-stats</li>
      <li>[#1402] Add/remove remote tracks from msid streams based on
      direction</li>
      <li>[#1514] Specify that setLocalDescription() with null sdp is not
      applicable</li>
      <li>[#1434] Don't proceed w/removeTrack() if sender.track is already
      null</li>
      <li>[#1531] Remove SSRCs from RTCRtpEncodingParameters</li>
      <li>[#1530] Adding defaults for RTCRtpEncodingParameters.active and
      priority</li>
      <li>[#1528] Ignore RTCDataChannelInit.id if "negotiated" is false</li>
      <li>[#1527] Define what an "associated" transceiver is</li>
      <li>[#1526] Clarify that ICE states should be "new" if there are no
      transports</li>
      <li>[#1524] Reference Direction internal slot from
      addTrack/removeTrack</li>
      <li>[#1523] Specify how data channel priority enum is initialized from
      priority integer</li>
      <li>[#1521] Making getParameters/setParameters matching logic more
      deterministic</li>
      <li>[#1534] Change ResourceInUse to OperationError</li>
    </ol>
    <h3 id="changes-since-may-15-2017">Changes since May 15, 2017</h3>
    <ol>
      <li>[#1153] Constructor for RTCIceCandidate should accept optional
      argument</li>
      <li>[#1203] Invalid RTCRtpTransceiverDirection already throws
      TypeError.</li>
      <li>[#1221 Introduction: increase specification scope to general p2p</li>
      <li>[#1134] Add more detail about how getParameters and setParameters
      work</li>
      <li>[#1170] RTCIceCandidate: add component attribute</li>
      <li>[#1225] Units for maxFramerate</li>
      <li>[#1226] Removing WebIDL defaults for various RTP parameters</li>
      <li>[#1239] RTCIceConnectionEventInit: url is nullable</li>
      <li>[#1220] Reorder createOffer/createAnswer paragraphs</li>
      <li>[#1252] Remove note about identity is at risk</li>
      <li>[#1320] Clarify "trusted" origins as whitelisted</li>
    </ol>
    <h3 id="changes-since-may-08-2017">Changes since May 08, 2017</h3>
    <ol>
      <li>[#1149] Add paragraph about RtpContributingSources being updated
      simultaneously</li>
      <li>[#1172] Adding note about legacy `createAnswer` not supporting
      options dict</li>
      <li>[#1175] Expanding RTCPeerConnection introduction</li>
      <li>[#1176] Adding more detail to RTCIceTransportPolicy enum
      descriptions</li>
      <li>[#1180] Change maxFramerate type from unsigned long to double</li>
    </ol>
    <h3 id="changes-since-march-03-2017">Changes since March 03, 2017</h3>
    <ol>
      <li>[#1033] "Hybrid" OAuth solution</li>
      <li>[#1067] Mark getAlgorithm method at risk</li>
      <li>[#1069] Freeing resources for incoming stream</li>
      <li>[#1067] Add getStats() to RTCRtpSender/Receiver</li>
      <li>[#1081] Clarify which "candidate" is referred to in addIceCandidate
      description</li>
      <li>[#1071] Specify behavior if browser doesn't implement "negotiate"
      rtcpMuxPolicy</li>
      <li>[#1087] Update call flow in Section 11.6</li>
      <li>[#1088] Make "candidate" non-nullable in addIceCandidate parameter
      table</li>
      <li>[#1094] Check RTCPeerConnection isClosed slot before running queued
      tasks</li>
      <li>[#1082] Handling RTX in RTCRtpCodecCapabilities</li>
      <li>[#1100] Clarify when RTCRtpContributingSource.audioLevel can be
      null</li>
      <li>[#1097] Mark RTP/RTCP non-mux feature at risk</li>
      <li>[#1011] Eliminate NetworkError</li>
      <li>[#1109] Adding configurable "ptime" member of
      RTCRtpEncodingParameters</li>
      <li>[#1099] Always update the RTCRtpContributingSource for SSRCs</li>
      <li>[#1104] Add missing "closed" signaling state</li>
      <li>[#1107] Section 12.2.1.1: RTCErrorDetailType Enum definition</li>
      <li>[#1098] Attempt to update RTCRtpContributingSource objects at playout
      time</li>
      <li>[#1114] Mark Identity as a "feature at risk"</li>
      <li>[#1119] Making legacy methods optional to implement</li>
      <li>[#1122] RTCCertificate.getAlgorithm() to return a compatible
      AlgorithmIdentifier</li>
      <li>[#1130] Clarify that configuration.certificates remains undefined in
      the RTCPeerConnection constructor</li>
      <li>[#1131] RTCPeerConnection.createDataChannel: Drop
      [TreatNullAs=EmptyString] for USVString</li>
      <li>[#1129 Code examples: dont fiddle with srcObject if already set</li>
      <li>[#1136] Fire the "track" event from a queued task</li>
      <li>[#1137] Adding more detail about RTCDataChannel.id's default value
      (null)</li>
      <li>[#1139] Call RTCDtlsFingerprint a dictionary, not an object</li>
      <li>[#1140] Add a link to web-platform-tests to the top of the spec</li>
      <li>[#1133] Split getContributingSources into two methods, for CSRCs and
      SSRCs</li>
      <li>[#1145] FrozenArray, sequence and SameObject (Use sequence and
      getters instead of FrozenArray for getFingerPrints and
      getDefaultIceServers) (Use SameObject for RTCTrackEvent.streams)</li>
      <li>[#1147] Add reference to ICE restart</li>
    </ol>
    <h3 id="changes-since-december-19-2016">Changes since December 19, 2016</h3>
    <ol>
      <li>[#985] Removed legacy getStats() method</li>
      <li>[#982] Specify unit for maxPacketLifeTime</li>
      <li>[#987] Make the ufrag optional in RTCIceCandidateInit, for backwards
      compat.</li>
      <li>[#993] Use lowercase values for RTCIceComponent</li>
      <li>[#994] Changing "non-null" to "missing" to match IDL terminology.</li>
      <li>[#996] Describe when an RTCSctpTransport is created/set to null.</li>
      <li>[#999] Make transceiver.stop() send a BYE</li>
      <li>[#1002] Dispatch event when a transceiver is stopped via remote
      action</li>
      <li>[#1003] Change setLocalDescription to require unchanged offer/answer
      string</li>
      <li>[#1004] Specify that currentRemoteDescription.sdp need not match
      remoteDescription.sdp</li>
      <li>[#1006] Make errorCode required in
      RTCPeerConnectionIceErrorEventInit</li>
      <li>[#1005] Add offerToReceive* as legacy extensions</li>
      <li>[#1001] Specify the effect of a BYE on RtpReceiver.track</li>
      <li>[#1015] Fix inconsistencies in description of
      RTCDTMFToneChangeEvent.tone</li>
      <li>[#1016] Ensure that "track" event is only fired for "send" direction
      m-sections.</li>
      <li>[#1018] Mark negotitate in RTCRtcpMuxPolicy at risk</li>
      <li>[#1029] Add IdP token expired error</li>
      <li>[#1028] Add IdP  invalid token error</li>
      <li>[#1027] Add string for extra info about idpErrors</li>
      <li>[#1019] Clarify that it is possible to send the same track in several
      copies</li>
      <li>[#1023] Specify how media is centered, cropped, and scaled</li>
      <li>[#1025] Mention that codecs can be reordered or removed but not
      modified.</li>
      <li>[#1038] Make RTCDataChannel.id nullable and describe when it's
      set.</li>
      <li>[#1036] Specify how transceivers get their mids in
      setLocal/RemoteDescription</li>
      <li>[#1037] Specify when random mid generation happens</li>
      <li>[#1039] Clarify which timestamp RTCStats.timestamp represents</li>
      <li>[#1041] Label 'Warm-up example' as 'advanced p2p example'</li>
      <li>[#1031] Don't fire events on a closed peer connection</li>
      <li>[#1045] Clarifying exactly what "sdpFmtpLine" represents</li>
      <li>[#1047] Adding "[EnforceRange]" to RTCDataChannelInit.id</li>
      <li>[#1054] Throw InvalidModificationError if changing pool size after
      setLocalDescription</li>
      <li>[#1055] Changing iceCandidatePoolSize to an octet and adding
      EnforceRange WebIDL extended attribute</li>
      <li>[#1057] Add clockrate, channels, sdpFmtpLine to codec capability</li>
      <li>[#1058] Define 'generation of ICE candidates' and add reference</li>
      <li>[#1059] Specify how remote tracks get muted</li>
      <li>[#1060] Specify when to end a remote track</li>
      <li>[#1061] Remove connecting event from Event summary</li>
      <li>[#1066] Specify relation between RtpSender and track</li>
      <li>[#1056] Switch to new, consistent terminology when talking about
      exceptions</li>
      <li>[#1030] Add stats selection algorithm based on sender or receiver of
      selector</li>
    </ol>
    <h3 id="changes-since-november-23-2016">Changes since November 23, 2016</h3>
    <ol>
      <li>[#899] Make stats MTI, remove overlap with stats spec</li>
      <li>[#920] Remove ICE Agent text from RTCPeerConnection due to
      the new RTCICETransport objects.</li>
      <li>[#937] Define what happens when transceiver.stop() is called.</li>
      <li>[#938] Define what happens when setDirection() is called.</li>
      <li>[#939] Remove "stopped" from removeTrack() and immediately
      stop sender.</li>
      <li>[#940] Remove "stopped" from close, insertDTMF, and
      replaceTrack.</li>
      <li>[#944] Clarify that sender does not send if sender.track is
      set to null.</li>
      <li>[#949] Give legacy callbacks RTCSessionDescriptionInit so
      they can modify SDP.</li>
      <li>[#956] Add API for setting QoS priority of data channels.</li>
      <li>[#960] Allow replaceTrack(null)</li>
      <li>[#963] Split transceiver direction into "direction" and
      "currentDirection"</li>
      <li>[#966] setParameters rejects with InvalidStateError if
      transceiver.stopped is true.</li>
      <li>[#968] Add ufrag to IceCandidate and use IceCandidate
      for end-of-candidates.</li>
      <li>[#970] Clarify that setParameters cannot add or remove
      simulcast encodings.</li>
      <li>[#972, #973] Add generic Error Object that can hold detailed
      error information.</li>
      <li>[#936, #953, #967] Editorial: remove old in-spec issue text,
      update JSEP references, update hold examples, fix section titles</li>
    </ol>
    <h3 id="changes-since-september-13-2016">Changes since September 13, 2016</h3>
    <ol>
      <li>[#738] Add ability to get fingerprints of an
      RTCCertificate</li>
      <li>[#783] Clarify supported DTMF characters</li>
      <li>[#785] Reject invalid DTMF characters when inserted</li>
      <li>[#786] If track is ended or muted, send silence for audio or
      black frame for video</li>
      <li>[#790] Add checks that verify that a candidate matches a
      remote media decription</li>
      <li>[#791] Add text that fires the 'connectionstatechange'
      event</li>
      <li>[#793] Define DTMF tone attribute and make it required</li>
      <li>[#796] Language cleanup around use of
      MediaTrackSettings</li>
      <li>[#797] Clarify when negotiation-needed flag is cleared</li>
      <li>[#804] Clarify that JSEP is normative in some cases; also
      numerous small editorial fixes</li>
      <li>[#805] Reduce insertDTMF max duration from 8000 ms to 6000
      ms</li>
      <li>[#807] Clarify that empty string in DTMFToneChangeEvent
      indicates that the previous tones (plural) have completed.</li>
      <li>[#809] Clarify that InvalidStateError is thrown if
      insertDTMF is called on a stopped sender.</li>
      <li>[#815] Change IceConnectionState to match PeerConnection
      state in certain edge cases.</li>
      <li>[#833, #865, #884, #904] Editorial: update JSEP
      references</li>
      <li>[#835] Add definition link for NN and disallow SDP
      modification</li>
      <li>[#837] Have insertDTMF validate toneBuffer before
      returning.</li>
      <li>[#840] Remove reference to IANA registry for Statistics</li>
      <li>[#844] Throw InvalidAccessError if removeTrack is called with
      invalid sender</li>
      <li>[#847] Specify how to handle invalid data channel IDs, or
      lack of IDs.</li>
      <li>[#851] Editorial: Fix wording for insertDTMF</li>
      <li>[#852] Remove insertDTMF's duration and interToneGap
      attributes</li>
      <li>[#853] Make insertDTMF tone string normalization
      mandatory</li>
      <li>[#855] Clarify that insertDTMF's DTMFToneChangeEvent also
      requires toneBuffer to be empty in order to fire</li>
      <li>[#860] More clarification around when removeTrack should
      throw an exception, now considering rollback as well</li>
      <li>[#861] Clarify what setConfiguration changes</li>
      <li>[#864] Define channel member of RTCDataChannelEventInit and
      make it required</li>
      <li>[#871] Remove ability to modify RID via addTrack()</li>
      <li>[#872] Pass peer identity to IdP via new
      RTCIdentityProviderOptions</li>
      <li>[#875, #893] Major restructuring of createOffer and
      createAnswer to eliminate race conditions</li>
      <li>[#877] Store RTCConfiguration so getConfiguration can return
      it</li>
      <li>[#880, #896] Clean up definition of expires in
      certificates</li>
      <li>[#882] Split gathering state variables into two types,
      gathering and gatherer, and clean up descriptions of values for
      each</li>
      <li>[#883] Clarify that insertDTMF interToneGap is in
      milliseconds</li>
      <li>[#895] Add steps in "setting a description" for rolling back
      transceivers.</li>
      <li>[#900] Reject incoming tracks using transceiver.stop()</li>
      <li>[#913] Overhaul NN text while adjusting it to key off
      transceivers</li>
      <li>[#919] Remove incorrect statement related to IP leaking
      issue</li>
      <li>[#929] Have RTCSessionDescription's sdp member default to
      "" </li>
      <li>[#863, #870, #890, #892, #911, #912, #915, #926, #928, #935]
      Editorial: typos, links, dead text, WebIDL, Travis, etc.</li>
    </ol>
    <h3 id="changes-since-july-22-2016">Changes since July 22, 2016</h3>
    <ol>
      <li>[#713] Missing destruction sequence for ICE Agent</li>
      <li>[#730] Revised WebRTC 1.0 RTCIceTransportState transition
      diagram</li>
      <li>[#722] How setDirection interacts with active/inactive
      sender/receivers</li>
      <li>[#716] Improve error handling for IdP proxy interactions</li>
      <li>[#719] The IdP environment can be spoofed</li>
      <li>[#733] Clarification on RTX in Codec Capabilities/Parameters</li>
      <li>[#734] RTCRtpEncodingParameters attribute to turn on/off sending
      CN/DTX</li>
      <li>[#737] Fix mistakes in examples</li>
      <li>[#739] Replace set of senders/receivers/transceivers with
      algorithms</li>
      <li>[#721] Specify the synchronous and queued steps for
      addIceCandidate</li>
      <li>[#759] Clarification on receipt of multiple RTP encodings</li>
      <li>[#758] Support replaceTrack with the previous track ended</li>
      <li>[#745] Add steps to createOffer and explicitly specify what is
      queued</li>
      <li>[#762] Remove closed check from addIceCandidate steps (covered by
      enqueue steps)</li>
      <li>[#750] RTCIdentityProviderGlobalScope needs Exposed attributes</li>
      <li>[#752] Add steps to createAnswer and explicitly specify what is
      queued</li>
      <li>[#756] Integrate queueing into the setLocal/RemoteDescription
      steps</li>
      <li>[#765] Adding more detail to the definition of the ICE `disconnected`
      state.</li>
      <li>[#778] Remove void conformance requirement on interToneGap</li>
      <li>[#779] Make duration and interToneGap attributes unsigned long</li>
    </ol>
    <h3 id="changes-since-may-13-2016">Changes since May 13, 2016</h3>
    <ol>
      <li>[#640, #641, #659, #679, #680, #681, #682, #686, #694, #696, #697,
      #707, #708, #711] General editorial fixes</li>
      <li>[#642] Editorial: make last arg of addTransceiver optional</li>
      <li>[#643] Document defaultIceServers as source of fingerprinting</li>
      <li>[#646] Create table of RTCRtpEncodingParameters for
      RtpSender/RtpReceiver</li>
      <li>[#648] Clarify MIME (media/sub-) type</li>
      <li>[#649] Example of how to do hold</li>
      <li>[#662] Clarify effect of RTCRtpReceiver.track.stop()</li>
      <li>[#663] Define a 7XX STUN error code</li>
      <li>[#665] Clarify when setDirection() acts</li>
      <li>[#666] Clarify that transports can be null</li>
      <li>[#676] Transceiver.stop() causes negotiationneeded to be set</li>
      <li>[#677] Clean up rtcpTransport description</li>
      <li>[#701] In addTrack, mention that MSID of new track is added</li>
      <li>[#702, #704] Define algs for creating sender/receiver/transceiver,
      then use them in addTrack() and addTransceiver()</li>
      <li>[#725] Change 'process to apply candidate' to 'add the ICE
      candidate'</li>
    </ol>
    <h3 id="changes-since-february-15-2016">Changes since February 15, 2016</h3>
    <ol>
      <li>[#475] Definition of Active for an RTCRtpReceiver</li>
      <li>[#500] Reserve and use RangeError for scaleResolutionDownBy &lt;
      1.0</li>
      <li>[#504] Add getParameters() method to RTCRtpReceiver</li>
      <li>[#509] RID unmodifiable in setParameters()</li>
      <li>[#510] Gather spec text about the ICE Agent at one place</li>
      <li>[#512] Use 'connection' as configuration target instead of User
      Agent</li>
      <li>[#505] Add activateReceiver method to RTCRtpTransceiver</li>
      <li>[#516] Support for DTMF tones A-D</li>
      <li>[#499] Certificate API: add getAlgorithm method</li>
      <li>[#507] Make the definition of addIceCandidate() more explicit</li>
      <li>[#525] Add STUN Error Code reference</li>
      <li>[#524] Add error codes reference
      (RTCPeerConnectionIceErrorEvent)</li>
      <li>[#522] Let setting ice candidate pool size trigger start of
      gathering</li>
      <li>[#519] Relation between local track and outgoing encoding</li>
      <li>[#520] Add text about 'remote sources' and how they are stopped</li>
      <li>[#527] Enable trickling of end-of-candidates through
      addIceCandidate</li>
      <li>[#544] Remove "public" from ice transport policy</li>
      <li>[#547] Datachannel label and protocol are USVString</li>
      <li>[#552] Never close the RTCPeerConnection if setting a local/remote
      description fails</li>
      <li>[#535] Update MID to be random values when not received in offer</li>
      <li>[#553] Move 'closed' state from RTCSignalingState to
      RTCPeerConnectionState</li>
      <li>[#557] Splitting apart RTCIceConnectionState and
      RTCIceTransportState</li>
      <li>[#560] Changing from callback interface to dictionary for
      RTCIdentityProvider</li>
      <li>[#574] Make RTCSessionDescription readonly, and createOffer return
      dictionary</li>
      <li>[#577] Make RtpSender.track nullable</li>
      <li>[#587] Defining how track settings are set for remote tracks</li>
      <li>[#603] Add closed state and same state checks to update ice
      connection/gathering state steps</li>
      <li>[#604] ReplaceTrack: Use sender's transceiver to determine if a
      'simple track swap' is enough</li>
      <li>[#606] RTCIceCandidate: Use nullable members in init dictionary to
      describe constructor behavior</li>
      <li>[#466] Use an enum to describe directionality of RTP Stream</li>
      <li>[#602] addTransceiver(): Throw a TypeError on a bogus track kind</li>
      <li>[#610] Server cannot be reached - Issues with IPv6</li>
      <li>[#611] Clarify ICE consent freshness feedback</li>
      <li>[#618] Fix RTCPeerConnection legacy overloads</li>
      <li>[#620] RTCRtpTransceiver: add setDirection and readonly direction
      attribute</li>
      <li>[#625] Unifiy DTMF time with rtcweb WG</li>
      <li>[#630] Add ICE candidate type references</li>
      <li>[#635] pc.addTrack: Add kind check when reusing a sender and skip
      early returns</li>
      <li>[#636] replaceTrack: Use 'transceiver kind' instead of track.kind
      (track may be null)</li>
    </ol>
    <h3 id="changes-since-january-26-2016">Changes since January 26, 2016</h3>
    <ol>
      <li>[#485] Update SOTD as the document is now quite stable and the group
      is looking for wide review</li>
      <li>[#468, #335] Replace DOMError with DOMException</li>
      <li>[#472, #319] Update error reports to align with existing DOM
      Errors</li>
      <li>[#491, #479] Specify error when rejecting invalid SDP changes</li>
      <li>[#462] Add PeerConnection.activateSender() and update early media
      example</li>
      <li>[#434] Change setParameters call to be Async</li>
    </ol>
    <h3 id="changes-since-december-22-2015">Changes since December 22, 2015</h3>
    <ol>
      <li>[#179, #439] Document IP address leakage in RTCIceCandidate</li>
      <li>[#439] Complete security considerations based on security
      questionnaire and IP address discussions #439</li>
      <li>[#446] Non-nullable RTCTrackEvent args means Init dict members are
      required</li>
      <li>[#449] Clarify flow of SDP exchanges (Update simple p2p example)</li>
      <li>[#451] Clean up event handler attribute descriptions</li>
      <li>[#452, #438] Make replaceTrack() handle "not sending yet" case</li>
      <li>[#454] Add contributing source voice activity flag</li>
      <li>[#455, #439] Add references to parsing stun/turn URLs section</li>
      <li>[#456, #338] SDP changes between the createOffer and
      setLocalDescription (add JSEP reference)</li>
      <li>[#459] Add non-normative ICE state transitions</li>
      <li>[#460, #461] getRemoteCertificates() behavior in "new" and
      "connecting" states</li>
      <li>[#465, #140] Use ErrorEvent as interface for events emitted by
      RTCDataChannel.onerror</li>
      <li>[#469, #382, #373] Reject changes to peerIdentity and certificates in
      setConfiguration</li>
      <li>[#474, #406] Define RTCIceTransport.component when RTP/RTCP mux is in
      use</li>
    </ol>
    <h3 id="changes-since-november-23-2015">Changes since November 23, 2015</h3>
    <ol>
      <li>[#353] Plan X: Add an API for using RID to do simulcast</li>
      <li>[#365] Adding an accessor for the browser-configured ICE servers</li>
      <li>[#398] Make RtpTransceiver.mid nullable and remove RtpSender.mid and
      RtpReceiver.mid</li>
      <li>[#402, #391] Remove requirement about DTMF tones A-D</li>
      <li>[#403, #377] Use positive values for AudioLevel</li>
      <li>[#401, #267] Add bitrate definition</li>
      <li>[#404] Remove 'Events on MediaStream' section (duplicates new text in
      Media Capture spec)</li>
      <li>[#410, #328] Make RTCBundlePolicy Enum section normative</li>
      <li>[#411, #408] Clarify component for IceTransport when RTP/RTCP mux is
      used</li>
      <li>[#414] Define ReSpec processor for cross-reference to JSEP</li>
      <li>[#418] Make degradationPreference per-sender instead of
      per-encoding</li>
      <li>[#416] RTCRtpSender.replaceTrack() fixes (e.g. handle closed
      RTCPeerConnection)</li>
      <li>[#421] Require sdp in RTCSessionDescription{,Init}</li>
      <li>[#422] Remove confusing paragraph on fourth party interception</li>
      <li>[#423] Add specific references to JSEP where possible</li>
      <li>[#428] Don't create a default stream in 'dispatch a receiver'
      steps</li>
      <li>[#429] Adding expires attribute to generateCertificate</li>
      <li>[#430] Add maxFramerate knob for simulcast</li>
      <li>[#432] Update RTCIceTransportPolicy</li>
      <li>[#433] Use unsigned long ssrc in stats</li>
      <li>[#424] Editorial: Distinguish states from their attribute
      representation</li>
    </ol>
    <h3 id="changes-since-october-6-2015">Changes since October 6, 2015</h3>
    <ol>
      <li>[#325] Adding additional members to RTCIceCandidate dictionary</li>
      <li>[#327] Adding sha-256 to the certificate management options for
      RSA</li>
      <li>[#342] Using DOMTimestamp for RTCCertificate::expires</li>
      <li>[#293] Add RTCRtpTransceiver and PeerConnection.addMedia</li>
      <li>[#366, #343] Use RTCDegradationPreference</li>
      <li>[#374] Throw on too long label/protocol in createDataChannel()</li>
      <li>[#266] Tidy up setLocal/RemoteDescription processing model</li>
      <li>[#361] Adding setCodecPreferences to RTCRtpTransceiver</li>
      <li>[#371] Add RtcpMuxPolicy</li>
      <li>[#385, #312] Don't invoke public API in legacy function section</li>
      <li>[#394, #393] don't throw on empty iceServers list</li>
    </ol>
    <h3 id="changes-since-september-22-2015">Changes since September 22, 2015</h3>
    <ol>
      <li>[#289, #153] Add way to set size of ICE candidate pool</li>
      <li>[#256] Fix prose on getStats() wo/selector + move type check to sync
      section</li>
      <li>[#242] Remove SyntaxError on malformed ICE candidate</li>
      <li>[#284] Add icecandidateerror event for indicating ICE gathering
      errors</li>
      <li>[#298] Add support for codec reordering and removal in
      RtpParameters</li>
      <li>[#311] Fixing syntax for required RTCCertificate arguments</li>
      <li>[#280] Add extra IceTransport read-only attributes and methods</li>
      <li>[#291] Add PeerConnection.connectionState</li>
      <li>[#300, #4, #6, #276] Add API to get SSRC and audio levels</li>
      <li>[#301] Fix RTCStatsReport with object and maplike instead of
      getter</li>
      <li>[#302] (Partly) removing interface use for RTCSessionDescription and
      RTCIceCandidate</li>
      <li>[#314, #299] Update the operations queue to handle promises and
      closed signalling</li>
      <li>[#273] Add a bunch of fields to RtpParameters and
      RtpEncodingParameters</li>
    </ol>
    <h3 id="changes-since-june-11-2015">Changes since June 11, 2015</h3>
    <ol>
      <li>[#234] Add RTCRtpParameters, RTCRtpSender.getParameters, and
      RTCRtpSender.setParameters</li>
      <li>[#225] Support for pending and current SDP</li>
      <li>[#229] Removing the weird optionality from RTCSessionDescription and
      its constructor.</li>
      <li>[#235] Modernize getStats() with promises</li>
      <li>[#243] Mark candidate property of RTCIceCandidateInit required</li>
      <li>[#248] Fix error handling for certificate management</li>
      <li>[#259] Change type of RtpEncodingParameters.priority to an enum</li>
      <li>[#21, #262] Sort out 2119 MUSTs and SHOULDs</li>
      <li>[#268] Add RtpEncodingParameters.maxBitrate</li>
      <li>[#241] Add RtpSender.transport, RtpReceiver.transport,
      RTCDtlsTransport, RTCIceTransport, etc</li>
      <li>[#224, #261] Sort out when responding PeerConnection reaches
      iceConnetionState completed</li>
      <li>[#303] Replace track without renegotiation</li>
      <li>[#269] Add RTCRtpSender.getCapabilities and
      RTCRtpReceiver.getCapabilities</li>
    </ol>
    <h3 id="changes-since-march-6-2015">Changes since March 6, 2015</h3>
    <ol>
      <li>[PR #167] Removed RTCPeerConnection.createDTMFSender and added
      RTCRtpSender.dtmf, along with corresponding examples.</li>
      <li>[PR #184] RTCPeerConnection will NOT connect unless identity is
      verified.</li>
      <li>[PR #27] Documenting practice with candidate events</li>
      <li>[PR #203] Rewrote mitigations text for security considerations
      section</li>
      <li>[PR #192] Added support for auth tokens. Fixes #190</li>
      <li>[PR #207] Update ice config examples to use multiple urls and *s
      schemes</li>
      <li>[PR #210] Optional RTCConfiguration in RTCPC constructor</li>
      <li>[PR #171] Add RTCAnswerOptions (with common RTCOfferAnswerOptions
      dictionary)</li>
      <li>[PR #178] Identity provider interface redesign</li>
      <li>[PR #193] Add .mid property to sender/receiver. Fixes #191</li>
      <li>[PR #218] Enqueue addIceCandidate</li>
      <li>[PR #213 (1)] Rename updateIce() to setConfiguration()</li>
      <li>[PR #213 (2)] Make RTCPeerConnection.setConfiguration() replace the
      existing configuration</li>
      <li>[PR #214] Certificate management API (Bug 21880)</li>
      <li>[PR #220] Clarify muted state (proposed fix for issue #139)</li>
      <li>[PR #221] Define when RTCRtpReceivers are created and dispatced
      (issue #198)</li>
      <li>[PR #215] Adding expires attribute to certificate management</li>
      <li>[PR #233] Add a "bufferedamountlow" event</li>
    </ol>
    <h3 id="changes-since-december-5-2014">Changes since December 5, 2014</h3>
    <ol>
      <li>Properly define the negotiationneeded event, and its interactions
      with other API calls.</li>
      <li>Add support for RTCRtpSender and RTCRtpReceiver.</li>
      <li>Update misleading local/RemoteDescription attribute text.</li>
      <li>Add RTCBundlePolicy.</li>
      <li>All callback-based methods have been moved to a legacy section, and
      replaced by same-named overloads using Promises instead.</li>
      <li>[PR #194] Added first version of Security Considerations (more work
      needed)</li>
      <li>Updated identity provider structure.</li>
    </ol>
    <h3 id="changes-since-june-4-2014">Changes since June 4, 2014</h3>
    <ol>
      <li>Bug 25724: Allow garbage collection of closed PeerConnections</li>
      <li>Bug 27214: Add onicegatheringstatechange event</li>
      <li>Bug 26644: Fixing end of candidates event</li>
    </ol>
    <h3 id="changes-since-april-10-2014">Changes since April 10, 2014</h3>
    <ol>
      <li>Bug 25774: Mixed isolation</li>
    </ol>
    <h3 id="changes-since-april-10-2014-0">Changes since April 10, 2014</h3>
    <ol>
      <li>Bug 25855: Clarification about conformance requirements phrased as
      algorithms</li>
      <li>Bug 25892: SignalingStateChange event should be fired only if there
      is a change in signaling state.</li>
      <li>Bug 25152: createObjectURL used in examples is no longer supported by
      Media Capture and Streams.</li>
      <li>Bug 25976: DTMFSender.insertDTMF steps should validate the values of
      duration and interToneGap.</li>
      <li>Bug 25189: Mandatory errorCallback is missing in examples for
      getStats.</li>
      <li>Bug 25840: Creating DataChannel with same label.</li>
      <li>Updated comment above example ice state transitions (discussed in Bug
      25257).</li>
      <li>Updated insertDTMF() algorithm to ignore unrecognized characters (as
      discussed in bug 25977).</li>
      <li>Made formatting of references to ice connection state
      consistent.</li>
      <li>Made insertDTMF() throw on unrecognized characters (used to
      ignore).</li>
      <li>Removed requestIdentity from RTCConfiguration and
      RTCOfferAnswerOptions. Removed RTCOfferAnswerOptions as a result.</li>
      <li>Adding isolated property and associated event to
      MediaStreamTrack.</li>
    </ol>
    <h3 id="changes-since-march-21-2014">Changes since March 21, 2014</h3>
    <ol>
      <li>Changes to identity-related text:
        <ul>
          <li>Removed noaccess constraint</li>
          <li>Add the ability to peerIdentity constrain RTCPeerConnection,
          which limits communication to a single peer</li>
          <li>Change the way that the browser communicates with IdP to a
          message channel
          (http://www.w3.org/TR/webmessaging/#message-channels)</li>
          <li>Improved error feedback from IdP interactions (added new events
          with more detailed context)</li>
          <li>Changed the way that an IdP is able to request user login
          (LOGINNEEDED message)</li>
        </ul>
      </li>
      <li>Bug 25155: maxRetransmitTime is not the name of the SCTP concept it
      points to.</li>
    </ol>
    <h3 id="changes-since-january-27-2014">Changes since January 27, 2014</h3>
    <ol>
      <li>Refined identity assertion generation and validation.</li>
      <li>Default DTMF gap changed from 50 to 70 ms.</li>
      <li>Bug 24875: Examples in the WebRTC spec are not updated As per the
      modified API.</li>
    </ol>
    <h3 id="changes-since-august-30-2013">Changes since August 30, 2013</h3>
    <ol>
      <li>Make RTCPeerConnection close method be idempotent.</li>
      <li>Clarified ICE server configuration could contain URI types other than
      STUN and TURN.</li>
      <li>Changed the DTMF timing values.</li>
      <li>Allow offerToReceiveAudio/video indicate number of streams to
      offer.</li>
      <li>ACTION-98: Added text about clamping of maxRetransmitTime and
      maxRetransmits.</li>
      <li>ACTION-88: Removed nullable types from dictionaries (added attribute
      default values for attributes that would be left uninitialized without
      the init dictionary present.</li>
      <li>InvalidMediaStreamTrackError changed to InvalidParameter.</li>
      <li>Fire NetworkError when the data transport is closed with an
      error.</li>
      <li>Add an exception for data channel with trying to use existing
      code.</li>
      <li>Change maxRetransmits to be an unsigned type.</li>
      <li>Clarify state changes when ICE restarts.</li>
      <li>Added InvalidStateError exception for operations on an
      RTCPeerConnection that is closed.</li>
      <li>Major changes to Identity Proxy section.</li>
      <li>(ACTION: 95) Moved IceTransports (constraint) to RTCConfiguration
      dictionary.</li>
      <li>(ACTION: 95) Introduced RTCOfferAnswerOptions and RTCOfferOptions
      dictionaries.</li>
      <li>(ACTION: 95) Removed constraints argument from addStream() (and
      removed IANA Constraints section).</li>
      <li>Added validation of the RTCConfiguration dictionary argument(s).</li>
      <li>Added getConfiguration() on RTCPeerConnection.</li>
    </ol>
    <h3 id="changes-since-june-3-2013">Changes since June 3, 2013</h3>
    <ol>
      <li>Removed synchronous section left-overs.</li>
      <li>RTCIceServer now accepts multiple URLs.</li>
      <li>Redefined the meaning of negotiated for DataChannel.</li>
      <li>Made iceServers a sequence (instead of an Array).</li>
      <li>Updated error reporting (to use DOMError and camel cased names).</li>
      <li>Added success and failure callbacks to addIceCandidate().</li>
      <li>Made local/remoteDescription attributes nullable.</li>
      <li>Added username member to RTCIceServer dictionary.</li>
    </ol>
    <h3 id="changes-since-march-22-2013">Changes since March 22, 2013</h3>
    <ol>
      <li>Added IceRestart constraint.</li>
      <li>Big updates on DataChannel API to use new channel setup
      procedures.</li>
    </ol>
    <h3 id="changes-since-feb-22-2013">Changes since Feb 22, 2013</h3>
    <ol>
      <li>Example review: Updated DTMF and Stats examples. Added text about
      when to fire "negotiationneeded" event to align with examples.</li>
      <li>Updated RTCPeerConnection state machine. Added a shared processing
      model for setLocalDescription()/setRemoteDescription().</li>
      <li>Updated simple callflow to match the current API.</li>
    </ol>
    <h3 id="changes-since-jan-16-2013">Changes since Jan 16, 2013</h3>
    <ol>
      <li>Initial import of Statistics API to version 2.</li>
      <li>Integration of Statistics API version 2.5 started.</li>
      <li>Updated Statistics API to match Boston/list discussions.</li>
      <li>Extracted API extensions introduced by features, such as the P2P Data
      API, from the RTCPeerConnection API.</li>
      <li>Updated DTMF algorithm to dispatch an event when insertDTMF() is
      called with an empty string to cancel future tones.</li>
      <li>Updated DTMF algorithm to not cancel and reschedule if a playout task
      is running (only update toneBuffer and other values).</li>
    </ol>
    <h3 id="changes-since-dec-12-2012">Changes since Dec 12, 2012</h3>
    <ol>
      <li>Changed AudioMediaStreamTrack to RTCDTMFSender and gave it its own
      section. Updated text to reflect most recent agreements. Also added
      examples section.</li>
      <li>Replaced the localStreams and remoteStreams attributes with functions
      returning sequences of MediaStream objects.</li>
      <li>Added spec text for attributes and methods adopted from the WebSocket
      interface.</li>
      <li>Changed the state ENUMs and transition diagrams.</li>
      <li>Aligned the data channel processing model a bit more with WebSockets
      (mainly closing the underlying transport).</li>
    </ol>
    <h3 id="changes-since-nov-13-2012">Changes since Nov 13, 2012</h3>
    <ol>
      <li>Made some clarifications as to how operation queuing works, and fixed
      a few errors with the error handling description.</li>
      <li>Introduced new representation of tracks in a stream (removed
      MediaStreamTrackList). Added algorithm for creating a track to represent
      an incoming network media component.</li>
      <li>Renamed MediaStream.label to MediaStream.id (the definition needs
      some more work).</li>
    </ol>
    <h3 id="changes-since-nov-03-2012">Changes since Nov 03, 2012</h3>
    <ol>
      <li>Added text describing the queuing mechanism for
      RTCPeerConnection.</li>
      <li>Updated simple P2P example to include all mandatory (error)
      callbacks.</li>
      <li>Updated P2P data example to include all mandatory (error) callbacks.
      Also added some missing RTC prefixes.</li>
    </ol>
    <h3 id="changes-since-oct-19-2012">Changes since Oct 19, 2012</h3>
    <ol>
      <li>Clarified how createOffer() and createAnswer() use their
      callbacks.</li>
      <li>Made all failure callbacks mandatory.</li>
      <li>Added error object types, general error handling principles, and
      rules for when errors should be thrown.</li>
    </ol>
    <h3 id="changes-since-sept-23-2012">Changes since Sept 23, 2012</h3>
    <ol>
      <li>Restructured the document layout and created separate sections for
      features like Peer-to-peer Data API, Statistics and Identity.</li>
    </ol>
    <h3 id="changes-since-aug-16-2012">Changes since Aug 16, 2012</h3>
    <ol>
      <li>Replaced stringifier with serializer on RTCSessionDescription and
      RTCIceCandidate (used when JSON.stringify() is called).</li>
      <li>Removed offer and createProvisionalAnswer arguments from the
      createAnswer() method.</li>
      <li>Removed restart argument from the updateIce() method.</li>
      <li>Made RTCDataChannel an EventTarget</li>
      <li>Updated simple RTCPeerConnection example to match spec changes.</li>
      <li>Added section about RTCDataChannel garbage collection.</li>
      <li>Added stuff for identity proxy.</li>
      <li>Added stuff for stats.</li>
      <li>Added stuff peer and ice state reporting.</li>
      <li>Minor changes to sequence diagrams.</li>
      <li>Added a more complete RTCDataChannel example</li>
      <li>Various fixes from Dan's Idp API review.</li>
      <li>Patched the Stats API.</li>
    </ol>
    <h3 id="changes-since-aug-13-2012">Changes since Aug 13, 2012</h3>
    <ol>
      <li>Made the RTCSessionDescription and RTCIceCandidate constructors take
      dictionaries instead of a strings. Also added detailed stringifier
      algorithm.</li>
      <li>Went through the list of issues (issue numbers are only valid with
      HEAD at fcda53c460). Closed (fixed/wontfix): 1, 8, 10, 13, 14, 16, 18,
      19, 22, 23, 24. Converted to notes: 4, 12. Updated: 9.</li>
      <li>Incorporate <a href="http://lists.w3.org/Archives/Public/www-archive/2012Aug/0015.html">changes
      proposed</a> by Li Li.
      </li>
      <li>Use an enum for DataChannelState and fix IDLs where using an optional
      argument also requires all previous optional arguments to have a default
      value.</li>
    </ol>
    <h3 id="changes-since-jul-20-2012">Changes since Jul 20, 2012</h3>
    <ol>
      <li>Added RTC Prefix to names (including the notes below).</li>
      <li>Moved to new definition of configuration and ice servers object.</li>
      <li>Added correlating lines to candidate structure.</li>
      <li>Converted setLocalDescription and setRemoteDescription to be
      asynchronous.</li>
      <li>Added call flows.</li>
    </ol>
    <h3 id="changes-since-jul-13-2012">Changes since Jul 13, 2012</h3>
    <ol>
      <li>Removed peer attribute from RTCPeerConnectionIceEvent (duplicates
      functionality of Event.target attribute).</li>
      <li>Removed RTCIceCandidateCallback (no longer used).</li>
      <li>Removed RTCPeerConnectionEvent (we use a simple event instead).</li>
      <li>Removed RTCSdpType argument from setLocalDescription() and
      setRemoteDescription(). Updated simple example to match.</li>
    </ol>
    <h3 id="changes-since-may-28-2012">Changes since May 28, 2012</h3>
    <ol>
      <li>Changed names to use RTC Prefix.</li>
      <li>Changed the data structure used to pass in STUN and TURN servers in
      configuration.</li>
      <li>Updated simple RTCPeerConnection example (RTCPeerConnection
      constructor arguments; use icecandidate event).</li>
      <li>Initial import of new Data API.</li>
      <li>Removed some left-overs from the old Data Stream API.</li>
      <li>Renamed "underlying data channel" to "underlying data transport".
      Fixed closing procedures. Fixed some typos.</li>
    </ol>
    <h3 id="changes-since-april-27-2012">Changes since April 27, 2012</h3>
    <ol>
      <li>Major rewrite of RTCPeerConnection section to line up with IETF JSEP
      draft.</li>
      <li>Added simple RTCPeerConnection example. Initial update of
      RTCSessionDescription and RTCIceCandidate to support serialization and
      construction.</li>
    </ol>
    <h3 id="changes-since-21-april-2012">Changes since 21 April 2012</h3>
    <ol>
      <li>Moved MediaStream and related definitions to getUserMedia.</li>
      <li>Removed section "Obtaining local multimedia content".</li>
      <li>Updated getUserMedia() calls in examples (changes in Media Capture TF
      spec).</li>
      <li>Introduced MediaStreamTrackList interface with support for adding and
      removing tracks.</li>
      <li>Updated the algorithm that is run when RTCPeerConnection receives a
      stream (create new stream when negotiated instead of when data
      arrives).</li>
    </ol>
    <h3 id="changes-since-12-january-2012">Changes since 12 January 2012</h3>
    <ol>
      <li>Clarified the relation of Stream, Track, and Channel.</li>
    </ol>
    <h3 id="changes-since-17-october-2011">Changes since 17 October 2011</h3>
    <ol>
      <li>Tweak the introduction text and add a reference to the IETF RTCWEB
      group.</li>
      <li>Changed the first argument to getUserMedia to be an object.</li>
      <li>Added a MediaStreamHints object as a second argument to
      RTCPeerConnection.addStream.</li>
      <li>Added AudioMediaStreamTrack class and DTMF interface.</li>
    </ol>
    <h3 id="changes-since-23-august-2011">Changes since 23 August 2011</h3>
    <ol>
      <li>Separated the SDP and ICE Agent into separate agents and added
      explicit state attributes for each.</li>
      <li>Removed the send method from PeerConenction and associated callback
      function.</li>
      <li>Modified MediaStream() constructor to take a list of MediaStreamTrack
      objects instead of a MediaStream. Removed text about MediaStream parent
      and child relationship.</li>
      <li>Added abstract.</li>
      <li>Moved a few paragraphs from the MediaStreamTrack.label section to the
      MediaStream.label section (where they belong).</li>
      <li>Split MediaStream.tracks into MediaStream.audioTracks and
      MediaStream.videoTracks.</li>
      <li>Removed a sentence that implied that track access is limited to
      LocalMediaStream.</li>
      <li>Updated a few getUserMedia()-examples to use MediaStreamOptions.</li>
      <li>Replaced calls to URL.getObjectURL() with URL.createObjectURL() in
      example code.</li>
      <li>Fixed some broken getUserMedia() links.</li>
      <li>Introduced state handling on MediaStreamTrack (removed state handling
      from MediaStream).</li>
      <li>Reintroduced onended on MediaStream to simplify checking if all
      tracks are ended.</li>
      <li>Aligned the MediaStreamTrack ended event dispatching behavior with
      that of MediaStream.</li>
      <li>Updated the LocalMediaStream.stop() algorithm to implicitly use the
      end track algorithm.</li>
      <li>Replaced an occurrence the term finished track with ended track (to
      align with rest of spec).</li>
      <li>Moved (and extended) the explanation about track references and media
      sources from LocalMediaStream to MediaStreamTrack.</li>
    </ol>
  </section>
  <section class="appendix" id="acknowledgements">
    <!--OddPage--><h2 id="a-acknowledgements"><span class="secno">A. </span>Acknowledgements</h2>
    <p>The editors wish to thank the Working Group chairs and Team Contact,
    Harald Alvestrand, Stefan Håkansson, Erik Lagerway and Dominique
    Hazaël-Massieux, for their support. Substantial text in this
    specification was provided by many people including Martin Thomson, Harald
    Alvestrand, Justin Uberti, Eric Rescorla, Peter Thatcher, Jan-Ivar Bruaroey
    and Peter Saint-Andre. Dan Burnett would like to acknowledge the
    significant support received from Voxeo and Aspect during the development
    of this specification.</p>
    <p>The RTCRtpSender and RTCRtpReceiver objects were initially described in
    the <a href="https://www.w3.org/community/ortc/"><abbr title="World Wide Web Consortium">W3C</abbr> ORTC CG</a>, and have
    been adapted for use in this specification.</p>
  </section>

<section id="references" class="appendix"><!--OddPage--><h2 id="b-references"><span class="secno">B. </span>References</h2><section id="normative-references"><h3 id="b-1-normative-references"><span class="secno">B.1 </span>Normative references</h3><dl class="bibliography"><dt id="bib-BUNDLE">[BUNDLE]</dt><dd><a href="https://tools.ietf.org/html/draft-ietf-mmusic-sdp-bundle-negotiation"><cite>Negotiating Media Multiplexing Using the Session Description Protocol (SDP)</cite></a>. C. Holmberg; H. Alvestrand; C. Jennings. IETF. 31 August 2017. Active Internet-Draft. URL: <a href="https://tools.ietf.org/html/draft-ietf-mmusic-sdp-bundle-negotiation">https://tools.ietf.org/html/draft-ietf-mmusic-sdp-bundle-negotiation</a>
</dd><dt id="bib-ECMASCRIPT-6.0">[ECMASCRIPT-6.0]</dt><dd><a href="http://www.ecma-international.org/ecma-262/6.0/index.html"><cite>ECMA-262 6th Edition, The ECMAScript 2015 Language Specification</cite></a>. Allen Wirfs-Brock. Ecma International. June 2015. Standard. URL: <a href="http://www.ecma-international.org/ecma-262/6.0/index.html">http://www.ecma-international.org/ecma-262/6.0/index.html</a>
</dd><dt id="bib-fetch">[fetch]</dt><dd><a href="https://fetch.spec.whatwg.org/"><cite>Fetch Standard</cite></a>. Anne van Kesteren. WHATWG. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
</dd><dt id="bib-FILEAPI">[FILEAPI]</dt><dd><a href="https://www.w3.org/TR/FileAPI/"><cite>File API</cite></a>. Marijn Kruisselbrink. W3C. 26 October 2017. W3C Working Draft. URL: <a href="https://www.w3.org/TR/FileAPI/">https://www.w3.org/TR/FileAPI/</a>
</dd><dt id="bib-FIPS-180-4">[FIPS-180-4]</dt><dd><a href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf"><cite>FIPS PUB 180-4 Secure Hash Standard</cite></a>.  U.S. Department of Commerce/National Institute of Standards and Technology. URL: <a href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf">https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf</a>
</dd><dt id="bib-GETUSERMEDIA">[GETUSERMEDIA]</dt><dd><a href="https://www.w3.org/TR/mediacapture-streams/"><cite>Media Capture and Streams</cite></a>. Daniel Burnett; Adam Bergkvist; Cullen Jennings; Anant Narayanan; Bernard Aboba. W3C. 3 October 2017. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/mediacapture-streams/">https://www.w3.org/TR/mediacapture-streams/</a>
</dd><dt id="bib-HIGHRES-TIME">[HIGHRES-TIME]</dt><dd><a href="https://www.w3.org/TR/hr-time-2/"><cite>High Resolution Time Level 2</cite></a>. Ilya Grigorik; James Simonsen; Jatinder Mann. W3C. 1 March 2018. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/hr-time-2/">https://www.w3.org/TR/hr-time-2/</a>
</dd><dt id="bib-HTML51">[HTML51]</dt><dd><a href="https://www.w3.org/TR/html51/"><cite>HTML 5.1 2nd Edition</cite></a>. Steve Faulkner; Arron Eicholz; Travis Leithead; Alex Danilo. W3C. 3 October 2017. W3C Recommendation. URL: <a href="https://www.w3.org/TR/html51/">https://www.w3.org/TR/html51/</a>
</dd><dt id="bib-IANA-HASH-FUNCTION">[IANA-HASH-FUNCTION]</dt><dd><a href="https://www.iana.org/assignments/hash-function-text-names/hash-function-text-names.xml"><cite>Hash Function Textual Names</cite></a>.  IANA. URL: <a href="https://www.iana.org/assignments/hash-function-text-names/hash-function-text-names.xml">https://www.iana.org/assignments/hash-function-text-names/hash-function-text-names.xml</a>
</dd><dt id="bib-ICE">[ICE]</dt><dd><a href="https://tools.ietf.org/html/rfc5245"><cite>Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal for Offer/Answer Protocols</cite></a>. J. Rosenberg. IETF. April 2010. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc5245">https://tools.ietf.org/html/rfc5245</a>
</dd><dt id="bib-INFRA">[INFRA]</dt><dd><a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Anne van Kesteren; Domenic Denicola. WHATWG. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
</dd><dt id="bib-JSEP">[JSEP]</dt><dd><a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep/"><cite>Javascript Session Establishment Protocol</cite></a>. Justin Uberti; Cullen Jennings; Eric Rescorla. IETF. 10 October 2017. Active Internet-Draft. URL: <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep/">https://tools.ietf.org/html/draft-ietf-rtcweb-jsep/</a>
</dd><dt id="bib-OAUTH-POP-KEY-DISTRIBUTION">[OAUTH-POP-KEY-DISTRIBUTION]</dt><dd><a href="https://datatracker.ietf.org/doc/draft-ietf-oauth-pop-key-distribution/"><cite>OAuth 2.0 Proof-of-Possession: Authorization Server to Client Key Distribution</cite></a>. J. Bradley; P. Hunt; M. Jones; H. Tschofenig. IETF. 5 March 2015. Internet Draft (work in progress). URL: <a href="https://datatracker.ietf.org/doc/draft-ietf-oauth-pop-key-distribution/">https://datatracker.ietf.org/doc/draft-ietf-oauth-pop-key-distribution/</a>
</dd><dt id="bib-RFC2119">[RFC2119]</dt><dd><a href="https://tools.ietf.org/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. S. Bradner. IETF. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
</dd><dt id="bib-RFC3550">[RFC3550]</dt><dd><a href="https://tools.ietf.org/html/rfc3550"><cite>RTP: A Transport Protocol for Real-Time Applications</cite></a>. H. Schulzrinne; S. Casner; R. Frederick; V. Jacobson. IETF. July 2003. Internet Standard. URL: <a href="https://tools.ietf.org/html/rfc3550">https://tools.ietf.org/html/rfc3550</a>
</dd><dt id="bib-RFC3986">[RFC3986]</dt><dd><a href="https://tools.ietf.org/html/rfc3986"><cite>Uniform Resource Identifier (URI): Generic Syntax</cite></a>. T. Berners-Lee; R. Fielding; L. Masinter. IETF. January 2005. Internet Standard. URL: <a href="https://tools.ietf.org/html/rfc3986">https://tools.ietf.org/html/rfc3986</a>
</dd><dt id="bib-RFC4566">[RFC4566]</dt><dd><a href="https://tools.ietf.org/html/rfc4566"><cite>SDP: Session Description Protocol</cite></a>. M. Handley; V. Jacobson; C. Perkins. IETF. July 2006. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc4566">https://tools.ietf.org/html/rfc4566</a>
</dd><dt id="bib-RFC4572">[RFC4572]</dt><dd><a href="https://tools.ietf.org/html/rfc4572"><cite>Connection-Oriented Media Transport over the Transport Layer Security (TLS) Protocol in the Session Description Protocol (SDP)</cite></a>. J. Lennox. IETF. July 2006. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc4572">https://tools.ietf.org/html/rfc4572</a>
</dd><dt id="bib-RFC5389">[RFC5389]</dt><dd><a href="https://tools.ietf.org/html/rfc5389"><cite>Session Traversal Utilities for NAT (STUN)</cite></a>. J. Rosenberg; R. Mahy; P. Matthews; D. Wing. IETF. October 2008. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc5389">https://tools.ietf.org/html/rfc5389</a>
</dd><dt id="bib-RFC5761">[RFC5761]</dt><dd><a href="https://tools.ietf.org/html/rfc5761"><cite>Multiplexing RTP Data and Control Packets on a Single Port</cite></a>. C. Perkins; M. Westerlund. IETF. April 2010. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc5761">https://tools.ietf.org/html/rfc5761</a>
</dd><dt id="bib-RFC5888">[RFC5888]</dt><dd><a href="https://tools.ietf.org/html/rfc5888"><cite>The Session Description Protocol (SDP) Grouping Framework</cite></a>. G. Camarillo; H. Schulzrinne. IETF. June 2010. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc5888">https://tools.ietf.org/html/rfc5888</a>
</dd><dt id="bib-RFC6236">[RFC6236]</dt><dd><a href="https://tools.ietf.org/html/rfc6236"><cite>Negotiation of Generic Image Attributes in the Session Description Protocol (SDP)</cite></a>. I. Johansson; K. Jung. IETF. May 2011. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6236">https://tools.ietf.org/html/rfc6236</a>
</dd><dt id="bib-RFC6464">[RFC6464]</dt><dd><a href="https://tools.ietf.org/html/rfc6464"><cite>A Real-time Transport Protocol (RTP) Header Extension for Client-to-Mixer Audio Level Indication</cite></a>. J. Lennox, Ed.; E. Ivov; E. Marocco. IETF. December 2011. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6464">https://tools.ietf.org/html/rfc6464</a>
</dd><dt id="bib-RFC6465">[RFC6465]</dt><dd><a href="https://tools.ietf.org/html/rfc6465"><cite>A Real-time Transport Protocol (RTP) Header Extension for Mixer-to-Client Audio Level Indication</cite></a>. E. Ivov, Ed.; E. Marocco, Ed.; J. Lennox. IETF. December 2011. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6465">https://tools.ietf.org/html/rfc6465</a>
</dd><dt id="bib-RFC6544">[RFC6544]</dt><dd><a href="https://tools.ietf.org/html/rfc6544"><cite>TCP Candidates with Interactive Connectivity Establishment (ICE)</cite></a>. J. Rosenberg; A. Keranen; B. B. Lowekamp; A. B. Roach. IETF. March 2012. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6544">https://tools.ietf.org/html/rfc6544</a>
</dd><dt id="bib-RFC6749">[RFC6749]</dt><dd><a href="https://tools.ietf.org/html/rfc6749"><cite>The OAuth 2.0 Authorization Framework</cite></a>. D. Hardt, Ed.. IETF. October 2012. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6749">https://tools.ietf.org/html/rfc6749</a>
</dd><dt id="bib-RFC7064">[RFC7064]</dt><dd><a href="https://tools.ietf.org/html/rfc7064"><cite>URI Scheme for the Session Traversal Utilities for NAT (STUN) Protocol</cite></a>. S. Nandakumar; G. Salgueiro; P. Jones; M. Petit-Huguenin. IETF. November 2013. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7064">https://tools.ietf.org/html/rfc7064</a>
</dd><dt id="bib-RFC7065">[RFC7065]</dt><dd><a href="https://tools.ietf.org/html/rfc7065"><cite>Traversal Using Relays around NAT (TURN) Uniform Resource Identifiers</cite></a>. M. Petit-Huguenin; S. Nandakumar; G. Salgueiro; P. Jones. IETF. November 2013. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7065">https://tools.ietf.org/html/rfc7065</a>
</dd><dt id="bib-RFC7515">[RFC7515]</dt><dd><a href="https://tools.ietf.org/html/rfc7515"><cite>JSON Web Signature (JWS)</cite></a>. M. Jones; J. Bradley; N. Sakimura. IETF. May 2015. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7515">https://tools.ietf.org/html/rfc7515</a>
</dd><dt id="bib-RFC7635">[RFC7635]</dt><dd><a href="https://tools.ietf.org/html/rfc7635"><cite>Session Traversal Utilities for NAT (STUN) Extension for Third-Party Authorization</cite></a>. T. Reddy; P. Patil; R. Ravindranath; J. Uberti. IETF. August 2015. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7635">https://tools.ietf.org/html/rfc7635</a>
</dd><dt id="bib-RFC7656">[RFC7656]</dt><dd><a href="https://tools.ietf.org/html/rfc7656"><cite>A Taxonomy of Semantics and Mechanisms for Real-Time Transport Protocol (RTP) Sources</cite></a>. J. Lennox; K. Gross; S. Nandakumar; G. Salgueiro; B. Burman, Ed.. IETF. November 2015. Informational. URL: <a href="https://tools.ietf.org/html/rfc7656">https://tools.ietf.org/html/rfc7656</a>
</dd><dt id="bib-RFC7675">[RFC7675]</dt><dd><a href="https://tools.ietf.org/html/rfc7675"><cite>Session Traversal Utilities for NAT (STUN) Usage for Consent Freshness</cite></a>. M. Perumal; D. Wing; R. Ravindranath; T. Reddy; M. Thomson. IETF. October 2015. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7675">https://tools.ietf.org/html/rfc7675</a>
</dd><dt id="bib-RTCWEB-ALPN">[RTCWEB-ALPN]</dt><dd><a href="https://tools.ietf.org/html/draft-ietf-rtcweb-alpn"><cite>Application Layer Protocol Negotiation for Web Real-Time Communications</cite></a>. M. Thomson. IETF. 23 July 2014. Active Internet-Draft. URL: <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-alpn">https://tools.ietf.org/html/draft-ietf-rtcweb-alpn</a>
</dd><dt id="bib-RTCWEB-AUDIO">[RTCWEB-AUDIO]</dt><dd><a href="https://tools.ietf.org/html/rfc7874"><cite>WebRTC Audio Codec and Processing Requirements</cite></a>. JM. Valin; C. Bran. IETF. May 2016. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7874">https://tools.ietf.org/html/rfc7874</a>
</dd><dt id="bib-RTCWEB-DATA">[RTCWEB-DATA]</dt><dd><a href="https://tools.ietf.org/html/draft-ietf-rtcweb-data-channel"><cite>RTCWeb Data Channels</cite></a>. R. Jesup; S. Loreto; M. Tuexen. IETF. 14 October 2015. Active Internet-Draft. URL: <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-data-channel">https://tools.ietf.org/html/draft-ietf-rtcweb-data-channel</a>
</dd><dt id="bib-RTCWEB-DATA-PROTOCOL">[RTCWEB-DATA-PROTOCOL]</dt><dd><a href="https://tools.ietf.org/html/draft-ietf-rtcweb-data-protocol"><cite>RTCWeb Data Channel Protocol</cite></a>. R. Jesup; S. Loreto; M. Tuexen. IETF. 14 October 2015. Active Internet-Draft. URL: <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-data-protocol">https://tools.ietf.org/html/draft-ietf-rtcweb-data-protocol</a>
</dd><dt id="bib-RTCWEB-RTP">[RTCWEB-RTP]</dt><dd><a href="https://tools.ietf.org/html/draft-ietf-rtcweb-rtp-usage"><cite>Web Real-Time Communication (WebRTC): Media Transport and Use of RTP</cite></a>. C. Perkins; M. Westerlund; J. Ott. IETF. 17 March 2016. Active Internet-Draft. URL: <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-rtp-usage">https://tools.ietf.org/html/draft-ietf-rtcweb-rtp-usage</a>
</dd><dt id="bib-RTCWEB-SECURITY-ARCH">[RTCWEB-SECURITY-ARCH]</dt><dd><a href="https://tools.ietf.org/html/draft-ietf-rtcweb-security-arch"><cite>WebRTC Security Architecture</cite></a>. Eric Rescorla. IETF. 10 December 2016. Active Internet-Draft. URL: <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-security-arch">https://tools.ietf.org/html/draft-ietf-rtcweb-security-arch</a>
</dd><dt id="bib-RTCWEB-TRANSPORT">[RTCWEB-TRANSPORT]</dt><dd><a href="https://tools.ietf.org/html/draft-ietf-rtcweb-transports"><cite>Transports for RTCWEB</cite></a>. H. Alvestrand. IETF. 31 October 2016. Active Internet-Draft. URL: <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-transports">https://tools.ietf.org/html/draft-ietf-rtcweb-transports</a>
</dd><dt id="bib-SCTP-SDP">[SCTP-SDP]</dt><dd><a href="https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp"><cite>Session Description Protocol (SDP) Offer/Answer Procedures For Stream Control Transmission Protocol (SCTP) over Datagram Transport Layer Security (DTLS) Transport</cite></a>. C. Holmberg; R. Shpount; S. Loreto; G. Camarillo. IETF. 20 March 2017. Active Internet-Draft. URL: <a href="https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp">https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp</a>
</dd><dt id="bib-SDP">[SDP]</dt><dd><a href="https://tools.ietf.org/html/rfc3264"><cite>An Offer/Answer Model with Session Description Protocol (SDP)</cite></a>. J. Rosenberg; H. Schulzrinne. IETF. June 2002. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc3264">https://tools.ietf.org/html/rfc3264</a>
</dd><dt id="bib-STUN-BIS">[STUN-BIS]</dt><dd><a href="https://tools.ietf.org/html/draft-ietf-tram-stunbis"><cite>Session Traversal Utilities for NAT (STUN)</cite></a>. M. Petit-Huguenin; G. Salgueiro; J. Rosenberg; D. Wing; R. Mahy; P. Matthews. IETF. 16 February 2017. Internet Draft (work in progress). URL: <a href="https://tools.ietf.org/html/draft-ietf-tram-stunbis">https://tools.ietf.org/html/draft-ietf-tram-stunbis</a>
</dd><dt id="bib-TRICKLE-ICE">[TRICKLE-ICE]</dt><dd><a href="http://datatracker.ietf.org/doc/draft-ietf-mmusic-trickle-ice"><cite>Trickle ICE: Incremental Provisioning of Candidates for the Interactive Connectivity Establishment (ICE) Protocol</cite></a>. E. Ivov; E. Rescorla; J. Uberti. IETF. 20 July 2015. Internet Draft (work in progress). URL: <a href="http://datatracker.ietf.org/doc/draft-ietf-mmusic-trickle-ice">http://datatracker.ietf.org/doc/draft-ietf-mmusic-trickle-ice</a>
</dd><dt id="bib-TSVWG-RTCWEB-QOS">[TSVWG-RTCWEB-QOS]</dt><dd><a href="https://tools.ietf.org/html/draft-ietf-tsvwg-rtcweb-qos"><cite>DSCP Packet Markings for WebRTC QoS</cite></a>. S. Dhesikan; C. Jennings; D. Druta; P. Jones; J. Polk. IETF. 22 August 2016. Internet Draft (work in progress). URL: <a href="https://tools.ietf.org/html/draft-ietf-tsvwg-rtcweb-qos">https://tools.ietf.org/html/draft-ietf-tsvwg-rtcweb-qos</a>
</dd><dt id="bib-WebCryptoAPI">[WebCryptoAPI]</dt><dd><a href="https://www.w3.org/TR/WebCryptoAPI/"><cite>Web Cryptography API</cite></a>. Mark Watson. W3C. 26 January 2017. W3C Recommendation. URL: <a href="https://www.w3.org/TR/WebCryptoAPI/">https://www.w3.org/TR/WebCryptoAPI/</a>
</dd><dt id="bib-WEBIDL-1">[WEBIDL-1]</dt><dd><a href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/"><cite>WebIDL Level 1</cite></a>. Cameron McCormack. W3C. 15 December 2016. W3C Recommendation. URL: <a href="https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/">https://www.w3.org/TR/2016/REC-WebIDL-1-20161215/</a>
</dd><dt id="bib-webmessaging">[webmessaging]</dt><dd><a href="https://www.w3.org/TR/webmessaging/"><cite>HTML5 Web Messaging</cite></a>. Ian Hickson. W3C. 19 May 2015. W3C Recommendation. URL: <a href="https://www.w3.org/TR/webmessaging/">https://www.w3.org/TR/webmessaging/</a>
</dd><dt id="bib-WEBRTC-STATS">[WEBRTC-STATS]</dt><dd><a href="https://www.w3.org/TR/webrtc-stats/"><cite>Identifiers for WebRTC's Statistics API</cite></a>. Harald Alvestrand; Varun Singh. W3C. 19 May 2018. W3C Working Draft. URL: <a href="https://www.w3.org/TR/webrtc-stats/">https://www.w3.org/TR/webrtc-stats/</a>
</dd><dt id="bib-WEBWORKERS">[WEBWORKERS]</dt><dd><a href="https://www.w3.org/TR/workers/"><cite>Web Workers</cite></a>. Ian Hickson. W3C. 24 September 2015. W3C Working Draft. URL: <a href="https://www.w3.org/TR/workers/">https://www.w3.org/TR/workers/</a>
</dd><dt id="bib-X509V3">[X509V3]</dt><dd><cite>ITU-T Recommendation X.509 version 3 (1997). "Information Technology - Open Systems Interconnection - The Directory Authentication Framework"&nbsp; ISO/IEC 9594-8:1997.</cite> ITU.
</dd><dt id="bib-X690">[X690]</dt><dd><a href="https://www.itu.int/ITU-T/studygroups/com17/languages/X.690-0207.pdf"><cite>Recommendation X.690 — Information Technology — ASN.1 Encoding Rules — Specification of Basic Encoding Rules (BER), Canonical Encoding Rules (CER), and Distinguished Encoding Rules (DER)</cite></a>.  ITU. URL: <a href="https://www.itu.int/ITU-T/studygroups/com17/languages/X.690-0207.pdf">https://www.itu.int/ITU-T/studygroups/com17/languages/X.690-0207.pdf</a>
</dd></dl></section><section id="informative-references"><h3 id="b-2-informative-references"><span class="secno">B.2 </span>Informative references</h3><dl class="bibliography"><dt id="bib-FLEXFEC">[FLEXFEC]</dt><dd><a href="https://tools.ietf.org/html/draft-ietf-payload-flexible-fec-scheme"><cite>RTP Payload Format for Flexible Forward Error Correction (FEC)</cite></a>. V. Singh; A. Begen; M. Zanaty; G. Mandyam. IETF. 3 July 2017. Internet Draft (work in progress). URL: <a href="https://tools.ietf.org/html/draft-ietf-payload-flexible-fec-scheme">https://tools.ietf.org/html/draft-ietf-payload-flexible-fec-scheme</a>
</dd><dt id="bib-IANA-RTP-2">[IANA-RTP-2]</dt><dd><a href="https://www.iana.org/assignments/rtp-parameters/rtp-parameters.xhtml#rtp-parameters-2"><cite>RTP Payload Format media types</cite></a>.  IANA. URL: <a href="https://www.iana.org/assignments/rtp-parameters/rtp-parameters.xhtml#rtp-parameters-2">https://www.iana.org/assignments/rtp-parameters/rtp-parameters.xhtml#rtp-parameters-2</a>
</dd><dt id="bib-INDEXEDDB">[INDEXEDDB]</dt><dd><a href="https://www.w3.org/TR/IndexedDB/"><cite>Indexed Database API</cite></a>. Nikunj Mehta; Jonas Sicking; Eliot Graff; Andrei Popescu; Jeremy Orlow; Joshua Bell. W3C. 8 January 2015. W3C Recommendation. URL: <a href="https://www.w3.org/TR/IndexedDB/">https://www.w3.org/TR/IndexedDB/</a>
</dd><dt id="bib-RFC3890">[RFC3890]</dt><dd><a href="https://tools.ietf.org/html/rfc3890"><cite>A Transport Independent Bandwidth Modifier for the Session Description Protocol (SDP)</cite></a>. M. Westerlund. IETF. September 2004. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc3890">https://tools.ietf.org/html/rfc3890</a>
</dd><dt id="bib-RFC5109">[RFC5109]</dt><dd><a href="https://tools.ietf.org/html/rfc5109"><cite>RTP Payload Format for Generic Forward Error Correction</cite></a>. A. Li, Ed.. IETF. December 2007. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc5109">https://tools.ietf.org/html/rfc5109</a>
</dd><dt id="bib-RFC5285">[RFC5285]</dt><dd><a href="https://tools.ietf.org/html/rfc5285"><cite>A General Mechanism for RTP Header Extensions</cite></a>. D. Singer; H. Desineni. IETF. July 2008. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc5285">https://tools.ietf.org/html/rfc5285</a>
</dd><dt id="bib-RFC5322">[RFC5322]</dt><dd><a href="https://tools.ietf.org/html/rfc5322"><cite>Internet Message Format</cite></a>. P. Resnick, Ed.. IETF. October 2008. Draft Standard. URL: <a href="https://tools.ietf.org/html/rfc5322">https://tools.ietf.org/html/rfc5322</a>
</dd><dt id="bib-RFC5506">[RFC5506]</dt><dd><a href="https://tools.ietf.org/html/rfc5506"><cite>Support for Reduced-Size Real-Time Transport Control Protocol (RTCP): Opportunities and Consequences</cite></a>. I. Johansson; M. Westerlund. IETF. April 2009. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc5506">https://tools.ietf.org/html/rfc5506</a>
</dd><dt id="bib-RTCWEB-IP-HANDLING">[RTCWEB-IP-HANDLING]</dt><dd><a href="https://tools.ietf.org/html/draft-ietf-rtcweb-ip-handling"><cite>WebRTC IP Address Handling Recommendations</cite></a>. Guo-wei Shieh; Justin Uberti. IETF. 20 March 2016. Active Internet-Draft. URL: <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-ip-handling">https://tools.ietf.org/html/draft-ietf-rtcweb-ip-handling</a>
</dd><dt id="bib-RTCWEB-OVERVIEW">[RTCWEB-OVERVIEW]</dt><dd><a href="https://tools.ietf.org/html/draft-ietf-rtcweb-overview"><cite>Overview: Real Time Protocols for Brower-based Applications</cite></a>. H. Alvestrand. IETF. 14 February 2014. Active Internet-Draft. URL: <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-overview">https://tools.ietf.org/html/draft-ietf-rtcweb-overview</a>
</dd><dt id="bib-RTCWEB-SECURITY">[RTCWEB-SECURITY]</dt><dd><a href="https://tools.ietf.org/html/draft-ietf-rtcweb-security"><cite>Security Considerations for WebRTC</cite></a>. Eric Rescorla. IETF. 22 January 2014. Active Internet-Draft. URL: <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-security">https://tools.ietf.org/html/draft-ietf-rtcweb-security</a>
</dd><dt id="bib-STUN-PARAMETERS">[STUN-PARAMETERS]</dt><dd><a href="https://www.iana.org/assignments/stun-parameters/stun-parameters.xhtml#stun-parameters-6"><cite>STUN Error Codes</cite></a>. IETF. IANA. April 2011. IANA Parameter Assignment. URL: <a href="https://www.iana.org/assignments/stun-parameters/stun-parameters.xhtml#stun-parameters-6">https://www.iana.org/assignments/stun-parameters/stun-parameters.xhtml#stun-parameters-6</a>
</dd><dt id="bib-WEBSOCKETS-API">[WEBSOCKETS-API]</dt><dd><a href="https://www.w3.org/TR/websockets/"><cite>The WebSocket API</cite></a>. Ian Hickson. W3C. 20 September 2012. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/websockets/">https://www.w3.org/TR/websockets/</a>
</dd><dt id="bib-XMLHttpRequest">[XMLHttpRequest]</dt><dd><a href="https://www.w3.org/TR/XMLHttpRequest/"><cite>XMLHttpRequest Level 1</cite></a>. Anne van Kesteren; Julian Aubourg; Jungkee Song; Hallvord Steen et al. W3C. 6 October 2016. W3C Note. URL: <a href="https://www.w3.org/TR/XMLHttpRequest/">https://www.w3.org/TR/XMLHttpRequest/</a>
</dd></dl></section></section><p role="navigation" id="back-to-top"><a href="#title"><abbr title="Back to Top">↑</abbr></a></p><script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script></body></html>
